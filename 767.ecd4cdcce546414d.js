"use strict";(self.webpackChunkimserp=self.webpackChunkimserp||[]).push([[767],{82661:(X,L,p)=>{p.d(L,{C:()=>k});var S=p(26215),y=p(53181),l=p(66274),P=p(92752);let D=(()=>{class g{constructor(h,_){this.dialogref=h,this.data=_,this.heading="Information",this.heading=_.header,this.message$=_.message}authResult(h){this.dialogref.close(h)}}return g.\u0275fac=function(h){return new(h||g)(l.Y36(y.so),l.Y36(y.WI))},g.\u0275cmp=l.Xpm({type:g,selectors:[["result-dialog"]],decls:11,vars:4,consts:[[1,"modal-dialog","modal-md"],[1,"modal-content"],[1,"modal-header","custom-modal-header"],[1,"modal-title"],["aria-label","Close",1,"close",3,"click"],[1,"modal-body"],[2,"display","inline-block"]],template:function(h,_){1&h&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),l._uU(4),l.qZA(),l.TgZ(5,"div",4),l.NdJ("click",function(){return _.authResult(!0)}),l._uU(6,"\xd7"),l.qZA()(),l.TgZ(7,"div",5),l._UZ(8,"div",6),l._uU(9),l.ALo(10,"async"),l.qZA()()()),2&h&&(l.xp6(4),l.Oqu(_.heading),l.xp6(5),l.hij(" ",l.lcZ(10,2,_.message$)," "))},dependencies:[P.Ov],encapsulation:2}),g})();var I=p(67297),a=p(53074),V=p(14970),O=p(48083),M=p(67311);function G(g,T){1&g&&(l.TgZ(0,"h4",5),l._uU(1,"Your Fiscal Year is Changed. Year End Process will generate new sequence for transaction. Would you like to start Inventry year Ending Process ? "),l.qZA())}function Q(g,T){1&g&&(l.TgZ(0,"h4",5),l._uU(1,"Your Fiscal Year is Changed.Please do year end process from Online portal and sync the transaction.If you want do back date Sales invoice Click Ok to continue.Thank you... "),l.qZA())}function Y(g,T){if(1&g){const h=l.EpF();l.TgZ(0,"button",6),l.NdJ("click",function(){l.CHM(h);const v=l.oxw();return l.KtG(v.YesClick())}),l._uU(1,"Yes"),l.qZA()}}function H(g,T){if(1&g){const h=l.EpF();l.TgZ(0,"button",6),l.NdJ("click",function(){l.CHM(h);const v=l.oxw();return l.KtG(v.NoClick())}),l._uU(1,"No"),l.qZA()}}function e(g,T){if(1&g){const h=l.EpF();l.TgZ(0,"button",6),l.NdJ("click",function(){l.CHM(h);const v=l.oxw();return l.KtG(v.offlinelineOK())}),l._uU(1,"OK"),l.qZA()}}let W=(()=>{class g{constructor(h,_,v,C,x,A){this.dialogref=h,this.authSerice=_,this.masterService=v,this.spinnerService=C,this.router=x,this.alertService=A}YesClick(){1!==this.masterService.userSetting.ENABLEOFFLINESALE&&(this.spinnerService.show("Processing...Please Wait..."),this.masterService.masterGetmethod("/yearEndingInventory").subscribe(h=>{"ok"===h.status?(this.authSerice.setSessionVariable("isIYE",1),this.dialogref.close(),this.alertService.success("The year end for inventory are done successfully..."),setTimeout(()=>{console.log("from logout"),this.router.navigate(["login",{logout:"logout"}]).then(()=>{window.location.reload()})},5e3)):(this.spinnerService.hide(),alert(h.result.error))},h=>{this.spinnerService.hide(),alert(JSON.parse(h._body))}))}NoClick(){this.authSerice.setSessionVariable("isIYE",2),this.dialogref.close()}offlinelineOK(){this.authSerice.setSessionVariable("isIYE",2),this.dialogref.close()}}return g.\u0275fac=function(h){return new(h||g)(l.Y36(y.so),l.Y36(I.e),l.Y36(a.P),l.Y36(V.V),l.Y36(O.F0),l.Y36(M.c))},g.\u0275cmp=l.Xpm({type:g,selectors:[["inventry-yearend-dialog"]],decls:8,vars:5,consts:[[1,"modal-content","modal-content-main-area",2,"width","100%"],[1,"modal-header"],["class","modal-title","id","myModalLabel",4,"ngIf"],[1,"modal-body"],["class","btn btn-info",3,"click",4,"ngIf"],["id","myModalLabel",1,"modal-title"],[1,"btn","btn-info",3,"click"]],template:function(h,_){1&h&&(l.TgZ(0,"div",0)(1,"div",1),l.YNc(2,G,2,0,"h4",2),l.YNc(3,Q,2,0,"h4",2),l.qZA(),l.TgZ(4,"div",3),l.YNc(5,Y,2,0,"button",4),l.YNc(6,H,2,0,"button",4),l.YNc(7,e,2,0,"button",4),l.qZA()()),2&h&&(l.xp6(2),l.Q6J("ngIf",1!=_.masterService.userSetting.ENABLEOFFLINESALE),l.xp6(1),l.Q6J("ngIf",1==_.masterService.userSetting.ENABLEOFFLINESALE),l.xp6(2),l.Q6J("ngIf",1!=_.masterService.userSetting.ENABLEOFFLINESALE),l.xp6(1),l.Q6J("ngIf",1!=_.masterService.userSetting.ENABLEOFFLINESALE),l.xp6(1),l.Q6J("ngIf",1==_.masterService.userSetting.ENABLEOFFLINESALE))},dependencies:[P.O5],styles:[".md-dialog-container[_ngcontent-%COMP%]{height:auto!important;width:auto!important;overflow:hidden!important;box-shadow:0!important}.mat-dialog-container[_ngcontent-%COMP%]{background:transparent!important;box-shadow:none!important;margin-left:auto;margin-right:auto;overflow:hidden!important;height:350px!important}.auth-main[_ngcontent-%COMP%]{position:inherit!important;display:inherit!important}.cdk-overlay-pane[_ngcontent-%COMP%], .md-overlay-pane[_ngcontent-%COMP%]{height:auto!important}.cdk-overlay-pane[_ngcontent-%COMP%], .md-overlay-pane[_ngcontent-%COMP%]{flex:1 1 0}"]}),g})();var F=p(71180);let k=(()=>{class g{constructor(h,_,v,C,x){this.gblstate=h,this._authService=_,this.masterService=v,this.router=C,this.dialog=x,this.viewPermission=[],this.userSetting={},this.enableFiscalYearEnd=!1,this.viewPermission=h.getGlobalSetting("View-Permission")||[],this.userSetting=this.masterService.userSetting}canActivate(h,_){const v=new S.X(""),C=v.asObservable(),x=this._authService.getAuth();let A="";null!=h.url[0]&&(A=h.url[0].path),console.log("path",A);let w=h.params.mode;if(void 0===w&&(w="list"),!x||!x.profile){v.next("Your session has expired. You have been logged out of your account in another tab. Please log in again to continue.");const R=this.dialog.open(D,{hasBackdrop:!0,data:{header:"Information",message:C}});return setTimeout(()=>{R.close()},1e4),!1}if(this.masterService.checkUserValid().subscribe(K=>{if(!1===K){v.next("Your session has expired. You have been logged out of your account in another tab. Please log in again to continue.");const z=this.dialog.open(D,{hasBackdrop:!0,data:{header:"Information",message:C}});return setTimeout(()=>(z.close(),!1),1e4),!1}}),0===this._authService.getSessionVariable("isIYE")&&(this.dialog.closeAll(),this.dialog.open(W,{hasBackdrop:!0,data:{header:"Information",message:""}}),"dashboard"!==A))return!1;if(x&&x.profile&&"dashboard"===A||"SYSTEMUSER"===this._authService?.getUserProfile()?.username.toUpperCase()&&("division"==A||"payment-mode-master"==A||"sales-terminal"==A||"warehouse"==A))return!0;("adduser"==A&&"role"==w||"adduser"==A&&"user"==w)&&(w="add"),"adduser"==A&&"editRole"==w&&(w="edit");const E=this._authService.getMenuRight(A,w);return A?!0===E.right||"list"===w&&!0===E.list:!0===E.list||void 0}}return g.\u0275fac=function(h){return new(h||g)(l.LFG(F.q),l.LFG(I.e),l.LFG(a.P),l.LFG(O.F0),l.LFG(y.uw))},g.\u0275prov=l.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},60767:(X,L,p)=>{p.r(L),p.d(L,{UserManagerModule:()=>vt});var S=p(92752),y=p(89953),l=p(82661);class P{static validate(s){return t=>"add"==s&&(""==t.value||t.value.length<5)?{editPasswordValidate:{valid:!1}}:null}}var D=p(66635),I=p(23815),a=p(7587);const V=[{MID:"Bill",children:[{MID:"Table View"},{MID:"Search Sales Person"},{MID:"Search Item F1"},{MID:"Re-print Bill"},{MID:"Recall Hold BIll"},{MID:"Sales Return"},{MID:"Hold Bill"},{MID:"Item Info"},{MID:"Clear Bill"},{MID:"Convert To Complementary Bill"},{MID:"Convert To VAT Bill"},{MID:"Bill Discount"},{MID:"Bill Preview"}]},{MID:"Customer",children:[{MID:"Search Customer"},{MID:"Add Customer"}]},{MID:"Order",children:[{MID:"Take Order"},{MID:"Search Order"},{MID:"Cancel Order"},{MID:"Non Warranty"},{MID:"Delivery Order"}]},{MID:"System",children:[{MID:"End Session"},{MID:"Day End"},{MID:"Day End Report"},{MID:"Force Close Session"},{MID:"Help"},{MID:"CashDrop Entry"},{MID:"PayOut Entry"},{MID:"Start Session"}]},{MID:"Check Card Balance",children:[]},{MID:"Footfall Entry",children:[]}],O=function(r){let s=r.value||"";return s?s&&s.length<6?{passwordStrength:"Password must be of minimum 6 characters"}:!1===/[A-Z]+/g.test(s)?{passwordStrength:"Password has to contain Upper case characters"}:!1===/[a-z]+/g.test(s)?{passwordStrength:"Password has to contain lower case characters"}:!1===/[0-9]+/g.test(s)?{passwordStrength:"Password has to contain number characters"}:!1===/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(s)?{passwordStrength:"Password has to contain special character"}:null:null};var M=p(92340),G=p(75655);const Q=[{path:"pages",children:[{path:"dashboard",data:{menu:{title:"IMS-ERP",icon:"ion-android-home",selected:!0,expanded:!1,order:0}},children:[{path:"dashboard",data:{menu:{title:"Dashboard",icon:"ion-navicon-round",selected:!0,expanded:!1,order:0}}}]},{path:"account",menuType:[0],data:{menu:{title:"Accounting Entries",icon:"fa fa-usd"}},children:[{path:"AccountLedger",menuType:[0],data:{menu:{title:"Master Entry",icon:"nb-compose"}},children:[{path:"AccountMaster",menuType:[0],data:{menu:{title:"Account Master"}}},{path:"PartyTree",menuType:[0],data:{menu:{title:"Party Master"}}}]},{path:"acvouchers",menuType:[0],data:{menu:{title:"Accounting Vouchers"}},children:[{path:"journal-voucher",menuType:[0],data:{menu:{title:"Journal Voucher"}}},{path:"expense-voucher",menuType:[0],data:{menu:{title:"Expense Voucher"}}},{path:"income-voucher",menuType:[0],data:{menu:{title:"Income Voucher"}}},{path:"debit-note",menuType:[0],data:{menu:{title:"Debit Note -  AC Base"}}},{path:"credit-note",menuType:[0],data:{menu:{title:"Credit Note - AC Base"}}},{path:"capital-voucher",menuType:[0],data:{menu:{title:"Capitalize Purchase Voucher"}}}]},{path:"",menuType:[0],data:{menu:{title:"Opening Entry"}},children:[{path:"account-opening-balance",menuType:[0],data:{menu:{title:"Ledger Opening B/L"}}},{path:"party-opening-balance",menuType:[0],data:{menu:{title:"Party Opening B/L"}}}]}]},{path:"financialreports",menuType:[0],data:{menu:{title:"Accounting Reports",selected:!1,expanded:!1,order:1}},children:[{path:"account-ledger-reports",menuType:[0],data:{menu:{title:"Report",selected:!1,expanded:!1}},children:[{path:"accountledgerreport",menuType:[0],data:{menu:{title:"Account Ledger Report",selected:!1,expanded:!1}}},{path:"partyledgerreport",menuType:[0],data:{menu:{title:"Party Ledger Report",selected:!1,expanded:!1}}},{path:"debtorsreport",menuType:[0],data:{menu:{title:"Debtors Report",selected:!1,expanded:!1}}},{path:"creditorsreport",menuType:[0],data:{menu:{title:"Creditors Report",selected:!1,expanded:!1}}},{path:"voucher-regeister-report",menuType:[0],data:{menu:{title:"Voucher Register  Report",selected:!1,expanded:!1}}}]},{path:"trialbalance",menuType:[0],data:{menu:{title:"Trial Balance",selected:!1,expanded:!1}},children:[{path:"trial-balance-report",menuType:[0],data:{menu:{title:"Trial Balance Report",selected:!1,expanded:!1}}}]}]}]}],Y=[{path:"pages",children:[{path:"dashboard",data:{menu:{title:"IMS-ERP",icon:"ion-android-home",selected:!0,expanded:!1,order:0}},children:[{path:"dashboard",data:{menu:{title:"Dashboard",icon:"ion-navicon-round",selected:!0,expanded:!1,order:0}}}]},{path:"account",menuType:[0],data:{menu:{title:"Financial Account",icon:"fa fa-usd"}},children:[{path:"AccountLedger",menuType:[0],data:{menu:{title:"Master Entry",icon:"nb-compose"}},children:[{path:"AccountMaster",menuType:[0],data:{menu:{title:"Account Master"}}},{path:"PartyTree",menuType:[0],data:{menu:{title:"Party Master"}}},{path:"chalan-master",menuType:[0],data:{menu:{title:"Chalan Master"}}},{path:"cost-center",menuType:[0],data:{menu:{title:"Cost Center Master"}}},{path:"subledger-master",menuType:[0],data:{menu:{title:"Sub Ledger Master"}}},{path:"voucher-series-master",manuType:[0],data:{menu:{title:"Voucher Series Master"}}},{path:"merchant-details",manuType:[0],data:{menu:{title:"Merchant Cellpay Details"}}},{path:"partycategory-master",manuType:[0],data:{menu:{title:"Party Category Master"}}}]},{path:"acvouchers",menuType:[0],data:{menu:{title:"Accounting Vouchers"}},children:[{path:"journal-voucher",menuType:[0],data:{menu:{title:"Journal Voucher"}}},{path:"contra-voucher",menuType:[0],data:{menu:{title:"Contra Voucher"}}},{path:"expense-voucher",menuType:[0],data:{menu:{title:"Payment Voucher"}}},{path:"income-voucher",menuType:[0],data:{menu:{title:"Receipt Voucher"}}},{path:"debit-note",menuType:[0],data:{menu:{title:"Debit Note -  AC Base"}}},{path:"credit-note",menuType:[0],data:{menu:{title:"Credit Note - AC Base"}}},{path:"bill-tracking",data:{menu:{title:"Bill Tracking Amendment"}}},{path:"additional-cost",data:{menu:{title:"Additional Cost"}}},{path:"newadditional-cost",data:{menu:{title:"New Additional Cost"}}},{path:"capital-voucher",menuType:[0],data:{menu:{title:"Capitalize Purchase Voucher"}}},{path:"postdirectory",menuType:[0],data:{menu:{title:"Post-Dated Cheque Voucher"}}},{path:"cellpay-voucher",menuType:[0],data:{menu:{title:"CellPay Voucher"}}}]},{path:"Opening",menuType:[0],data:{menu:{title:"Opening Entry"}},children:[{path:"account-opening-balance",menuType:[0],data:{menu:{title:"Ledger Opening B/L"}}},{path:"party-opening-balance",menuType:[0],data:{menu:{title:"Party Opening B/L"}}}]},{path:"ACPosting",data:{menu:{title:"Account Posting",icon:"nb-compose"}},children:[{path:"LatePostCollection",menuType:[0],data:{menu:{title:"Late Post"}}},{path:"EPaymentStatus",menuType:[0],data:{menu:{title:"EPayment Status"}}}]},{path:"Utilities",menuType:[0],data:{menu:{title:"Utilities"}},children:[{path:"bank-reconciliation",menuType:[0],data:{menu:{title:"Bank Reconciliation"}}},{path:"party-reconciliation",menuType:[0],data:{menu:{title:"Party Reconciliation"}}},{path:"party-balance-confirmation",menuType:[0],data:{menu:{title:"Party balance Confirmation"}}},{path:"PaymentCollection",menuType:[0],data:{menu:{title:"Payment Collection"}}}]},{path:"renum",menuType:[0],data:{menu:{title:"Renumbering"}},children:[{path:"VoucherRenumbering",menuType:[0],data:{menu:{title:"Voucher Renumbering"}}}]}]},{path:"transaction",menuType:[4],data:{menu:{title:"Transactions"}},children:[{path:"purchases",menuType:[0],data:{menu:{title:"Purchases",selected:!1,expanded:!1}},children:[{path:"add-purchase-invoice",menuType:[0],data:{menu:{title:"Purchase Invoice",selected:!1,expanded:!1}}},{path:"add-debitnote-itembase",menuType:[0],data:{menu:{title:"Purchase Return"}}}]},{path:"sales",menuType:[0],data:{menu:{title:"Sales",selected:!1,expanded:!1}},children:[{path:"addsientry",menuType:[0],data:{menu:{title:"Sales Invoice",selected:!1,expanded:!1}}},{path:"add-creditnote-itembase",menuType:[0],data:{menu:{title:"Sales Return"}}}]}]},{path:"financialreports",menuType:[0],data:{menu:{title:"Financial Report",selected:!1,expanded:!1,order:1}},children:[{path:"account-ledger-reports",menuType:[0],data:{menu:{title:"Ledger Report",selected:!1,expanded:!1}},children:[{path:"summaryledgerreport",menuType:[0],data:{menu:{title:"Account Group Ledger",selected:!1,expanded:!1}}},{path:"accountledgerreport",menuType:[0],data:{menu:{title:"Account Ledger Report",selected:!1,expanded:!1}}},{path:"summarypartyledger",menuType:[0],data:{menu:{title:"Party Group Ledger",selected:!1,expanded:!1}}},{path:"partyledgerreport",menuType:[0],data:{menu:{title:"Party Ledger Report",selected:!1,expanded:!1}}},{path:"sub-ledger-report-acbase",menuType:[0],data:{menu:{title:"Sub Ledger - Summary Report",selected:!1,expanded:!1}}},{path:"sub-ledger-report",menuType:[0],data:{menu:{title:"Sub Ledger - Ledger Report",selected:!1,expanded:!1}}}]},{path:"additionalreport",menuType:[0],data:{menu:{title:"   Debtors & Creditors Report",selected:!1,expanded:!1}},children:[{path:"debtorsreport",menuType:[0],data:{menu:{title:"Debtors Report",selected:!1,expanded:!1}}},{path:"creditorsreport",menuType:[0],data:{menu:{title:"Creditors Report",selected:!1,expanded:!1}}},{path:"debtorsagingreport",menuType:[0],data:{menu:{title:"Debtors Ageing Report",selected:!1,expanded:!1}}},{path:"creditorsagingreport",menuType:[0],data:{menu:{title:"Creditors Ageing Report",selected:!1,expanded:!1}}},{path:"debtorsoutstandingreport",menuType:[0],data:{menu:{title:"Debtors Outstanding  Report",selected:!1,expanded:!1}}},{path:"creditorsoutstandingreport",menuType:[0],data:{menu:{title:"Creditors Outstanding  Report",selected:!1,expanded:!1}}},{path:"bill-tracking-report",menuType:[0],data:{menu:{title:"Debtors Bill Tracking Report",selected:!1,expanded:!1}}},{path:"creditorsbill-tracking-report",menuType:[0],data:{menu:{title:"Creditors Bill Tracking Report",selected:!1,expanded:!1}}}]},{path:"registerBookReports",menuType:[0],data:{menu:{title:"   Register & Books Report"}},children:[{path:"voucher-regeister-report",menuType:[0],data:{menu:{title:"Voucher Register  Report",selected:!1,expanded:!1}}},{path:"cash-bank-book-report",menuType:[0],data:{menu:{title:"Cash & Bank Book Report",selected:!1,expanded:!1}}},{path:"day-book-report",menuType:[0],data:{menu:{title:"Day Book Report",selected:!1,expanded:!1}}},{path:"tds-report",menuType:[0],data:{menu:{title:"TDS Report",selected:!1,expanded:!1}}},{path:"postdated-chequevoucher-report",menuType:[0],data:{menu:{title:"Post-Dated Cheque Voucher Report",selected:!1,expanded:!1}}},{path:"monthly-sales-payment-report",menuType:[0],data:{menu:{title:"Monthly Sales Payment Report",selected:!1,expanded:!1}}}]},{path:"trialbalance",menuType:[0],data:{menu:{title:"Trial Balance",selected:!1,expanded:!1}},children:[{path:"trial-balance-report",menuType:[0],data:{menu:{title:"Trial Balance Report",selected:!1,expanded:!1}}},{path:"consolidated-trialbalance-report",menuType:[0],data:{menu:{title:" Consolidated Trial Balance",selected:!1,expanded:!1}}}]},{path:"final-report",menuType:[0],data:{menu:{title:"Final Report"}},children:[{path:"profit-loss-report",menuType:[0],data:{menu:{title:"Profit & Loss",selected:!1,expanded:!1}}},{path:"balance-sheet-report",menuType:[0],data:{menu:{title:"Balance Sheet",selected:!1,expanded:!1}}},{path:"consolidated-profit-loss-report",menuType:[0],data:{menu:{title:"Consolidated Profit & Loss",selected:!1,expanded:!1}}},{path:"consolidated-balance-sheet-report",menuType:[0],data:{menu:{title:"Consolidated Balance Sheet",selected:!1,expanded:!1}}}]},{path:"additionalcostreport",menuType:[0],data:{menu:{title:"  Additional Cost Report"}},children:[{path:"additionalcost-voucherwise-report",menuType:[0],data:{menu:{title:"Additional Cost Voucherwise Report",selected:!1,expanded:!1}}},{path:"additionalcost-itemwise-report",menuType:[0],data:{menu:{title:"Additional Cost Itemwise Report",selected:!1,expanded:!1}}}]},{path:"salesreport",menuType:[0],data:{menu:{title:"Sales Report"}},children:[{path:"salesreturnsummary-report",menuType:[0],data:{menu:{title:"Sales Return Summary Report",selected:!1,expanded:!1}}},{path:"salesreturnsummaryretailer-report",menuType:[0],data:{menu:{title:"Sales Return Summary Retailer Report",selected:!1,expanded:!1}}},{path:"salesreturn-reportdetail",menuType:[0],data:{menu:{title:"Sales Return Report Detail",selected:!1,expanded:!1}}}]},{path:"inventoryreport-dms",menuType:[0],data:{menu:{title:"Inventory Report"}},children:[{path:"stocksummary-reportdms",menuType:[0],data:{menu:{title:"Stock Summary Report"}}},{path:"stockledger-reportdms",menuType:[0],data:{menu:{title:"Stock Ledger Report"}}},{path:"stockvaluation-reportdms",menuType:[0],data:{menu:{title:"Stock Valuation Report"}}},{path:"stockabc-analysis-reportdms",menuType:[0],data:{menu:{title:"Stock ABC Analysis Report"}}},{path:"currentstock-warehousewise-reportdms",menuType:[0],data:{menu:{title:"Stock Report - Warehouse Wise"}}}]}]},{path:"configuration",menuType:[0],data:{menu:{title:"Configuration",icon:"ion-gear-b",selected:!1,expanded:!1,order:2}},children:[{path:"userManager",menuType:[0],data:{menu:{title:"User Manager",icon:"ion-android-people",selected:!1,expanded:!1,order:90}},children:[{path:"userlist",menuType:[0],data:{menu:{title:"User List"}}}]},{path:"manual-sync",menuType:[0],data:{menu:{title:"Manual Sync",selected:!1,expanded:!1}}},{path:"master-migration",menuType:[0],data:{menu:{title:"Master Migration"}}}]}]}];let H=(()=>{class r{static validate(t){const i=t.value||"";return i?-1===i.indexOf("@")?{emailFormat:"Email must contain '@'"}:-1===i.indexOf(".com")?{emailFormat:"Email must contain '.com'"}:r.EMAIL_REGEXP.test(i)?null:{validateEmail:{valid:!1}}:null}}return r.EMAIL_REGEXP=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,r})();var e=p(66274),W=p(14970),F=p(67311),k=p(53074),g=p(79765),T=p(76165),h=p(67297),_=p(71180);let v=(()=>{class r{constructor(t,i,n){this.http=t,this.authService=i,this.gblState=n;let o=this.gblState.getGlobalSetting("apiUrl");o&&o.length>0&&(this.apiUrl=o)}getUserProfile(t){let i={status:"error",result:""},n=new g.xQ;const o={headers:this.authService.getRequestOption(),method:"post"};return this.http.get(this.apiUrl+"/getUser?username="+t,o).subscribe(c=>{n.next(c),n.unsubscribe()},c=>{i.status="error",i.result=c,n.next(i),n.unsubscribe()}),n}getRightList(){const t={headers:this.authService.getRequestOption(),method:"post"};let i={status:"error",result:""},n=new g.xQ;return this.http.get(this.apiUrl+"/getUserrightList",t).subscribe(o=>{n.next(o),n.unsubscribe()},o=>{i.status="error",i.result=o,n.next(i),n.unsubscribe()}),n}getUserList(){const t={headers:this.authService.getRequestOption(),method:"post"};let i={status:"error",result:""},n=new g.xQ;return this.http.get(this.apiUrl+"/getUserList",t).subscribe(o=>{n.next(o),n.unsubscribe()},o=>{i.status="error",i.result=o,n.next(i),n.unsubscribe()}),n}saveUser(t){const i={headers:this.authService.getRequestOption(),method:"post"};return this.http.post(this.apiUrl+"/saveuser",t,i)}saveRole(t){const i={headers:this.authService.getRequestOption(),method:"post"};return this.http.post(this.apiUrl+"/saveRole",t,i)}getRoleList(){const t={headers:this.authService.getRequestOption(),method:"post"};return this.http.get(this.apiUrl+"/getRoleList",t)}getPosRightsList(){console.log("get pos rights");const t={headers:this.authService.getRequestOption(),method:"post"};return this.http.get(this.apiUrl+"/getPosRights",t)}getRole(t){const i={headers:this.authService.getRequestOption(),method:"post"};return this.http.get(`${this.apiUrl}/getRole/?rolename=${t}`,i)}getProductCategoryName(){const t={headers:this.authService.getRequestOption(),method:"post"};return this.http.get(`${this.apiUrl}/getProdcutCategoryLineList`,t)}getUserDivList(t){const i={headers:this.authService.getRequestOption(),method:"post"};return this.http.get(`${this.apiUrl}/getUserDivList?username=`+t,i)}getPosBillingRightsMenu(){return this.http.get(this.apiUrl+"/getPosBillingRightsMenu")}getMenuDependencyList(){return this.http.get(this.apiUrl+"/getMenuDependencyList")}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(T.eN),e.LFG(h.e),e.LFG(_.q))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var C=p(48083),x=p(23804),A=p(71259);const w=["childModal"],E=["loginModal"];function R(r,s){1&r&&(e.TgZ(0,"li",13)(1,"a",83),e._uU(2,"User-right privilege"),e.qZA()())}function K(r,s){1&r&&(e.TgZ(0,"div"),e._uU(1," password is required "),e.qZA())}function z(r,s){if(1&r&&(e.TgZ(0,"div",86),e._uU(1),e.qZA()),2&r){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.userForm.get("password").errors.passwordStrength," ")}}function ee(r,s){if(1&r&&(e.TgZ(0,"div",84),e.YNc(1,K,2,0,"div",7),e.YNc(2,z,2,1,"div",85),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.userForm.get("password").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.userForm.get("password").hasError("passwordStrength"))}}function te(r,s){if(1&r&&(e.TgZ(0,"div",86),e._uU(1),e.qZA()),2&r){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.userForm.get("email").errors.emailFormat," ")}}function ne(r,s){if(1&r&&(e.TgZ(0,"div",84),e.YNc(1,te,2,1,"div",85),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.userForm.get("email").hasError("emailFormat"))}}function ie(r,s){if(1&r&&(e.TgZ(0,"option",87),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.s9C("value",t.rolename),e.xp6(1),e.hij(" ",null==t?null:t.rolename," ")}}function oe(r,s){if(1&r&&(e.TgZ(0,"option",87),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.s9C("value",t.INITIAL),e.xp6(1),e.hij(" ",null==t?null:t.NAME," ")}}function re(r,s){if(1&r&&(e.TgZ(0,"option",87),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.s9C("value",t.NAME),e.xp6(1),e.hij(" ",null==t?null:t.NAME," ")}}function se(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",26)(1,"ng-multiselect-dropdown",89),e.NdJ("onSelect",function(n){e.CHM(t);const o=e.oxw(3);return e.KtG(o.onCCSelect(n))})("onSelectAll",function(n){e.CHM(t);const o=e.oxw(3);return e.KtG(o.onCCSelectAll(n))})("onDeSelect",function(n){e.CHM(t);const o=e.oxw(3);return e.KtG(o.onCCDeSelect(n))})("onDeSelectAll",function(n){e.CHM(t);const o=e.oxw(3);return e.KtG(o.onCCDeSelectAll(n))}),e.qZA()()}if(2&r){const t=e.oxw(3);e.xp6(1),e.Q6J("placeholder","Select Cost Center ")("settings",t.costcenterSettings)("data",t.costcenterlist)}}function ae(r,s){if(1&r&&(e.TgZ(0,"div",23)(1,"label",35),e._uU(2,"Cost-center Mapping:"),e.qZA(),e.YNc(3,se,2,3,"div",88),e.qZA()),2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",t.costcenterlist.length)}}function le(r,s){1&r&&(e.TgZ(0,"label",90),e._uU(1," Is Waiter"),e.qZA())}function ce(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"input",55),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.IsWaiter=n.target.checked?1:0)})("ngModelChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.IsWaiter=n)}),e.qZA()}if(2&r){const t=e.oxw(2);e.Q6J("ngModel",t.IsWaiter)}}function de(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",9)(1,"label",90),e._uU(2," Allow Complimentary Sales"),e.qZA(),e.TgZ(3,"input",55),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.AllowComplimentarySales=n.target.checked?1:0)})("ngModelChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.AllowComplimentarySales=n)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.AllowComplimentarySales)}}function ue(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",9)(1,"label",90),e._uU(2," Allow Estimate Bill Void"),e.qZA(),e.TgZ(3,"input",55),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.AllowEstimateBillVoid=n.target.checked?1:0)})("ngModelChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.AllowEstimateBillVoid=n)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.AllowEstimateBillVoid)}}function he(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",9)(1,"label",90),e._uU(2," Allow Table Cancellation"),e.qZA(),e.TgZ(3,"input",55),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.AUTHORIZE=n.target.checked?1:0)})("ngModelChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.AUTHORIZE=n)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.AUTHORIZE)}}function pe(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",9)(1,"label",90),e._uU(2,"Allow Table Merge"),e.qZA(),e.TgZ(3,"input",55),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.allowTableMerge=n.target.checked?1:0)})("ngModelChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.allowTableMerge=n)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.allowTableMerge)}}function ge(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",9)(1,"label",90),e._uU(2," Allow Table Split"),e.qZA(),e.TgZ(3,"input",55),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.allowTableSplit=n.target.checked?1:0)})("ngModelChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.allowTableSplit=n)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.allowTableSplit)}}function _e(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",9)(1,"label",90),e._uU(2," Allow Table Transfer"),e.qZA(),e.TgZ(3,"input",55),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.allowTableTransfer=n.target.checked?1:0)})("ngModelChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.allowTableTransfer=n)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.allowTableTransfer)}}function me(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",9)(1,"label",90),e._uU(2," Disable Settlement Print"),e.qZA(),e.TgZ(3,"input",55),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.disablePrintCashSettlement=n.target.checked?1:0)})("ngModelChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.disablePrintCashSettlement=n)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.disablePrintCashSettlement)}}function fe(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",9)(1,"label",54),e._uU(2,"Allow Sales Rate Change"),e.qZA(),e.TgZ(3,"input",55),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.AllowRateChangeInSO=n.target.checked?1:0)})("ngModelChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.AllowRateChangeInSO=n)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.AllowRateChangeInSO)}}function ve(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",9)(1,"label",54),e._uU(2," Allow Minus Stock"),e.qZA(),e.TgZ(3,"input",55),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.AllowMinusStock=n.target.checked?1:0)})("ngModelChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.AllowMinusStock=n)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.AllowMinusStock)}}function Ae(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",9)(1,"label",54),e._uU(2,"Allow Credit Sales Transaction"),e.qZA(),e.TgZ(3,"input",55),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.CSALES=n.target.checked?1:0)})("ngModelChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.CSALES=n)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.CSALES)}}function Te(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",59)(1,"label",54),e._uU(2," User Wise Ageing Limit"),e.qZA(),e.TgZ(3,"input",57),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.StockAgeingLimit=n)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.StockAgeingLimit)}}function Ce(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",91)(1,"label",54),e._uU(2,"Allow WholeSale Bill"),e.qZA(),e.TgZ(3,"input",55),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.allowWholesaleBill=n.target.checked?1:0)})("ngModelChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.allowWholesaleBill=n)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.allowWholesaleBill)}}const q=function(){return{standalone:!0}};function xe(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"tbody",69)(1,"tr",69)(2,"td",70)(3,"input",71),e.NdJ("ngModelChange",function(n){const c=e.CHM(t).$implicit;return e.KtG(c.isCheck=n)})("change",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.ChangeDiv())}),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA()()()}if(2&r){const t=s.$implicit;e.xp6(3),e.Q6J("ngModelOptions",e.DdM(3,q))("ngModel",t.isCheck),e.xp6(2),e.Oqu(null==t?null:t.NAME)}}function we(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"tbody",69)(1,"tr",69)(2,"td",70)(3,"input",71),e.NdJ("ngModelChange",function(n){const c=e.CHM(t).$implicit;return e.KtG(c.isCheck_trn=n)})("change",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.ChangeDiv_trn())}),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA()()()}if(2&r){const t=s.$implicit;e.xp6(3),e.Q6J("ngModelOptions",e.DdM(3,q))("ngModel",t.isCheck_trn),e.xp6(2),e.Oqu(null==t?null:t.NAME)}}function be(r,s){1&r&&(e.TgZ(0,"tr",92)(1,"td",79),e._UZ(2,"input",93),e.qZA(),e.TgZ(3,"td",80),e._UZ(4,"input",94),e.TgZ(5,"span"),e._uU(6," Open"),e.qZA()()()),2&r&&e.Q6J("formGroupName",s.index)}function Se(r,s){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"ul",12)(6,"li",13)(7,"a",14),e._uU(8,"User Information"),e.qZA()(),e.TgZ(9,"li",13)(10,"a",15),e._uU(11,"User Rights"),e.qZA()(),e.YNc(12,R,3,0,"li",16),e.TgZ(13,"li",13)(14,"a",17),e._uU(15,"POS Billing Rights"),e.qZA()()(),e.TgZ(16,"div",18)(17,"div",19)(18,"div",20)(19,"div",21)(20,"form",22)(21,"div",23)(22,"label",24),e._uU(23,"User Name:\xa0"),e.TgZ(24,"span",25),e._uU(25,"*"),e.qZA()(),e.TgZ(26,"div",26),e._UZ(27,"input",27),e.qZA()(),e.TgZ(28,"div",23)(29,"label",28),e._uU(30,"Password:\xa0"),e.TgZ(31,"span",25),e._uU(32,"*"),e.qZA()(),e.TgZ(33,"div",26),e._UZ(34,"input",29),e.YNc(35,ee,3,2,"div",30),e.qZA()(),e.TgZ(36,"div",23)(37,"label",31),e._uU(38,"Full Name:\xa0"),e.qZA(),e.TgZ(39,"div",26),e._UZ(40,"input",32),e.qZA()(),e.TgZ(41,"div",23)(42,"label",33),e._uU(43,"Email:\xa0"),e.TgZ(44,"span",25),e._uU(45,"*"),e.qZA()(),e.TgZ(46,"div",26),e._UZ(47,"input",34),e.YNc(48,ne,2,1,"div",30),e.qZA()(),e.TgZ(49,"div",23)(50,"label",35),e._uU(51,"Mobile No:"),e.qZA(),e.TgZ(52,"div",26),e._UZ(53,"input",36),e.qZA()(),e.TgZ(54,"div",23)(55,"label",35),e._uU(56,"Citizenship No:"),e.qZA(),e.TgZ(57,"div",26),e._UZ(58,"input",37),e.qZA()(),e.TgZ(59,"div",23)(60,"label",35),e._uU(61,"Role:\xa0"),e.TgZ(62,"span",25),e._uU(63,"*"),e.qZA()(),e.TgZ(64,"div",26)(65,"select",38),e.NdJ("change",function(){e.CHM(t);const n=e.oxw();let o;return e.KtG(n.onRoleChange(null==(o=n.userForm.get("role"))?null:o.value))}),e.YNc(66,ie,2,2,"option",39),e.qZA()()(),e.TgZ(67,"div",23)(68,"label",35),e._uU(69,"Default Division:\xa0"),e.TgZ(70,"span",25),e._uU(71,"*"),e.qZA()(),e.TgZ(72,"div",26)(73,"select",40),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.onDivisionSelect(n))}),e.YNc(74,oe,2,2,"option",39),e.qZA()()(),e.TgZ(75,"div",23)(76,"label",35),e._uU(77,"Default Warehouse:\xa0"),e.TgZ(78,"span",25),e._uU(79,"*"),e.qZA()(),e.TgZ(80,"div",26)(81,"select",41),e.YNc(82,re,2,2,"option",39),e.qZA()()(),e.YNc(83,ae,4,1,"div",42),e.TgZ(84,"div",23)(85,"label",35),e._uU(86,"Status:"),e.qZA(),e.TgZ(87,"div",26)(88,"select",43)(89,"option",44),e._uU(90,"Active"),e.qZA(),e.TgZ(91,"option",45),e._uU(92,"Inactive"),e.qZA()()()()()(),e.TgZ(93,"div",46)(94,"div",47)(95,"div",9)(96,"div",48)(97,"div",9),e.YNc(98,le,2,0,"label",49),e.YNc(99,ce,1,1,"input",50),e.qZA(),e.YNc(100,de,4,1,"div",51),e.YNc(101,ue,4,1,"div",51),e.YNc(102,he,4,1,"div",51),e.qZA(),e.TgZ(103,"div",1),e.YNc(104,pe,4,1,"div",51),e.YNc(105,ge,4,1,"div",51),e.YNc(106,_e,4,1,"div",51),e.YNc(107,me,4,1,"div",51),e.qZA()()()()()(),e.TgZ(108,"div",52)(109,"div",53)(110,"div",1)(111,"div",9)(112,"label",54),e._uU(113," Allow Zero Rate in PI"),e.qZA(),e.TgZ(114,"input",55),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.allowzeroinPIrate=n.target.checked?1:0)})("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.allowzeroinPIrate=n)}),e.qZA()(),e.TgZ(115,"div",9)(116,"label",54),e._uU(117," Allow Sales below Purchase Rate"),e.qZA(),e.TgZ(118,"input",55),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.AllowSalesBelowCRate=n.target.checked?1:0)})("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.AllowSalesBelowCRate=n)}),e.qZA()(),e.TgZ(119,"div",56)(120,"label",54),e._uU(121," User Discount Limit"),e.qZA(),e.TgZ(122,"input",57),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.userDiscountLimit=n)}),e.qZA()(),e.YNc(123,fe,4,1,"div",51),e.TgZ(124,"div",9)(125,"label",54),e._uU(126," Allow Reverse Entry"),e.qZA(),e.TgZ(127,"input",55),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.AllowReverseEntry=n.target.checked?1:0)})("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.AllowReverseEntry=n)}),e.qZA()(),e.YNc(128,ve,4,1,"div",51),e.TgZ(129,"div",9)(130,"label",54),e._uU(131," Credit Limit Authorization"),e.qZA(),e.TgZ(132,"input",55),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.AuthorizeCreditLimit=n.target.checked?1:0)})("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.AuthorizeCreditLimit=n)}),e.qZA()(),e.YNc(133,Ae,4,1,"div",51),e.TgZ(134,"div",9)(135,"label",54),e._uU(136," Allow Rate Change in Barcode Printing"),e.qZA(),e.TgZ(137,"input",55),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.AllowRateChangeInBarcodePrinting=n.target.checked?1:0)})("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.AllowRateChangeInBarcodePrinting=n)}),e.qZA()(),e.YNc(138,Te,4,1,"div",58),e.TgZ(139,"div",59)(140,"label",54),e._uU(141,"Show Graph Dashboard"),e.qZA(),e.TgZ(142,"input",55),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.ShowDashboard=n.target.checked?1:0)})("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.ShowDashboard=n)}),e.qZA()(),e.TgZ(143,"div",59)(144,"label",54),e._uU(145,"Allow Contract Price below Purchase Rate"),e.qZA(),e.TgZ(146,"input",55),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.AllowContractPriceBelowPRate=n.target.checked?1:0)})("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.AllowContractPriceBelowPRate=n)}),e.qZA()(),e.YNc(147,Ce,4,1,"div",60),e.qZA()()(),e.TgZ(148,"div",61)(149,"form",62)(150,"div",63)(151,"div",64)(152,"table",65)(153,"thead")(154,"tr"),e._UZ(155,"th",66),e.TgZ(156,"th",67),e._uU(157,"Report Division Privilege"),e.qZA()()(),e.TgZ(158,"div",68)(159,"tbody",69)(160,"tr",69)(161,"td",70)(162,"input",71),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.SelectAll=n)})("change",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.ChangeAll())}),e.qZA()(),e.TgZ(163,"td"),e._uU(164,"Select All"),e.qZA()()(),e.YNc(165,xe,6,4,"tbody",72),e.qZA()()(),e.TgZ(166,"div",64)(167,"table",65)(168,"thead")(169,"tr"),e._UZ(170,"th",66),e.TgZ(171,"th",67),e._uU(172,"Transaction Division Privilege"),e.qZA()()(),e.TgZ(173,"div",68)(174,"tbody",69)(175,"tr",69)(176,"td",70)(177,"input",71),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.SelectAll_trn=n)})("change",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.ChangeAll_trn())}),e.qZA()(),e.TgZ(178,"td"),e._uU(179,"Select All"),e.qZA()()(),e.YNc(180,we,6,4,"tbody",72),e.qZA()()()()()(),e.TgZ(181,"div",73)(182,"div",62)(183,"div",74)(184,"table",75)(185,"thead")(186,"tr",76)(187,"th",77),e._uU(188,"Menu"),e.qZA()()(),e.TgZ(189,"tbody")(190,"tr",78)(191,"td",79),e._uU(192," Select All "),e.qZA(),e.TgZ(193,"td",80)(194,"input",81),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.onSelectAllPOSBillRights("OPEN",n.target.checked))}),e.qZA(),e.TgZ(195,"span"),e._uU(196," Open"),e.qZA()()(),e.YNc(197,be,7,1,"tr",82),e.qZA()()()()()()()()()(),e.BQk()}if(2&r){const t=e.oxw();e.xp6(12),e.Q6J("ngIf",1==t.masterService.userSetting.UserwiseDivision),e.xp6(8),e.Q6J("formGroup",t.userForm),e.xp6(15),e.Q6J("ngIf",t.userForm.get("password").invalid&&(t.userForm.get("password").touched||t.userForm.get("password").dirty)),e.xp6(13),e.Q6J("ngIf",t.userForm.get("email").invalid&&(t.userForm.get("email").touched||t.userForm.get("email").dirty)),e.xp6(18),e.Q6J("ngForOf",t.roleList),e.xp6(8),e.Q6J("ngForOf",t.divisionList),e.xp6(8),e.Q6J("ngForOf",t.warehouseListByDivMapped),e.xp6(1),e.Q6J("ngIf",1==t.userSetting.EnableCostCenterWiseAccounting&&0!=t.userSetting.enableCostCenter),e.xp6(15),e.Q6J("ngIf",1==t.userSetting.EnableServiceCharge),e.xp6(1),e.Q6J("ngIf",1==t.userSetting.EnableServiceCharge),e.xp6(1),e.Q6J("ngIf",0===t.userSetting.EnableWebBilling||2===(null==t.userSetting?null:t.userSetting.EnableWebBilling)),e.xp6(1),e.Q6J("ngIf",0===t.userSetting.EnableWebBilling||2===(null==t.userSetting?null:t.userSetting.EnableWebBilling)),e.xp6(1),e.Q6J("ngIf",0===t.userSetting.EnableWebBilling||2===(null==t.userSetting?null:t.userSetting.EnableWebBilling)),e.xp6(2),e.Q6J("ngIf",0===t.userSetting.EnableWebBilling||2===(null==t.userSetting?null:t.userSetting.EnableWebBilling)),e.xp6(1),e.Q6J("ngIf",0===t.userSetting.EnableWebBilling||2===(null==t.userSetting?null:t.userSetting.EnableWebBilling)),e.xp6(1),e.Q6J("ngIf",0===t.userSetting.EnableWebBilling||2===(null==t.userSetting?null:t.userSetting.EnableWebBilling)),e.xp6(1),e.Q6J("ngIf",0===t.userSetting.EnableWebBilling||2===(null==t.userSetting?null:t.userSetting.EnableWebBilling)),e.xp6(7),e.Q6J("ngModel",t.allowzeroinPIrate),e.xp6(4),e.Q6J("ngModel",t.AllowSalesBelowCRate),e.xp6(4),e.Q6J("ngModel",t.userDiscountLimit),e.xp6(1),e.Q6J("ngIf","pro"==t.AppMode),e.xp6(4),e.Q6J("ngModel",t.AllowReverseEntry),e.xp6(1),e.Q6J("ngIf",1==t.masterService.userSetting.ENABLESINGLEBATCHMODE),e.xp6(4),e.Q6J("ngModel",t.AuthorizeCreditLimit),e.xp6(1),e.Q6J("ngIf",t.masterService.userSetting.EnableUserWiseCreditSalesRights),e.xp6(4),e.Q6J("ngModel",t.AllowRateChangeInBarcodePrinting),e.xp6(1),e.Q6J("ngIf",1==t.masterService.userSetting.EnableUserWiseAgeingLimit),e.xp6(4),e.Q6J("ngModel",t.ShowDashboard),e.xp6(4),e.Q6J("ngModel",t.AllowContractPriceBelowPRate),e.xp6(1),e.Q6J("ngIf",1===t.masterService.userSetting.ENABLEWSALESRATEBILLING&&1===t.masterService.userSetting.EnableWSalesRate),e.xp6(2),e.Q6J("formGroup",t.roleForm),e.xp6(13),e.Q6J("ngModelOptions",e.DdM(39,q))("ngModel",t.SelectAll),e.xp6(3),e.Q6J("ngForOf",t.userdivisionList),e.xp6(12),e.Q6J("ngModelOptions",e.DdM(40,q))("ngModel",t.SelectAll_trn),e.xp6(3),e.Q6J("ngForOf",t.userdivisionList),e.xp6(2),e.Q6J("formGroup",t.userForm),e.xp6(15),e.Q6J("ngForOf",t.userForm.controls.PosBillingRights.controls)}}function Me(r,s){1&r&&(e.TgZ(0,"div"),e._UZ(1,"input",110),e.TgZ(2,"span"),e._uU(3," Add"),e.qZA()())}function Ze(r,s){1&r&&(e.TgZ(0,"div"),e._UZ(1,"input",111),e.TgZ(2,"span"),e._uU(3," Edit"),e.qZA()())}function ye(r,s){1&r&&(e.TgZ(0,"div"),e._UZ(1,"input",112),e.TgZ(2,"span"),e._uU(3," Delete"),e.qZA()())}function Ie(r,s){1&r&&(e.TgZ(0,"div"),e._UZ(1,"input",113),e.TgZ(2,"span"),e._uU(3," Print"),e.qZA()())}function Ue(r,s){if(1&r&&(e.ynx(0),e.TgZ(1,"td",80)(2,"div"),e._UZ(3,"input",109),e.TgZ(4,"span"),e._uU(5," View"),e.qZA()()(),e.TgZ(6,"td",80),e.YNc(7,Me,4,0,"div",7),e.qZA(),e.TgZ(8,"td",80),e.YNc(9,Ze,4,0,"div",7),e.qZA(),e.TgZ(10,"td",80),e.YNc(11,ye,4,0,"div",7),e.qZA(),e.TgZ(12,"td",80),e.YNc(13,Ie,4,0,"div",7),e.qZA(),e.BQk()),2&r){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(7),e.Q6J("ngIf",i.manageCrudRights(t.value.path)),e.xp6(2),e.Q6J("ngIf",i.manageCrudRights(t.value.path)),e.xp6(2),e.Q6J("ngIf",i.manageCrudRights(t.value.path)),e.xp6(2),e.Q6J("ngIf",i.manageCrudRights(t.value.path))}}function Ee(r,s){if(1&r&&(e.TgZ(0,"tr",92)(1,"td",104),e._UZ(2,"input",93),e.qZA(),e.YNc(3,Ue,14,4,"ng-container",7),e.qZA()),2&r){const t=s.index,i=e.oxw(2);e.Q6J("formGroupName",t),e.xp6(3),e.Q6J("ngIf",""!=i.path)}}function Re(r,s){if(1&r&&(e.TgZ(0,"div")(1,"Label",118),e._uU(2),e.qZA(),e._UZ(3,"input",119),e.qZA()),2&r){const t=e.oxw(2).$implicit;e.xp6(2),e.Oqu(t.value.description)}}function Ne(r,s){1&r&&e._UZ(0,"input",121)}function Le(r,s){1&r&&(e.TgZ(0,"span"),e._UZ(1,"input",122),e.qZA())}function Pe(r,s){if(1&r&&(e.TgZ(0,"div")(1,"Label",118),e._uU(2),e.qZA(),e.YNc(3,Ne,1,0,"input",120),e.YNc(4,Le,2,0,"span",7),e.qZA()),2&r){const t=e.oxw(2).$implicit;e.xp6(2),e.Oqu(t.value.description),e.xp6(1),e.Q6J("ngIf","WAREHOUSE"!=t.value.right),e.xp6(1),e.Q6J("ngIf","WAREHOUSE"!=t.value.right)}}function De(r,s){if(1&r&&(e.TgZ(0,"option",87),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.s9C("value",t.INITIAL),e.xp6(1),e.hij("",t.NAME," ")}}function Oe(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"Label",118),e._uU(2),e.qZA(),e._UZ(3,"input",121),e.TgZ(4,"span")(5,"select",123),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw(5);return e.KtG(o.changeDivision(n.target.value))}),e.YNc(6,De,2,2,"option",39),e.ALo(7,"async"),e.qZA()()()}if(2&r){const t=e.oxw(2).$implicit,i=e.oxw(3);e.xp6(2),e.Oqu(t.value.description),e.xp6(4),e.Q6J("ngForOf",e.lcZ(7,2,i.masterService.allDivisionList$))}}function Fe(r,s){if(1&r&&(e.TgZ(0,"option",127),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.Q6J("ngValue",t.NAME),e.xp6(1),e.hij(" ",t.NAME," ")}}function ke(r,s){if(1&r&&(e.TgZ(0,"div")(1,"Label",118),e._uU(2),e.qZA(),e._UZ(3,"input",124),e.TgZ(4,"span")(5,"select",125),e.YNc(6,Fe,2,2,"option",126),e.qZA()()()),2&r){const t=e.oxw(2).$implicit,i=e.oxw(3);e.xp6(2),e.Oqu(t.value.description),e.xp6(4),e.Q6J("ngForOf",i.divisionWarehouseList)}}function qe(r,s){if(1&r&&(e.TgZ(0,"div")(1,"Label",118),e._uU(2),e.qZA(),e.TgZ(3,"span"),e._UZ(4,"input",128),e.qZA()()),2&r){const t=e.oxw(2).$implicit;e.xp6(2),e.Oqu(t.value.description)}}function Be(r,s){if(1&r&&(e.ynx(0),e.TgZ(1,"div",117),e.YNc(2,Re,4,1,"div",7),e.YNc(3,Pe,5,3,"div",7),e.YNc(4,Oe,8,4,"div",7),e.YNc(5,ke,7,2,"div",7),e.YNc(6,qe,5,1,"div",7),e.qZA(),e.BQk()),2&r){const t=e.oxw(),i=t.index,n=t.$implicit;e.xp6(1),e.Q6J("formGroupName",i),e.xp6(1),e.Q6J("ngIf","tinyint"==n.value.valueType),e.xp6(1),e.Q6J("ngIf",("varchar"==n.value.valueType||"char"==n.value.valueType)&&"DIVISION"!=n.value.right),e.xp6(1),e.Q6J("ngIf",("varchar"==n.value.valueType||"char"==n.value.valueType)&&"DIVISION"==n.value.right),e.xp6(1),e.Q6J("ngIf",("varchar"==n.value.valueType||"char"==n.value.valueType)&&"WAREHOUSE"==n.value.right),e.xp6(1),e.Q6J("ngIf","numeric"==n.value.valueType||"decimal"==n.value.valueType||"float"==n.value.valueType)}}function Je(r,s){if(1&r&&(e.TgZ(0,"div",26),e.YNc(1,Be,7,6,"ng-container",7),e.qZA()),2&r){const t=s.$implicit;e.xp6(1),e.Q6J("ngIf","DIVISION"!=t.value.right&&"WAREHOUSE"!=t.value.right)}}function Ve(r,s){if(1&r&&(e.TgZ(0,"div",114)(1,"div",115),e.YNc(2,Je,2,1,"div",116),e.qZA()()),2&r){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.roleForm.controls.userRights.controls)}}function Ge(r,s){1&r&&(e.ynx(0),e.TgZ(1,"td",80),e._UZ(2,"input",109),e.TgZ(3,"span"),e._uU(4," View"),e.qZA()(),e.TgZ(5,"td",80),e._UZ(6,"input",110),e.TgZ(7,"span"),e._uU(8," Add"),e.qZA()(),e.TgZ(9,"td",80),e._UZ(10,"input",111),e.TgZ(11,"span"),e._uU(12," Edit"),e.qZA()(),e.TgZ(13,"td",80),e._UZ(14,"input",112),e.TgZ(15,"span"),e._uU(16," Delete"),e.qZA()(),e.TgZ(17,"td",80),e._UZ(18,"input",113),e.TgZ(19,"span"),e._uU(20," Print"),e.qZA()(),e.BQk())}function Qe(r,s){if(1&r&&(e.TgZ(0,"tr",92)(1,"td",104),e._UZ(2,"input",93),e.qZA(),e.YNc(3,Ge,21,0,"ng-container",7),e.qZA()),2&r){const t=s.index,i=e.oxw(2);e.Q6J("formGroupName",t),e.xp6(3),e.Q6J("ngIf",""!=i.path)}}function Ye(r,s){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"form",62)(2,"div",23)(3,"label",95),e._uU(4,"Role Name"),e.qZA(),e.TgZ(5,"div",96),e._UZ(6,"input",97),e.qZA()(),e.TgZ(7,"div",8)(8,"div",9)(9,"div",10)(10,"div",98)(11,"ul",12)(12,"li",13)(13,"a",99),e._uU(14,"Menu Rights"),e.qZA()(),e.TgZ(15,"li",13)(16,"a",100),e._uU(17,"Role Rights"),e.qZA()(),e.TgZ(18,"li",13)(19,"a",101),e._uU(20,"Account Menu Rights"),e.qZA()()(),e.TgZ(21,"div",18)(22,"div",102)(23,"div",103)(24,"table",75)(25,"thead")(26,"tr",76)(27,"th",77),e._uU(28,"Menu Rights"),e.qZA()()(),e.TgZ(29,"tbody")(30,"tr",78)(31,"td",104),e._uU(32," Select All "),e.qZA(),e.TgZ(33,"td",80)(34,"input",81),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.onSelectAll("view",n.target.checked))}),e.qZA(),e.TgZ(35,"span"),e._uU(36," View"),e.qZA()(),e.TgZ(37,"td",80)(38,"input",81),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.onSelectAll("add",n.target.checked))}),e.qZA(),e.TgZ(39,"span"),e._uU(40," Add"),e.qZA()(),e.TgZ(41,"td",80)(42,"input",81),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.onSelectAll("edit",n.target.checked))}),e.qZA(),e.TgZ(43,"span"),e._uU(44," Edit"),e.qZA()(),e.TgZ(45,"td",80)(46,"input",81),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.onSelectAll("delete",n.target.checked))}),e.qZA(),e.TgZ(47,"span"),e._uU(48," Delete"),e.qZA()(),e.TgZ(49,"td",80)(50,"input",81),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.onSelectAll("print",n.target.checked))}),e.qZA(),e.TgZ(51,"span"),e._uU(52," Print"),e.qZA()()(),e.YNc(53,Ee,4,2,"tr",82),e.qZA()()()(),e.TgZ(54,"div",105),e.YNc(55,Ve,3,1,"div",106),e.qZA(),e.TgZ(56,"div",107)(57,"div",108)(58,"table",75)(59,"thead")(60,"tr",76)(61,"th",77),e._uU(62,"Account Menu Rights"),e.qZA()()(),e.TgZ(63,"tbody")(64,"tr",78)(65,"td",104),e._uU(66," Select All "),e.qZA(),e.TgZ(67,"td",80)(68,"input",81),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.onAccntSelectAll("view",n.target.checked))}),e.qZA(),e.TgZ(69,"span"),e._uU(70," View"),e.qZA()(),e.TgZ(71,"td",80)(72,"input",81),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.onAccntSelectAll("add",n.target.checked))}),e.qZA(),e.TgZ(73,"span"),e._uU(74," Add"),e.qZA()(),e.TgZ(75,"td",80)(76,"input",81),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.onAccntSelectAll("edit",n.target.checked))}),e.qZA(),e.TgZ(77,"span"),e._uU(78," Edit"),e.qZA()(),e.TgZ(79,"td",80)(80,"input",81),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.onAccntSelectAll("delete",n.target.checked))}),e.qZA(),e.TgZ(81,"span"),e._uU(82," Delete"),e.qZA()(),e.TgZ(83,"td",80)(84,"input",81),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.onAccntSelectAll("print",n.target.checked))}),e.qZA(),e.TgZ(85,"span"),e._uU(86," Print"),e.qZA()()(),e.YNc(87,Qe,4,2,"tr",82),e.qZA()()()()()()()()()(),e.BQk()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.roleForm),e.xp6(52),e.Q6J("ngForOf",t.roleForm.controls.menuRights.controls),e.xp6(2),e.Q6J("ngIf",t.roleForm.controls.userRights.controls.length),e.xp6(32),e.Q6J("ngForOf",t.roleForm.controls.AccountMenuRights.controls)}}let He=(()=>{class r{constructor(t,i,n,o,c,d,m,B,U){this.loadingService=t,this.alertService=i,this.masterService=n,this.fb=o,this.addUserService=c,this.router=d,this.activatedRoute=m,this.title=B,this.authservice=U,this.showAllDivision=!1,this.DialogMessage="Saving data please wait ...",this.mode="add",this.modeTitile="ADD USER",this.userMenuList=[],this.items=[],this.POSrightsList=[],this.AccountRights=[],this.userRightList=[],this.userType="group",this.warehouseList=[],this.divisionWarehouseList=[],this.divisionList=[],this.productCategoryList=[],this.dropdownList=[],this.selectedItems=[],this.posList=[],this.selectedDivMapping=[],this.allowzeroinPIrate=0,this.AllowSalesBelowCRate=0,this.AllowContractPriceBelowPRate=0,this.allowWholesaleBill=0,this.discountLimitInSO=0,this.userdivisionList=[],this.AllowRateChangeInSO=0,this.AllowRateChangeInBarcodePrinting=0,this.AllowReverseEntry=0,this.AllowQuantityApproval=0,this.AllowMinusStock=0,this.AuthorizeCreditLimit=0,this.AllowComplimentarySales=0,this.AllowEstimateBillVoid=0,this.allowTableMerge=0,this.allowTableSplit=0,this.allowTableTransfer=0,this.AUTHORIZE=0,this.disablePrintCashSettlement=0,this.CSALES=0,this.StockAgeingLimit=0,this.DirectToAccounting=0,this.ShowDashboard=0,this.userDiscountLimit=0,this.warehouseListByDivMapped=[],this.posBillingRightsMenu=[],this.costcenterlist=[],this.selectedCCMapping=[],this.IsWaiter=0,this.checkboxPropertiesMapping={model:"value",value:"right",label:"description",baCheckboxClass:"class"},this.AppMode=M.N.appMode,this.ProdMasterDisplayMode=M.N.productMasterMenuMode;try{this.userSetting=this.authservice.getSetting(),this.returnUrl=this.activatedRoute.snapshot.params.returnUrl||"",this.mode=this.activatedRoute.snapshot.params.mode,this.userType=this.activatedRoute.snapshot.params.group||"",this.user=this.activatedRoute.snapshot.params.user,this.masterService.refreshTransactionList(),this.masterService.getWarehouseList().subscribe(f=>{this.warehouseList=f,"lite"==this.AppMode&&(this.warehouseListByDivMapped=this.warehouseList,this.userForm.controls.warehouse.patchValue(this.masterService.userProfile.userWarehouse))}),this.masterService.getAllDivisions(this.showAllDivision=!0).subscribe(f=>{this.divisionList=f,this.dropdownList=f,console.log("dropdownlist",this.dropdownList),this.userdivisionList=f,"lite"==this.AppMode&&this.userForm.controls.division.patchValue(this.masterService.userProfile.userDivision)}),this.addUserService.getRoleList().subscribe(f=>{this.roleList=f.result}),this.addUserService.getPosRightsList().subscribe(f=>{this.posList=f.result}),this.addUserService.getMenuDependencyList().subscribe(f=>{console.log("ressss",f.result),f&&(this.menuDepenedencyList=f.result)}),this.masterService.getMainCostCenterList().subscribe(f=>{this.costcenterlist=f})}catch(f){alert(f)}this.title.setTitle("User Manager | IMS POS")}ngOnInit(){try{this.dropdownSettings={singleSelection:!1,idField:"INITIAL",textField:"NAME",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:4,allowSearchFilter:!1,maxHeight:100},this.costcenterSettings={singleSelection:!1,idField:"CCID",textField:"COSTCENTERNAME",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:5,allowSearchFilter:!1,maxHeight:100},this.userForm=this.fb.group({username:["",[a.kI.required]],password:["",[a.kI.compose([P.validate(this.mode)]),O]],fullname:[""],email:["",[a.kI.required,H]],mobile:[""],citizenship:[""],division:["",[a.kI.required]],warehouse:["",[a.kI.required]],role:[""],ISACTIVE:[1],PCL:["pc001"],LoginProfile:["user_login"],PosBillingRights:this.fb.array([]),costcenterMapping:[""],divisionMapping:[""]}),this.getProductCategoryName(),this.roleForm=this.fb.group({role:new a.NI("A",[a.kI.required]),roleName:new a.NI("",[a.kI.required]),menuRights:this.fb.array([]),userRights:this.fb.array([]),PosBillingRights:this.fb.array([]),AccountMenuRights:this.fb.array([])}),console.log("ROLEFORM",this.roleForm),"edit"===this.mode?(this.modeTitile="EDITING USER",this.addUserService.getUserProfile(this.user).subscribe(t=>{if("ok"===t.status){this.userForm.controls.username.patchValue(t.result.username),this.userForm.controls.email.patchValue(t.result.email),this.userForm.controls.fullname.patchValue(t.result.fullname),this.userForm.controls.mobile.patchValue(t.result.mobile),this.userForm.controls.citizenship.patchValue(t.result.citizenship),this.userForm.controls.role.patchValue(t.result.role),this.userForm.controls.division.patchValue(t.result.division),this.userForm.controls.warehouse.patchValue(t.result.warehouse),this.userForm.controls.ISACTIVE.patchValue(t.result.ISACTIVE),this.userForm.controls.PCL.patchValue(t.result.PCL),this.userForm.controls.LoginProfile.patchValue(t.result.LoginProfile),this.getUserDivList(t.result.UserDivList),this.onDivisionSelect(this.userForm.controls.division.value,!1),this.userForm.controls.division.valueChanges.subscribe(o=>{this.resetWarehouse(),this.onDivisionSelect(o,!0)}),this.selectedCCMapping=t.result.costcenterMapping,this.userForm.patchValue({costcenterMapping:this.selectedCCMapping}),this.allowzeroinPIrate=t.result.ALLOWZERORATEINPI,this.AllowSalesBelowCRate=t.result.AllowSalesBelowCRate,this.AllowContractPriceBelowPRate=t.result.AllowContractPriceBelowPRate,this.allowWholesaleBill=t.result.AllowWholesaleBill,this.discountLimitInSO=t.result.SODiscountLimit,this.StockAgeingLimit=t.result.StockAgeingLimit,this.AllowRateChangeInSO=t.result.AllowRateChangeInSO,this.AllowRateChangeInBarcodePrinting=t.result.AllowRateChangeInBarcodePrinting,this.AllowReverseEntry=t.result.AllowReverseEntry,this.AllowQuantityApproval=t.result.AllowQuantityApproval,this.AllowMinusStock=t.result.AllowMinusStock,this.AuthorizeCreditLimit=t.result.AuthorizeCreditLimit,this.CSALES=t.result.CSALES,this.DirectToAccounting=t.result.DirectToAccounting,this.ShowDashboard=t.result.ShowDashboard,this.IsWaiter=t.result.IsWaiter,this.AllowComplimentarySales=t.result.AllowComplimentarySales,this.AllowEstimateBillVoid=t.result.AllowEstimateBillVoid,this.allowTableMerge=t.result.allowTableMerge,this.allowTableSplit=t.result.allowTableSplit,this.allowTableTransfer=t.result.allowTableTransfer,this.AUTHORIZE=t.result.AUTHORIZE,this.disablePrintCashSettlement=t.result.disablePrintCashSettlement;const n=this.masterService.nullToZeroConverter(t?.result?.disLimit);0===n?this.onRoleChange(t.result.role):this.userDiscountLimit=n}}),this.posBillMenuLoad()):"user"===this.mode?(this.modeTitile="Add User",this.posBillMenuLoad()):"role"!==this.mode&&"editRole"!==this.mode||(I.cloneDeep("pro"==M.N.appMode?D.C:G.h).forEach(d=>{d.children.forEach(m=>{this._convertObjectToItem(m,this.items,1)})}),I.cloneDeep(V).forEach(d=>{this.convertPosRightsToItem(d,this.POSrightsList,1)}),I.cloneDeep("pro"==M.N.appMode?Y:Q).forEach(d=>{this.convertAccountRightstoItem(d,this.AccountRights,1)}),console.log("Account rights list",this.AccountRights),"role"===this.mode?(this.modeTitile="ADD ROLE",this.addUserService.getMenuDependencyList().subscribe(d=>{d&&(this.menuDepenedencyList=d.result,this.initUserMenu())}),this.initPOSRights(),this.initAccountRights(),this.masterService.getRoleUserRights().subscribe(d=>{if("ok"==d.status){console.log("HERE",d.result.result);for(let m of d.result.result)this.userRightList.push({data_type:m.data_type,value:m.value,right:m.right,description:m.description});this.initUserRights()}},d=>{})):"editRole"===this.mode&&(this.modeTitile="EDIT ROLE",this.getRoleDetail(this.activatedRoute.snapshot.params.rolename),this.roleForm.controls.roleName.disable()))}catch(t){alert(t)}"lite"==this.AppMode&&(this.userForm.controls.division.disable(),this.userForm.controls.warehouse.disable()),"edit"==this.mode&&this.userForm.controls.username.disable()}onRoleChange(t){this.addUserService.getRole(t).subscribe(i=>{const n=this.masterService.nullToZeroConverter(i?.result?.userRights[1]?.value);this.userDiscountLimit=n})}initUserMenu(){try{const t=this.roleForm.controls.menuRights;this.items.forEach(i=>{let n=this.fb.group({title:new a.NI({value:i.title,disabled:!0}),path:new a.NI(i.path),view:new a.NI(!1),add:new a.NI(!1),edit:new a.NI(!1),delete:new a.NI(!1),print:new a.NI(!1),import:new a.NI(!1),export:new a.NI(!1),post:new a.NI(!1)});this.checkMenuWiseSettingList(i.path)&&t.push(n)})}catch(t){alert(t)}}initPOSRights(){const t=this.userForm.controls.PosBillingRights;this.POSrightsList.forEach(i=>{let n=this.fb.group({UNAME:new a.NI(i.UNAME),MID:new a.NI(i.MID),title:new a.NI({value:i.title,disabled:!0}),OPEN:new a.NI(!1),NEW:new a.NI(!1),EDIT:new a.NI(!1),DELETE:new a.NI(!1),PRINT:new a.NI(!1),EXPORT:new a.NI(!1)});t.push(n)})}catch(t){alert(t)}initPOSRightsforEdit(t){try{const i=this.userForm.controls.PosBillingRights;let n;this.POSrightsList.forEach(o=>{n=this.fb.group({title:new a.NI({value:o.title,disabled:!0}),MID:new a.NI(o.MID),UNAME:new a.NI(o.UNAME),OPEN:new a.NI(this.findPOSMenuRights(o.MID,t,"OPEN")),NEW:new a.NI(!1),EDIT:new a.NI(!1),DELETE:new a.NI(!1),PRINT:new a.NI(!1),EXPORT:new a.NI(!1)}),i.push(n)})}catch(i){alert(i)}}initAccountRights(){try{const t=this.roleForm.controls.AccountMenuRights;this.AccountRights.forEach(i=>{let n=this.fb.group({title:new a.NI({value:i.title,disabled:!0}),path:new a.NI(i.path),view:new a.NI(!1),add:new a.NI(!1),edit:new a.NI(!1),delete:new a.NI(!1),print:new a.NI(!1),import:new a.NI(!1),export:new a.NI(!1),post:new a.NI(!1)});t.push(n)}),console.log("account menu HHHH",t)}catch(t){alert(t)}}onItemSelect(t){console.log(t),this.getDivWiseWarehouseList(this.userForm.controls.divisionMapping.value)}onSelectAllPOSBillRights(t,i){const n=this.userForm.controls.PosBillingRights;try{switch(t){case"OPEN":n.controls.forEach(i?o=>{o.controls.OPEN.patchValue(!0)}:o=>{o.controls.OPEN.patchValue(!1)});break;case"NEW":n.controls.forEach(i?o=>{o.controls.NEW.patchValue(!0)}:o=>{o.controls.NEW.patchValue(!1)});break;case"EDIT":n.controls.forEach(i?o=>{o.controls.EDIT.patchValue(!0)}:o=>{o.controls.EDIT.patchValue(!1)});break;case"DELETE":n.controls.forEach(i?o=>{o.controls.DELETE.patchValue(!0)}:o=>{o.controls.DELETE.patchValue(!1)});break;case"PRINT":n.controls.forEach(i?o=>{o.controls.PRINT.patchValue(!0)}:o=>{o.controls.PRINT.patchValue(!1)});break;case"EXPORT":n.controls.forEach(i?o=>{o.controls.EXPORT.patchValue(!0)}:o=>{o.controls.EXPORT.patchValue(!1)})}}catch(o){console.log(o)}}onSelectAll(t,i){const n=this.roleForm.controls.menuRights;try{switch(t){case"view":n.controls.forEach(i?o=>{o.controls.view.patchValue(!0)}:o=>{o.controls.view.patchValue(!1)});break;case"add":n.controls.forEach(i?o=>{const d=this.manageCrudRights(o.value.path);o.controls.add.patchValue(!!d)}:o=>{o.controls.add.patchValue(!1)});break;case"delete":n.controls.forEach(i?o=>{const d=this.manageCrudRights(o.value.path);o.controls.delete.patchValue(!!d)}:o=>{o.controls.delete.patchValue(!1)});break;case"print":n.controls.forEach(i?o=>{const d=this.manageCrudRights(o.value.path);o.controls.print.patchValue(!!d)}:o=>{o.controls.print.patchValue(!1)});break;case"edit":n.controls.forEach(i?o=>{const d=this.manageCrudRights(o.value.path);o.controls.edit.patchValue(!!d)}:o=>{o.controls.edit.patchValue(!1)})}this.getDivWiseWarehouseList(t)}catch(o){console.log(o)}}onAccntSelectAll(t,i){const n=this.roleForm.controls.AccountMenuRights;try{switch(t){case"view":n.controls.forEach(i?o=>{o.controls.view.patchValue(!0)}:o=>{o.controls.view.patchValue(!1)});break;case"add":n.controls.forEach(i?o=>{o.controls.add.patchValue(!0)}:o=>{o.controls.add.patchValue(!1)});break;case"delete":n.controls.forEach(i?o=>{o.controls.delete.patchValue(!0)}:o=>{o.controls.delete.patchValue(!1)});break;case"print":n.controls.forEach(i?o=>{o.controls.print.patchValue(!0)}:o=>{o.controls.print.patchValue(!1)});break;case"edit":n.controls.forEach(i?o=>{o.controls.edit.patchValue(!0)}:o=>{o.controls.edit.patchValue(!1)})}this.getDivWiseWarehouseList(t)}catch(o){console.log(o)}}initUserRights(){try{const t=this.roleForm.controls.userRights;let i;console.log("abc",this.userRightList),this.userRightList&&this.userRightList?.length>0&&this.userRightList.map(n=>(n.valueType=n.data_type,"tinyint"===n.valueType?(console.log("tinyint right tp",n),n.value=1==n.value):"numeric"===n.valueType||"decimal"===n.valueType||"float"===n.valueType?""===n.value&&(n.value=0):(null==n.value||""===n.value)&&(n.value=""),n)).forEach(n=>{i=this.fb.group({path:new a.NI({value:n.description,disabled:!0}),right:n.right,value:n.value,valueType:[n.data_type],description:n.description?n.description:n.right}),this.userSetting.RATECHANGE_IN_POBASEPI&&0==this.userSetting.RATECHANGE_IN_POBASEPI&&"ALLOWRATECHANGEINPI"==i.value.right||t.push(i)})}catch(t){console.log("showalter"),alert(t)}}_convertObjectToItem(t,i,n,o){try{let c={};t.data&&t.data.menu&&(n+=2,c.path=t.path,c.title=Array(n).join("  ")+t.data.menu.title,c.add=!1,c.delete=!1,c.edit=!1,c.print=!1,c.export=!1,c.import=!1,c.view=!0,c.post=!1,i.push(c)),t.data&&t.children&&t.children.length>0&&t.children.forEach(d=>{this._convertObjectToItem(d,i,n+1)})}catch(c){alert(c)}}convertPosRightsToItem(t,i,n){try{let o={};t.MID&&(n+=2,o.UNAME=this.userForm.value.username,o.title=Array(n).join("  ")+t.MID,o.MID=t.MID,o.OPEN=0,o.EDIT=0,o.DELETE=0,o.PRINT=0,o.EXPORT=0,i.push(o)),t.children&&t.children.length>0&&t.children.forEach(c=>{this.convertPosRightsToItem(c,i,n+1)})}catch(o){alert(o)}}convertAccountRightstoItem(t,i,n,o){try{let c={};t.data&&t.data.menu&&(n+=2,c.path=t.path,c.title=Array(n).join("  ")+t.data.menu.title,c.add=!1,c.delete=!1,c.edit=!1,c.print=!1,c.export=!1,c.import=!1,c.view=!0,c.post=!1,i.push(c)),t.children&&t.children.length>0&&t.children.forEach(d=>{this.convertAccountRightstoItem(d,i,n+1)})}catch(c){alert(c)}}saveData(t){console.log("before saving data",t);try{"user"===this.mode||"edit"===this.mode?(this.loadingService.show("Saving User please wait...."),this.addUserService.saveUser(t).subscribe(i=>{if("ok"===i.status)this.loadingService.hide(),"user"===this.mode?this.alertService.success("User created successfully"):"edit"===this.mode&&this.alertService.success("User updated successfully"),this.router.navigate([this.returnUrl]);else{if(this.loadingService.hide(),"The ConnectionString property has not been initialized."===i.result._body)return void this.loginModal.show();this.alertService.error("Error in saving data:",i.result._body)}},i=>{this.loadingService.hide();try{200!==i.status&&this.alertService.error(i.error)}catch(n){this.alertService.error(n)}})):("role"===this.mode||"editRole"===this.mode)&&(this.loadingService.show("Saving data please wait...."),this.addUserService.saveRole(t).subscribe(i=>{this.loadingService.hide(),this.alertService.success(i.result),this.router.navigate([this.returnUrl])},i=>{this.loadingService.hide()}))}catch(i){alert(i),this.DialogMessage=i,setTimeout(()=>{this.childModal.hide()},3e3)}}onSubmit(){let t=!1;if("user"===this.mode){if(this.userForm.valid&&(t=!0),""==this.userForm.controls.role.value||null==this.userForm.controls.role.value)return void this.alertService.warning("Please select role to save new user...");if(""==this.userForm.controls.division.value||null==this.userForm.controls.division.value)return void this.alertService.warning("Please select default division to save new user...");if(""==this.userForm.controls.warehouse.value||null==this.userForm.controls.warehouse.value)return void this.alertService.warning("Please select default warehouse to save new user...")}else if("role"===this.mode||"editRole"===this.mode)this.roleForm.valid&&(t=!0);else if("edit"===this.mode){if(""==this.userForm.controls.warehouse.value||null==this.userForm.controls.warehouse.value)return void this.alertService.warning("Please select default warehouse before saving...");this.userForm.valid&&(t=!0)}if(t)try{let i=this.prepareToSave();if(console.log("role submit",i),""==i.data)return void this.alertService.warning("Please select required menus from Menu Rights tab before saving the role!!!");""!=i.data&&this.saveData(i)}catch(i){this.alertService.warning(i)}else this.alertService.warning("Please Fill all the required fields")}findMenuRights(t,i,n){try{if(i&&i.length){let o=i.filter(c=>c.menu===t)[0];if(null!=o)return o.right.indexOf(n)>-1}return!1}catch(o){alert(o)}}findPOSMenuRights(t,i,n){if(i&&i.length){let o=i.filter(c=>c.MID===t)[0];if(null!=o)return 1==o[n]}}prepareToSave(){let t;console.log("mode",this.mode);try{if("user"===this.mode){if("INVALID"===this.userForm.controls.username.status||"INVALID"===this.userForm.controls.password.status||"INVALID"===this.userForm.controls.email.status||"INVALID"===this.userForm.controls.mobile.status||"INVALID"===this.userForm.controls.citizenship.status||"INVALID"===this.userForm.controls.role.status||"INVALID"===this.userForm.controls.division.status||"INVALID"===this.userForm.controls.warehouse.status||"INVALID"===this.userForm.controls.PCL.status||"INVALID"===this.userForm.controls.fullname.status)return null;let d={};this.forTickValueinPosBillingrights(d),t={username:this.userForm.controls.username.value,password:this.userForm.controls.password.value,fullname:this.userForm.controls.fullname.value,email:this.userForm.controls.email.value,mobile:this.userForm.controls.mobile.value,citizenship:this.userForm.controls.citizenship.value,role:this.userForm.controls.role.value,division:this.userForm.controls.division.value,warehouse:this.userForm.controls.warehouse.value,ISACTIVE:this.userForm.controls.ISACTIVE.value,IsWaiter:this.IsWaiter,LoginProfile:this.userForm.controls.LoginProfile.value,PCL:this.userForm.controls.PCL.value,PosBillingRights:d.posBilling,divisionMapping:this.userForm.controls.divisionMapping.value,costcenterMapping:this.userForm.controls.costcenterMapping.value,ALLOWZERORATEINPI:this.allowzeroinPIrate,AllowSalesBelowCRate:this.AllowSalesBelowCRate,AllowContractPriceBelowPRate:this.AllowContractPriceBelowPRate,AllowWholesaleBill:this.allowWholesaleBill,SODiscountLimit:this.discountLimitInSO,StockAgeingLimit:this.StockAgeingLimit,AllowRateChangeInSO:this.AllowRateChangeInSO,AllowRateChangeInBarcodePrinting:this.AllowRateChangeInBarcodePrinting,AllowReverseEntry:this.AllowReverseEntry,AllowQuantityApproval:this.AllowQuantityApproval,AllowMinusStock:this.AllowMinusStock,AuthorizeCreditLimit:this.AuthorizeCreditLimit,CSALES:this.CSALES,DirectToAccounting:this.DirectToAccounting,ShowDashboard:this.ShowDashboard,disLimit:this.userDiscountLimit,AllowComplimentarySales:this.AllowComplimentarySales,AllowEstimateBillVoid:this.AllowEstimateBillVoid,allowTableMerge:this.allowTableMerge,allowTableSplit:this.allowTableSplit,allowTableTransfer:this.allowTableTransfer,AUTHORIZE:this.AUTHORIZE,disablePrintCashSettlement:this.disablePrintCashSettlement}}else if("edit"===this.mode){if("INVALID"===this.userForm.controls.password.status||"INVALID"===this.userForm.controls.email.status)return null;let d={};this.forTickValueinPosBillingrights(d),t={username:this.userForm.controls.username.value,password:this.userForm.controls.password.value,fullname:this.userForm.controls.fullname.value,email:this.userForm.controls.email.value,mobile:this.userForm.controls.mobile.value,citizenship:this.userForm.controls.citizenship.value,role:this.userForm.controls.role.value,division:this.userForm.controls.division.value,warehouse:this.userForm.controls.warehouse.value,ISACTIVE:this.userForm.controls.ISACTIVE.value,IsWaiter:this.IsWaiter,LoginProfile:this.userForm.controls.LoginProfile.value,PCL:this.userForm.controls.PCL.value,PosBillingRights:d.posBilling,divisionMapping:this.userForm.controls.divisionMapping.value,costcenterMapping:this.userForm.controls.costcenterMapping.value,ALLOWZERORATEINPI:this.allowzeroinPIrate,AllowSalesBelowCRate:this.AllowSalesBelowCRate,AllowContractPriceBelowPRate:this.AllowContractPriceBelowPRate,AllowWholesaleBill:this.allowWholesaleBill,SODiscountLimit:this.discountLimitInSO,StockAgeingLimit:this.StockAgeingLimit,AllowRateChangeInSO:this.AllowRateChangeInSO,AllowRateChangeInBarcodePrinting:this.AllowRateChangeInBarcodePrinting,AllowReverseEntry:this.AllowReverseEntry,AllowQuantityApproval:this.AllowQuantityApproval,AllowMinusStock:this.AllowMinusStock,AuthorizeCreditLimit:this.AuthorizeCreditLimit,CSALES:this.CSALES,DirectToAccounting:this.DirectToAccounting,ShowDashboard:this.ShowDashboard,disLimit:this.userDiscountLimit,AllowComplimentarySales:this.AllowComplimentarySales,AllowEstimateBillVoid:this.AllowEstimateBillVoid,allowTableMerge:this.allowTableMerge,allowTableSplit:this.allowTableSplit,allowTableTransfer:this.allowTableTransfer,AUTHORIZE:this.AUTHORIZE,disablePrintCashSettlement:this.disablePrintCashSettlement}}else if("role"===this.mode||"editRole"===this.mode){if("INVALID"===this.roleForm.controls.role.status||"INVALID"===this.roleForm.controls.roleName.status)return null;let m=[];this.roleForm.value.menuRights.forEach(u=>{let b=[];for(var Z in u)"boolean"==typeof u[Z]&&!0===u[Z]&&b.push(Z);b.length>0&&m.push({menu:u.path,right:b})});let U=[];this.roleForm.value.AccountMenuRights.forEach(u=>{let b=[];for(var Z in u)"boolean"==typeof u[Z]&&!0===u[Z]&&b.push(Z);b.length>0&&U.push({menu:u.path,right:b})});let f={};this.roleForm.value.PosBillingRights.forEach(u=>{u.OPEN=1==u.OPEN?1:0,u.NEW=1==u.NEW?1:0,u.EDIT=1==u.EDIT?1:0,u.DELETE=1==u.DELETE?1:0,u.PRINT=1==u.PRINT?1:0,u.EXPORT=1==u.EXPORT?1:0}),f.posBilling=this.roleForm.value.PosBillingRights,console.log("POSBILLING RIGHTS",f);let J=[];console.log("user rights",this.roleForm.value.userRights),this.roleForm.value.userRights.forEach(u=>{"tinyint"===u.valueType&&(u.value=!0===u.value?1:0),("numeric"===u.valueType||"decimal"===u.valueType||"float"===u.valueType)&&(""===u.value&&(u.value=0),Number.isNaN(u.value)&&(u.value=0)),J.push(u)}),t={role:this.roleForm.controls.role.value,roleName:this.roleForm.controls.roleName.value,menuRights:m,userRights:J,PosBillingRights:f,AccMenuRight:U}}var i=[];if(1==this.masterService.userSetting.UserwiseDivision){var o,c;o=1==this.SelectAll?"%":"",c=1==this.SelectAll_trn?"%":"";for(let d of this.userdivisionList)if(1==d.isCheck||1==d.isCheck_trn){let m={};m.DIV=d.INITIAL,m.ACID="",m.STAMP=1,m.ISACTIVE=1,m.isSelectAll=o,m.SelectAll_trn=c,m.isSelected=1==d.isCheck?1:0,m.isSelected_trn=1==d.isCheck_trn?1:0,i.push(m)}console.log("@@UDivList",i)}if("edit"===this.mode)return t.UserDivList=i,{mode:"edit",data:t};if("user"===this.mode)return t.UserDivList=i,{mode:"user",data:t};if("role"===this.mode)return 0==t.menuRights.length&&0==t.AccMenuRight.length?{mode:"role",data:""}:{mode:"role",data:t};if("editRole"===this.mode)return 0==t.menuRights.length&&0==t.AccMenuRight.length?{mode:"editRole",data:""}:{mode:"editRole",data:t}}catch(d){alert(d)}}forTickValueinPosBillingrights(t){this.userForm.value.PosBillingRights.forEach(i=>{i.OPEN=1==i.OPEN?1:0,i.NEW=1==i.NEW?1:0,i.EDIT=1==i.EDIT?1:0,i.DELETE=1==i.DELETE?1:0,i.PRINT=1==i.PRINT?1:0,i.EXPORT=1==i.EXPORT?1:0,i.UNAME=this.userForm.controls.username.value}),t.posBilling=this.userForm.value.PosBillingRights}getValue(){return!0}hideChildModal(){try{this.childModal.hide()}catch(t){alert(t)}}hideloginModal(){try{this.loginModal.hide()}catch(t){alert(t)}}back(){try{this.router.navigate([this.returnUrl])}catch(t){alert(t)}}changeDivision(t){this.divisionWarehouseList=this.warehouseList.filter(i=>i.DIVISION===t)}getRoleDetail(t){this.loadingService.show("Please wait! Getting Role Detail"),this.addUserService.getRole(t).subscribe(i=>{this.roleForm.controls.roleName.patchValue(i.result.rolename),this.userRightList=i.result.userRights,this.initUserRights(),null==i.result.menuRights||0===i.result.menuRights.length?(this.alertService.error("Cannot find menu rights"),this.router.navigate(["./pages/configuration/userManager/userlist"]),this.loadingService.hide()):(this.initUserMenuForEditRole(i.result.menuRights),this.initAccountMenuForEditRole(i.result.AccMenuRight)),this.loadingService.hide()},i=>{this.loadingService.hide(),this.alertService.info(i.error)})}initUserMenuForEditRole(t){try{const i=this.roleForm.controls.menuRights;let n;this.menurights=t,this.items.forEach(o=>{n=this.fb.group({title:new a.NI({value:o.title,disabled:!0}),path:new a.NI(o.path),view:new a.NI(this.findMenuRights(o.path,t,"view")),add:new a.NI(this.findMenuRights(o.path,t,"add")),edit:new a.NI(this.findMenuRights(o.path,t,"edit")),delete:new a.NI(this.findMenuRights(o.path,t,"delete")),print:new a.NI(this.findMenuRights(o.path,t,"print")),import:new a.NI(this.findMenuRights(o.path,t,"import")),export:new a.NI(this.findMenuRights(o.path,t,"export")),post:new a.NI(this.findMenuRights(o.path,t,"post"))}),this.checkMenuWiseSettingList(o.path)&&i.push(n)})}catch(i){alert(i)}}initAccountMenuForEditRole(t){try{const i=this.roleForm.controls.AccountMenuRights;let n;this.accountrights=t,this.AccountRights.forEach(o=>{n=this.fb.group({title:new a.NI({value:o.title,disabled:!0}),path:new a.NI(o.path),view:new a.NI(this.findMenuRights(o.path,t,"view")),add:new a.NI(this.findMenuRights(o.path,t,"add")),edit:new a.NI(this.findMenuRights(o.path,t,"edit")),delete:new a.NI(this.findMenuRights(o.path,t,"delete")),print:new a.NI(this.findMenuRights(o.path,t,"print")),import:new a.NI(this.findMenuRights(o.path,t,"import")),export:new a.NI(this.findMenuRights(o.path,t,"export")),post:new a.NI(this.findMenuRights(o.path,t,"post"))}),i.push(n)})}catch(i){alert(i)}}getProductCategoryName(){this.addUserService.getProductCategoryName().subscribe(t=>{this.productCategoryList=t.result})}TickAllValue(t,i){i.target.checked?this.AssignCheckValue(t,!0):0==i.target.checked&&this.AssignCheckValue(t,!1)}AssignCheckValue(t,i){console.log("This.menurights",this.menurights),this.roleForm=this.fb.group({role:new a.NI("A",[a.kI.required]),roleName:new a.NI("",[a.kI.required]),menuRights:this.fb.array([]),userRights:this.fb.array([])});const n=this.roleForm.controls.menuRights;let c;this.items.forEach(d=>{c=this.fb.group({title:new a.NI({value:d.title,disabled:!0}),path:new a.NI(d.path),view:new a.NI("view"==t?i:this.findMenuRights(d.path,this.menurights,"view")),add:new a.NI("add"==t?i:this.findMenuRights(d.path,this.menurights,"add")),edit:new a.NI("edit"==t?i:this.findMenuRights(d.path,this.menurights,"edit")),delete:new a.NI("delete"==t?i:this.findMenuRights(d.path,this.menurights,"delete")),print:new a.NI("print"==t?i:this.findMenuRights(d.path,this.menurights,"print")),import:new a.NI("import"==t?i:this.findMenuRights(d.path,this.menurights,"import")),export:new a.NI("export"==t?i:this.findMenuRights(d.path,this.menurights,"export")),post:new a.NI("post"==t?i:this.findMenuRights(d.path,this.menurights,"post"))}),n.push(c),this.BindNewlyTickValue(d.path,this.menurights,t,i)})}BindNewlyTickValue(t,i,n,o){if(i&&i.length){let c=i.filter(d=>d.menu===t)[0];null!=c&&(1==o?c.right.indexOf(n)||c.right.push(n):c.right.indexOf(n)||c.right.splice(n))}}ngAfterViewInit(){}getUserDivList(t){this.masterService.getAllDivisions().subscribe(i=>{this.userdivisionList=i,t.forEach(n=>{n.isCheck=1==n.isSelected,n.isCheck_trn=1==n.isSelected_trn}),this.userdivisionList.forEach(n=>{n.isCheck=!1,n.isCheck_trn=!1;let o=t.find(c=>c.INITIAL==n.INITIAL);console.log("sameDiv",o),n.isCheck=o?.isCheck,n.isCheck_trn=o?.isCheck_trn}),this.userdivisionList.every(n=>1==n.isCheck)&&(this.SelectAll=!0),this.userdivisionList.every(n=>1==n.isCheck_trn)&&(this.SelectAll_trn=!0)})}ChangeAll(){console.log("checkHere",this.SelectAll),this.userdivisionList.forEach(1==this.SelectAll?t=>t.isCheck=!0:t=>t.isCheck=!1)}ChangeAll_trn(){this.userdivisionList.forEach(1==this.SelectAll_trn?t=>t.isCheck_trn=!0:t=>t.isCheck_trn=!1)}ChangeDiv(){this.userdivisionList.filter(t=>0==t.isCheck)&&(this.SelectAll=!1),this.userdivisionList.every(t=>1==t.isCheck)&&(this.SelectAll=!0)}ChangeDiv_trn(){this.userdivisionList.filter(t=>0==t.isCheck)&&(this.SelectAll_trn=!1),this.userdivisionList.every(t=>1==t.isCheck)&&(this.SelectAll_trn=!0)}selectDivision(t){"user"==this.mode&&(this.userdivisionList.forEach(i=>i.isCheck=i.INITIAL==t.target.value),this.userdivisionList.forEach(i=>i.isCheck_trn=i.INITIAL==t.target.value),this.userdivisionList.forEach(i=>i.isDisable=1==i.isCheck),this.userdivisionList.forEach(i=>i.isDisable_trn=1==i.isCheck_trn))}onItemDeSelect(t){this.getDivWiseWarehouseList(this.userForm.controls.divisionMapping.value)}getDivWiseWarehouseList(t){let n=[],o="";t.length&&t.length>0?t.forEach(c=>{n.push(c.INITIAL),o+=`${n},`}):o=this.masterService.userProfile.userDivision,this.masterService.getWarehouseListByDivisionMapped(o).subscribe(c=>{this.warehouseListByDivMapped=c})}posBillMenuLoad(){this.addUserService.getPosBillingRightsMenu().subscribe(t=>{this.posBillingRightsMenu=t,this.posBillingRightsMenu.forEach(i=>{this.convertPosRightsToItem(i,this.POSrightsList,1)}),"edit"===this.mode?this.masterService.getPosBillingRights(this.user).subscribe(i=>{this.initPOSRightsforEdit(i.result)}):this.initPOSRights()})}checkDiscountLimit(t){return t>100?(this.alertService.info("Flat discount rate cannot be greater than 100%"),void(this.discountLimitInSO=0)):t<0?(this.alertService.info("Flat discount rate cannot be less than 0%"),void(this.discountLimitInSO=0)):void 0}checkMenuWiseSetting(t){return console.log("menupage",t),!(0==this.userSetting.EnableBatch&&"batch-adjustment"==t||0==this.userSetting.EnableVariantCategory&&("productwise"==t||"categorymaster"==t||"departmentvscategory"==t||"variant-adjustment"==t)||0==this.userSetting.enableCostCenter&&"cost-center"==t||0==this.userSetting.IMPORTPOBILLMODE&&"purchase-import-order"==t||0==this.userSetting.ENABLERATEGROUP&&"rategroup"==t||0==this.userSetting.centralizeddbmode&&"branchwise-price"==t||0==this.userSetting.EnableWebBilling&&("abbreviated-sales-invoice"==t||"add-sales-invoice"==t||"export-sales-invoice"==t||"add-sales-invoice-wholesale"==t||"add-creditnote-itembase"==t)||"old"==this.ProdMasterDisplayMode&&"productmasterdynamicattributes"==t||"new"==this.ProdMasterDisplayMode&&"productmaster"==t)}checkMenuWiseSettingList(t){let i=this.menuDepenedencyList.find(n=>n.Menu==t);return!(i&&0==this.userSetting[i.DependencySetting])}resetWarehouse(){this.userForm.controls.warehouse.setValue("")}onDivisionSelect(t,i){this.masterService.getWarehouseListByDivisionMapped(this.userForm.controls.division.value).subscribe(o=>{this.warehouseListByDivMapped=o,i&&this.warehouseListByDivMapped&&this.warehouseListByDivMapped.length>0&&(console.log("div",t,"warehouses",this.warehouseListByDivMapped),this.userForm.controls.warehouse.patchValue(this.warehouseListByDivMapped[0].NAME))})}onCCSelect(t){console.log("event cc slect",t)}onCCSelectAll(t){}onCCDeSelect(t){}onCCDeSelectAll(t){}checkChangeforisWaiter(t){console.log("tick ko value",t),this.userForm.controls.IsWaiter.patchValue(t?1:0)}manageCrudRights(t){return!("SYSTEM ROLE"!=this.roleForm.controls.roleName.value?.toUpperCase()&&["division","sales-terminal","warehouse"].includes(t))}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(W.V),e.Y36(F.c),e.Y36(k.P),e.Y36(a.qu),e.Y36(v),e.Y36(C.F0),e.Y36(C.gz),e.Y36(x.Dx),e.Y36(h.e))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-add-user"]],viewQuery:function(t,i){if(1&t&&(e.Gf(w,5),e.Gf(E,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.childModal=n.first),e.iGM(n=e.CRH())&&(i.loginModal=n.first)}},decls:12,vars:3,consts:[[1,"row","sticky-top"],[1,"col-md-6"],[2,"white-space","nowrap","margin-left","-40px","margin-bottom","8px","font-family","Segoe UI Light","font-weight","bold","font-size","20px","padding-left","4%","width","192px"],[1,"col-md-6",2,"float","right"],["type","button",1,"btn","btn-info","pull-right",2,"margin-bottom","10px","font-size","12px",3,"click"],["type","submit",1,"btn","btn-info","pull-right",2,"margin-bottom","10px","font-size","12px",3,"click"],[2,"height","500px"],[4,"ngIf"],[1,"main-container",2,"margin-top","0px !important","margin-bottom","0px"],[1,"row"],[1,"col-md-12"],["id","user-tabs",1,"tabbable"],[1,"nav","nav-tabs"],[1,"nav-item"],["href","#userInfo","data-toggle","tab","role","tab",1,"nav-link","active"],["href","#userWiseRights","data-toggle","tab","role","tab",1,"nav-link"],["class","nav-item",4,"ngIf"],["href","#POSRights","data-toggle","tab",1,"nav-link"],[1,"tab-content"],["id","userInfo",1,"tab-pane","active"],[1,"row","col-sm-12"],[1,"col-sm-6"],[1,"form-horizontal",2,"width","100%","margin-top","2rem","margin-left","3rem",3,"formGroup"],[1,"form-group","row"],["for","inputUsername",1,"col-sm-3","form-control-label"],[2,"color","red"],[1,"col-sm-8"],["type","text","formControlName","username","id","inputUsername","placeholder","User Name","autocomplete","off",1,"form-control"],["for","inputPassword3",1,"col-sm-3","form-control-label"],["type","password","formControlName","password","id","inputPassword3","placeholder","Password",1,"form-control","password"],["class","errors",4,"ngIf"],["for","inputFullname",1,"col-sm-3","form-control-label"],["type","text","formControlName","fullname","id","inputFullname","placeholder","Full Name",1,"form-control"],["for","inputEmail3",1,"col-sm-3","form-control-label"],["type","email","formControlName","email","id","inputEmail3","placeholder","Email",1,"form-control"],[1,"col-sm-3","form-control-label"],["type","text","maxlength","10","formControlName","mobile","oninput","this.value = this.value.replace(/[^0-9+\\s-]/g, '');",1,"form-control"],["type","text","formControlName","citizenship",1,"form-control"],["formControlName","role",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],["formControlName","division",1,"form-control",3,"change"],["formControlName","warehouse",1,"form-control"],["class","form-group row",4,"ngIf"],["formControlName","ISACTIVE",1,"form-control",2,"height","30px","padding-bottom","0px"],["value","1"],["value","0"],[1,"col-sm-6","mt-4"],[1,"user-right-info","border","rounded","p-3"],[1,"col-md-6","border-right"],["class","user-right-info-label",4,"ngIf"],["class","user-right-checkbox","type","checkbox",3,"ngModel","change","ngModelChange",4,"ngIf"],["class","row",4,"ngIf"],["id","userWiseRights",1,"tab-pane"],[1,"row","col-md-12",2,"margin-top","1rem"],[1,"user-right-label"],["type","checkbox",1,"user-right-checkbox",3,"ngModel","change","ngModelChange"],[1,"row",2,"margin-top","6px","margin-bottom","6px"],["type","number",2,"width","6rem","height","26px",3,"ngModel","ngModelChange"],["class","row","style","margin-top: 0.5rem;",4,"ngIf"],[1,"row",2,"margin-top","0.5rem"],["class","row","style","margin-top: 1.4rem;",4,"ngIf"],["id","Roleprivilege",1,"tab-pane"],[3,"formGroup"],["formArrayName","menuRights",1,"horizontal-scroll","row"],[1,"col-sm-3"],[2,"height","300px","border","1px solid #e2eaea"],[2,"width","26px","background","#e2eaea"],[2,"background","#e2eaea"],[1,"scrollable-div"],[2,"height","23px"],[2,"width","26px"],["type","checkbox",3,"ngModelOptions","ngModel","ngModelChange","change"],["style","height: 23px;",4,"ngFor","ngForOf"],["id","POSRights",1,"tab-pane"],["formArrayName","PosBillingRights",1,"horizontal-scroll"],[1,"table","table-striped",2,"width","100%"],[2,"position","sticky","top","0","line-height","1.5rem"],["scope","col",2,"width","14%"],[1,"row","show-grid",2,"margin-left","10px"],[2,"width","5%"],[2,"width","13%"],["type","checkbox",3,"change"],["style","margin-left: 10px;","class","row show-grid",3,"formGroupName",4,"ngFor","ngForOf"],["href","#Roleprivilege","data-toggle","tab",1,"nav-link"],[1,"errors"],["class","error-text",4,"ngIf"],[1,"error-text"],[3,"value"],["class","col-sm-8",4,"ngIf"],["formControlName","costcenterMapping",1,"custom-asset-dropdown",3,"placeholder","settings","data","onSelect","onSelectAll","onDeSelect","onDeSelectAll"],[1,"user-right-info-label"],[1,"row",2,"margin-top","1.4rem"],[1,"row","show-grid",2,"margin-left","10px",3,"formGroupName"],["type","text","size","40","formControlName","title",2,"border","0","background-color","#d9e5e7 !important","height","3vh"],["type","checkbox","formControlName","OPEN"],["for","inputUsername",1,"col-sm-1","form-control-label"],[1,"col-sm-5"],["type","text","formControlName","roleName",1,"form-control",2,"width","27rem","height","1.5rem","margin-top","7px","margin-left","-15px"],["id","warehouse-tabs",1,"tabbable"],["href","#menuRights","data-toggle","tab",1,"nav-link","active"],["href","#userRights","data-toggle","tab",1,"nav-link"],["href","#accountMenuRights","data-toggle","tab",1,"nav-link"],["id","menuRights",1,"tab-pane","active"],["formArrayName","menuRights",1,"horizontal-scroll"],[2,"width","37%"],["id","userRights",1,"tab-pane"],["class","user-rights",4,"ngIf"],["id","accountMenuRights",1,"tab-pane"],["formArrayName","AccountMenuRights",1,"horizontal-scroll"],["type","checkbox","formControlName","view"],["type","checkbox","formControlName","add"],["type","checkbox","formControlName","edit"],["type","checkbox","formControlName","delete"],["type","checkbox","formControlName","print"],[1,"user-rights"],["formArrayName","userRights"],["class","col-sm-8",4,"ngFor","ngForOf"],[3,"formGroupName"],[1,"roledesclabel"],["type","checkbox","formControlName","value"],["type","text","style","border:0;background-color: transparent; margin-top: 3px; margin-bottom: 3px;","formControlName","path",4,"ngIf"],["type","text","formControlName","path",2,"border","0","background-color","transparent","margin-top","3px","margin-bottom","3px"],["type","text","formControlName","value",2,"margin-top","3px","margin-bottom","3px"],["formControlName","value",2,"margin-top","3px","margin-bottom","3px","min-width","200px",3,"change"],["type","text","formControlName","path",2,"border","0","background-color","transparent"],["formControlName","value",2,"margin-top","3px","margin-bottom","3px","min-width","200px"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["type","text","formControlName","value",2,"width","10rem"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"label",2),e._uU(3),e.qZA()(),e.TgZ(4,"div",3)(5,"button",4),e.NdJ("click",function(){return i.back()}),e._uU(6,"Cancel"),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return i.onSubmit()}),e._uU(8,"Save"),e.qZA()()(),e.TgZ(9,"div",6),e.YNc(10,Se,198,41,"ng-container",7),e.YNc(11,Ye,88,4,"ng-container",7),e.qZA()),2&t&&(e.xp6(3),e.hij("",i.modeTitile," "),e.xp6(7),e.Q6J("ngIf","user"==i.mode||"edit"==i.mode),e.xp6(1),e.Q6J("ngIf","role"==i.mode||"editRole"==i.mode))},dependencies:[S.sg,S.O5,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.Wl,a.EJ,a.JJ,a.JL,a.nD,a.On,a.sg,a.u,a.x0,a.CE,A.O,S.Ov],styles:[".card[_ngcontent-%COMP%]{margin:auto!important;width:60%}.card-body[_ngcontent-%COMP%]{padding:5px!important;max-height:455px!important}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{border:1px solid #cbcbcb;border-radius:3px;height:4vh;color:#000}label[_ngcontent-%COMP%]{height:25px;font-size:14px}.col-sm-7[_ngcontent-%COMP%]{padding-left:1px}.form-control[_ngcontent-%COMP%]{font-size:14px;padding:0 5px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.1rem!important}tbody[_ngcontent-%COMP%]{display:block;height:63vh;overflow:auto}thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}th[_ngcontent-%COMP%]{font-size:15px}td[_ngcontent-%COMP%]{font-size:13px}.errors[_ngcontent-%COMP%]{color:red;text-align:center;font-size:12px}.custom-asset-dropdown[_ngcontent-%COMP%]    {line-height:13px;font-size:14px}.selectbox[_ngcontent-%COMP%]{padding:0 8px}.rolerightlabel[_ngcontent-%COMP%]{width:13rem}.roledesclabel[_ngcontent-%COMP%]{width:20rem}.scrollable-div[_ngcontent-%COMP%]{max-height:450px;overflow-y:auto;overflow-x:hidden;padding-right:15px}.user-right-checkbox[_ngcontent-%COMP%]{width:17px;height:32px}.user-right-info-label[_ngcontent-%COMP%]{width:90%}.user-right-label[_ngcontent-%COMP%]{width:40%}"]}),r})();var N=p(64298),$=p(72533);let We=(()=>{class r{transform(t,i){if(t)return i?t.filter(n=>{const o=i.replace(/[^A-Z0-9]/gi,"").toLowerCase(),c=n.username?n.username.replace(/[^A-Z0-9]/gi,"").toLowerCase():"",d=n.role?n.role.replace(/[^A-Z0-9]/gi,"").toLowerCase():"",m=n.rolename?n.rolename.replace(/[^A-Z0-9]/gi,"").toLowerCase():"";if(-1!==c.indexOf(o)||-1!==d.indexOf(o)||-1!==m.indexOf(o))return n}):t}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275pipe=e.Yjl({name:"searchData",type:r,pure:!1}),r})();const Ke=["genericGrid"],ze=["genericGridRole"];function $e(r,s){1&r&&(e.TgZ(0,"label",9),e._uU(1,"USER PROFILE MASTER "),e.qZA())}function je(r,s){1&r&&(e.TgZ(0,"label",9),e._uU(1,"ROLE MASTER "),e.qZA())}function Xe(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onAddClick())}),e._uU(1,"Add User"),e.qZA()}}function et(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addRole())}),e._uU(1,"Add Role"),e.qZA()}}function tt(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.openUserList())}),e._uU(1,"User List"),e.qZA()}}function nt(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.openRoleList())}),e._uU(1,"Role List"),e.qZA()}}function it(r,s){1&r&&(e.TgZ(0,"th",23),e._uU(1,"Division"),e.qZA())}function ot(r,s){1&r&&(e.TgZ(0,"th",23),e._uU(1,"Warehouse"),e.qZA())}function rt(r,s){if(1&r&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.hij("",t.DIVISION," ")}}function st(r,s){if(1&r&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.hij("",t.WAREHOUSE," ")}}function at(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td",25),e._uU(2),e.qZA(),e.TgZ(3,"td",26),e._uU(4),e.qZA(),e.TgZ(5,"td",27),e._uU(6),e.qZA(),e.TgZ(7,"td",26),e._uU(8),e.qZA(),e.YNc(9,rt,2,1,"td",28),e.YNc(10,st,2,1,"td",28),e.TgZ(11,"td",29)(12,"button",30),e.NdJ("click",function(){const o=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.onEditClick(o))}),e._uU(13,"Edit"),e.qZA()()()}if(2&r){const t=s.$implicit,i=s.index,n=e.oxw(3);e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.username),e.xp6(2),e.Oqu(t.role),e.xp6(2),e.hij("",t.ROLETYPE," "),e.xp6(1),e.Q6J("ngIf","lite"!=n.AppMode),e.xp6(1),e.Q6J("ngIf","lite"!=n.AppMode)}}const j=function(r,s,t){return{itemsPerPage:r,currentPage:s,totalItems:t}};function lt(r,s){if(1&r&&(e.ynx(0),e.YNc(1,at,14,6,"tr",24),e.ALo(2,"paginate"),e.ALo(3,"searchData"),e.BQk()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,e.xi3(3,4,t.userList,t.userfilter),e.kEZ(7,j,t.itemsPerPage,t.currentPage,t.totalCount)))}}function ct(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",32)(1,"div",33)(2,"div",34)(3,"pagination-controls",35),e.NdJ("pageChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.userPagination(n))}),e.qZA()()()()}}function dt(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"div",11)(2,"span"),e._uU(3,"User Profile Lists"),e.qZA(),e.TgZ(4,"div",12)(5,"input",13),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.userfilter=n)}),e.qZA()()(),e.TgZ(6,"div",14)(7,"table",15)(8,"thead")(9,"tr",16)(10,"th",17),e._uU(11,"S.N"),e.qZA(),e.TgZ(12,"th",18),e._uU(13,"User Name"),e.qZA(),e.TgZ(14,"th",19),e._uU(15,"Role"),e.qZA(),e.TgZ(16,"th",18),e._uU(17,"Role Type"),e.qZA(),e.YNc(18,it,2,0,"th",20),e.YNc(19,ot,2,0,"th",20),e.TgZ(20,"th",21),e._uU(21,"Action"),e.qZA()()(),e.TgZ(22,"tbody"),e.YNc(23,lt,4,11,"ng-container",8),e.qZA()()(),e.YNc(24,ct,4,0,"div",22),e.ALo(25,"searchData"),e.qZA()}if(2&r){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.userfilter),e.xp6(13),e.Q6J("ngIf","lite"!=t.AppMode),e.xp6(1),e.Q6J("ngIf","lite"!=t.AppMode),e.xp6(4),e.Q6J("ngIf",t.userList&&t.userList.length>0),e.xp6(1),e.Q6J("ngIf",t.userList&&e.xi3(25,5,t.userList,t.userfilter).length>t.itemsPerPage)}}function ut(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td",25),e._uU(2),e.qZA(),e.TgZ(3,"td",39),e._uU(4),e.qZA(),e.TgZ(5,"td",40),e._uU(6),e.qZA(),e.TgZ(7,"td",29)(8,"button",30),e.NdJ("click",function(){const o=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.onRoleEditClick(o))}),e._uU(9,"Edit"),e.qZA()()()}if(2&r){const t=s.$implicit,i=s.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.rolename),e.xp6(2),e.Oqu(t.role)}}function ht(r,s){if(1&r&&(e.ynx(0),e.YNc(1,ut,10,3,"tr",24),e.ALo(2,"paginate"),e.ALo(3,"searchData"),e.BQk()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,e.xi3(3,4,t.roleList,t.rolefilter),e.kEZ(7,j,t.itemsPerPage,t.currentRolePage,t.totalCount)))}}function pt(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",32)(1,"div",33)(2,"div",34)(3,"pagination-controls",35),e.NdJ("pageChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.rolePagination(n))}),e.qZA()()()()}}function gt(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"div",11)(2,"span"),e._uU(3,"Role Lists"),e.qZA(),e.TgZ(4,"div",12)(5,"input",36),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.rolefilter=n)}),e.qZA()()(),e.TgZ(6,"div",14)(7,"table",15)(8,"thead")(9,"tr",16)(10,"th",17),e._uU(11,"S.N"),e.qZA(),e.TgZ(12,"th",37),e._uU(13,"Role Name"),e.qZA(),e.TgZ(14,"th",38),e._uU(15,"Role"),e.qZA(),e.TgZ(16,"th",21),e._uU(17,"Action"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,ht,4,11,"ng-container",8),e.qZA()()(),e.YNc(20,pt,4,0,"div",22),e.ALo(21,"searchData"),e.qZA()}if(2&r){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.rolefilter),e.xp6(14),e.Q6J("ngIf",t.roleList&&t.roleList.length>0),e.xp6(1),e.Q6J("ngIf",t.roleList&&e.xi3(21,3,t.roleList,t.rolefilter).length>t.itemsPerPage)}}const _t=[{path:"",component:(()=>{class r{constructor(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["user-manager"]],decls:1,vars:0,template:function(t,i){1&t&&e._UZ(0,"router-outlet")},dependencies:[C.lC],encapsulation:2}),r})(),children:[{path:"userlist",component:(()=>{class r{constructor(t,i,n,o,c){this.adduserService=t,this.router=i,this.alertService=n,this.masterService=o,this.title=c,this.imsGridSettings=new N.U5,this.imsGridRoleSettings=new N.U5,this.isLoader=!0,this.userList=[],this.roleList=[],this.currentPage=1,this.currentRolePage=1,this.itemsPerPage=20,this.adduserService.getMenuDependencyList().subscribe(d=>{this.adduserService.menuDependencyList=d.result}),this.AppMode=M.N.appMode,this.userManager="user",this.imsGridSettings={title:"User Manager",apiEndpoints:"/getUserList",pageSize:10,showActionButton:!0,columns:[{key:"username",title:"User Name",hidden:!1,noSearch:!1,type:"string"},{key:"email",title:"Email",hidden:!1,noSearch:!1,type:"string"},{key:"role",title:"Role",hidden:!1,noSearch:!1,type:"string"}],actionKeys:[{text:"Edit",title:"Edit",icon:"fa fa-edit",type:N.Dw.EDIT},{text:"Delete",title:"Delete",icon:"fa fa-trash",type:N.Dw.DELETE}]},this.imsGridRoleSettings={title:"Role Master",apiEndpoints:"/getRoleList",pageSize:10,showActionButton:!0,columns:[{key:"rolename",title:"Role Name",hidden:!1,noSearch:!1,type:"string"},{key:"role",title:"Role",hidden:!1,noSearch:!1,type:"string"}],actionKeys:[{text:"Edit",title:"Edit",icon:"fa fa-edit",type:N.Dw.EDIT}]},this.title.setTitle("User Manager | IMS POS")}ngOnInit(){this.adduserService.getUserList().subscribe(t=>{t?(this.isLoader=!1,this.userList=t?t.result:[]):(this.isLoader=!1,this.userList=[],this.errorMessage="Something went wrong")},t=>{this.isLoader=!1,this.userList=[],this.errorMessage="Something went wrong"}),this.adduserService.getRoleList().subscribe(t=>{t?(this.isLoader=!1,this.roleList=t?t.result:[]):(this.isLoader=!1,this.roleList=[],this.errorMessage="Something went wrong")},t=>{this.isLoader=!1,this.roleList=[],this.errorMessage="Something went wrong"})}openRoleList(){this.userManager="role"}openUserList(){this.userManager="user"}onAddClick(){try{if(0==this.masterService.checkIsBranch())return void this.alertService.warning("Cannot addUsers in Branch office");this.router.navigate(["./pages/configuration/userManager/adduser",{mode:"user",returnUrl:this.router.url}])}catch(t){this.alertService.error(t)}}onDeleteConfirm(t){window.confirm("Are you sure you want to delete?")?t.confirm.resolve():t.confirm.reject()}onEditClick(t){if(this.masterService.checkIsBranch())try{this.router.navigate(["./pages/configuration/userManager/adduser",{mode:"edit",user:t.username,returnUrl:this.router.url}])}catch(i){this.alertService.error(i)}else this.alertService.warning("Cannot edit user in Branch office")}addRole(){try{this.router.navigate(["./pages/configuration/userManager/adduser",{mode:"role",returnUrl:this.router.url}])}catch(t){this.alertService.error(t)}}onRoleEditClick(t){try{this.router.navigate(["./pages/configuration/userManager/adduser",{mode:"editRole",rolename:t.rolename,returnUrl:this.router.url}])}catch(i){this.alertService.error(i)}}userPagination(t){this.isLoader=!0,this.currentPage=t;const i=this;window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{i.isLoader=!1},500)}rolePagination(t){this.isLoader=!0,this.currentRolePage=t;const i=this;window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{i.isLoader=!1},500)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(v),e.Y36(C.F0),e.Y36(F.c),e.Y36(k.P),e.Y36(x.Dx))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-list"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Ke,5),e.Gf(ze,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.genericGrid=n.first),e.iGM(n=e.CRH())&&(i.genericGridRole=n.first)}},features:[e._Bn([v])],decls:14,vars:8,consts:[[1,"row","col-md-12"],[1,"col-md-4"],["style","white-space: nowrap;margin-left:-40px;margin-bottom: 8px; font-family: Segoe UI Light;font-weight: bold;font-size: 20px; padding-left: 4%;width: 192px;",4,"ngIf"],[1,"col-md-8"],["class","btn btn-info pull-right","style","font-size: 12px;",3,"click",4,"ngIf"],[1,"row",2,"align-items","center"],[1,"col-md-12","col-sm-8",2,"margin-top","0.5rem"],[1,"card",2,"margin","auto","width","63rem"],[4,"ngIf"],[2,"white-space","nowrap","margin-left","-40px","margin-bottom","8px","font-family","Segoe UI Light","font-weight","bold","font-size","20px","padding-left","4%","width","192px"],[1,"btn","btn-info","pull-right",2,"font-size","12px",3,"click"],[1,"card-header"],[2,"width","25%"],["type","search","placeholder","Search...","name","userfilter",1,"form-control",2,"height","1.5rem","font-size","13px",3,"ngModel","ngModelChange"],[1,"card-body"],[1,"table","table-striped"],[2,"position","sticky","top","0","line-height","1.5rem"],["scope","col",2,"width","3%"],["scope","col",2,"width","15%"],["scope","col",2,"width","5%"],["scope","col","style","width:10%",4,"ngIf"],["scope","col",2,"text-align","center","width","18%"],["class","card-footer","style","padding:5px",4,"ngIf"],["scope","col",2,"width","10%"],[4,"ngFor","ngForOf"],[2,"width","3%"],[2,"width","15%"],[2,"width","5%"],["style","width:10%;",4,"ngIf"],[2,"width","18%","text-align","center"],["type","button","data-toggle","modal",1,"btn","btn-sm","btn-info","mr-1","btn-sm",2,"width","60px",3,"click"],[2,"width","10%"],[1,"card-footer",2,"padding","5px"],[1,"pagination"],[2,"margin","auto"],[3,"pageChange"],["type","search","placeholder","Search...","name","rolefilter",1,"form-control",2,"height","1.5rem","font-size","13px",3,"ngModel","ngModelChange"],["scope","col",2,"width","18%"],["scope","col",2,"width","8%"],[2,"width","18%"],[2,"width","8%"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,$e,2,0,"label",2),e.YNc(3,je,2,0,"label",2),e.qZA(),e.TgZ(4,"div",3),e.YNc(5,Xe,2,0,"button",4),e.YNc(6,et,2,0,"button",4),e.YNc(7,tt,2,0,"button",4),e.YNc(8,nt,2,0,"button",4),e.qZA()(),e.TgZ(9,"div",5)(10,"div",6)(11,"div",7),e.YNc(12,dt,26,8,"div",8),e.YNc(13,gt,22,6,"div",8),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("ngIf","user"==i.userManager),e.xp6(1),e.Q6J("ngIf","role"==i.userManager),e.xp6(2),e.Q6J("ngIf","user"==i.userManager),e.xp6(1),e.Q6J("ngIf","role"==i.userManager),e.xp6(1),e.Q6J("ngIf","role"==i.userManager),e.xp6(1),e.Q6J("ngIf","user"==i.userManager),e.xp6(4),e.Q6J("ngIf","user"==i.userManager),e.xp6(1),e.Q6J("ngIf","role"==i.userManager))},dependencies:[S.sg,S.O5,a.Fj,a.JJ,a.On,$.LS,$._s,We],styles:[".card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.card-header[_ngcontent-%COMP%]:after{display:none}.card-body[_ngcontent-%COMP%]{padding:5px!important;max-height:675px!important}.main-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:60px 0}.scroll-touch[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch!important}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.1rem!important}.sticky-top[_ngcontent-%COMP%]{margin-top:60px;height:100vh}tbody[_ngcontent-%COMP%]{display:block;height:59vh;overflow:auto}thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}th[_ngcontent-%COMP%]{font-size:15px}td[_ngcontent-%COMP%]{font-size:13px}.btn-sm[_ngcontent-%COMP%]{line-height:3px}.card-header[_ngcontent-%COMP%]{padding:10px 20px}.card-footer[_ngcontent-%COMP%]{height:6vh}.searchBy[_ngcontent-%COMP%]{font-size:13px;margin-left:18rem}"]}),r})(),canActivate:[l.C]},{path:"adduser",component:He,canActivate:[l.C]}]}];let mt=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[C.Bz.forChild(_t),C.Bz]}),r})();var ft=p(53181);let vt=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[l.C],imports:[S.ez,mt,y.m,A.Z.forRoot(),ft.Is]}),r})()}}]);