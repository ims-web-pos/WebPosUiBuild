import{a as re,b as se,c as le}from"./chunk-A75OV2MK.js";import{A as Ee,B as Ie,C as Se,D as ke,E as Te,H as Ve,J as Fe,K as j,L as Ae,M as Oe,N as Pe,O as Le,P as Be,Q as z,b as ue,c as he,d as _e,e as me,f as pe,g as fe,h as ge,i as Ce,j as ve,k as xe,l as be,n as ye,p as De,t as Me,v as we}from"./chunk-GLQ3AD37.js";import{$ as ce,G,_ as de,ga as Ne,k as ae,m as oe}from"./chunk-IOQHTKTC.js";import{$a as w,$b as v,Ab as O,Bb as P,Cb as s,Db as r,Eb as y,F as X,Fb as D,Gb as M,Ib as x,Kc as ee,Lb as f,Mc as te,Nb as u,Nc as ne,Qc as ie,Rb as k,Sb as T,Tb as V,Vb as h,Wb as L,Xb as E,Yb as Z,Zb as g,_a as l,_b as C,a as U,aa as W,b as q,bc as F,cc as B,ja as S,ka as K,p as Y,pb as _,sa as m,sb as H,ta as p,tb as c,xb as N,yb as A,yc as R}from"./chunk-VBZWTO5P.js";var Q=class n{constructor(i){this.tableFetchService=i}variantConfigtableColumns=R(()=>[...this.tableFetchService.tableColumns(),{header:"ACTION",def:"ACTION"}]);variantConfigtableData=R(()=>this.tableFetchService.tableData());ngOnInit(){this.tableFetchService.paginationPage.set(1),this.tableFetchService.getTableData("getAllVariantConfiguation"),this.tableFetchService.selectedTab.set("variant-configuration")}static \u0275fac=function(e){return new(e||n)(w(j))};static \u0275cmp=S({type:n,selectors:[["app-variant-configuration"]],standalone:!0,features:[F],decls:9,vars:4,consts:[[1,"container","mt-3"],[1,"heading","fw-bold","fs-5"],[1,"border-bottom","border-secondary"],[1,"container","d-flex","flex-column","flex-grow-1"],[1,"row"],[1,"col-md-6","mt-2","ms-auto"],[3,"columns","dataSource"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"h5",1),h(2,"Variant Configuration"),r()(),y(3,"div",2),s(4,"div",3)(5,"div",4)(6,"div",5),y(7,"app-generic-filter",6),r()(),y(8,"app-generic-table",6),r()),e&2&&(l(7),c("columns",t.variantConfigtableColumns())("dataSource",t.variantConfigtableData()),l(),c("columns",t.variantConfigtableColumns())("dataSource",t.variantConfigtableData()))},dependencies:[z,Ae]})};var Re=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=K({type:n})}static{this.\u0275inj=W({})}}return n})();var We=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=K({type:n})}static{this.\u0275inj=W({imports:[Re,G,G]})}}return n})();var it=["categoryHiddenBtn"],at=["subCategoryHiddenBtn"],ot=["isEnableHiddenButtons"],Ke=()=>["checkbox","Interface_Name","feature_Name","Do_Menu_Visible"],He=()=>["checkbox","Function_Name","Default_Value","Disabling_Value","Is_User_Configurable","For_System_User"];function rt(n,i){if(n&1&&(s(0,"option",15),h(1),r()),n&2){let e=i.$implicit;c("value",e.ID),l(),L(e.Module)}}function st(n,i){if(n&1&&(s(0,"option",15),h(1),r()),n&2){let e=i.$implicit;c("value",e.VariantID),l(),L(e.VariantName)}}function lt(n,i){if(n&1){let e=x();s(0,"div",19)(1,"button",48),f("click",function(){m(e);let a=u();return p(a.loadViewEditData("edit",!0))}),h(2,"INHERIT"),r()()}}function dt(n,i){n&1&&(s(0,"th",49),h(1,"Feature Name"),r())}function ct(n,i){if(n&1&&(s(0,"mat-icon"),h(1),r()),n&2){let e=u().index,t=u();l(),L(t.expandedRows[e]?"remove":"add")}}function ut(n,i){if(n&1){let e=x();s(0,"div",58)(1,"mat-checkbox",54),v("ngModelChange",function(a){let o=m(e).$implicit;return C(o.check,a)||(o.check=a),p(a)}),f("change",function(a){let o=m(e),d=o.$implicit,b=o.index,I=u(2),je=I.$implicit,ze=I.index,Qe=u();return p(Qe.onChildCheckboxChange(a,d,je,ze,b))}),h(2),r()()}if(n&2){let e=i.$implicit,t=u(3);l(),g("ngModel",e.check),c("disabled",t.mode==="view"),l(),E(" ",e.feature_Name," ")}}function ht(n,i){if(n&1&&(s(0,"div",56),_(1,ut,3,3,"div",57),r()),n&2){let e=u().$implicit;l(),c("ngForOf",e.children)}}function _t(n,i){if(n&1){let e=x();s(0,"td",50)(1,"div",51)(2,"button",52),f("click",function(){let a=m(e),o=a.$implicit,d=a.index,b=u();return p(b.toggleRow(d,o))}),_(3,ct,2,1,"mat-icon",53),r(),s(4,"mat-checkbox",54),v("ngModelChange",function(a){let o=m(e).$implicit;return C(o.check,a)||(o.check=a),p(a)}),f("change",function(a){let o=m(e),d=o.$implicit,b=o.index,I=u();return p(I.onParentCheckboxChange(a,d,b))}),h(5),r(),_(6,ht,2,1,"div",55),r()()}if(n&2){let e=i.$implicit,t=i.index,a=u();l(2),c("disabled",!(e.children.length>0)),H("aria-label","Toggle "+e.feature_Name),l(),c("ngIf",e.children.length>0),l(),g("ngModel",e.check),c("disabled",a.parentCheckBoxDisable(e)||a.mode==="view"),l(),E(" ",e.feature_Name," "),l(),c("ngIf",a.expandedRows[t]&&e.children)}}function mt(n,i){n&1&&(s(0,"th",49),h(1,"Category"),r())}function pt(n,i){if(n&1&&(s(0,"div",60),h(1),r()),n&2){let e=i.$implicit;l(),E(" ",e.category," ")}}function ft(n,i){if(n&1&&(s(0,"div",56),_(1,pt,2,1,"div",59),r()),n&2){let e=u().$implicit;l(),c("ngForOf",e.children)}}function gt(n,i){if(n&1&&(s(0,"td",50),h(1),_(2,ft,2,1,"div",55),r()),n&2){let e=i.$implicit,t=i.index,a=u();l(),E(" ",e.category," "),l(),c("ngIf",a.expandedRows[t]&&e.children)}}function Ct(n,i){n&1&&(s(0,"th",49),h(1,"Is Enabled"),r())}function vt(n,i){if(n&1){let e=x();s(0,"div",62)(1,"mat-checkbox",54),v("ngModelChange",function(a){let o=m(e).$implicit;return C(o.isEnable,a)||(o.isEnable=a),p(a)}),f("change",function(a){let o=m(e).$implicit,d=u(3);return p(d.onFeatureIsEnable(a,o))}),r()()}if(n&2){let e=i.$implicit,t=u(3);l(),g("ngModel",e.isEnable),c("disabled",!e.check||t.mode==="view")}}function xt(n,i){if(n&1&&(s(0,"div",56),_(1,vt,2,2,"div",61),r()),n&2){let e=u().$implicit;l(),c("ngForOf",e.children)}}function bt(n,i){if(n&1){let e=x();s(0,"td",50)(1,"mat-checkbox",54),v("ngModelChange",function(a){let o=m(e).$implicit;return C(o.isEnable,a)||(o.isEnable=a),p(a)}),f("change",function(a){let o=m(e).$implicit,d=u();return p(d.onFeatureIsEnable(a,o))}),r(),_(2,xt,2,1,"div",55),r()}if(n&2){let e=i.$implicit,t=i.index,a=u();l(),g("ngModel",e.isEnable),c("disabled",!e.check||a.mode==="view"),l(),c("ngIf",a.expandedRows[t]&&e.children)}}function yt(n,i){n&1&&(s(0,"th",49),h(1,"System Lvl"),r())}function Dt(n,i){if(n&1){let e=x();s(0,"div",62)(1,"input",63),v("ngModelChange",function(a){let o=m(e).$implicit;return C(o.features_Level,a)||(o.features_Level=a),p(a)}),f("input",function(a){let o=m(e).$implicit,d=u(3);return p(d.systemLvlChange(a,o))}),r()()}if(n&2){let e=i.$implicit,t=u(2).$implicit,a=u();l(),g("ngModel",e.features_Level),c("disabled",!t.check||a.mode==="view")}}function Mt(n,i){if(n&1&&(s(0,"div",56),_(1,Dt,2,2,"div",61),r()),n&2){let e=u().$implicit;l(),c("ngForOf",e.children)}}function wt(n,i){if(n&1){let e=x();s(0,"td",50)(1,"input",63),v("ngModelChange",function(a){let o=m(e).$implicit;return C(o.features_Level,a)||(o.features_Level=a),p(a)}),f("input",function(a){let o=m(e).$implicit,d=u();return p(d.systemLvlChange(a,o))}),r(),_(2,Mt,2,1,"div",55),r()}if(n&2){let e=i.$implicit,t=i.index,a=u();l(),g("ngModel",e.features_Level),c("disabled",!e.check||a.mode==="view"),l(),c("ngIf",a.expandedRows[t]&&e.children)}}function Et(n,i){n&1&&y(0,"tr",64)}function It(n,i){n&1&&y(0,"tr",65)}function St(n,i){if(n&1&&(s(0,"option",15),h(1),r()),n&2){let e=i.$implicit;c("value",e.featuresID),l(),E(" ",e.feature_Name," ")}}function kt(n,i){if(n&1){let e=x();s(0,"select",66),v("ngModelChange",function(a){m(e);let o=u();return C(o.selectedID,a)||(o.selectedID=a),p(a)}),f("change",function(a){m(e);let o=u();return p(o.featureNameChange(a))}),s(1,"option",16),h(2," Filter By Feature Name (All)"),r(),O(3,St,2,2,"option",15,A),r()}if(n&2){let e=u();g("ngModel",e.selectedID),l(3),P(e.featureName)}}function Tt(n,i){n&1&&y(0,"th",49)}function Vt(n,i){if(n&1){let e=x();s(0,"td",50)(1,"mat-checkbox",70),f("change",function(a){let o=m(e).$implicit,d=u(2);return p(d.onMenuCheckbox(a,o))}),v("ngModelChange",function(a){let o=m(e).$implicit;return C(o.check,a)||(o.check=a),p(a)}),r()()}if(n&2){let e=i.$implicit,t=u(2);l(),g("ngModel",e.check),c("disabled",t.mode==="view")}}function Ft(n,i){n&1&&(s(0,"th",49),h(1,"Menu Name "),r())}function Nt(n,i){if(n&1&&(s(0,"td",50),h(1),r()),n&2){let e=i.$implicit;l(),E(" ",e.interface_Name," ")}}function At(n,i){n&1&&(s(0,"th",49),h(1,"Feature Name "),r())}function Ot(n,i){if(n&1&&(s(0,"td",50),h(1),r()),n&2){let e=i.$implicit;l(),E(" ",e.feature_Name," ")}}function Pt(n,i){n&1&&(s(0,"th",49),h(1," Do Menu Visible "),r())}function Lt(n,i){if(n&1){let e=x();s(0,"td",50)(1,"mat-checkbox",71),v("ngModelChange",function(a){let o=m(e).$implicit;return C(o.do_Menu_Visible,a)||(o.do_Menu_Visible=a),p(a)}),r()()}if(n&2){let e=i.$implicit,t=u(2);l(),g("ngModel",e.do_Menu_Visible),c("disabled",!e.isDoMenuVisibleEnabled||t.mode==="view")}}function Bt(n,i){n&1&&y(0,"tr",64)}function Rt(n,i){n&1&&y(0,"tr",65)}function Wt(n,i){if(n&1&&(s(0,"div",28)(1,"table",29),D(2,67),_(3,Tt,1,0,"th",31)(4,Vt,2,2,"td",32),M(),D(5,68),_(6,Ft,2,0,"th",31)(7,Nt,2,1,"td",32),M(),D(8,30),_(9,At,2,0,"th",31)(10,Ot,2,1,"td",32),M(),D(11,69),_(12,Pt,2,0,"th",31)(13,Lt,2,2,"td",32),M(),_(14,Bt,1,0,"tr",36)(15,Rt,1,0,"tr",37),r()()),n&2){let e=u();l(),c("dataSource",e.menuData),l(13),c("matHeaderRowDef",B(4,Ke))("matHeaderRowDefSticky",!0),l(),c("matRowDefColumns",B(5,Ke))}}function Kt(n,i){n&1&&y(0,"th",49)}function Ht(n,i){if(n&1){let e=x();s(0,"td",50)(1,"mat-checkbox",80),f("change",function(a){let o=m(e).$implicit,d=u(2);return p(d.onSettingCheckbox(a,o))}),v("ngModelChange",function(a){let o=m(e).$implicit;return C(o.check,a)||(o.check=a),p(a)}),r()()}if(n&2){let e=i.$implicit,t=u(2);l(),c("disabled",t.mode==="view"),g("ngModel",e.check)}}function jt(n,i){n&1&&(s(0,"th",49),h(1,"Setting Name "),r())}function zt(n,i){if(n&1&&(s(0,"td",81),h(1),r()),n&2){let e=i.$implicit;l(),E(" ",e.function_Name," ")}}function Qt(n,i){n&1&&(s(0,"th",49),h(1," Default Value "),r())}function $t(n,i){if(n&1){let e=x();s(0,"input",85),v("ngModelChange",function(a){m(e);let o=u().$implicit;return C(o.default_Value,a)||(o.default_Value=a),p(a)}),r()}if(n&2){let e=u().$implicit,t=u(2);g("ngModel",e.default_Value),c("disabled",!e.check||t.mode==="view")}}function Ut(n,i){if(n&1){let e=x();s(0,"input",86),v("ngModelChange",function(a){m(e);let o=u().$implicit;return C(o.default_Value,a)||(o.default_Value=a),p(a)}),r()}if(n&2){let e=u().$implicit,t=u(2);g("ngModel",e.default_Value),c("disabled",!e.check||t.mode==="view")}}function qt(n,i){if(n&1){let e=x();s(0,"select",87),v("ngModelChange",function(a){m(e);let o=u().$implicit;return C(o.default_Value,a)||(o.default_Value=a),p(a)}),s(1,"option",15),h(2,"True "),r(),s(3,"option",15),h(4,"False "),r()()}if(n&2){let e=u().$implicit,t=u(2);g("ngModel",e.default_Value),c("disabled",!e.check||t.mode==="view"),l(),c("value",1),l(2),c("value",0)}}function Gt(n,i){if(n&1&&(s(0,"option",15),h(1),r()),n&2){let e=i.$implicit;c("value",e.Value),l(),Z("",e.Key," - ",e.Value," ")}}function Jt(n,i){if(n&1){let e=x();s(0,"select",87),v("ngModelChange",function(a){m(e);let o=u().$implicit;return C(o.default_Value,a)||(o.default_Value=a),p(a)}),O(1,Gt,2,3,"option",15,A),r()}if(n&2){let e=u().$implicit,t=u(2);g("ngModel",e.default_Value),c("disabled",!e.check||t.mode==="view"),l(),P(e.options)}}function Yt(n,i){if(n&1&&(s(0,"td",50),_(1,$t,1,2,"input",82)(2,Ut,1,2,"input",83)(3,qt,5,4,"select",84)(4,Jt,3,2,"select",84),r()),n&2){let e=i.$implicit;l(),N(e.dataType.toLowerCase()=="text"?1:e.dataType.toLowerCase()=="number"?2:e.dataType.toLowerCase()==="boolean"?3:4)}}function Xt(n,i){n&1&&(s(0,"th",49),h(1," Disabling Value"),r())}function Zt(n,i){if(n&1&&(s(0,"td",88),h(1),r()),n&2){let e=i.$implicit;l(),E(" ",e.disabling_Value,"")}}function en(n,i){n&1&&(s(0,"th",49),h(1," Is User Configurable "),r())}function tn(n,i){if(n&1){let e=x();s(0,"td",88)(1,"mat-checkbox",71),v("ngModelChange",function(a){let o=m(e).$implicit;return C(o.is_User_Configurable,a)||(o.is_User_Configurable=a),p(a)}),r()()}if(n&2){let e=i.$implicit,t=u(2);l(),g("ngModel",e.is_User_Configurable),c("disabled",!e.check||t.mode==="view")}}function nn(n,i){n&1&&(s(0,"th",49),h(1," System Lvl"),r())}function an(n,i){if(n&1){let e=x();s(0,"td",88)(1,"input",89),v("ngModelChange",function(a){let o=m(e).$implicit;return C(o.setting_Level,a)||(o.setting_Level=a),p(a)}),r()()}if(n&2){let e=i.$implicit,t=u(2);l(),g("ngModel",e.setting_Level),c("disabled",!e.check||t.mode==="view")}}function on(n,i){n&1&&y(0,"tr",64)}function rn(n,i){n&1&&y(0,"tr",65)}function sn(n,i){if(n&1&&(s(0,"div",28)(1,"table",29),D(2,67),_(3,Kt,1,0,"th",31)(4,Ht,2,2,"td",32),M(),D(5,72),_(6,jt,2,0,"th",31)(7,zt,2,1,"td",73),M(),D(8,74),_(9,Qt,2,0,"th",31)(10,Yt,5,1,"td",32),M(),D(11,75),_(12,Xt,2,0,"th",31)(13,Zt,2,1,"td",76),M(),D(14,77),_(15,en,2,0,"th",31)(16,tn,2,2,"td",76),M(),D(17,78),_(18,nn,2,0,"th",31)(19,an,2,2,"td",76),M(),_(20,on,1,0,"tr",36),s(21,"tbody",79),_(22,rn,1,0,"tr",37),r()()()),n&2){let e=u();l(),c("dataSource",e.settingData),l(19),c("matHeaderRowDef",B(4,He))("matHeaderRowDefSticky",!0),l(2),c("matRowDefColumns",B(5,He))}}var $=class n{constructor(i,e,t,a,o,d){this.apiService=i;this.location=e;this.route=t;this.router=a;this.tableFetchService=o;this.snackBarService=d;this.route.queryParams.subscribe(b=>{let I=b.mode;this.variantId=b.id,this.moduleId=b.mid,I&&this.variantId&&this.moduleId&&(I==="view"&&(this.mode="view"),I==="edit"&&(this.mode="edit"),this.loadViewEditData(this.mode))}),this.tableFetchService.emptyTableData()}systemLvlChange(i,e){let t=i.target.value;this.featureSave=this.featureSave.map(a=>a.featuresID===e.featuresID?q(U({},a),{features_Level:t}):a),console.log("Updated featureSave:",this.featureSave)}categoryHiddenButtons;subCategoryHiddenButtons;isEnableHiddenButtons;clickedTabIndex=0;formHeading="Variant Configuration ";mode="add";dataSource=[];module;variant;variantId;moduleId;settingData=[];allSettingData=[];menuData=[];allMenuData=[];menuSaveData=[];settingSaveData=[];expandedElement;doMenuVisible=!1;featureName=[];featureSave=[];selectedID="";isInherit;variantConfigtableData=R(()=>this.tableFetchService.tableData());childrenAccessor=i=>i.children??[];hasChild=(i,e)=>e.children&&e.children.length>0;expandedRows=[];featureTableColumnData=["feature_Name","category","isEnable","systemLvl"];featureColumn=[{header:"SEARCH BY",def:"search_By"},{header:"feature Name",def:"feature_Name"},{header:"category",def:"category"}];loadViewEditData(i,e){e&&(this.isInherit=!0),this.mode=i;let t={variantID:this.variantId,moduleID:this.moduleId,mode:this.mode};this.tableFetchService.getTableData("LoadFeaturesForVariantConfiguation",t),this.getViewApi("LoadFeaturesForVariantConfiguation",t),this.apiService.get("getAllVariants",{mode:this.isInherit?"add":this.mode,moduleId:this.moduleId}).subscribe(a=>{this.variant=a.result})}isExpanded(i){return console.log("expanded"),this.expandedElement===i}getViewApi(i,e){this.apiService.get(i,e).subscribe(t=>{if(t?.result&&t.result.length>0){this.dataSource=[...t.result],this.menuData=[...t.result2.variantInterfaceMenus],this.allMenuData=[...t.result2.variantInterfaceMenus],this.menuSaveData=[...t.result2.variantInterfaceMenus],this.settingData=[...t.result2.variantFunctionSettings],this.allSettingData=[...t.result2.variantFunctionSettings];let a=[...t.result];this.featureSave=a.filter(d=>d.check==1);let o=a.flatMap(d=>d.children||[]).filter(d=>d.check==1);this.featureSave=[...this.featureSave,...o],this.allSettingData=this.allSettingData.map(d=>{if(typeof d.options=="string")try{d.options=JSON.parse(d.options)}catch(b){console.error("Failed to parse options:",b)}return d}),this.menuData.forEach(d=>d.isDoMenuVisibleEnabled=!0),this.mode=="view"&&this.menuData.forEach(d=>d.check=1),this.filterByFeatureName()}})}ngOnInit(){this.apiService.get("getModule").subscribe(i=>{this.module=i.result}),this.mode=="add"&&this.apiService.get("getAllVariants",{mode:this.mode,moduleId:this.moduleId}).subscribe(i=>{this.variant=i.result}),this.expandedRows=new Array(this.dataSource.length).fill(!1)}toggleRow(i,e){this.expandedRows[i]=!this.expandedRows[i]}onParentCheckboxChange(i,e,t){this.onCheckboxChange(i,e),e.children&&e.children.forEach(a=>{a.check||(a.isEnable=!1)})}parentCheckBoxDisable(i){return i.children?.some(t=>t.check)}onChildCheckboxChange(i,e,t,a,o){if(console.log("child",e),e.check){let d=this.variantConfigtableData().find(b=>b.featuresID===e.mainFeatures);d.check||(d.check=1,this.onCheckboxChange(i,d))}this.onCheckboxChange(i,e),e.check||(e.isEnable=!1)}loadFeature(){this.menuSaveData=[],this.menuData=[],this.settingData=[],this.featureName=[];let i={variantID:this.variantId,moduleID:this.moduleId,mode:"Load"};this.tableFetchService.getTableData("LoadFeaturesForVariantConfiguation",i),this.apiService.get("LoadFeaturesForVariantConfiguation",i).subscribe(e=>{e?.result?.length>0&&(this.dataSource=[...e.result])})}goBack(){this.location.back()}onModuleIdChange(i){this.moduleId=i,this.variantId="",this.apiService.get("getAllVariants",{mode:this.mode,moduleId:this.moduleId}).subscribe(e=>{this.variant=e.result})}onCheckboxChange(i,e){if(e.isEnable=i.checked,i.checked){let t={featuresID:e.featuresID,moduleID:this.moduleId,mode:"Load"};this.apiService.get("getFeatureDetailsForVariantConfiguation",t).subscribe(a=>{let o=a.result;this.featureSave=[...this.featureSave,e],o.variantInterfaceMenus?.length>0&&(this.allMenuData=[...this.allMenuData,...o.variantInterfaceMenus],this.menuData=[...this.menuData,...o.variantInterfaceMenus],this.menuData.forEach(d=>d.check=1)),o.variantFunctionSettings?.length>0&&(this.allSettingData=[...this.allSettingData,...o.variantFunctionSettings],this.settingData=[...this.settingData,...o.variantFunctionSettings],this.settingData=this.settingData.map(d=>{if(typeof d.options=="string")try{d.options=JSON.parse(d.options)}catch(b){console.error("Failed to parse options:",b)}return d}),this.allSettingData=this.allSettingData.map(d=>{if(typeof d.options=="string")try{d.options=JSON.parse(d.options)}catch(b){console.error("Failed to parse options:",b)}return d})),this.filterByFeatureName(),this.onFeatureIsEnable(i,e)}),this.selectedID=e.featuresID,this.featureNameChange(void 0,e.featuresID)}else e.isEnable=!1,this.featureSave=this.featureSave.filter(t=>t.featuresID!==e.featuresID),this.menuData=this.allMenuData.filter(t=>t.featuresID!==e.featuresID),this.menuSaveData=this.menuSaveData.filter(t=>t.featuresID!==e.featuresID),this.settingData=this.allSettingData.filter(t=>t.featuresID!==e.featuresID),this.allMenuData=this.allMenuData.filter(t=>t.featuresID!==e.featuresID),this.allSettingData=this.allSettingData.filter(t=>t.featuresID!==e.featuresID),this.featureName=this.featureName.filter(t=>t.featuresID!==e.featuresID),this.selectedID=""}updateParentCheckboxState(i){if(i.mainFeatures){let e=this.dataSource.find(t=>t.featuresID===i.mainFeatures);e&&(e.isEnable=i.isEnable)}}onFeatureIsEnable(i,e){this.featureSave.forEach(t=>{e.featuresID===t.featuresID&&(t.isEnable=i.checked)}),this.menuData.forEach(t=>{e.featuresID===t.featuresID&&(t.do_Menu_Visible=i.checked,t.isDoMenuVisibleEnabled=i.checked)})}featureNameChange(i,e){let t=i?i.target.value:e;if(t==""){this.menuData=[...this.allMenuData],this.settingData=[...this.allSettingData];return}this.menuData=this.allMenuData.filter(a=>a.featuresID==t),this.settingData=this.allSettingData.filter(a=>a.featuresID==t)}onMenuCheckbox(i,e){i.checked?(e.check=1,e.do_Menu_Visible=!0,e.isDoMenuVisibleEnabled=!0,this.menuSaveData=[...this.menuSaveData,e]):(e.check=0,e.do_Menu_Visible=!1,e.isDoMenuVisibleEnabled=!1,this.menuSaveData=this.menuSaveData.filter(t=>t.MenuID!==e.menuID))}filterByFeatureName(){let i=new Set,e=[...this.allMenuData.map(({feature_Name:t,featuresID:a})=>({feature_Name:t,featuresID:a})),...this.allSettingData.map(({feature_Name:t,featuresID:a})=>({feature_Name:t,featuresID:a}))];this.featureName=e.filter(t=>{let a=t.feature_Name;return i.has(a)?!1:(i.add(a),!0)})}onSettingCheckbox(i,e){i.checked?e.check=1:e.check=0}onTabClick(i){let e=i.index;this.clickedTabIndex=e}submit(){this.menuSaveData=this.allMenuData.filter(e=>e.check),this.isInherit&&(this.mode="add"),this.allSettingData.forEach(e=>e.default_Value=String(e.default_Value)),console.log("casd ",this.featureSave),this.featureSave=this.featureSave.reduce((e,t)=>(e.push({features_Level:t.features_Level,featuresID:t.featuresID,isEnable:t.isEnable}),e),[]);let i={mode:this.mode,data:{variantID:this.variantId,moduleID:this.moduleId,variantInterfaceMenus:this.menuSaveData,variantFunctionSettings:this.allSettingData,features:this.featureSave}};this.apiService.post("saveVariantConfiguration",i).pipe(X(e=>{let t=e.error?.result||"Error while saving Feature Configuration!!";return this.snackBarService.showError(t),Y(()=>e)})).subscribe(e=>{this.snackBarService.showSuccess(e.result),this.router.navigate(["/variant-configuration"])})}static \u0275fac=function(e){return new(e||n)(w(Fe),w(ee),w(ae),w(oe),w(j),w(Ne))};static \u0275cmp=S({type:n,selectors:[["app-variant-configuration-form"]],viewQuery:function(e,t){if(e&1&&(k(it,5),k(at,5),k(ot,5)),e&2){let a;T(a=V())&&(t.categoryHiddenButtons=a),T(a=V())&&(t.subCategoryHiddenButtons=a),T(a=V())&&(t.isEnableHiddenButtons=a)}},standalone:!0,features:[F],decls:76,vars:15,consts:[[1,"container-main"],[1,"container","my-1","d-flex","justify-content-between","align-items-center"],[1,"col-md-6"],[1,"mb-0","heading"],[1,"col-md-6","d-flex","justify-content-end"],["id","save",1,"btn","me-2","px-4",3,"click","disabled"],["id","back",1,"btn","px-4",3,"click"],[1,"border-bottom","mb-3"],[1,"container-fluid","pb-5","px-5"],[1,"row","mb-2"],[1,"col-12","col-md-auto"],["for","mainMenu",1,"form-label","mb-0"],[1,"star"],[1,"col-12","col-md-3"],["id","modules",1,"form-select",3,"ngModelChange","ngModel","disabled"],[3,"value"],["value",""],[1,"col-12","col-md-1"],["id","load","type","button",1,"btn","me-2","px-4","py-1",3,"click","disabled"],[1,"col-12","col-md-1","ms-auto"],[1,"container-fluid","mb-2","p-0"],[1,"row"],[1,"col-md-6","mat-elevation-z2","p-0"],[1,"table-responsive","table1"],[1,"container"],[1,"h3","mt-2"],[1,"col-12"],[3,"columns"],[1,"table-size"],["mat-table","",1,"custom-table",3,"dataSource"],["matColumnDef","feature_Name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","category"],["matColumnDef","isEnable"],["matColumnDef","systemLvl"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"row","ms-1"],[1,"col-12","mat-elevation-z2","mb-2","p-0"],[1,"row","align-items-center"],[1,"col-md-12"],["animationDuration","0ms",1,"mt-2",3,"selectedTabChange"],["value","0","label","Menu Configuration"],["value","1","label","Setting Configuration"],[1,"filter"],[1,"form-control",3,"ngModel"],[1,"table-responsive"],["id","load","type","button",1,"btn","me-2","px-4","py-1",3,"click"],["mat-header-cell",""],["mat-cell",""],[1,"feature-tree-container"],["mat-icon-button","",1,"plus-icon",3,"click","disabled"],[4,"ngIf"],[3,"ngModelChange","change","ngModel","disabled"],["class","child",4,"ngIf"],[1,"child"],["class","child-feature-row",4,"ngFor","ngForOf"],[1,"child-feature-row"],["class","child-category-row",4,"ngFor","ngForOf"],[1,"child-category-row"],["class","child-enable-row",4,"ngFor","ngForOf"],[1,"child-enable-row"],["type","number","min","0","max","5",1,"form-control","system-input",3,"ngModelChange","input","ngModel","disabled"],["mat-header-row",""],["mat-row",""],[1,"form-control",3,"ngModelChange","change","ngModel"],["matColumnDef","checkbox"],["matColumnDef","Interface_Name"],["matColumnDef","Do_Menu_Visible"],[3,"change","ngModelChange","ngModel","disabled"],[3,"ngModelChange","ngModel","disabled"],["matColumnDef","Function_Name"],["mat-cell","","style","width: 12.5rem;",4,"matCellDef"],["matColumnDef","Default_Value"],["matColumnDef","Disabling_Value"],["mat-cell","","style","text-align: center;",4,"matCellDef"],["matColumnDef","Is_User_Configurable"],["matColumnDef","For_System_User"],[1,"mat-row"],[3,"change","ngModelChange","disabled","ngModel"],["mat-cell","",2,"width","12.5rem"],[1,"form-control",3,"ngModel","disabled"],["type","number","min","0",1,"form-control",3,"ngModel","disabled"],["name","","id","",1,"form-select",3,"ngModel","disabled"],[1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","number","min","0",1,"form-control",3,"ngModelChange","ngModel","disabled"],["name","","id","",1,"form-select",3,"ngModelChange","ngModel","disabled"],["mat-cell","",2,"text-align","center"],["type","number","min","0","max","5",1,"form-control","system-input",3,"ngModelChange","ngModel","disabled"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),h(4),r()(),s(5,"div",4)(6,"button",5),f("click",function(){return t.submit()}),h(7,"SAVE"),r(),s(8,"button",6),f("click",function(){return t.goBack()}),h(9,"BACK"),r()()(),y(10,"div",7),s(11,"div",8)(12,"div",9)(13,"div",10)(14,"label",11),h(15,"Module:"),s(16,"span",12),h(17,"*"),r()()(),s(18,"div",13)(19,"select",14),f("ngModelChange",function(o){return t.onModuleIdChange(o)}),v("ngModelChange",function(o){return C(t.moduleId,o)||(t.moduleId=o),o}),O(20,rt,2,2,"option",15,A),r()(),s(22,"div",10)(23,"label",11),h(24,"Variant Name:"),s(25,"span",12),h(26,"*"),r()()(),s(27,"div",13)(28,"select",14),v("ngModelChange",function(o){return C(t.variantId,o)||(t.variantId=o),o}),s(29,"option",16),h(30,"--Select--"),r(),O(31,st,2,2,"option",15,A),r()(),s(33,"div",17)(34,"button",18),f("click",function(){return t.loadFeature()}),h(35,"Load"),r()(),_(36,lt,3,0,"div",19),r(),s(37,"div",20)(38,"div",21)(39,"div",22)(40,"div",23)(41,"div",24)(42,"h3",25),h(43," Features"),r()(),s(44,"div",26),y(45,"app-generic-filter",27),r(),s(46,"div",28)(47,"table",29),D(48,30),_(49,dt,2,0,"th",31)(50,_t,7,7,"td",32),M(),D(51,33),_(52,mt,2,0,"th",31)(53,gt,3,2,"td",32),M(),D(54,34),_(55,Ct,2,0,"th",31)(56,bt,3,3,"td",32),M(),D(57,35),_(58,yt,2,0,"th",31)(59,wt,3,3,"td",32),M(),_(60,Et,1,0,"tr",36)(61,It,1,0,"tr",37),r()()()(),s(62,"div",2)(63,"div",38)(64,"div",39)(65,"div",40)(66,"div",41)(67,"mat-tab-group",42),f("selectedTabChange",function(o){return t.onTabClick(o)}),y(68,"mat-tab",43)(69,"mat-tab",44),r()()(),s(70,"div",45),_(71,kt,5,1,"select",46),r(),s(72,"div",47),_(73,Wt,16,6,"div",28)(74,sn,23,6,"div",28),y(75,"div"),r()()()()()()()()),e&2&&(l(4),L(t.formHeading),l(2),c("disabled",t.mode=="view"),l(13),g("ngModel",t.moduleId),c("disabled",t.mode==="view"||t.mode=="edit"||t.isInherit),l(),P(t.module),l(8),g("ngModel",t.variantId),c("disabled",t.mode==="view"||t.mode=="edit"&&!t.isInherit),l(3),P(t.variant),l(3),c("disabled",t.mode==="view"||t.mode=="edit"||t.isInherit||!t.moduleId||!t.variantId),l(2),N(t.mode==="view"?36:-1),l(9),c("columns",t.featureColumn),l(2),c("dataSource",t.variantConfigtableData()),l(13),c("matHeaderRowDef",t.featureTableColumnData)("matHeaderRowDefSticky",!0),l(),c("matRowDefColumns",t.featureTableColumnData),l(10),N(t.featureName.length>0?71:-1),l(2),N(t.clickedTabIndex===0?73:74))},dependencies:[z,ce,de,Be,Le,We,be,ue,_e,ge,me,he,Ce,pe,fe,ve,xe,Pe,Oe,Ve,Ie,Se,ye,we,Ee,De,Te,ke,Me,le,re,se,ie,te,ne],styles:["h4[_ngcontent-%COMP%], .h3[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.h3[_ngcontent-%COMP%]{color:#336799}label[_ngcontent-%COMP%], input[type=select][_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-weight:500}input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;line-height:normal}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{font-size:14px}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#007bff40;box-shadow:0 0 0 .1rem #007bff40}.star[_ngcontent-%COMP%]{color:red}#load[_ngcontent-%COMP%]{background-color:#4081bf;color:#fff;font-size:14px}#save[_ngcontent-%COMP%]{background-color:#336799;color:#fff;font-size:14px}#back[_ngcontent-%COMP%]{color:#336799;border:1px solid rgba(51,103,153,1);font-size:14px}#back[_ngcontent-%COMP%]:hover, #save[_ngcontent-%COMP%]:hover{background-color:#336899ac;color:#fff;border:none}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f6f6f6f5}tr[_ngcontent-%COMP%]:nth-child(2n)   .mat-tree-node[_ngcontent-%COMP%]{background-color:#f6f6f6f5}tr[_ngcontent-%COMP%]:nth-child(odd)   .mat-tree-node[_ngcontent-%COMP%]{background-color:#fffffff5}.mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;cursor:pointer;padding:0}.mat-mdc-header-row[_ngcontent-%COMP%]{border-top:1px solid gainsboro}.mat-mdc-row[_ngcontent-%COMP%]{overflow-y:auto}.custom-table[_ngcontent-%COMP%]{background-color:#fffdfd;overflow-y:auto}.system-input[_ngcontent-%COMP%]{width:4rem}.table-size[_ngcontent-%COMP%]{max-height:80vh;overflow-y:auto}.custom-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .custom-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:left;border-bottom:1px solid #ddd}.table-size[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.table-size[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1b0}.table-size[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#a5a5a5;border-radius:10px;border:2px solid #f1f1f1}.table-size[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#b0b0b0c0}.hiddenButton[_ngcontent-%COMP%]{display:none}.child-feature-row[_ngcontent-%COMP%], .child-category-row[_ngcontent-%COMP%], .child-subcategory-row[_ngcontent-%COMP%], .child-enable-row[_ngcontent-%COMP%]{display:flex;align-items:flex-end;min-height:48px}.child[_ngcontent-%COMP%]{padding-left:50px}.plus-icon[_ngcontent-%COMP%]{vertical-align:middle}"]})};var hi=[{path:"",component:Q},{path:":subpath",component:$}];export{hi as VariantConfig_routes};
