(self.webpackChunkimserp=self.webpackChunkimserp||[]).push([[4235],{49457:function(I,b){var f;void 0!==(f=function(){"use strict";function S(n,r,m){var a=new XMLHttpRequest;a.open("GET",n),a.responseType="blob",a.onload=function(){_(a.response,r,m)},a.onerror=function(){console.error("could not download file")},a.send()}function E(n){var r=new XMLHttpRequest;r.open("HEAD",n,!1);try{r.send()}catch{}return 200<=r.status&&299>=r.status}function d(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(r)}}var l="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,v=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),_=l.saveAs||("object"!=typeof window||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!v?function(n,r,m){var a=l.URL||l.webkitURL,u=document.createElement("a");u.download=r=r||n.name||"download",u.rel="noopener","string"==typeof n?(u.href=n,u.origin===location.origin?d(u):E(u.href)?S(n,r,m):d(u,u.target="_blank")):(u.href=a.createObjectURL(n),setTimeout(function(){a.revokeObjectURL(u.href)},4e4),setTimeout(function(){d(u)},0))}:"msSaveOrOpenBlob"in navigator?function(n,r,m){if(r=r||n.name||"download","string"!=typeof n)navigator.msSaveOrOpenBlob(function e(n,r){return typeof r>"u"?r={autoBom:!1}:"object"!=typeof r&&(console.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\ufeff",n],{type:n.type}):n}(n,m),r);else if(E(n))S(n,r,m);else{var a=document.createElement("a");a.href=n,a.target="_blank",setTimeout(function(){d(a)})}}:function(n,r,m,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof n)return S(n,r,m);var u="application/octet-stream"===n.type,F=/constructor/i.test(l.HTMLElement)||l.safari,A=/CriOS\/[\d]+/.test(navigator.userAgent);if((A||u&&F||v)&&typeof FileReader<"u"){var M=new FileReader;M.onloadend=function(){var i=M.result;i=A?i:i.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=i:location=i,a=null},M.readAsDataURL(n)}else{var L=l.URL||l.webkitURL,O=L.createObjectURL(n);a?a.location=O:location.href=O,a=null,setTimeout(function(){L.revokeObjectURL(O)},4e4)}});l.saveAs=_.saveAs=_,I.exports=_}.apply(b,[]))&&(I.exports=f)},82661:(I,b,o)=>{"use strict";o.d(b,{C:()=>O});var s=o(26215),f=o(53181),e=o(36336),S=o(92752);let E=(()=>{class i{constructor(t,c){this.dialogref=t,this.data=c,this.heading="Information",this.heading=c.header,this.message$=c.message}authResult(t){this.dialogref.close(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.so),e.Y36(f.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["result-dialog"]],decls:11,vars:4,consts:[[1,"modal-dialog","modal-md"],[1,"modal-content"],[1,"modal-header","custom-modal-header"],[1,"modal-title"],["aria-label","Close",1,"close",3,"click"],[1,"modal-body"],[2,"display","inline-block"]],template:function(t,c){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),e._uU(4),e.qZA(),e.TgZ(5,"div",4),e.NdJ("click",function(){return c.authResult(!0)}),e._uU(6,"\xd7"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"div",6),e._uU(9),e.ALo(10,"async"),e.qZA()()()),2&t&&(e.xp6(4),e.Oqu(c.heading),e.xp6(5),e.hij(" ",e.lcZ(10,2,c.message$)," "))},dependencies:[S.Ov],encapsulation:2}),i})();var d=o(67297),l=o(53074),v=o(14970),_=o(45365),n=o(67311);function r(i,g){1&i&&(e.TgZ(0,"h4",5),e._uU(1,"Your Fiscal Year is Changed. Year End Process will generate new sequence for transaction. Would you like to start Inventry year Ending Process ? "),e.qZA())}function m(i,g){1&i&&(e.TgZ(0,"h4",5),e._uU(1,"Your Fiscal Year is Changed.Please do year end process from Online portal and sync the transaction.If you want do back date Sales invoice Click Ok to continue.Thank you... "),e.qZA())}function a(i,g){if(1&i){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(t);const h=e.oxw();return e.KtG(h.YesClick())}),e._uU(1,"Yes"),e.qZA()}}function u(i,g){if(1&i){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(t);const h=e.oxw();return e.KtG(h.NoClick())}),e._uU(1,"No"),e.qZA()}}function F(i,g){if(1&i){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(t);const h=e.oxw();return e.KtG(h.offlinelineOK())}),e._uU(1,"OK"),e.qZA()}}let A=(()=>{class i{constructor(t,c,h,T,y,p){this.dialogref=t,this.authSerice=c,this.masterService=h,this.spinnerService=T,this.router=y,this.alertService=p}YesClick(){1!==this.masterService.userSetting.ENABLEOFFLINESALE&&(this.spinnerService.show("Processing...Please Wait..."),this.masterService.masterGetmethod("/yearEndingInventory").subscribe(t=>{"ok"===t.status?(this.authSerice.setSessionVariable("isIYE",1),this.dialogref.close(),this.alertService.success("The year end for inventory are done successfully..."),setTimeout(()=>{console.log("from logout"),this.router.navigate(["login",{logout:"logout"}]).then(()=>{window.location.reload()})},5e3)):(this.spinnerService.hide(),alert(t.result.error))},t=>{this.spinnerService.hide(),alert(JSON.parse(t._body))}))}NoClick(){this.authSerice.setSessionVariable("isIYE",2),this.dialogref.close()}offlinelineOK(){this.authSerice.setSessionVariable("isIYE",2),this.dialogref.close()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.so),e.Y36(d.e),e.Y36(l.P),e.Y36(v.V),e.Y36(_.F0),e.Y36(n.c))},i.\u0275cmp=e.Xpm({type:i,selectors:[["inventry-yearend-dialog"]],decls:8,vars:5,consts:[[1,"modal-content","modal-content-main-area",2,"width","100%"],[1,"modal-header"],["class","modal-title","id","myModalLabel",4,"ngIf"],[1,"modal-body"],["class","btn btn-info",3,"click",4,"ngIf"],["id","myModalLabel",1,"modal-title"],[1,"btn","btn-info",3,"click"]],template:function(t,c){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,r,2,0,"h4",2),e.YNc(3,m,2,0,"h4",2),e.qZA(),e.TgZ(4,"div",3),e.YNc(5,a,2,0,"button",4),e.YNc(6,u,2,0,"button",4),e.YNc(7,F,2,0,"button",4),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngIf",1!=c.masterService.userSetting.ENABLEOFFLINESALE),e.xp6(1),e.Q6J("ngIf",1==c.masterService.userSetting.ENABLEOFFLINESALE),e.xp6(2),e.Q6J("ngIf",1!=c.masterService.userSetting.ENABLEOFFLINESALE),e.xp6(1),e.Q6J("ngIf",1!=c.masterService.userSetting.ENABLEOFFLINESALE),e.xp6(1),e.Q6J("ngIf",1==c.masterService.userSetting.ENABLEOFFLINESALE))},dependencies:[S.O5],styles:[".md-dialog-container[_ngcontent-%COMP%]{height:auto!important;width:auto!important;overflow:hidden!important;box-shadow:0!important}.mat-dialog-container[_ngcontent-%COMP%]{background:transparent!important;box-shadow:none!important;margin-left:auto;margin-right:auto;overflow:hidden!important;height:350px!important}.auth-main[_ngcontent-%COMP%]{position:inherit!important;display:inherit!important}.cdk-overlay-pane[_ngcontent-%COMP%], .md-overlay-pane[_ngcontent-%COMP%]{height:auto!important}.cdk-overlay-pane[_ngcontent-%COMP%], .md-overlay-pane[_ngcontent-%COMP%]{flex:1 1 0}"]}),i})();var M=o(71180),L=o(62870);let O=(()=>{class i{constructor(t,c,h,T,y,p){this.gblstate=t,this._authService=c,this.authenticationService=h,this.masterService=T,this.router=y,this.dialog=p,this.viewPermission=[],this.userSetting={},this.enableFiscalYearEnd=!1,this.viewPermission=t.getGlobalSetting("View-Permission")||[],this.userSetting=this.masterService.userSetting}canActivate(t,c){const h=new s.X(""),T=h.asObservable(),y=this._authService.getAuth();let p="";null!=t.url[0]&&(p=t.url[0].path),console.log("path",p);let D=t.params.mode;if(void 0===D&&(D="list"),!y||!y.profile){h.next("Your session has expired. You have been logged out of your account in another tab. Please log in again to continue.");const Y=this.dialog.open(E,{hasBackdrop:!0,data:{header:"Information",message:T}});return this.authenticationService.setCurrentUserValue(null),this.router.navigate(["/login"]),setTimeout(()=>{Y.close()},1e4),!1}if(0===this._authService.getSessionVariable("isIYE")&&(this.dialog.closeAll(),this.dialog.open(A,{hasBackdrop:!0,data:{header:"Information",message:""}}),"dashboard"!==p))return!1;if(y&&y.profile&&"dashboard"===p||"ADMIN"===this._authService.getUserProfile().username.toUpperCase()||"patanjali_user"===this._authService.getUserProfile().username)return!0;if("addsientry"===p||"add-creditnote-itembase"===p){h.next("You are not authorize for this operation");const Y=this.dialog.open(E,{hasBackdrop:!0,data:{header:"Information",message:T}});return setTimeout(()=>(Y.close(),!1),2e3),!1}if("ADMIN"===this._authService.getUserProfile().username.toUpperCase()||"patanjali_user"===this._authService.getUserProfile().username)return console.log("MENURIGHTBLOCKEDADMIN",p),!0;const w=this._authService.getMenuRight(p,D);return p?!0===w.right||"list"===D&&!0===w.list:!0===w.list||void 0}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(M.q),e.LFG(d.e),e.LFG(L.$),e.LFG(l.P),e.LFG(_.F0),e.LFG(f.uw))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},63213:(I,b,o)=>{"use strict";o.d(b,{u:()=>E});var s=o(42326),f=o(36336),e=o(87584),S=o(45365);let E=(()=>{class d{constructor(v,_){this._trnMainService=v,this.arouter=_,this.activeurlpath=_._routerState.snapshot.url.split("/").pop()}transform(v){return console.log("field name",v),this.disableFieldInTransaction(v)}disableFieldInTransaction(v){switch(v){case"disableWareHouse":return(this._trnMainService.TrnMainObj.VoucherType==s.Km.TaxInvoice||"abbreviated-sales-invoice"==this._trnMainService.activeurlpath||"self-billing"==this._trnMainService.activeurlpath||"add-membership-sales-invoice"==this._trnMainService.activeurlpath||this._trnMainService.TrnMainObj.VoucherType==s.Km.DeliveryChalan||this._trnMainService.TrnMainObj.VoucherType==s.Km.PerformaSalesInvoice||this._trnMainService.TrnMainObj.VoucherType==s.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType==s.Km.DebitNote||this._trnMainService.TrnMainObj.VoucherType==s.Km.GoodsReceived||this._trnMainService.TrnMainObj.VoucherType==s.Km.OpeningStockBalance||this._trnMainService.TrnMainObj.VoucherType==s.Km.StockIssue||this._trnMainService.TrnMainObj.VoucherType==s.Km.StockIssueReturn||this._trnMainService.TrnMainObj.VoucherType==s.Km.BranchTransferIn||this._trnMainService.TrnMainObj.VoucherType==s.Km.BranchTransferOut||this._trnMainService.TrnMainObj.VoucherType==s.Km.RequisitionEntry||this._trnMainService.TrnMainObj.VoucherType==s.Km.RequisitionApproval||this._trnMainService.TrnMainObj.VoucherType==s.Km.Repack||this._trnMainService.TrnMainObj.VoucherType==s.Km.StockSettlement||this._trnMainService.TrnMainObj.VoucherType==s.Km.BatchAdjustment||"stockageing-report"==this.activeurlpath||"stock-issue-report"==this.activeurlpath||"stock-variance-report"==this.activeurlpath||"reorder-levelstock-report"==this.activeurlpath||"max-stocklevel-report"==this.activeurlpath||"minimum-stocklevel-report"==this.activeurlpath||"item-expiry-report"==this.activeurlpath||"stock-ledger-report"==this.activeurlpath||"stock-summary-report"==this.activeurlpath||"requisition-report"==this.activeurlpath||"openingstock-report"==this.activeurlpath)&&1==this._trnMainService.userSetting.UserWiseWarehouse;case"disableGridInMixedPurchase":return!!("VIEW"==this._trnMainService.TrnMainObj.Mode||1==this._trnMainService.disableAllFieldinPurchase||this._trnMainService.TrnMainObj.VoucherType==s.Km.DebitNote&&this._trnMainService.userSetting.REFBILLCOMPULSORINDNOTE)}}}return d.\u0275fac=function(v){return new(v||d)(f.Y36(e.p,16),f.Y36(S.gz,16))},d.\u0275pipe=f.Yjl({name:"disableField",type:d,pure:!0}),d})()}}]);