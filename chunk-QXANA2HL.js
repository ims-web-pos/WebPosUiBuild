import{a as H}from"./chunk-64DFXEA7.js";import{c as ge}from"./chunk-E6RLNZXV.js";import{a as $,b as J,c as X}from"./chunk-TUM3TSTP.js";import{$ as ae,D as Y,U as Z,V as ee,W as C,X as te,Y as ie,aa as ne,ca as oe,da as re,fa as le,ga as ce,ha as se,ia as me,la as ue,ma as pe,na as de,oa as fe,pa as P,qa as E,va as V}from"./chunk-6OITFAFU.js";import{j as U}from"./chunk-UNLELH36.js";import"./chunk-XAZLOLJU.js";import{$a as p,$b as I,Ab as _,Bb as y,Cb as n,Db as o,Eb as m,Hc as K,Ib as x,Kb as b,Kc as z,Lb as d,Nc as W,Pb as M,Qb as D,Rb as T,Tb as l,Ub as F,Vb as A,Xb as q,Yb as L,Zb as Q,_a as r,aa as j,fc as v,ka as k,pb as B,ta as f,tb as s,ua as g,vc as h,yb as S,z as G}from"./chunk-DSQJ5M6D.js";var O=class i{constructor(t){this.tableFetchService=t}featureTableColumns=h(()=>[...this.tableFetchService.tableColumns(),{header:"ACTION",def:"ACTION"}]);featureTableData=h(()=>[...this.tableFetchService.tableData()]);ngOnInit(){this.tableFetchService.getTableData("getAllFeatureConFiguration"),this.tableFetchService.selectedTab.set("feature-form")}static \u0275fac=function(e){return new(e||i)(p(P))};static \u0275cmp=k({type:i,selectors:[["app-feature-config"]],standalone:!0,features:[I],decls:9,vars:4,consts:[[1,"container","mt-3"],[1,"heading","fw-bold","fs-5"],[1,"border-bottom","border-secondary"],[1,"container","d-flex","flex-column","flex-grow-1"],[1,"row"],[1,"col-md-6","mt-2","ms-auto"],[3,"columns","dataSource"]],template:function(e,a){e&1&&(n(0,"div",0)(1,"h5",1),l(2,"Feature Configuration"),o()(),m(3,"div",2),n(4,"div",3)(5,"div",4)(6,"div",5),m(7,"app-generic-filter",6),o()(),m(8,"app-generic-table",6),o()),e&2&&(r(7),s("columns",a.featureTableColumns())("dataSource",a.featureTableData()),r(),s("columns",a.featureTableColumns())("dataSource",a.featureTableData()))},dependencies:[E,V]})};var N=class i{constructor(){}extractKeys(t,e){return t.map(a=>{let c={};return Object.keys(e).forEach(u=>{let w=e[u];u in a&&(c[w]=a[u])}),c})}static \u0275fac=function(e){return new(e||i)};static \u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})};var ve=["dialogHeader"],Se=["subCatdialogContent"],_e=["featureTablePopupContent"],ye=["dialogFooter"];function xe(i,t){if(i&1&&(n(0,"option",25),l(1),o()),i&2){let e=t.$implicit;s("value",e.ID),r(),F(e.Category)}}function Me(i,t){if(i&1&&(n(0,"option",25),l(1),o()),i&2){let e=t.$implicit;s("value",e.ID),r(),F(e.SubCategory)}}function De(i,t){if(i&1&&(n(0,"option",25),l(1),o()),i&2){let e=t.$implicit;s("value",e.ID),r(),F(e.Module)}}function Te(i,t){if(i&1&&(n(0,"option",25),l(1),o()),i&2){let e=t.$implicit;s("value",e.FeaturesID),r(),F(e.FeaturesName)}}function we(i,t){if(i&1&&(n(0,"div"),m(1,"app-generic-table",48),o()),i&2){let e=d();r(),s("columns",e.appMenuColumns)("dataSource",e.appMenuData())}}function ke(i,t){if(i&1&&(n(0,"div"),m(1,"app-generic-table",48),o()),i&2){let e=d();r(),s("columns",e.appSettingColumns)("dataSource",e.appSettingData())}}function Ie(i,t){if(i&1&&(n(0,"h4",49),l(1),o()),i&2){let e=d();r(),F(e.contentHeader)}}function Pe(i,t){if(i&1&&(n(0,"h4",49),l(1),o()),i&2){let e=d();r(),F(e.contentHeader)}}function Ee(i,t){if(i&1){let e=x();n(0,"div",11)(1,"div",50)(2,"div",51)(3,"label",52),l(4),o()(),n(5,"div",53)(6,"input",54),Q("ngModelChange",function(c){f(e);let u=d();return L(u.inputValue,c)||(u.inputValue=c),g(c)}),o()()()()}if(i&2){let e=d();r(4),A("",e.contentHeader," Name:"),r(2),q("ngModel",e.inputValue)}}function Ve(i,t){if(i&1){let e=x();n(0,"div",11)(1,"div",55),m(2,"app-generic-filter",48),n(3,"button",56),b("click",function(){f(e);let c=d();return g(c.onOkClick())}),l(4,"OK"),o()(),m(5,"app-generic-table",48),o()}if(i&2){let e=d();r(2),s("columns",e.featurePopupColumns())("dataSource",e.featurePopupData()),r(3),s("columns",e.featurePopupColumns())("dataSource",e.featurePopupData())}}function Oe(i,t){if(i&1){let e=x();n(0,"button",57),b("click",function(){f(e);let c=d();return g(c.saveSubCat())}),l(1,"Save"),o(),n(2,"button",58),l(3,"Cancel"),o()}}var R=class i{constructor(t,e,a,c,u,w,Ne){this.fb=t;this.apiService=e;this.route=a;this.tableFetchService=c;this.utilsService=u;this.location=w;this.dialog=Ne}dialogRef;featureForm;activePath;contentHeader;selectButtonLabel="Select Application Menu";selectedTabIndex=0;category=[];subCategory=[];module=[];mainFeatures=[];mode="add";inputValue;dialogHeader;subCatdialogContent;featureTablePopupContent;dialogFooter;featurePopupColumns=h(()=>[{header:"",def:"CHECKBOX"},...this.tableFetchService.featurePopupColumns()]);featurePopupData=h(()=>[...this.tableFetchService.featurePopupData()]);appMenuColumns;appSettingColumns;appMenuData=h(()=>[...this.tableFetchService.appMenuData()]);appSettingData=h(()=>[...this.tableFetchService.appSettingData()]);featureConfigData;ngOnInit(){this.route.queryParams.subscribe(t=>{let e=t.mode,a=t.id;e&&a&&(e==="view"&&(this.mode="view"),e==="edit"&&(this.mode="edit"),this.getViewApi("getFeatureByFeatureID",{featureID:a}))}),this.getData(),this.appMenuColumns=this.tableFetchService.appMenuColumns,this.appSettingColumns=this.tableFetchService.appSettingColumns,this.featureFormInit()}getData(){G({category:this.apiService.get("getCategory"),subCategory:this.apiService.get("getSubCategory"),module:this.apiService.get("getModule")}).subscribe(t=>{console.log(t),t.category?.result?.length>0&&(this.category=t.category.result),t.subCategory?.result?.length>0&&(this.subCategory=t.subCategory.result),t.module?.result?.length>0&&(this.module=t.module.result)})}getViewApi(t,e){this.apiService.get(t,e).subscribe(a=>{a?.result&&(this.featureConfigData=a.result,this.featureFormInit())})}featureFormInit(){this.featureForm=this.fb.group({mode:[this.mode||"",C.required],data:this.fb.group({description:[this.featureConfigData?.description||""],featuresID:[this.featureConfigData?.featuresID||""],featuresName:[this.featureConfigData?.featuresName||""],category:[this.featureConfigData?.category||"",C.required],subCategory:[this.featureConfigData?.subCategory||"",C.required],module:[this.featureConfigData?.module||"",C.required],isBasic:[this.featureConfigData?.isBasic||0],hasMainFeatures:[this.featureConfigData?.hasMainFeatures||0],mainFeatures:[this.featureConfigData?.mainFeatures||""],applicationMenu:[this.featureConfigData?.applicationMenu||[],C.required],applicationSetting:[this.featureConfigData?.applicationSetting||[],C.required]})}),this.featureConfigData?.applicationMenu?.length>0&&this.tableFetchService.appMenuData.set([...this.featureConfigData?.applicationMenu]),this.featureConfigData?.applicationSetting?.length>0&&this.tableFetchService.appSettingData.set([...this.featureConfigData?.applicationSetting]),this.toggleMainFeature(0),this.featureForm.get("data.hasMainFeatures")?.valueChanges.subscribe(t=>{this.toggleMainFeature(t)}),this.mode=="view"&&this.featureForm.disable()}toggleMainFeature(t){t==1?(this.featureForm.get("data.mainFeatures")?.enable(),this.featureForm.get("data.mainFeatures")?.setValidators([C.required]),this.mainFeatures?.length==0&&this.apiService.get("getMainFeatures").subscribe(e=>{e?.result?.length>0&&(this.mainFeatures=e.result)})):(this.featureForm.get("data.mainFeatures")?.disable(),this.featureForm.get("data.mainFeatures")?.clearValidators()),this.featureForm.get("data.mainFeatures")?.updateValueAndValidity()}openDialog(t){this.contentHeader=t,this.dialog.open(H,{disableClose:!0,panelClass:"custom-dialog",data:{contentHeader:this.dialogHeader,contentTemplate:this.subCatdialogContent,contentFooter:this.dialogFooter},width:"35vw",height:"auto"})}onTabClick(t){switch(this.selectedTabIndex=t?.index,t?.index){case 0:this.selectButtonLabel="Select Application Menu";break;case 1:this.selectButtonLabel="Select application setting";break}}popupButtonClick(){this.selectedTabIndex==0?(this.contentHeader="Application Menu List",this.tableFetchService.getFeaturePopupData("getApplicationMenu")):(this.contentHeader="Application Setting List",this.tableFetchService.getFeaturePopupData("getApplicationSetting")),this.dialogRef=this.dialog.open(H,{disableClose:!0,data:{contentHeader:this.dialogHeader,contentTemplate:this.featureTablePopupContent},maxWidth:"80vw",height:"70vh"})}onOkClick(){this.selectedTabIndex==0?(this.tableFetchService.appMenuData.set(this.tableFetchService.selectedPopupRows),this.tableFetchService.selectedPopupRows=[]):(this.tableFetchService.appSettingData.set(this.tableFetchService.selectedPopupRows),this.tableFetchService.selectedPopupRows=[]),this.dialogRef.close()}saveSubCat(){let t;t={mode:this.mode,data:{subcategoryName:this.inputValue}},this.apiService.post("saveSubCategory",t).subscribe(e=>{this.dialog.closeAll(),this.getData()})}onFeatureSave(){let t=this.utilsService.extractKeys([...this.appMenuData()],{MenuID:"menuID"}),e=this.utilsService.extractKeys([...this.appSettingData()],{Setting_Name:"settingName"});this.featureForm.get("data.applicationMenu")?.setValue(t),this.featureForm.get("data.applicationSetting")?.setValue(e),this.featureForm.get("data.isBasic")?.setValue(this.featureForm.get("data.isBasic")?.value?1:0),this.featureForm.get("data.hasMainFeatures")?.setValue(this.featureForm.get("data.hasMainFeatures")?.value?1:0);let a=this.featureForm.getRawValue();this.featureForm.invalid||this.apiService.post("saveFeatureConfiguration",a).subscribe(c=>{this.resetFeatureForm()})}resetFeatureForm(){this.featureForm.reset(),this.category=[],this.subCategory=[],this.module=[],this.mainFeatures=[],this.tableFetchService.appMenuData.set([]),this.tableFetchService.appSettingData.set([])}ngOnDestroy(){this.resetFeatureForm()}back(){this.location.back()}static \u0275fac=function(e){return new(e||i)(p(ue),p(fe),p(U),p(P),p(N),p(K),p(ge))};static \u0275cmp=k({type:i,selectors:[["app-feature-form"]],viewQuery:function(e,a){if(e&1&&(M(ve,7),M(Se,7),M(_e,7),M(ye,7)),e&2){let c;D(c=T())&&(a.dialogHeader=c.first),D(c=T())&&(a.subCatdialogContent=c.first),D(c=T())&&(a.featureTablePopupContent=c.first),D(c=T())&&(a.dialogFooter=c.first)}},standalone:!0,features:[I],decls:86,vars:8,consts:[["subCatdialogHeader",""],["dialogHeader",""],["subCatdialogContent",""],["featureTablePopupContent",""],["dialogFooter",""],[1,"my-3","d-flex","justify-content-between","align-items-center"],[1,"heading","mb-0"],[1,"pe-5"],["id","save",1,"btn","btn-primary","me-2","px-4",3,"click","disabled"],["id","back",1,"btn","px-4",3,"click"],[1,"border-bottom","mb-3"],[1,"container"],[3,"formGroup"],[1,"container",3,"formGroupName"],[1,"row","g-3"],[1,"col-md-6"],[1,"mb-3"],["for","featureName",1,"form-label"],[1,"star"],["type","text","id","featureName","formControlName","featuresName",1,"form-control","px-2","py-1"],["for","description",1,"form-label"],["id","description","formControlName","description",1,"form-control","px-1","py-1"],[1,"row","mb-3"],["for","category",1,"form-label"],["id","category","formControlName","category",1,"form-select","px-2","py-1"],[3,"value"],["for","subCategory",1,"form-label"],[1,"input-group"],["id","subCategory","formControlName","subCategory",1,"form-select","px-2","py-1"],["type","button",1,"dialog-button",3,"click","disabled"],["src","assets/images/addButton.png","alt","addicon"],["for","modules",1,"form-label"],["id","modules","formControlName","module",1,"form-select","px-2","py-1"],[1,"row","align-items-center"],[1,"col-md-4"],["type","checkbox","id","isBasicFeature","formControlName","isBasic",1,"form-check-input","me-2"],["for","isBasicFeature",1,"form-check-label"],["type","checkbox","id","hasMainFeatures","formControlName","hasMainFeatures",1,"form-check-input","me-2"],["for","hasMainFeatures",1,"form-check-label"],["for","mainFeature",1,"form-label"],["id","mainFeature","formControlName","mainFeatures",1,"form-select","px-2","py-1"],[1,"row","align-items-center","my-2"],["animationDuration","0ms",1,"mt-2",3,"selectedTabChange"],["value","0","label","Application Menu"],["value","1","label","Application Setting Configuration"],[1,"col-md-6","d-flex","justify-content-end"],[1,"btn","ok-btn","px-5","ms-3",3,"click","disabled"],[4,"ngIf"],[3,"columns","dataSource"],["mat-dialog-title","",1,"text-white","mb-0","mx-3"],[1,"row"],[1,"col-lg-4","col-md-5","col-11","px-0"],["for","sub-category",1,"form-label","text-body","mt-1"],[1,"col-lg-7","col-md-6","col-11","px-0"],["type","text",1,"form-control","px-2","py-1",3,"ngModelChange","ngModel"],[1,"d-flex","align-items-center","justify-content-between","mb-2"],[1,"btn","ok-btn","px-5","ms-3",3,"click"],["type","button","id","save",1,"btn","px-4","m-2",3,"click"],["mat-dialog-close","","type","button","id","close",1,"btn","px-4"]],template:function(e,a){if(e&1){let c=x();n(0,"div",5)(1,"h4",6),l(2,"Feature Registration"),o(),n(3,"div",7)(4,"button",8),b("click",function(){return f(c),g(a.onFeatureSave())}),l(5,"SAVE"),o(),n(6,"button",9),b("click",function(){return f(c),g(a.back())}),l(7,"BACK"),o()()(),m(8,"div",10),n(9,"div",11)(10,"form",12)(11,"div",13)(12,"div",14)(13,"div",15)(14,"div",16)(15,"label",17),l(16,"Feature Name: "),n(17,"span",18),l(18,"*"),o()(),m(19,"input",19),o(),n(20,"div",16)(21,"label",20),l(22,"Description: "),n(23,"span",18),l(24,"*"),o()(),m(25,"textarea",21),o()(),n(26,"div",15)(27,"div",22)(28,"div",15)(29,"label",23),l(30,"Category:"),o(),n(31,"select",24),_(32,xe,2,2,"option",25,S),o()(),n(34,"div",15)(35,"label",26),l(36,"Sub Category:"),o(),n(37,"div",27)(38,"select",28),_(39,Me,2,2,"option",25,S),o(),n(41,"button",29),b("click",function(){return f(c),g(a.openDialog("Sub Category"))}),m(42,"img",30),o()()()(),n(43,"div",16)(44,"label",31),l(45,"Modules: "),n(46,"span",18),l(47,"*"),o()(),n(48,"select",32),_(49,De,2,2,"option",25,S),o()(),n(51,"div",33)(52,"div",34),m(53,"input",35),n(54,"label",36),l(55,"Is Basic Feature"),o()(),n(56,"div",34),m(57,"input",37),n(58,"label",38),l(59,"Has Main Feature"),o()(),n(60,"div",34)(61,"label",39),l(62,"Main Feature"),o(),n(63,"select",40),_(64,Te,2,2,"option",25,S),o()()()()()()(),n(66,"div",41)(67,"div",15)(68,"mat-tab-group",42),b("selectedTabChange",function(w){return f(c),g(a.onTabClick(w))}),m(69,"mat-tab",43)(70,"mat-tab",44),o()(),n(71,"div",45)(72,"button",46),b("click",function(){return f(c),g(a.popupButtonClick())}),l(73),o()()(),B(74,we,2,2,"div",47)(75,ke,2,2,"div",47),o(),B(76,Ie,2,1,"ng-template",null,0,v)(78,Pe,2,1,"ng-template",null,1,v)(80,Ee,7,2,"ng-template",null,2,v)(82,Ve,6,4,"ng-template",null,3,v)(84,Oe,4,0,"ng-template",null,4,v)}e&2&&(r(4),s("disabled",a.mode=="view"),r(6),s("formGroup",a.featureForm),r(),s("formGroupName","data"),r(21),y(a.category),r(7),y(a.subCategory),r(2),s("disabled",a.mode=="view"),r(8),y(a.module),r(15),y(a.mainFeatures),r(8),s("disabled",a.mode=="view"),r(),A("",a.selectButtonLabel,">"),r(),s("ngIf",a.selectedTabIndex==0),r(),s("ngIf",a.selectedTabIndex==1))},dependencies:[W,z,de,ne,se,me,ee,Z,ce,te,ie,oe,le,re,pe,ae,X,$,J,Y,V,E],styles:["h4[_ngcontent-%COMP%]{font-size:20px;font-weight:500}label[_ngcontent-%COMP%], input[type=select][_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-weight:500}.heading[_ngcontent-%COMP%]{margin-left:7rem}.star[_ngcontent-%COMP%]{color:red}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{font-size:14px}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#007bff40;box-shadow:0 0 0 .1rem #007bff40}.input-group[_ngcontent-%COMP%]{display:flex;align-items:center}.dialog-button[_ngcontent-%COMP%]{padding:0;background-color:transparent;border:none;margin-left:5px;cursor:pointer}.footer[_ngcontent-%COMP%]{width:100vw;position:fixed;bottom:5px;padding:1rem;background-color:#ffffff26;box-shadow:0 0 0 .2rem #7e7e7e22;border-top:1px solid #dee2e6}#save[_ngcontent-%COMP%]{background-color:#336799;color:#fff;font-size:14px;border:none}#back[_ngcontent-%COMP%]{color:#336799;border:1px solid rgba(51,103,153,1);font-size:14px}#save[_ngcontent-%COMP%]:hover, #back[_ngcontent-%COMP%]:hover{background-color:#336799cc;color:#fff}.form-check-input[_ngcontent-%COMP%]{height:1.1rem;width:1.1rem;margin-right:.5rem}.form-check-label[_ngcontent-%COMP%]{margin-left:.5rem}@media (min-width: 768px){.row.g-3[_ngcontent-%COMP%] > .col-md-4[_ngcontent-%COMP%], .row.g-3[_ngcontent-%COMP%] > .col-md-2[_ngcontent-%COMP%]{padding-right:15px;padding-left:15px}}.dialog-button[_ngcontent-%COMP%]{padding:0;background-color:transparent;border:none}.ok-btn[_ngcontent-%COMP%]{background-color:#4081bf;color:#fff;font-size:15px;font-weight:500}.search-button[_ngcontent-%COMP%]{background-color:#007bff;border:none;border-radius:4px;padding:3px 12px;cursor:pointer}.check-box[_ngcontent-%COMP%]{height:1.1rem;width:1.1rem}"]})};var dt=[{path:"",component:O},{path:"feature-form",component:R}];export{dt as Feature_routes};
