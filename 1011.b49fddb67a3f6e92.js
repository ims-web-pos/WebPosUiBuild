"use strict";(self.webpackChunkimserp=self.webpackChunkimserp||[]).push([[1011],{62106:(f,p,n)=>{n.d(p,{A:()=>h});var c=n(69401),l=n(36336);let h=(()=>{class m{}return m.\u0275fac=function(u){return new(u||m)},m.\u0275mod=l.oAB({type:m}),m.\u0275inj=l.cJS({imports:[c.m]}),m})()},82738:(f,p,n)=>{n.d(p,{b:()=>y});var c=n(92752),l=n(72533),h=n(87584),m=n(71800),M=n(53074),u=n(36336);let y=(()=>{class s{static forRoot(){return{ngModule:s,providers:[M.P,h.p]}}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=u.oAB({type:s}),s.\u0275inj=u.cJS({imports:[c.ez,m.zk.forRoot(),l.JX]}),s})()},21011:(f,p,n)=>{n.r(p),n.d(p,{PaymentModeMasterModule:()=>x});var c=n(69401),l=n(92752),h=n(72533),m=n(82738),M=n(71800),u=n(53181),y=n(85245),s=n(63504),E=n(19102),e=n(36336),C=n(14970),P=n(67311),v=n(6936),g=n(3629),A=n(53074),T=n(67297),R=n(87584),O=n(28698);const D=["paymentModeName"],S=["genericGridACID"];function N(i,d){1&i&&(e.TgZ(0,"div")(1,"p",43),e._uU(2,"* The maximum characters is 50"),e.qZA()())}function F(i,d){1&i&&(e.TgZ(0,"option",44),e._uU(1,"CREDIT"),e.qZA())}function I(i,d){1&i&&(e.TgZ(0,"option",45),e._uU(1,"CREDITCARD"),e.qZA())}function _(i,d){if(1&i&&(e.TgZ(0,"option",46),e._uU(1),e.qZA()),2&i){const o=d.$implicit;e.Q6J("value",o),e.xp6(1),e.Oqu(o)}}const U=[{path:"",component:y.U},{path:"add-payment-mode",component:(()=>{class i{constructor(o,t,r,a,w,G,Y,J,k){this.fb=o,this.spinnerService=t,this.alertService=r,this.paymentModeService=a,this.router=w,this.masterService=G,this._activatedRoute=Y,this.authService=J,this.transactionService=k,this.isList=0,this.ACNAME="",this.mode="new",this.viewMode=!1,this.modeTitle="",this.usedSno=[],this.numbers=[],this.gridPopupSettingsForACID=new E.sG,this.userSetting=this.authService.getSetting()}updown(o){"Escape"===o.code&&(o.preventDefault(),this.router.navigate(["./pages/masters/payment-mode-master"]))}ngOnInit(){for(let o=1;o<=100;o++)this.numbers.push(o);console.log("islist",this.isList),this.paymentModeService.getPaymentModesList().subscribe(o=>{o?(this.paymentModeLists=o||[],Array.isArray(this.paymentModeLists)&&(this.usedSno=this.paymentModeLists.map(t=>t.SNO)),console.log("this.paymentModeLists",this.paymentModeLists,this.usedSno)):this.paymentModeLists=[]},o=>{this.paymentModeLists=[]});try{if(this.paymentModeForm=this.fb.group({PAYMENTMODENAME:["",[s.kI.required,s.kI.maxLength(50)]],ACID:[null],OTPREQUIRED:[0],QRREQUIRED:[0],PrintReceipt:[0],ShortCutKey:[null],OLDPAYMENTMODENAME:[""],SQLSTRING:[null,[s.kI.required]],MODETYPE:[null],MODE:[null,[s.kI.required]],REMARKSCAPTION:[null],SNO:["",[s.kI.required]],HideOnNonTenderUI:[0],ACNAME:[null,[s.kI.required]]}),this._activatedRoute.snapshot.params.mode&&("view"===this._activatedRoute.snapshot.params.mode&&(this.viewMode=!0,this.mode="view",this.AllFieldDisabled()),"new"===this._activatedRoute.snapshot.params.mode&&this.paymentModeForm.get("SQLSTRING").disable()),this._activatedRoute.snapshot.params.returnUrl&&(this.returnUrl=this._activatedRoute.snapshot.params.returnUrl),this._activatedRoute.snapshot.params.name){let o="";o=this._activatedRoute.snapshot.params.name,this.spinnerService.show("Getting data, Please wait..."),this.paymentModeService.getPaymentModeDetails(o).subscribe(t=>{if(console.log("data ma k aaucha",t),"ok"===t.status){this.spinnerService.hide(),this.paymentModeForm.patchValue({PAYMENTMODENAME:t.result.PAYMENTMODENAME,ACID:t.result.ACID,OTPREQUIRED:t.result.OTPREQUIRED,QRREQUIRED:t.result.QRREQUIRED,PrintReceipt:t.result.PrintReceipt,ShortCutKey:t.result.ShortCutKey,OLDPAYMENTMODENAME:t.result.PAYMENTMODENAME,SQLSTRING:t.result.SQLSTRING?.toUpperCase(),MODETYPE:t.result.MODETYPE,MODE:t.result.MODE,REMARKSCAPTION:t.result.REMARKSCAPTION,SNO:t.result.SNO,HideOnNonTenderUI:t.result.HideOnNonTenderUI,ACNAME:t.result.ACNAME}),this.blockPaymentModeEdit=t.result.blockPaymentModeEdit;let r=this.blockPaymentModeEdit;if(console.log("test blockeditmode",r),r&&(this.viewMode=!0,this.AllFieldDisabled()),this.ACNAME=t.result.ACNAME,console.log("here",this.paymentModeForm.value.MODETYPE,this.paymentModeForm.value),"LIST"==this.paymentModeForm.value.MODETYPE&&(this.isList=1,this.paymentModeForm.get("SQLSTRING").enable()),"edit"===this._activatedRoute.snapshot.params.mode){this.modeTitle="Edit Payment Mode",this.mode="edit";let a=this.paymentModeForm.get("MODE").value;if(r)switch(a){case"CREDIT":case"CREDITCARD":this.paymentModeForm.get("SQLSTRING").disable()}}else"view"===this._activatedRoute.snapshot.params.mode&&(this.mode="view",this.modeTitle="View Payment Mode",this.paymentModeForm.get("SQLSTRING").disable())}else this.alertService.error(t.result)},t=>{this.spinnerService.hide(),this.alertService.error(t._body)})}else this.mode="new",this.modeTitle="Add Payment Mode";this.paymentModeForm.get("MODE").valueChanges.subscribe(o=>{this.updateFieldsBasedOnMode(o)}),this.updateFieldsBasedOnMode(this.paymentModeForm.get("MODE").value)}catch(o){this.alertService.error(o)}}get paymentModeControl(){return this.paymentModeForm.get("PAYMENTMODENAME")}getAllPaymentMode(){}ngAfterViewInit(){setTimeout(()=>this.paymentModeNameEl.nativeElement.focus())}onSubmit(){this.assignCheckBoxValue();const o=this.paymentModeForm.get("PAYMENTMODENAME").value;"edit"!==this.mode&&this.paymentModeLists.some(r=>r.PAYMENTMODENAME.toLowerCase()===o.toLowerCase())?this.alertService.error(`Payment Mode "${o}" already exists. Please use a unique name.`):(console.log("PAYMENTform",this.paymentModeForm.value),this.spinnerService.show("Data is Saving ..."),this.paymentModeService.savePaymentMode(this.paymentModeForm.value,this.mode).subscribe(t=>{console.log("response catch",t),"ok"==t.status?(this.spinnerService.hide(),this.alertService.success(t.result),setTimeout(()=>{this.alertService.hide()},500),this.paymentModeForm.reset(),this.transactionService.paymentmodeVoucherType="new",this.router.navigate(["./pages/masters/payment-mode-master"]),console.log("response catch",t)):(this.alertService.error(t.result),this.spinnerService.hide())},t=>{this.spinnerService.hide()}))}assignCheckBoxValue(){this.paymentModeForm.get("OTPREQUIRED").setValue(this.paymentModeForm.value.OTPREQUIRED=this.paymentModeForm.value.OTPREQUIRED?1:0),this.paymentModeForm.get("QRREQUIRED").setValue(this.paymentModeForm.value.QRREQUIRED=this.paymentModeForm.value.QRREQUIRED?1:0),this.paymentModeForm.get("PrintReceipt").setValue(this.paymentModeForm.value.PrintReceipt=this.paymentModeForm.value.PrintReceipt?1:0),this.paymentModeForm.get("HideOnNonTenderUI").setValue(this.paymentModeForm.value.HideOnNonTenderUI=this.paymentModeForm.value.HideOnNonTenderUI?1:0)}acidEnterCommand(o){this.getACIDList(),this.genericGridACID.show()}getACIDList(){this.gridPopupSettingsForACID={title:"ACNAME List",apiEndpoints:"/getAccountPagedListByMapId/Master/Payment Mode Master",defaultFilterIndex:1,useDefinefilterValue:"",columns:[{key:"ACCODE",title:"ACCODE",hidden:!1,noSearch:!1},{key:"ACNAME",title:"NAME",hidden:!1,noSearch:!1}]}}onACIDSelected(o){console.log("value for acid",o),this.paymentModeForm.patchValue({ACID:o.ACID,ACNAME:o.ACNAME})}checkChangeforislist(o){1==o?(this.isList=1,this.paymentModeForm.get("SQLSTRING").enable(),this.paymentModeForm.controls.MODETYPE.patchValue("LIST")):(this.isList=0,this.paymentModeForm.get("SQLSTRING").disable(),this.paymentModeForm.controls.SQLSTRING.patchValue(null),this.paymentModeForm.controls.MODETYPE.patchValue(null))}keyPress(o){const r=String.fromCharCode(o.charCode);/[\b]/.test(r)||o.preventDefault()}updateFieldsBasedOnMode(o){switch(o){case"CREDIT":case"CREDITCARD":case"OTHER":this.paymentModeForm.get("ACNAME").reset(),this.paymentModeForm.get("ACNAME").disable(),this.paymentModeForm.get("SQLSTRING").enable();break;case null:this.paymentModeForm.get("ACNAME").enable(),this.paymentModeForm.get("SQLSTRING").disable();break;default:"view"!=this.mode&&(this.paymentModeForm.get("ACNAME").enable(),this.paymentModeForm.get("SQLSTRING").disable())}}checkForDuplicate(o){const t=this.paymentModeForm.get("SNO").value,r=Number(t);this.usedSno.includes(r)&&(confirm("Duplicate Serial Number encountered. Proceed or not?")||(this.paymentModeForm.get("SNO").reset(),o.target.value=""))}ResetSqlString(){("edit"==this.mode||"new"==this.mode)&&(this.paymentModeForm.get("SQLSTRING").reset(),this.paymentModeForm.get("ACID").reset())}AllFieldDisabled(){this.paymentModeForm.get("PAYMENTMODENAME").disable(),this.paymentModeForm.get("OTPREQUIRED").disable(),this.paymentModeForm.get("QRREQUIRED").disable(),this.paymentModeForm.get("PrintReceipt").disable(),this.paymentModeForm.get("MODE").disable(),this.paymentModeForm.get("SQLSTRING").disable(),this.paymentModeForm.get("REMARKSCAPTION").disable(),this.paymentModeForm.get("ACID").disable(),this.paymentModeForm.get("SNO").disable(),this.paymentModeForm.get("HideOnNonTenderUI").disable()}}return i.\u0275fac=function(o){return new(o||i)(e.Y36(s.qu),e.Y36(C.V),e.Y36(P.c),e.Y36(v.a),e.Y36(g.F0),e.Y36(A.P),e.Y36(g.gz),e.Y36(T.e),e.Y36(R.p))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-payment-mode-form"]],viewQuery:function(o,t){if(1&o&&(e.Gf(D,5),e.Gf(S,5)),2&o){let r;e.iGM(r=e.CRH())&&(t.paymentModeNameEl=r.first),e.iGM(r=e.CRH())&&(t.genericGridACID=r.first)}},hostBindings:function(o,t){1&o&&e.NdJ("keydown",function(a){return t.updown(a)},!1,e.evT)},decls:68,vars:11,consts:[[1,"sticky-top","row"],[1,"col-md-4"],[1,"col-md-8"],[1,"row","pull-right","mx-2"],[3,"formGroup","ngSubmit"],["type","submit",1,"btn","btn-info",2,"font-size","12px",3,"disabled"],["type","button","routerLink","/pages/masters/payment-mode-master",1,"btn","btn-info",2,"font-size","12px"],[1,"card"],[1,"card-header",2,"background-color","#336799"],[1,"page-title",2,"color","white"],[1,"card-body"],[1,"form-horizontal",2,"margin-top","15px",3,"formGroup","ngSubmit"],[1,"form-content"],[1,"left-side"],[1,"form-group"],["for","paymentMode"],["type","text","id","paymentMode","formControlName","PAYMENTMODENAME","autocomplete","off",1,"form-control",3,"readOnly"],["paymentModeName",""],[4,"ngIf"],["for","modes"],["id","modes","formControlName","MODE",1,"form-control",3,"change"],["value",""],["value","CREDIT",4,"ngIf"],["value","CREDITCARD",4,"ngIf"],["value","OTHER"],["value","FIXED"],["for","account"],["type","text","formControlName","ACNAME","placeholder","Press ENTER to ACID","autocomplete","off","disabled","mode=='view'?true:false",2,"width","70%",3,"keydown.enter","keypress"],[1,"right-side"],["for","serialNo"],["id","modes","formControlName","SNO",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"options"],[2,"display","flex","flex-direction","column"],[2,"display","flex","flex-direction","row"],["type","checkbox","formControlName","OTPREQUIRED",3,"change"],[2,"white-space","nowrap"],["type","checkbox","formControlName","PrintReceipt",3,"change"],["type","checkbox","formControlName","HideOnNonTenderUI",3,"change"],["for","sqlString"],["id","sqlString","formControlName","SQLSTRING","autocomplete","off",1,"form-control",3,"readOnly"],[3,"popupsettings","onItemDoubleClick"],["genericGridACID",""],["id","max-warning",2,"font-size","small","margin-left","150px"],["value","CREDIT"],["value","CREDITCARD"],[3,"value"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5"),e._uU(3,"Payment Mode Master"),e.qZA()(),e.TgZ(4,"div",2)(5,"div",3)(6,"form",4),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(7,"button",5),e._uU(8,"Save"),e.qZA(),e.TgZ(9,"button",6),e._uU(10,"Back"),e.qZA()()()()(),e.TgZ(11,"div",7)(12,"div",8)(13,"h5",9),e._uU(14),e.qZA()(),e.TgZ(15,"div",10)(16,"form",11),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(17,"div",12)(18,"div",13)(19,"div",14)(20,"label",15),e._uU(21,"Payment Mode :"),e.qZA(),e._UZ(22,"input",16,17),e.qZA(),e.YNc(24,N,3,0,"div",18),e.TgZ(25,"div",14)(26,"label",19),e._uU(27,"Modes :"),e.qZA(),e.TgZ(28,"select",20),e.NdJ("change",function(){return t.ResetSqlString()}),e._UZ(29,"option",21),e.YNc(30,F,2,0,"option",22),e.YNc(31,I,2,0,"option",23),e.TgZ(32,"option",24),e._uU(33,"OTHERS"),e.qZA(),e.TgZ(34,"option",25),e._uU(35,"FIXED A/C"),e.qZA()()(),e.TgZ(36,"div",14)(37,"label",26),e._uU(38,"Account :"),e.qZA(),e.TgZ(39,"input",27),e.NdJ("keydown.enter",function(a){return t.acidEnterCommand(a)})("keypress",function(a){return t.keyPress(a)}),e.qZA()()(),e.TgZ(40,"div",28)(41,"div",14)(42,"label",29),e._uU(43,"Serial No. :"),e.qZA(),e.TgZ(44,"select",30),e.NdJ("change",function(a){return t.checkForDuplicate(a)}),e.YNc(45,_,2,2,"option",31),e.qZA()(),e.TgZ(46,"fieldset",32)(47,"legend"),e._uU(48,"Options"),e.qZA(),e.TgZ(49,"div",33)(50,"div",34)(51,"input",35),e.NdJ("change",function(a){return t.paymentModeForm.value.OTPREQUIRED=a.target.checked?1:0}),e.qZA(),e.TgZ(52,"label",36),e._uU(53,"OTP Required"),e.qZA()(),e.TgZ(54,"div",34)(55,"input",37),e.NdJ("change",function(a){return t.paymentModeForm.value.PrintReceipt=a.target.checked?1:0}),e.qZA(),e.TgZ(56,"label",36),e._uU(57,"Print Receipt Required"),e.qZA()(),e.TgZ(58,"div",34)(59,"input",38),e.NdJ("change",function(a){return t.paymentModeForm.value.HideOnNonTenderUI=a.target.checked?1:0}),e.qZA(),e.TgZ(60,"label",36),e._uU(61,"Hide on Non-Tender UI"),e.qZA()()()()()(),e.TgZ(62,"div",14)(63,"label",39),e._uU(64,"SQL String :"),e.qZA(),e._UZ(65,"textarea",40),e.qZA()()()(),e.TgZ(66,"generic-popup-grid",41,42),e.NdJ("onItemDoubleClick",function(a){return t.onACIDSelected(a)}),e.qZA()),2&o&&(e.xp6(6),e.Q6J("formGroup",t.paymentModeForm),e.xp6(1),e.Q6J("disabled",!t.paymentModeForm.valid||t.viewMode),e.xp6(7),e.Oqu(t.modeTitle),e.xp6(2),e.Q6J("formGroup",t.paymentModeForm),e.xp6(6),e.Q6J("readOnly","view"==t.mode),e.xp6(2),e.Q6J("ngIf",null==t.paymentModeControl.errors?null:t.paymentModeControl.errors.maxlength),e.xp6(6),e.Q6J("ngIf",t.viewMode),e.xp6(1),e.Q6J("ngIf",t.viewMode),e.xp6(14),e.Q6J("ngForOf",t.numbers),e.xp6(20),e.Q6J("readOnly","view"==t.mode),e.xp6(1),e.Q6J("popupsettings",t.gridPopupSettingsForACID))},dependencies:[l.sg,l.O5,g.rH,s._Y,s.YN,s.Kr,s.Fj,s.Wl,s.EJ,s.JJ,s.JL,s.sg,s.u,O.Zl],styles:[".card[_ngcontent-%COMP%]{margin:10px 30px 0 300px!important;width:60%}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{border:1px solid #cbcbcb;border-radius:3px;height:28px;color:#000}label[_ngcontent-%COMP%]{height:25px;font-size:14px}.card-body[_ngcontent-%COMP%]{height:64vh}.form-container[_ngcontent-%COMP%]{border:1px solid #ddd;padding:15px;border-radius:5px;box-shadow:0 0 10px #0000001a}.form-header[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff;padding:10px;margin-bottom:15px;border-radius:3px}.form-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:15px}.left-side[_ngcontent-%COMP%], .right-side[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:48%}.form-group[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px;font-weight:700;min-width:120px}.form-control[_ngcontent-%COMP%]{padding:5px;font-size:14px;border:1px solid #ccc;border-radius:3px;flex-grow:1}.options[_ngcontent-%COMP%]{height:20vh;border:1px solid #ccc;border-radius:3px}.options[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{font-size:14px;padding:0;margin-bottom:0;font-weight:700}.options[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block}textarea[_ngcontent-%COMP%]{height:100px;resize:none;width:100%}"]}),i})()}];let Z=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.Bz.forChild(U),g.Bz]}),i})();var Q=n(59629),L=n(62106);let x=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[v.a],imports:[l.ez,Z,c.m,h.JX,M.zk.forRoot(),u.Is,m.b.forRoot(),Q.Z,L.A]}),i})()}}]);