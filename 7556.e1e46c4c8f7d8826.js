"use strict";(self.webpackChunkimserp=self.webpackChunkimserp||[]).push([[7556],{82661:(P,U,s)=>{s.d(U,{C:()=>q});var A=s(26215),I=s(53181),t=s(36336),e=s(92752);let w=(()=>{class d{constructor(l,g){this.dialogref=l,this.data=g,this.heading="Information",this.heading=g.header,this.message$=g.message}authResult(l){this.dialogref.close(l)}}return d.\u0275fac=function(l){return new(l||d)(t.Y36(I.so),t.Y36(I.WI))},d.\u0275cmp=t.Xpm({type:d,selectors:[["result-dialog"]],decls:11,vars:4,consts:[[1,"modal-dialog","modal-md"],[1,"modal-content"],[1,"modal-header","custom-modal-header"],[1,"modal-title"],["aria-label","Close",1,"close",3,"click"],[1,"modal-body"],[2,"display","inline-block"]],template:function(l,g){1&l&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),t._uU(4),t.qZA(),t.TgZ(5,"div",4),t.NdJ("click",function(){return g.authResult(!0)}),t._uU(6,"\xd7"),t.qZA()(),t.TgZ(7,"div",5),t._UZ(8,"div",6),t._uU(9),t.ALo(10,"async"),t.qZA()()()),2&l&&(t.xp6(4),t.Oqu(g.heading),t.xp6(5),t.hij(" ",t.lcZ(10,2,g.message$)," "))},dependencies:[e.Ov],encapsulation:2}),d})();var Z=s(67297),S=s(53074),T=s(14970),M=s(3629),c=s(67311);function O(d,_){1&d&&(t.TgZ(0,"h4",5),t._uU(1,"Your Fiscal Year is Changed. Year End Process will generate new sequence for transaction. Would you like to start Inventry year Ending Process ? "),t.qZA())}function b(d,_){1&d&&(t.TgZ(0,"h4",5),t._uU(1,"Your Fiscal Year is Changed.Please do year end process from Online portal and sync the transaction.If you want do back date Sales invoice Click Ok to continue.Thank you... "),t.qZA())}function v(d,_){if(1&d){const l=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(l);const p=t.oxw();return t.KtG(p.YesClick())}),t._uU(1,"Yes"),t.qZA()}}function h(d,_){if(1&d){const l=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(l);const p=t.oxw();return t.KtG(p.NoClick())}),t._uU(1,"No"),t.qZA()}}function x(d,_){if(1&d){const l=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(l);const p=t.oxw();return t.KtG(p.offlinelineOK())}),t._uU(1,"OK"),t.qZA()}}let L=(()=>{class d{constructor(l,g,p,E,C,m){this.dialogref=l,this.authSerice=g,this.masterService=p,this.spinnerService=E,this.router=C,this.alertService=m}YesClick(){1!==this.masterService.userSetting.ENABLEOFFLINESALE&&(this.spinnerService.show("Processing...Please Wait..."),this.masterService.masterGetmethod("/yearEndingInventory").subscribe(l=>{"ok"===l.status?(this.authSerice.setSessionVariable("isIYE",1),this.dialogref.close(),this.alertService.success("The year end for inventory are done successfully..."),setTimeout(()=>{console.log("from logout"),this.router.navigate(["login",{logout:"logout"}]).then(()=>{window.location.reload()})},5e3)):(this.spinnerService.hide(),alert(l.result.error))},l=>{this.spinnerService.hide(),alert(JSON.parse(l._body))}))}NoClick(){this.authSerice.setSessionVariable("isIYE",2),this.dialogref.close()}offlinelineOK(){this.authSerice.setSessionVariable("isIYE",2),this.dialogref.close()}}return d.\u0275fac=function(l){return new(l||d)(t.Y36(I.so),t.Y36(Z.e),t.Y36(S.P),t.Y36(T.V),t.Y36(M.F0),t.Y36(c.c))},d.\u0275cmp=t.Xpm({type:d,selectors:[["inventry-yearend-dialog"]],decls:8,vars:5,consts:[[1,"modal-content","modal-content-main-area",2,"width","100%"],[1,"modal-header"],["class","modal-title","id","myModalLabel",4,"ngIf"],[1,"modal-body"],["class","btn btn-info",3,"click",4,"ngIf"],["id","myModalLabel",1,"modal-title"],[1,"btn","btn-info",3,"click"]],template:function(l,g){1&l&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,O,2,0,"h4",2),t.YNc(3,b,2,0,"h4",2),t.qZA(),t.TgZ(4,"div",3),t.YNc(5,v,2,0,"button",4),t.YNc(6,h,2,0,"button",4),t.YNc(7,x,2,0,"button",4),t.qZA()()),2&l&&(t.xp6(2),t.Q6J("ngIf",1!=g.masterService.userSetting.ENABLEOFFLINESALE),t.xp6(1),t.Q6J("ngIf",1==g.masterService.userSetting.ENABLEOFFLINESALE),t.xp6(2),t.Q6J("ngIf",1!=g.masterService.userSetting.ENABLEOFFLINESALE),t.xp6(1),t.Q6J("ngIf",1!=g.masterService.userSetting.ENABLEOFFLINESALE),t.xp6(1),t.Q6J("ngIf",1==g.masterService.userSetting.ENABLEOFFLINESALE))},dependencies:[e.O5],styles:[".md-dialog-container[_ngcontent-%COMP%]{height:auto!important;width:auto!important;overflow:hidden!important;box-shadow:0!important}.mat-dialog-container[_ngcontent-%COMP%]{background:transparent!important;box-shadow:none!important;margin-left:auto;margin-right:auto;overflow:hidden!important;height:350px!important}.auth-main[_ngcontent-%COMP%]{position:inherit!important;display:inherit!important}.cdk-overlay-pane[_ngcontent-%COMP%], .md-overlay-pane[_ngcontent-%COMP%]{height:auto!important}.cdk-overlay-pane[_ngcontent-%COMP%], .md-overlay-pane[_ngcontent-%COMP%]{flex:1 1 0}"]}),d})();var D=s(71180),R=s(62870);let q=(()=>{class d{constructor(l,g,p,E,C,m){this.gblstate=l,this._authService=g,this.authenticationService=p,this.masterService=E,this.router=C,this.dialog=m,this.viewPermission=[],this.userSetting={},this.enableFiscalYearEnd=!1,this.viewPermission=l.getGlobalSetting("View-Permission")||[],this.userSetting=this.masterService.userSetting}canActivate(l,g){const p=new A.X(""),E=p.asObservable(),C=this._authService.getAuth();let m="";null!=l.url[0]&&(m=l.url[0].path),console.log("path",m);let y=l.params.mode;if(void 0===y&&(y="list"),!C||!C.profile){p.next("Your session has expired. You have been logged out of your account in another tab. Please log in again to continue.");const u=this.dialog.open(w,{hasBackdrop:!0,data:{header:"Information",message:E}});return this.authenticationService.setCurrentUserValue(null),this.router.navigate(["/login"]),setTimeout(()=>{u.close()},1e4),!1}if(0===this._authService.getSessionVariable("isIYE")&&(this.dialog.closeAll(),this.dialog.open(L,{hasBackdrop:!0,data:{header:"Information",message:""}}),"dashboard"!==m))return!1;if(C&&C.profile&&"dashboard"===m||"SYSTEMUSER"===this._authService?.getUserProfile()?.username.toUpperCase()&&("division"==m||"payment-mode-master"==m))return!0;("adduser"==m&&"role"==y||"adduser"==m&&"user"==y)&&(y="add"),"adduser"==m&&"editRole"==y&&(y="edit");const o=this._authService.getMenuRight(m,y);return m?!0===o.right||"list"===y&&!0===o.list:!0===o.list||void 0}}return d.\u0275fac=function(l){return new(l||d)(t.LFG(D.q),t.LFG(Z.e),t.LFG(R.$),t.LFG(S.P),t.LFG(M.F0),t.LFG(I.uw))},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},18488:(P,U,s)=>{s.d(U,{G:()=>S});var A=s(76165),I=s(79765),t=s(36336),e=s(3629),w=s(67297),Z=s(71180);let S=(()=>{class T{constructor(c,O,b,v){this.http=c,this.activatedRoute=O,this.authService=b,this.state=v;const h=this.state.getGlobalSetting("apiUrl");h&&h.length>0&&(this.apiUrl=h)}getRequestOption(){return new A.WM({"Content-type":"application/csv",Authorization:this.authService.getAuth().token,"X-Requested-With":"XMLHttpRequest"})}RequestOptionForCSV(){return{headers:new A.WM({Authorization:this.authService.getAuth().token})}}downloadSampleFile(c,O="download"){return this.http.get(this.apiUrl+`${c}`,{headers:this.getRequestOption(),responseType:"blob"})}downloadSampleExcelforPIImport(c){return this.http.post(this.apiUrl+"/downloadSampleExcelforPIImport",c,{responseType:"blob"})}cancelPhysicalStock(c){return this.http.post(`${this.apiUrl}/physicalStockCancel/${c}`,null)}importSelectedFiles(c,O){let b={status:"error",result:"error"},v=new I.xQ;return this.http.post(this.apiUrl+`${c}`,O).subscribe(h=>{v.next(h),v.unsubscribe()},h=>{b.status="error",b.result=h,v.next(b),v.unsubscribe()}),v}}return T.\u0275fac=function(c){return new(c||T)(t.LFG(A.eN),t.LFG(e.gz),t.LFG(w.e),t.LFG(Z.q))},T.\u0275prov=t.Yz7({token:T,factory:T.\u0275fac}),T})()},23608:(P,U,s)=>{s.r(U),s.d(U,{UtilitiesModule:()=>y});var A=s(69401),I=s(87584),t=s(3629),e=s(36336);let w=(()=>{class o{constructor(){}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["utilities"]],decls:1,vars:0,template:function(n,i){1&n&&e._UZ(0,"router-outlet")},dependencies:[t.lC],encapsulation:2}),o})();var Z=s(67311),S=s(14970),T=s(67297),M=s(27652),c=s(63504);const O=["f"];let b=(()=>{class o{constructor(n,i,r,a,f){this.alertService=n,this.loadingSerive=i,this.authservice=r,this.route=a,this.utilitiesService=f,this.warrantyInfoObj={}}ngOnInit(){}onEnter(){let n=this.signupForm.value.ImeiSearch;console.log("imieval",n),this.getItemWarrantyInfo(n)}getItemWarrantyInfo(n){this.loadingSerive.show("Data is Loading.."),this.utilitiesService.getItemWarrantyInfo(n).subscribe(i=>{"ok"==i.status?(this.loadingSerive.hide(),this.ItemWarrantyInfoList=i.result[0],this.warrantyInfoObj.ITEMDESCA=this.ItemWarrantyInfoList.DESCA,this.warrantyInfoObj.MCODE=this.ItemWarrantyInfoList.MCODE,this.warrantyInfoObj.IMEINO=this.ItemWarrantyInfoList.IMEINO,this.warrantyInfoObj.WARRANTYPERIOD=this.ItemWarrantyInfoList.WARRANTY_PERIOD,this.warrantyInfoObj.TRNDATE=this.ItemWarrantyInfoList.TRNDATE?.substring(0,10),this.warrantyInfoObj.CUSTNAME=this.ItemWarrantyInfoList.BILLTO,this.warrantyInfoObj.MOBILENO=this.ItemWarrantyInfoList.BILLTOMOB,this.warrantyInfoObj.ADDRESS=this.ItemWarrantyInfoList.BILLTOADD):(this.warrantyInfoObj={},this.loadingSerive.hide(),this.alertService.info(i.result))},i=>{this.loadingSerive.hide(),this.alertService.info(i.error.result)})}changeSearchEvent(){(""==this.signupForm.value.ImeiSearch||null==this.signupForm.value.ImeiSearch)&&(this.warrantyInfoObj.ITEMDESCA="",this.warrantyInfoObj.MCODE="",this.warrantyInfoObj.IMEINO="",this.warrantyInfoObj.WARRANTYPERIOD=null,this.warrantyInfoObj.TRNDATE=null,this.warrantyInfoObj.CUSTNAME="",this.warrantyInfoObj.MOBILENO="",this.warrantyInfoObj.ADDRESS="")}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(Z.c),e.Y36(S.V),e.Y36(T.e),e.Y36(t.gz),e.Y36(M.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["additemwarrantyinfo"]],viewQuery:function(n,i){if(1&n&&e.Gf(O,5),2&n){let r;e.iGM(r=e.CRH())&&(i.signupForm=r.first)}},features:[e._Bn([I.p])],decls:80,vars:19,consts:[[1,"card"],[1,"card-header","row"],[1,"col-md-4"],[1,"page-title"],[1,"card-body"],[1,"row"],[1,"col-md-6"],[3,"ngSubmit"],["f","ngForm"],[1,"form-group","row"],[1,"col-md-3"],[1,"form-control-label"],[1,"col-md-7",2,"width","100%","margin-top","2px"],["type","text","placeholder","Search..","ngModel","","name","ImeiSearch","autocomplete","off","required","",1,"form-control",3,"keydown.enter","ngModelChange"],[1,"col-md-2",2,"padding-left","0px"],["type","submit",1,"btn","btn-info","btn-sm",3,"disabled"],[2,"border","2px solid #d9d9d9"],[2,"font-size","13px","font-weight","bold","text-align","left","margin-bottom","5px","margin-left","3px","width","auto"],[1,"col-md-8",2,"width","100%"],["type","text","name","ItemName",1,"form-control",3,"ngModel","readOnly","ngModelChange"],["type","text","name","ItemCode",1,"form-control",3,"ngModel","readOnly","ngModelChange"],["type","text","name","ImeiNo",1,"form-control",3,"ngModel","readOnly","ngModelChange"],["type","text",1,"form-control",3,"ngModel","readOnly","ngModelChange"],["type","text","placeholder","mm/dd/yyyy","name","SalesDate",1,"form-control",3,"ngModel","readOnly","ngModelChange"],["type","text","name","WarrantyPeriod",1,"form-control",3,"readOnly","ngModel","ngModelChange"]],template:function(n,i){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),e._uU(4,"Item Warranty Info"),e.qZA()()(),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"form",7,8),e.NdJ("ngSubmit",function(){return i.onEnter()}),e.TgZ(10,"div",9)(11,"div",10)(12,"label",11),e._uU(13," IMEI NO:"),e.qZA()(),e.TgZ(14,"div",12)(15,"input",13),e.NdJ("keydown.enter",function(){return i.onEnter()})("ngModelChange",function(){return i.changeSearchEvent()}),e.qZA()(),e.TgZ(16,"div",14)(17,"button",15),e._uU(18,"Search"),e.qZA()()()(),e.TgZ(19,"fieldset",16)(20,"legend",17),e._uU(21,"Item Info"),e.qZA(),e.TgZ(22,"div",9)(23,"div",2)(24,"label",11),e._uU(25,"Item Name:"),e.qZA()(),e.TgZ(26,"div",18)(27,"input",19),e.NdJ("ngModelChange",function(a){return i.warrantyInfoObj.ITEMDESCA=a}),e.qZA()()(),e.TgZ(28,"div",9)(29,"div",2)(30,"label",11),e._uU(31,"Item Code:"),e.qZA()(),e.TgZ(32,"div",18)(33,"input",20),e.NdJ("ngModelChange",function(a){return i.warrantyInfoObj.MCODE=a}),e.qZA()()(),e.TgZ(34,"div",9)(35,"div",2)(36,"label",11),e._uU(37,"IMEI No:"),e.qZA()(),e.TgZ(38,"div",18)(39,"input",21),e.NdJ("ngModelChange",function(a){return i.warrantyInfoObj.IMEINO=a}),e.qZA()()()()(),e.TgZ(40,"div",6)(41,"fieldset",16)(42,"legend",17),e._uU(43,"Sales Info"),e.qZA(),e.TgZ(44,"div",9)(45,"div",2)(46,"label",11),e._uU(47,"Customer Name:"),e.qZA()(),e.TgZ(48,"div",18)(49,"input",22),e.NdJ("ngModelChange",function(a){return i.warrantyInfoObj.CUSTNAME=a}),e.qZA()()(),e.TgZ(50,"div",9)(51,"div",2)(52,"label",11),e._uU(53,"Mobile No:"),e.qZA()(),e.TgZ(54,"div",18)(55,"input",22),e.NdJ("ngModelChange",function(a){return i.warrantyInfoObj.MOBILENO=a}),e.qZA()()(),e.TgZ(56,"div",9)(57,"div",2)(58,"label",11),e._uU(59,"Address:"),e.qZA()(),e.TgZ(60,"div",18)(61,"input",22),e.NdJ("ngModelChange",function(a){return i.warrantyInfoObj.ADDRESS=a}),e.qZA()()(),e.TgZ(62,"div",9)(63,"div",2)(64,"label",11),e._uU(65,"Sales Date:"),e.qZA()(),e.TgZ(66,"div",18)(67,"input",23),e.NdJ("ngModelChange",function(a){return i.warrantyInfoObj.TRNDATE=a}),e.qZA()()(),e.TgZ(68,"div",9)(69,"div",2)(70,"label",11),e._uU(71,"Warranty Period:"),e.qZA()(),e.TgZ(72,"div",18)(73,"input",24),e.NdJ("ngModelChange",function(a){return i.warrantyInfoObj.WARRANTYPERIOD=a}),e.qZA()()(),e.TgZ(74,"div",9)(75,"div",2)(76,"label",11),e._uU(77,"Status:"),e.qZA()(),e.TgZ(78,"div",18)(79,"input",22),e.NdJ("ngModelChange",function(a){return i.warrantyInfoObj.STATUS=a}),e.qZA()()()()()()()()),2&n){const r=e.MAs(9);e.xp6(17),e.Q6J("disabled",!r.valid),e.xp6(10),e.Q6J("ngModel",i.warrantyInfoObj.ITEMDESCA)("readOnly",!0),e.xp6(6),e.Q6J("ngModel",i.warrantyInfoObj.MCODE)("readOnly",!0),e.xp6(6),e.Q6J("ngModel",i.warrantyInfoObj.IMEINO)("readOnly",!0),e.xp6(10),e.Q6J("ngModel",i.warrantyInfoObj.CUSTNAME)("readOnly",!0),e.xp6(6),e.Q6J("ngModel",i.warrantyInfoObj.MOBILENO)("readOnly",!0),e.xp6(6),e.Q6J("ngModel",i.warrantyInfoObj.ADDRESS)("readOnly",!0),e.xp6(6),e.Q6J("ngModel",i.warrantyInfoObj.TRNDATE)("readOnly",!0),e.xp6(6),e.Q6J("readOnly",!0)("ngModel",i.warrantyInfoObj.WARRANTYPERIOD),e.xp6(6),e.Q6J("ngModel",i.warrantyInfoObj.STATUS)("readOnly",!0)}},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.On,c.F],styles:[".card[_ngcontent-%COMP%]{margin:5vh auto!important;width:70%}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{border:1px solid #cbcbcb;border-radius:3px;height:4vh;font-size:13px;color:#000}label[_ngcontent-%COMP%]{font-size:13px;width:100%}"]}),o})();var v=s(53074),h=s(92752);function x(o,u){if(1&o&&(e.TgZ(0,"label",26),e._uU(1),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Oqu(n.customerTranList[0].BILLTO)}}function L(o,u){if(1&o&&(e.TgZ(0,"label",26),e._uU(1),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Oqu(n.customerTranList[0].BILLTOADD)}}function D(o,u){if(1&o&&(e.TgZ(0,"tr")(1,"td",27),e._uU(2),e.qZA(),e.TgZ(3,"td",28),e._uU(4),e.qZA(),e.TgZ(5,"td",29),e._uU(6),e.qZA(),e.TgZ(7,"td",30),e._uU(8),e.ALo(9,"number"),e.qZA(),e.TgZ(10,"td",29),e._uU(11),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"td",29),e._uU(14),e.ALo(15,"date"),e.qZA(),e.TgZ(16,"td",27),e._uU(17),e.qZA()()),2&o){const n=u.$implicit,i=u.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(n.ITEMDESC),e.xp6(2),e.Oqu(n.BC),e.xp6(2),e.Oqu(e.xi3(9,7,n.In_Rate_A,"1.2-2")),e.xp6(3),e.Oqu(e.lcZ(12,10,n.TRNDATE)),e.xp6(3),e.Oqu(e.lcZ(15,12,n.WARRANTY_EXPIRY_DATE)),e.xp6(3),e.Oqu(n.STATUS)}}function R(o,u){if(1&o){const n=e.EpF();e.TgZ(0,"div")(1,"div",31)(2,"div",32)(3,"div",33)(4,"h5",34),e._uU(5,"Warranty Info"),e.qZA(),e.TgZ(6,"button",35),e.NdJ("click",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.closeModal())}),e.TgZ(7,"span",36),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",37)(10,"div",38),e._UZ(11,"img",39),e.qZA()()()()()}if(2&o){const n=e.oxw();e.xp6(11),e.s9C("src",n.image,e.LSH)}}let q=(()=>{class o{constructor(n,i,r){this.loadSerivce=n,this.alertService=i,this.materService=r,this.customerTranList=[],this.image="../../../../../assets/warranty-img.jpg"}ngOnInit(){this.showImage=!1}searchProductList(){this.getCustomerTransactionHistory()}getCustomerTransactionHistory(){this.searchInput&&(this.loadSerivce.show("Data is  loading.."),this.materService.getProductCustomerHistory(this.searchInput).subscribe(n=>{"ok"==n.status?(this.loadSerivce.hide(),this.customerTranList=n.result):(this.customerTranList=[],this.loadSerivce.hide(),this.alertService.info(n.result.error.result))},n=>{this.customerTranList=[],this.loadSerivce.hide()}))}changeSearchEvent(){(""==this.searchInput||null==this.searchInput)&&(this.customerTranList=[])}viewWarranty(n){this.showImage=!0,this.image=0==n?"../../../../../assets/warranty-img.jpg":"../../../../../assets/samsung.jpg"}closeModal(){this.showImage=!1}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(S.V),e.Y36(Z.c),e.Y36(v.P))},o.\u0275cmp=e.Xpm({type:o,selectors:[["customer-transaction-history"]],decls:48,vars:5,consts:[[1,"row","col-md-12"],[1,"col-md-4"],[1,"col-md-8"],[1,"container"],[1,"row",2,"margin-top","10px"],[2,"border","2px solid #d9d9d9","height","78vh","width","100%"],[1,"col-md-12"],[1,"form-group","row",2,"margin-bottom","0.3rem"],[1,"form-label","col-md-2",2,"font-size","14px","font-weight","bold"],[1,"col-md-3",2,"padding-left","0px"],["type","text",1,"form-control","col-md-9",2,"width","75%","height","4vh","font-size","14px",3,"ngModel","ngModelChange","keydown.enter"],[1,"col-md-2",2,"margin-top","-4px","margin-left","-65px"],["type","button",1,"btn","btn-info",2,"margin-left","5px","font-size","12px",3,"click"],[1,"form-group","row"],[1,"col-md-2"],["classs","form-label",2,"font-size","14px","width","90%","font-weight","bold"],["classs","form-label","style","font-size: 14px;width: 90%;",4,"ngIf"],[1,"col-md-1"],[1,"table","table-striped",2,"width","95%","margin-left","25px"],[2,"line-height","10px"],["colspan","1",2,"width","5%"],["colspan","1",2,"width","15%"],["colspan","1",2,"width","8%"],["colspan","1",2,"width","6%"],[4,"ngFor","ngForOf"],[4,"ngIf"],["classs","form-label",2,"font-size","14px","width","90%"],[2,"width","5%"],[2,"width","15%"],[2,"width","8%"],[2,"width","6%"],[1,"modal-sticky",2,"display","block","padding","0px","margin-bottom","1rem","margin-right","18rem"],[1,"modal-content","modal-content-main-area",2,"width","100%","height","90%"],[1,"modal-header",2,"padding","0px","background","#c0c0c0"],[1,"modal-title",2,"padding-left","5px"],["aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"images",2,"height","366.6px","width","550px","margin","auto",3,"src"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5"),e._uU(3,"Customer Transaction History"),e.qZA()(),e._UZ(4,"div",2),e.qZA(),e.TgZ(5,"div",3)(6,"div",4)(7,"fieldset",5)(8,"div",6)(9,"div",7)(10,"label",8),e._uU(11," Search by Mobile: "),e.qZA(),e.TgZ(12,"div",9)(13,"input",10),e.NdJ("ngModelChange",function(a){return i.searchInput=a})("ngModelChange",function(){return i.changeSearchEvent()})("keydown.enter",function(){return i.searchProductList()}),e.qZA()(),e.TgZ(14,"div",11)(15,"button",12),e.NdJ("click",function(){return i.searchProductList()}),e._uU(16,"Search"),e.qZA()()(),e.TgZ(17,"div",13)(18,"div",14)(19,"label",15),e._uU(20,"Customer Name:"),e.qZA()(),e.TgZ(21,"div",9),e.YNc(22,x,2,1,"label",16),e.qZA(),e.TgZ(23,"div",17)(24,"label",15),e._uU(25,"Address:"),e.qZA()(),e.TgZ(26,"div",9),e.YNc(27,L,2,1,"label",16),e.qZA()()(),e.TgZ(28,"table",18)(29,"thead")(30,"tr",19)(31,"th",20),e._uU(32,"SN"),e.qZA(),e.TgZ(33,"th",21),e._uU(34,"Item Name"),e.qZA(),e.TgZ(35,"th",22),e._uU(36,"IMEI No"),e.qZA(),e.TgZ(37,"th",23),e._uU(38,"Sale Rate"),e.qZA(),e.TgZ(39,"th",22),e._uU(40,"Sale Date"),e.qZA(),e.TgZ(41,"th",22),e._uU(42,"Warranty Date"),e.qZA(),e.TgZ(43,"th",20),e._uU(44,"Status"),e.qZA()()(),e.TgZ(45,"tbody"),e.YNc(46,D,18,14,"tr",24),e.qZA()()()()(),e.YNc(47,R,12,1,"div",25)),2&n&&(e.xp6(13),e.Q6J("ngModel",i.searchInput),e.xp6(9),e.Q6J("ngIf",i.customerTranList.length>0),e.xp6(5),e.Q6J("ngIf",i.customerTranList.length>0),e.xp6(19),e.Q6J("ngForOf",i.customerTranList),e.xp6(1),e.Q6J("ngIf",i.showImage))},dependencies:[h.sg,h.O5,c.Fj,c.JJ,c.On,h.JJ,h.uU],styles:["tbody[_ngcontent-%COMP%]{display:block;height:58vh;overflow:auto}thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}th[_ngcontent-%COMP%]{font-size:14px;padding:10px 0}td[_ngcontent-%COMP%]{font-size:13px;padding:0}.btn-sm[_ngcontent-%COMP%]{line-height:.5rem}"]}),o})();var d=s(28698);const _=["genericGridRefBill"];function l(o,u){if(1&o){const n=e.EpF();e.TgZ(0,"tr")(1,"td",22),e._uU(2),e.qZA(),e.TgZ(3,"td",23),e._uU(4),e.qZA(),e.TgZ(5,"td",24),e._uU(6),e.qZA(),e.TgZ(7,"td",24),e._uU(8),e.qZA(),e.TgZ(9,"td",24),e._uU(10),e.ALo(11,"number"),e.qZA(),e.TgZ(12,"td",24),e._uU(13),e.ALo(14,"number"),e.qZA(),e.TgZ(15,"td",16)(16,"input",25),e.NdJ("change",function(r){const f=e.CHM(n).$implicit,N=e.oxw();return e.KtG(N.onFileSelected(r,f))}),e.qZA(),e.TgZ(17,"button",26),e.NdJ("click",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.uploadFile())}),e._uU(18,"Upload"),e.qZA()()()}if(2&o){const n=u.$implicit,i=u.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(n.DESCRIPTION),e.xp6(2),e.Oqu(n.MCODE),e.xp6(2),e.Oqu(n.Quantity),e.xp6(2),e.Oqu(e.xi3(11,6,n.RATE,"1.0-2")),e.xp6(3),e.Oqu(e.xi3(14,9,n.AMOUNT,"1.0-2"))}}let g=(()=>{class o{constructor(n,i,r,a){this.masterService=n,this.alertService=i,this.loadService=r,this._trnMainService=a,this.gridPopupSettingsForRefBill=new d.im,this.itemList=[],this.gridPopupSettingsForRefBill=this.masterService.getGenericGridPopUpSettings("REFBILLOFPURCHASERETURN")}ngOnInit(){}RefBillEnterCommand(n){n.preventDefault(),this.genericGridSetting("/getMobileItemRefBillPagedList"),this.genericGridRefBill.show()}onRefBillSelected(n){console.log("@ref bill selected",n),this.refBill=n.VCHRNO,this.customerName=n.BILLTO,this.address=n.BILLTOADD,this.phone=n.BILLTOTEL,this.loadData(n.VCHRNO,n.DIVISION,n.PhiscalID,null)}loadData(n,i,r,a){this.loadService.show("Getting data please wait...."),this.masterService.LoadTransaction(n,i,r,a).subscribe(f=>{"ok"==f.status?(this.loadService.hide(),this.itemList=f.result.ProdList?f.result.ProdList:[],console.log("item list for warrantty info",this.itemList)):(this.loadService.hide(),this.itemList=[],this.alertService.error("Couldn't load transaction"))},f=>{this.loadService.hide(),this.alertService.error(f)})}genericGridSetting(n){this.gridPopupSettingsForRefBill={title:"Vouchers",apiEndpoints:`${n}`,defaultFilterIndex:1,columns:[{key:"TRNDATE",title:"DATE",hidden:!1,noSearch:!1},{key:"VCHRNO",title:"VOUCHER NO.",hidden:!1,noSearch:!1},{key:"NETAMNT",title:"AMOUNT",hidden:!1,noSearch:!1},{key:"REMARKS",title:"REMARKS",hidden:!1,noSearch:!1}]}}onFileSelected(n,i){console.log("file selected",i),this.selectedFile=n.target.files[0],this.mcode=i.MCODE,this.vchrno=i.VCHRNO;let r=this.selectedFile;const a=new FormData;a.append("file",r,r.name),this.loadService.show("Uploading file. Please Wait..."),this.masterService.importConfig(a).subscribe(f=>{if("ok"==f.status){this.loadService.hide(),this.alertService.success("Image Selected.");let N=this.masterService.apiUrl;this.imgURL=""+N.substring(N.length-3,0)+f.result,console.log("@@after upload",f.result,this.imgURL)}else this.loadService.hide(),this.alertService.error(f.result)},f=>{this.loadService.hide(),this.alertService.error(f)})}uploadFile(){this.masterService.postWarrantyImg({VCHRNO:this.vchrno,MCODE:this.mcode,PATH:this.imgURL}).subscribe(i=>{"ok"==i.status?this.alertService.success("Upload Successful!"):this.alertService.error(i.result)},i=>{this.alertService.error(i)})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(v.P),e.Y36(Z.c),e.Y36(S.V),e.Y36(I.p))},o.\u0275cmp=e.Xpm({type:o,selectors:[["warranty-upload-info"]],viewQuery:function(n,i){if(1&n&&e.Gf(_,5),2&n){let r;e.iGM(r=e.CRH())&&(i.genericGridRefBill=r.first)}},decls:58,vars:10,consts:[[1,"row","col-md-12"],[1,"col-md-4"],[1,"col-md-8"],[1,"container"],[1,"row",2,"margin-top","10px"],[2,"border","2px solid #d9d9d9","height","21vh","width","100%"],[1,"row",2,"margin-top","0.5rem"],[1,"col-md-6"],[1,"row","form-group"],[1,"form-label","col-md-3"],["type","text","placeholder","Press Enter to select Ref Bill No.",1,"form-control",3,"ngModel","keydown.enter","ngModelChange"],["type","text",1,"form-control",3,"disabled","ngModel","ngModelChange"],["type","text",1,"form-control",3,"disabled"],[1,"table","table-striped",2,"width","100%"],[2,"line-height","5px"],["colspan","1",2,"width","2%"],["colspan","1",2,"width","15%"],["colspan","1",2,"width","5%"],["colspan","1",2,"width","15%","text-align","center"],[4,"ngFor","ngForOf"],[3,"popupsettings","onItemDoubleClick"],["genericGridRefBill",""],[2,"width","2%"],[2,"width","15%"],[2,"width","5%"],["type","file",2,"width","70%",3,"change"],[1,"btn","btn-sm","btn-info",2,"font-size","12px","padding","2px 10px",3,"click"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5"),e._uU(3,"Warranty Information"),e.qZA()(),e._UZ(4,"div",2),e.qZA(),e.TgZ(5,"div",3)(6,"div",4)(7,"fieldset",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"label",9),e._uU(12,"Ref Bill:"),e.qZA(),e.TgZ(13,"div",2)(14,"input",10),e.NdJ("keydown.enter",function(a){return i.RefBillEnterCommand(a)})("ngModelChange",function(a){return i.refBill=a}),e.qZA()()(),e.TgZ(15,"div",8)(16,"label",9),e._uU(17,"Customer Name:"),e.qZA(),e.TgZ(18,"div",2)(19,"input",11),e.NdJ("ngModelChange",function(a){return i.customerName=a}),e.qZA()()(),e.TgZ(20,"div",8)(21,"label",9),e._uU(22,"Address:"),e.qZA(),e.TgZ(23,"div",2)(24,"input",11),e.NdJ("ngModelChange",function(a){return i.address=a}),e.qZA()()()(),e.TgZ(25,"div",7)(26,"div",8)(27,"label",9),e._uU(28,"Phone No:"),e.qZA(),e.TgZ(29,"div",2)(30,"input",11),e.NdJ("ngModelChange",function(a){return i.phone=a}),e.qZA()()(),e.TgZ(31,"div",8)(32,"label",9),e._uU(33,"IMEI No:"),e.qZA(),e.TgZ(34,"div",2),e._UZ(35,"input",12),e.qZA()()()()()(),e.TgZ(36,"div",6)(37,"table",13)(38,"thead")(39,"tr",14)(40,"th",15),e._uU(41,"SN"),e.qZA(),e.TgZ(42,"th",16),e._uU(43,"Item Name"),e.qZA(),e.TgZ(44,"th",17),e._uU(45,"Item Code"),e.qZA(),e.TgZ(46,"th",17),e._uU(47,"Qty"),e.qZA(),e.TgZ(48,"th",17),e._uU(49,"Rate"),e.qZA(),e.TgZ(50,"th",17),e._uU(51,"Amount "),e.qZA(),e.TgZ(52,"th",18),e._uU(53,"Upload Image"),e.qZA()()(),e.TgZ(54,"tbody"),e.YNc(55,l,19,12,"tr",19),e.qZA()()()(),e.TgZ(56,"generic-popup-grid",20,21),e.NdJ("onItemDoubleClick",function(a){return i.onRefBillSelected(a)}),e.qZA()),2&n&&(e.xp6(14),e.Q6J("ngModel",i.refBill),e.xp6(5),e.Q6J("disabled",!0)("ngModel",i.customerName),e.xp6(5),e.Q6J("disabled",!0)("ngModel",i.address),e.xp6(6),e.Q6J("disabled",!0)("ngModel",i.phone),e.xp6(5),e.Q6J("disabled",!0),e.xp6(20),e.Q6J("ngForOf",i.itemList),e.xp6(1),e.Q6J("popupsettings",i.gridPopupSettingsForRefBill))},dependencies:[h.sg,c.Fj,c.JJ,c.On,d.Zl,h.JJ],styles:[".card[_ngcontent-%COMP%]{margin:5vh auto!important;width:70%}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{border:1px solid #cbcbcb;border-radius:3px;height:4vh;font-size:13px;color:#000}label[_ngcontent-%COMP%]{font-size:13px;width:100%}.form-group[_ngcontent-%COMP%]{margin-bottom:.5rem}tbody[_ngcontent-%COMP%]{display:block;height:58vh;overflow:auto}thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}th[_ngcontent-%COMP%]{font-size:14px;padding:10px 0}td[_ngcontent-%COMP%]{font-size:13px;padding:0}"]}),o})();var p=s(82661);const C=t.Bz.forChild([{path:"",component:w,children:[{path:"itemwarrantyinfo",component:b,canActivate:[p.C]},{path:"customertransactionhistory",component:q,canActivate:[p.C]},{path:"warrantyinformation",component:g,canActivate:[p.C]}]}]);var m=s(34579);let y=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[p.C,I.p,M.e],imports:[C,m.h,A.m,c.u5,h.ez]}),o})()}}]);