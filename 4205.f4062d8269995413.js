(self.webpackChunkimserp=self.webpackChunkimserp||[]).push([[4205],{82661:(Y,F,l)=>{"use strict";l.d(F,{C:()=>J});var Z=l(591),b=l(70489),r=l(26320),I=l(1298);let e=(()=>{class m{constructor(p,f){this.dialogref=p,this.data=f,this.heading="Information",this.heading=f.header,this.message$=f.message}authResult(p){this.dialogref.close(p)}}return m.\u0275fac=function(p){return new(p||m)(r.Y36(b.so),r.Y36(b.WI))},m.\u0275cmp=r.Xpm({type:m,selectors:[["result-dialog"]],decls:11,vars:4,consts:[[1,"modal-dialog","modal-md"],[1,"modal-content"],[1,"modal-header","custom-modal-header"],[1,"modal-title"],["aria-label","Close",1,"close",3,"click"],[1,"modal-body"],[2,"display","inline-block"]],template:function(p,f){1&p&&(r.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),r._uU(4),r.qZA(),r.TgZ(5,"div",4),r.NdJ("click",function(){return f.authResult(!0)}),r._uU(6,"\xd7"),r.qZA()(),r.TgZ(7,"div",5),r._UZ(8,"div",6),r._uU(9),r.ALo(10,"async"),r.qZA()()()),2&p&&(r.xp6(4),r.Oqu(f.heading),r.xp6(5),r.hij(" ",r.lcZ(10,2,f.message$)," "))},dependencies:[I.Ov],encapsulation:2}),m})();var x=l(67297),g=l(53074),_=l(14970),S=l(70477),d=l(67311);function u(m,M){1&m&&(r.TgZ(0,"h4",5),r._uU(1,"Your Fiscal Year is Changed. Year End Process will generate new sequence for transaction. Would you like to start Inventry year Ending Process ? "),r.qZA())}function T(m,M){1&m&&(r.TgZ(0,"h4",5),r._uU(1,"Your Fiscal Year is Changed.Please do year end process from Online portal and sync the transaction.If you want do back date Sales invoice Click Ok to continue.Thank you... "),r.qZA())}function a(m,M){if(1&m){const p=r.EpF();r.TgZ(0,"button",6),r.NdJ("click",function(){r.CHM(p);const y=r.oxw();return r.KtG(y.YesClick())}),r._uU(1,"Yes"),r.qZA()}}function C(m,M){if(1&m){const p=r.EpF();r.TgZ(0,"button",6),r.NdJ("click",function(){r.CHM(p);const y=r.oxw();return r.KtG(y.NoClick())}),r._uU(1,"No"),r.qZA()}}function N(m,M){if(1&m){const p=r.EpF();r.TgZ(0,"button",6),r.NdJ("click",function(){r.CHM(p);const y=r.oxw();return r.KtG(y.offlinelineOK())}),r._uU(1,"OK"),r.qZA()}}let E=(()=>{class m{constructor(p,f,y,L,U,w){this.dialogref=p,this.authSerice=f,this.masterService=y,this.spinnerService=L,this.router=U,this.alertService=w}YesClick(){1!==this.masterService.userSetting.ENABLEOFFLINESALE&&(this.spinnerService.show("Processing...Please Wait..."),this.masterService.masterGetmethod("/yearEndingInventory").subscribe(p=>{"ok"===p.status?(this.authSerice.setSessionVariable("isIYE",1),this.dialogref.close(),this.alertService.success("The year end for inventory are done successfully..."),setTimeout(()=>{console.log("from logout"),this.router.navigate(["login",{logout:"logout"}]).then(()=>{window.location.reload()})},5e3)):(this.spinnerService.hide(),alert(p.result.error))},p=>{this.spinnerService.hide(),alert(JSON.parse(p._body))}))}NoClick(){this.authSerice.setSessionVariable("isIYE",2),this.dialogref.close()}offlinelineOK(){this.authSerice.setSessionVariable("isIYE",2),this.dialogref.close()}}return m.\u0275fac=function(p){return new(p||m)(r.Y36(b.so),r.Y36(x.e),r.Y36(g.P),r.Y36(_.V),r.Y36(S.F0),r.Y36(d.c))},m.\u0275cmp=r.Xpm({type:m,selectors:[["inventry-yearend-dialog"]],decls:8,vars:5,consts:[[1,"modal-content","modal-content-main-area",2,"width","100%"],[1,"modal-header"],["class","modal-title","id","myModalLabel",4,"ngIf"],[1,"modal-body"],["class","btn btn-info",3,"click",4,"ngIf"],["id","myModalLabel",1,"modal-title"],[1,"btn","btn-info",3,"click"]],template:function(p,f){1&p&&(r.TgZ(0,"div",0)(1,"div",1),r.YNc(2,u,2,0,"h4",2),r.YNc(3,T,2,0,"h4",2),r.qZA(),r.TgZ(4,"div",3),r.YNc(5,a,2,0,"button",4),r.YNc(6,C,2,0,"button",4),r.YNc(7,N,2,0,"button",4),r.qZA()()),2&p&&(r.xp6(2),r.Q6J("ngIf",1!=f.masterService.userSetting.ENABLEOFFLINESALE),r.xp6(1),r.Q6J("ngIf",1==f.masterService.userSetting.ENABLEOFFLINESALE),r.xp6(2),r.Q6J("ngIf",1!=f.masterService.userSetting.ENABLEOFFLINESALE),r.xp6(1),r.Q6J("ngIf",1!=f.masterService.userSetting.ENABLEOFFLINESALE),r.xp6(1),r.Q6J("ngIf",1==f.masterService.userSetting.ENABLEOFFLINESALE))},dependencies:[I.O5],styles:[".md-dialog-container[_ngcontent-%COMP%]{height:auto!important;width:auto!important;overflow:hidden!important;box-shadow:0!important}.mat-dialog-container[_ngcontent-%COMP%]{background:transparent!important;box-shadow:none!important;margin-left:auto;margin-right:auto;overflow:hidden!important;height:350px!important}.auth-main[_ngcontent-%COMP%]{position:inherit!important;display:inherit!important}.cdk-overlay-pane[_ngcontent-%COMP%], .md-overlay-pane[_ngcontent-%COMP%]{height:auto!important}.cdk-overlay-pane[_ngcontent-%COMP%], .md-overlay-pane[_ngcontent-%COMP%]{flex:1 1 0}"]}),m})();var P=l(71180);let J=(()=>{class m{constructor(p,f,y,L,U){this.gblstate=p,this._authService=f,this.masterService=y,this.router=L,this.dialog=U,this.viewPermission=[],this.userSetting={},this.enableFiscalYearEnd=!1,this.viewPermission=p.getGlobalSetting("View-Permission")||[],this.userSetting=this.masterService.userSetting}canActivate(p,f){const y=new Z.X(""),L=y.asObservable(),U=this._authService.getAuth();let w="";null!=p.url[0]&&(w=p.url[0].path);let k=p.params.mode;if(void 0===k&&(k="list"),!U||!U.profile){y.next("You are not logged In.Please login in");const O=this.dialog.open(e,{hasBackdrop:!0,data:{header:"Information",message:L}});return setTimeout(()=>{O.close()},1e3),!1}if(this.masterService.checkUserValid().subscribe(q=>{if(!1===q){y.next("Invalid User");const B=this.dialog.open(e,{hasBackdrop:!0,data:{header:"Information",message:L}});return setTimeout(()=>(B.close(),!1),1e3),!1}}),0===this._authService.getSessionVariable("isIYE")&&(this.dialog.closeAll(),this.dialog.open(E,{hasBackdrop:!0,data:{header:"Information",message:""}}),"dashboard"!==w))return!1;if(0===this.userSetting.ENABLEOFFLINESALE||2===this.userSetting.ENABLEOFFLINESALE){if(U&&U.profile&&"dashboard"===w)return!0;if(0===this.userSetting.ENABLEOFFLINESALE){if("ADMIN"===this.masterService.userProfile.username.toUpperCase()||"patanjali_user"===this.masterService.userProfile.username)return!0}else if(2===this.userSetting.ENABLEOFFLINESALE){if("addsientry"===w||"add-creditnote-itembase"===w){y.next("You are not authorize for this operation");const q=this.dialog.open(e,{hasBackdrop:!0,data:{header:"Information",message:L}});return setTimeout(()=>(q.close(),!1),2e3),!1}if("ADMIN"===this.masterService.userProfile.username.toUpperCase()||"patanjali_user"===this.masterService.userProfile.username)return!0}const O=this._authService.getMenuRight(w,k);if(w){if(!0===O.right)return!0;if("list"===k&&!0===O.list)return!0}else if(!0===O.list)return!0}else if(1===this.userSetting.ENABLEOFFLINESALE)return!0}}return m.\u0275fac=function(p){return new(p||m)(r.LFG(P.q),r.LFG(x.e),r.LFG(g.P),r.LFG(S.F0),r.LFG(b.uw))},m.\u0275prov=r.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},62490:(Y,F,l)=>{"use strict";l.d(F,{VO:()=>I,gB:()=>b});var Z=l(26320);let b=(()=>{class e{transform(g,_,S){return null==_||null==_||""==_||null==S||null==S||""==S?g:S?g.filter(d=>null!=d[_]&&null!=d[_]&&-1!==d[_].toLowerCase().indexOf(S.toLowerCase())):g}}return e.\u0275fac=function(g){return new(g||e)},e.\u0275pipe=Z.Yjl({name:"filter",type:e,pure:!1}),e})(),I=(()=>{class e{transform(g,_){let S=[];for(let d in g)S.push(d);return S}}return e.\u0275fac=function(g){return new(g||e)},e.\u0275pipe=Z.Yjl({name:"keys",type:e,pure:!0}),e})()},74602:(Y,F,l)=>{"use strict";l.d(F,{c:()=>T});var Z=l(1298),b=l(76750),r=l(68567),I=l(18488),e=l(53074),x=l(81152),g=l(47766),_=l(26320);let S=(()=>{class a{static forRoot(){return{ngModule:a}}}return a.\u0275fac=function(N){return new(N||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({imports:[Z.ez,x.u5,x.UX,r.JX]}),a})();var d=l(98232);let u=(()=>{class a{static forRoot(){return{ngModule:a}}}return a.\u0275fac=function(N){return new(N||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({imports:[Z.ez,b.zk.forRoot(),r.JX,d.Cl,x.u5]}),a})(),T=(()=>{class a{static forRoot(){return{ngModule:a,providers:[e.P,I.G]}}}return a.\u0275fac=function(N){return new(N||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({imports:[Z.ez,b.zk.forRoot(),r.JX,Z.ez,x.u5,x.UX,g.e,S.forRoot(),u.forRoot()]}),a})()},94205:(Y,F,l)=>{"use strict";l.r(F),l.d(F,{MasterMigrationModule:()=>fe});var Z=l(1298),b=l(70477),r=l(12692),I=l(94327),e=l(26320),x=l(248),g=l(67311),_=l(14970),S=l(53074),d=l(17545),u=l(92340),T=l(8929),a=l(67297),C=l(71180);let N=(()=>{class o{constructor(t,n,i,c){this.http=t,this.activatedRoute=n,this.authService=i,this.state=c}get apiUrl(){return u.N.apiUrl}loadConfig(t){return this.http.get(this.apiUrl+`/getConfig/${t}`)}downloadConfigCSV(t){return console.log("api"+this.apiUrl),this.http.get(this.apiUrl+`/downloadCSV/${t}`).map(n=>({content:new Blob([n._body],{type:n.headers.get("Content-Type")}),filename:`${t}.csv`}))}downloadConfigExcel(t){const i={headers:this.authService.getRequestOption(),method:"get"};return this.http.get(this.apiUrl+`/downloadExcel/${t}`,i).map(c=>({content:new Blob([c._body],{type:c.headers.get("Content-Type")}),filename:`${t}.xlsx`}))}downloadExcelErrorStatus(t){return this.http.get(this.apiUrl+`/downloadExcelErrorStatus/${t}`,{responseType:"blob"})}downloadSampleExcel(t){return this.http.get(this.apiUrl+`/downloadSampleExcelforMasterMigration?importName=${t}`,{responseType:"blob"})}saveConfig(t){let n={status:"error",result:""},i=new T.xQ;const c={headers:this.authService.getRequestOption(),methos:"post"};return this.http.post(this.apiUrl+"/saveConfig",{mode:"EDIT",data:t},c).subscribe(v=>{let A=v.json();"ok"==A.status?(n.status="ok",n.result=A.result,i.next(n),i.unsubscribe()):(n.status="error1",n.result=A.result,console.log(n),i.next(n),i.unsubscribe())},v=>{n.status="error2",n.result=v,console.log(n),i.next(n),i.unsubscribe()}),i}importConfig(t,n,i){let c={status:"error",result:"error"},h=new T.xQ;const v={headers:this.getRequestOptionWithoutContent(),method:"post"};return this.http.post(this.apiUrl+`/masterImport/${n}/${i}`,t,v).subscribe(A=>{h.next(A),h.unsubscribe()},A=>{c.status=0===A?.error?.loaded?"File Changed After Select":"error",c.result=A,h.next(c),h.unsubscribe()}),h}loadImportErrorList(t){return this.http.get(this.apiUrl+`/masterImportErrorList/${t}`).map(n=>n.json()||[])}saveCorrectedList(t,n){let i={status:"error",result:""},c=new T.xQ;const h={headers:this.authService.getRequestOption(),method:"post"};return this.http.post(this.apiUrl+`/masterImportCorrection/${n}`,t,h).subscribe(v=>{let A=v.json();"ok"==A.status?(i.status="ok",i.result=A.result,c.next(i),c.unsubscribe()):(i.status="error1",i.result=A.result,console.log(i),c.next(i),c.unsubscribe())},v=>{i.status="error2",i.result=v,console.log(i),c.next(i),c.unsubscribe()}),c}getRequestOptionWithoutContent(){return new d.WM({Authorization:this.authService.getAuth().token})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(d.eN),e.LFG(b.gz),e.LFG(a.e),e.LFG(C.q))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var E=l(81152),P=l(87584),J=l(62490);const m=["fileSelector_Import"],M=["fileUploadPopup"];function p(o,s){if(1&o&&(e.TgZ(0,"option",39),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}function f(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",36)(1,"label",37),e._uU(2,"Select a Master "),e.qZA(),e.TgZ(3,"div",13)(4,"select",38),e.NdJ("ngModelChange",function(i){e.CHM(t);const c=e.oxw(2);return e.KtG(c.selectedMasterName=i)}),e.YNc(5,p,2,2,"option",23),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("ngModel",t.selectedMasterName),e.xp6(1),e.Q6J("ngForOf",t.masterList)}}function y(o,s){if(1&o&&(e.TgZ(0,"div",20),e.YNc(1,f,6,2,"div",35),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.excelImportConfig.length)}}function L(o,s){if(1&o&&(e.TgZ(0,"div",20)(1,"label",40),e._uU(2),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.hij("Master :: ",t.selectedMasterName,"")}}function U(o,s){if(1&o){const t=e.EpF();e.ynx(0,43),e.TgZ(1,"tr",44)(2,"td"),e._UZ(3,"input",45),e.qZA(),e.TgZ(4,"td"),e._UZ(5,"input",46),e.qZA(),e.TgZ(6,"td"),e._UZ(7,"input",47),e.qZA(),e.TgZ(8,"td"),e._UZ(9,"input",48),e.qZA(),e.TgZ(10,"td")(11,"input",49),e.NdJ("change",function(i){const h=e.CHM(t).index,v=e.oxw(2);return e.KtG(v.MandatoryChanged(i,h))}),e.qZA()(),e.TgZ(12,"td")(13,"input",50),e.NdJ("change",function(i){const h=e.CHM(t).index,v=e.oxw(2);return e.KtG(v.AddToSheetChanged(i,h))}),e.qZA()(),e.TgZ(14,"td"),e._UZ(15,"input",51),e.qZA()(),e.BQk()}if(2&o){const t=s.index;e.xp6(1),e.Q6J("formGroupName",t)}}function w(o,s){if(1&o&&(e.TgZ(0,"table",41)(1,"thead")(2,"tr")(3,"th"),e._uU(4,"SI NO"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Caption Name"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Column Size"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Data Type"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Mandatory"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Add to Sheet"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Column Value"),e.qZA()()(),e.TgZ(17,"tbody"),e.YNc(18,U,16,1,"ng-container",42),e.qZA()()),2&o){const t=e.oxw();e.xp6(18),e.Q6J("ngForOf",t.form.get("items").controls)}}function k(o,s){if(1&o&&(e.TgZ(0,"option",39),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}function O(o,s){if(1&o&&(e.TgZ(0,"option",54),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("ngValue",t.CURNAME),e.xp6(1),e.hij("",t.CURNAME," ")}}function q(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",21)(1,"label"),e._uU(2,"Currency"),e.qZA(),e.TgZ(3,"select",52),e.NdJ("ngModelChange",function(i){e.CHM(t);const c=e.oxw();return e.KtG(c.FCurrency=i)})("change",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.CurrencyChange())}),e.YNc(4,O,2,2,"option",53),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.FCurrency),e.xp6(1),e.Q6J("ngForOf",t.masterService.Currencies)}}function B(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",21)(1,"label"),e._uU(2,"EX Rate"),e.qZA(),e.TgZ(3,"input",55),e.NdJ("ngModelChange",function(i){e.CHM(t);const c=e.oxw();return e.KtG(c.EXRATE=i)}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.EXRATE)}}function Q(o,s){if(1&o&&(e.TgZ(0,"option",39),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}function j(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",36)(1,"label",37),e._uU(2,"Select a Master "),e.qZA(),e.TgZ(3,"div",13)(4,"select",38),e.NdJ("ngModelChange",function(i){e.CHM(t);const c=e.oxw(2);return e.KtG(c.selectedMasterName=i)}),e.YNc(5,Q,2,2,"option",23),e.qZA()(),e.TgZ(6,"div",20)(7,"button",56),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.downloadErrorStatus())}),e._uU(8," Download Status "),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("ngModel",t.selectedMasterName),e.xp6(1),e.Q6J("ngForOf",t.masterList)}}function $(o,s){if(1&o&&(e.TgZ(0,"div",20),e.YNc(1,j,9,2,"div",35),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.excelImportConfig.length)}}function G(o,s){if(1&o&&(e.TgZ(0,"div",20)(1,"label",40),e._uU(2),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.hij("Master :: ",t.selectedMasterName,"")}}function V(o,s){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.hij(" ",t," ")}}function K(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"td")(1,"input",59),e.NdJ("ngModelChange",function(i){const h=e.CHM(t).$implicit,v=e.oxw().$implicit;return e.KtG(v[h]=i)}),e.qZA()()}if(2&o){const t=s.$implicit,n=s.index,i=e.oxw(),c=i.index,h=i.$implicit;e.xp6(1),e.hYB("name","",c,"_",n,""),e.Q6J("ngModel",h[t])}}function z(o,s){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,K,2,3,"td",58),e.ALo(2,"keys"),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t))}}function H(o,s){if(1&o&&(e.TgZ(0,"div",57)(1,"table",41)(2,"thead")(3,"tr"),e.YNc(4,V,2,1,"th",58),e.ALo(5,"keys"),e.qZA()(),e.TgZ(6,"tbody"),e.YNc(7,z,3,3,"tr",58),e.qZA()()()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",e.lcZ(5,2,t.importErrorList[0])),e.xp6(3),e.Q6J("ngForOf",t.importErrorList)}}function W(o,s){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.hij(" ",t," ")}}function X(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"td")(1,"input",59),e.NdJ("ngModelChange",function(i){const h=e.CHM(t).$implicit,v=e.oxw().$implicit;return e.KtG(v[h]=i)}),e.qZA()()}if(2&o){const t=s.$implicit,n=s.index,i=e.oxw(),c=i.index,h=i.$implicit;e.xp6(1),e.hYB("name","",c,"_",n,""),e.Q6J("ngModel",h[t])}}function ee(o,s){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,X,2,3,"td",58),e.ALo(2,"keys"),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t))}}function te(o,s){if(1&o&&(e.TgZ(0,"div",57)(1,"table",41)(2,"thead")(3,"tr"),e.YNc(4,W,2,1,"th",58),e.ALo(5,"keys"),e.qZA()(),e.TgZ(6,"tbody"),e.YNc(7,ee,3,3,"tr",58),e.qZA()()()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",e.lcZ(5,2,t.importErrorList[0])),e.xp6(3),e.Q6J("ngForOf",t.importErrorList)}}function oe(o,s){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.hij(" ",t," ")}}function ie(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"td")(1,"input",59),e.NdJ("ngModelChange",function(i){const h=e.CHM(t).$implicit,v=e.oxw().$implicit;return e.KtG(v[h]=i)}),e.qZA()()}if(2&o){const t=s.$implicit,n=s.index,i=e.oxw(),c=i.index,h=i.$implicit;e.xp6(1),e.hYB("name","",c,"_",n,""),e.Q6J("ngModel",h[t])}}function ne(o,s){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,ie,2,3,"td",58),e.ALo(2,"keys"),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t))}}function re(o,s){if(1&o&&(e.TgZ(0,"div",57)(1,"table",41)(2,"thead")(3,"tr"),e.YNc(4,oe,2,1,"th",58),e.ALo(5,"keys"),e.qZA()(),e.TgZ(6,"tbody"),e.YNc(7,ne,3,3,"tr",58),e.qZA()()()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",e.lcZ(5,2,t.importErrorList[0])),e.xp6(3),e.Q6J("ngForOf",t.importErrorList)}}function se(o,s){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.hij(" ",t," ")}}function ae(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"td")(1,"input",59),e.NdJ("ngModelChange",function(i){const h=e.CHM(t).$implicit,v=e.oxw().$implicit;return e.KtG(v[h]=i)}),e.qZA()()}if(2&o){const t=s.$implicit,n=s.index,i=e.oxw(),c=i.index,h=i.$implicit;e.xp6(1),e.hYB("name","",c,"_",n,""),e.Q6J("ngModel",h[t])}}function le(o,s){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,ae,2,3,"td",58),e.ALo(2,"keys"),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t))}}function ce(o,s){if(1&o&&(e.TgZ(0,"div",57)(1,"table",41)(2,"thead")(3,"tr"),e.YNc(4,se,2,1,"th",58),e.ALo(5,"keys"),e.qZA()(),e.TgZ(6,"tbody"),e.YNc(7,le,3,3,"tr",58),e.qZA()()()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",e.lcZ(5,2,t.importErrorList[0])),e.xp6(3),e.Q6J("ngForOf",t.importErrorList)}}let de=(()=>{class o{constructor(t,n,i,c,h,v,A,R,ve){this.preventNavigationService=t,this.alertService=n,this.loadingService=i,this.masterService=c,this.service=h,this.router=v,this._activatedRoute=A,this.fb=R,this._trnMainService=ve,this.fileUploadPopupSettings=new r.s,this.excelImportConfig=[],this.initialTextReadOnly=!1,this.subcriptions=[],this.FCurrency="",this.importErrorList=[],this.fileList=null,this.getAllMasterList(),this.masterService.Currencies=[],this.masterService.getCurrencies().subscribe(_e=>{this.masterService.Currencies=_e})}ngOnInit(){try{this.resetConfig(),this.onFormChanges()}catch(t){console.log(t),this.alertService.info(t)}}showImportScheme(){this.activeurlpath=this._activatedRoute.snapshot.url[0].path,this.fileUploadPopupSettings=Object.assign(new r.s,{title:"Import Scheme",sampleFileUrl:"/downloadSampleFile/scheme",uploadEndpoints:"/InsertPrimarySecondarySchemes",allowMultiple:!1,acceptFormat:".csv"}),this.fileUploadPopup.show()}UpdateSchemeImport(){this.fileUploadPopupSettings=Object.assign(new r.s,{title:"Update Scheme",sampleFileUrl:"/downloadSampleFile/",uploadEndpoints:"/UpdatePrimarySecondarySchemes",allowMultiple:!1,acceptFormat:".csv"}),this.fileUploadPopup.show()}showImportMargin(){this.fileUploadPopupSettings=Object.assign(new r.s,{title:"Import Margin",uploadEndpoints:"/insertMargins",allowMultiple:!1,acceptFormat:".csv"}),this.fileUploadPopup.show()}UpdateMarginImport(){this.fileUploadPopupSettings=Object.assign(new r.s,{title:"Update Margin",uploadEndpoints:"/UpdateMargins",allowMultiple:!1,acceptFormat:".csv"}),this.fileUploadPopup.show()}fileUploadSuccessStatus(t){"ok"==t.status?this.alertService.success("Upload Successfully"):this.alertService.info("error"==t.status?"Some of the rows cannot be saved. Please check 'Upload Status' for more details.":"Could not uploaded"),this.fileSelector_Import.nativeElement.value=null}fileUploadSuccess(t){if(t&&null!=t&&null!=t&&"ok"==t.status){let n=t.result;console.log("productList"+n),this._trnMainService.TrnMainObj.ProdList=n;for(let i in this._trnMainService.TrnMainObj.ProdList)this._trnMainService.setAltunitDropDownForView(i),this._trnMainService.getPricingOfItem(i,"",!1),this._trnMainService.TrnMainObj.ProdList[i].inputMode=!1,this._trnMainService.TrnMainObj.ProdList[i].VCHRNO=this._trnMainService.TrnMainObj.VCHRNO;this._trnMainService.ReCalculateBillWithNormal()}}createFormItem(t){return this.fb.group({ImportName:[t.ImportName],ColumnName:[t.ColumnName],SNO:[t.SNO],ColumnSize:[t.ColumnSize],DataType:[t.DataType],ColumnValue:[t.ColumnValue],Mandatory:[t.Mandatory],AddToSheet:[t.AddToSheet]})}addItemsToForm(){let t=this.form.get("items");this.excelImportConfig.forEach(n=>{t.push(this.createFormItem(n))})}onFormChanges(){this.form.valueChanges.subscribe(t=>{this.form.dirty&&this.preventNavigationService.preventNavigation(!0)})}cancel(){try{this.router.navigate(["/pages/dashboard"])}catch(t){console.log(t),this.alertService.info(t)}}ngOnDestroy(){try{this.subcriptions.forEach(t=>{t.unsubscribe()})}catch(t){console.log(t),this.alertService.info(t)}}onSave(){try{if(!this.form.valid)return void this.alertService.info("Invalid Request, Please enter all required fields.");this.onsubmit()}catch(t){console.log(t),this.alertService.info(t)}}onsubmit(){try{let t=this.form.get("items").value;if(console.log(t),null==t||0==t.length)return;this.loadingService.show("Saving Config. Please Wait...");let n=this.service.saveConfig(t).subscribe(i=>{if(this.loadingService.hide(),"ok"==i.status)this.alertService.success("Config Saved Successfully"),this.preventNavigationService.preventNavigation(!1);else{if("The ConnectionString property has not been initialized."==i.result._body)return void this.router.navigate(["/login",this.router.url]);this.alertService.info(`Error in Saving Data: ${i.result._body}`)}},i=>{this.loadingService.hide(),this.alertService.info(i)});this.subcriptions.push(n)}catch(t){this.alertService.info(t)}}getAllMasterList(){this.masterService.getAllExcelImportMasterList().subscribe(t=>{this.masterList=t,console.log("masterList",this.masterList)},t=>{this.masterList=[]})}loadConfig(){this.selectedMasterName&&null!=this.selectedMasterName&&null!=this.selectedMasterName&&""!=this.selectedMasterName?(this.loadingService.show("Loading Config. Please Wait..."),this.service.loadConfig(this.selectedMasterName).subscribe(t=>{this.loadingService.hide(),this.excelImportConfig=t,this.addItemsToForm()},t=>{this.loadingService.hide(),this.excelImportConfig=[]})):this.alertService.info("Please Select a Master")}downloadConfigCSV(){this.selectedMasterName&&null!=this.selectedMasterName&&null!=this.selectedMasterName&&""!=this.selectedMasterName?(this.loadingService.show("Downloading..."),this.service.downloadConfigCSV(this.selectedMasterName).subscribe(t=>{this.loadingService.hide(),this.downloadFile(t)},t=>{this.loadingService.hide()})):this.alertService.info("Please Select a Master")}downloadConfigExcel(){this.selectedMasterName&&null!=this.selectedMasterName&&null!=this.selectedMasterName&&""!=this.selectedMasterName?(console.log("masterName",this.selectedMasterName),this.loadingService.show("Sample excel file is downloading..Please wait"),this.service.downloadSampleExcel(this.selectedMasterName).subscribe(n=>{let i=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});I.saveAs(i,`${this.selectedMasterName} Sample.xlsx`),this.loadingService.hide()},n=>{console.log("Error message for excel",n),this.alertService.info("This sample excel file download is not possible."),this.loadingService.hide()})):this.alertService.info("Please Select a Master")}downloadFile(t){const n=document.createElement("a");n.href=URL.createObjectURL(t.content),n.download=t.filename,document.body.appendChild(n),n.click()}onFileChange(t){console.log("filteupload",t.target.files),this.fileList=t.target.files}clearFile(){this.fileList=null}importConfig(){if(null!=this.fileList&&0!=this.fileList.length)if(null!=this.selectedMasterName&&""!=this.selectedMasterName){if(this.fileList.length>0){let t=this.fileList[0],n=new FormData;n.append("config",t,t.name),this.loadingService.show("Uploading. Please Wait...this may take some time"),this.service.importConfig(n,this.selectedMasterName,this.FCurrency).subscribe(i=>{this.loadingService.hide(),console.log("result"),"ok"==i.status?(this.alertService.success("Request Successful"),this.selectedMasterName="",this.fileList=null,this.fileSelector_Import.nativeElement.value=null):"errorfile"==i.status?this.alertService.info("Some of the rows cannot be saved.Please check 'Upload Status' for more details."):"error"===i.status?this.alertService.info("Error :"+i.result):"File Changed After Select"===i.status?(this.loadingService.hide(),this.fileSelector_Import.nativeElement.value=null,this.clearFile(),this.alertService.info("File Changed after selection. Please select file again.")):(this.loadingService.hide(),this.alertService.info(i.result))},i=>{console.log("R",i),this.loadingService.hide(),this.alertService.info(i)})}}else this.alertService.info("Please Select Master.");else this.alertService.info("Please Select File.")}resetConfig(){this.form=this.fb.group({items:this.fb.array([])}),this.excelImportConfig=[],this.selectedMasterName="",this.importErrorList=[],this.preventNavigationService.preventNavigation(!1)}CurrencyChange(t){let n=this.masterService.Currencies.filter(i=>i.CURNAME==this.FCurrency)[0];this.EXRATE=n.EXRATE}MandatoryChanged(t,n){let i=this.form.get("items");!t.target.checked||i.at(n).patchValue({AddToSheet:!0})}AddToSheetChanged(t,n){let i=this.form.get("items");if(!i.controls[n].get("Mandatory").value)return!0;i.at(n).patchValue({AddToSheet:!0})}onLoadMaster(){null!=this.selectedMasterName&&""!=this.selectedMasterName?(this.loadingService.show("Loading Master Data. Please Wait..."),this.service.loadImportErrorList(this.selectedMasterName).subscribe(t=>{this.loadingService.hide(),this.importErrorList=t},t=>{this.loadingService.hide(),this.alertService.info("No Data Found"),console.log(t)})):this.alertService.info("Please Select Master.")}onLoadMargin(){}downloadErrorStatus(){this.selectedMasterName&&null!=this.selectedMasterName&&null!=this.selectedMasterName&&""!=this.selectedMasterName?(console.log("masterName",this.selectedMasterName),this.loadingService.show("Excel file is downloading..Please wait"),this.service.downloadExcelErrorStatus(this.selectedMasterName).subscribe(n=>{console.log("Res ko result",n),this.loadingService.hide();let i=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});I.saveAs(i,`${this.selectedMasterName}.xlsx`)},n=>{console.log("Error message for excel",n),this.alertService.info("This excel file download is not possible."),this.loadingService.hide()})):this.alertService.info("Please Select a Master")}onSaveMaster(){null!=this.selectedMasterName&&""!=this.selectedMasterName?(this.loadingService.show("Saving Master Data. Please Wait..."),this.service.saveCorrectedList(this.importErrorList,this.selectedMasterName).subscribe(t=>{this.loadingService.hide(),this.alertService.success("Successfully Saved.")},t=>{this.loadingService.hide(),this.alertService.info("No Data Found"),console.log(t)})):this.alertService.info("Please Select Master.")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(x.d),e.Y36(g.c),e.Y36(_.V),e.Y36(S.P),e.Y36(N),e.Y36(b.F0),e.Y36(b.gz),e.Y36(E.qu),e.Y36(P.p))},o.\u0275cmp=e.Xpm({type:o,selectors:[["excel-import-config"]],viewQuery:function(t,n){if(1&t&&(e.Gf(m,5),e.Gf(M,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.fileSelector_Import=i.first),e.iGM(i=e.CRH())&&(n.fileUploadPopup=i.first)}},decls:89,vars:15,consts:[[1,"main-container",2,"margin-top","0px","; margin-bottom","0px","height","auto"],[1,"row"],[1,"col-md-12"],["id","sheet-generation-tabs",1,"tabbable"],[1,"nav","nav-tabs",2,"background-color","#d9e5e7"],[1,"nav-item"],["href","#sheet-generation","data-toggle","tab",1,"nav-link","active"],["href","#upload-sheet","data-toggle","tab",1,"nav-link"],["href","#update-status","data-toggle","tab",1,"nav-link"],[1,"tab-content"],["id","sheet-generation",1,"tab-pane","active"],[1,"row","clearfix"],["class","col-md-4",4,"ngIf"],[1,"col-md-8"],["type","button",1,"btn","btn-info",2,"margin-right","10px",3,"click"],["type","button ",1,"btn","btn-info",2,"margin-right","10px",3,"click"],[1,"form-horizontal",3,"formGroup"],[1,"col-md-12",2,"height","400px","overflow-y","auto"],["class","table",4,"ngIf"],["id","upload-sheet",1,"tab-pane"],[1,"col-md-4"],[1,"form-group"],["name","selectedMaster",1,"form-control",2,"height","35px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],["type","file","accept",".xlsx, .csv",1,"form-control",2,"height","41px","font-size","14px",3,"change"],["fileSelector_Import",""],[1,"btn","btn-info",3,"click"],["id","update-status",1,"tab-pane"],["class","col-md-12","style","width: 100%; height: 400px;  overflow: auto;",4,"ngIf"],["id","Margin",1,"tab-pane"],["id","Scheme",1,"tab-pane"],["id","Product",1,"tab-pane"],[3,"popupsettings","onUploaded"],["fileUploadPopup",""],["class","form-group row",4,"ngIf"],[1,"form-group","row"],[1,"col-md-4","form-control-label"],["name","selectedMaster",1,"form-control",2,"color","black",3,"ngModel","ngModelChange"],[3,"value"],[1,"col-md-6"],[1,"table"],["formArrayName","items",4,"ngFor","ngForOf"],["formArrayName","items"],[3,"formGroupName"],["formControlName","SNO","readonly","",1,"non-editable"],["formControlName","ColumnName","readonly","",1,"non-editable"],["formControlName","ColumnSize","readonly","",1,"non-editable"],["formControlName","DataType","readonly","",1,"non-editable"],["type","checkbox","formControlName","Mandatory",1,"non-editable",3,"change"],["type","checkbox","formControlName","AddToSheet",1,"non-editable",3,"change"],["formControlName","ColumnValue","readonly","",1,"non-editable"],[1,"form-control",2,"color","black","height","35px",3,"ngModel","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["type","number",1,"form-control",2,"color","black","height","35px",3,"ngModel","ngModelChange"],["type","button ",1,"btn","btn-info",3,"click"],[1,"col-md-12",2,"width","100%","height","400px","overflow","auto"],[4,"ngFor","ngForOf"],["type","text",1,"form-control",3,"ngModel","name","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),e._uU(7,"Sheet Generation"),e.qZA()(),e.TgZ(8,"li",5)(9,"a",7),e._uU(10,"Upload Sheet"),e.qZA()(),e.TgZ(11,"li",5)(12,"a",8),e._uU(13,"Upload Status"),e.qZA()()(),e.TgZ(14,"div",9)(15,"div",10)(16,"div",11)(17,"div",2),e.YNc(18,y,2,1,"div",12),e.YNc(19,L,3,1,"div",12),e.TgZ(20,"div",13)(21,"button",14),e.NdJ("click",function(){return n.downloadConfigExcel()}),e._uU(22," Download Sample Excel "),e.qZA(),e.TgZ(23,"button",14),e.NdJ("click",function(){return n.resetConfig()}),e._uU(24," Clear Config "),e.qZA(),e.TgZ(25,"button",15),e.NdJ("click",function(){return n.cancel()}),e._uU(26," Back "),e.qZA()()()(),e._UZ(27,"hr"),e.TgZ(28,"form",16)(29,"div",17),e.YNc(30,w,19,1,"table",18),e.qZA()()(),e.TgZ(31,"div",19)(32,"div",11)(33,"div",2)(34,"div",20)(35,"div",2)(36,"div",21)(37,"label"),e._uU(38,"Select a Master "),e.qZA(),e.TgZ(39,"select",22),e.NdJ("ngModelChange",function(c){return n.selectedMasterName=c}),e.YNc(40,k,2,2,"option",23),e.qZA()(),e.YNc(41,q,5,2,"div",24),e.YNc(42,B,4,1,"div",24),e.TgZ(43,"div",21)(44,"label"),e._uU(45,"Choose a Path "),e.qZA(),e.TgZ(46,"input",25,26),e.NdJ("change",function(c){return n.onFileChange(c)}),e.qZA()(),e.TgZ(48,"button",27),e.NdJ("click",function(){return n.importConfig()}),e._uU(49," Upload File "),e.qZA(),e.TgZ(50,"button",15),e.NdJ("click",function(){return n.cancel()}),e._uU(51," Back "),e.qZA()()()()()(),e.TgZ(52,"div",28)(53,"div",11)(54,"div",2),e.YNc(55,$,2,1,"div",12),e.YNc(56,G,3,1,"div",12),e.qZA(),e._UZ(57,"hr"),e.YNc(58,H,8,4,"div",29),e.qZA()(),e.TgZ(59,"div",30)(60,"div",11)(61,"div",2)(62,"div",13)(63,"button",14),e.NdJ("click",function(){return n.UpdateMarginImport()}),e._uU(64," Upload Margin "),e.qZA()()(),e._UZ(65,"hr"),e.YNc(66,te,8,4,"div",29),e.qZA()(),e.TgZ(67,"div",31)(68,"div",11)(69,"div",2)(70,"div",13)(71,"button",14),e.NdJ("click",function(){return n.showImportScheme()}),e._uU(72," Load "),e.qZA(),e.TgZ(73,"button",14),e.NdJ("click",function(){return n.UpdateSchemeImport()}),e._uU(74," Update "),e.qZA()()(),e._UZ(75,"hr"),e.YNc(76,re,8,4,"div",29),e.qZA()(),e.TgZ(77,"div",32)(78,"div",11)(79,"div",2)(80,"div",13)(81,"button",14),e.NdJ("click",function(){return n.showImportScheme()}),e._uU(82," Load "),e.qZA(),e.TgZ(83,"button",14),e.NdJ("click",function(){return n.UpdateSchemeImport()}),e._uU(84," Update "),e.qZA()()(),e._UZ(85,"hr"),e.YNc(86,ce,8,4,"div",29),e.qZA()()()()()()(),e.TgZ(87,"file-uploader-popup",33,34),e.NdJ("onUploaded",function(c){return n.fileUploadSuccess(c)}),e.qZA()),2&t&&(e.xp6(18),e.Q6J("ngIf",!n.excelImportConfig.length),e.xp6(1),e.Q6J("ngIf",n.excelImportConfig.length),e.xp6(9),e.Q6J("formGroup",n.form),e.xp6(2),e.Q6J("ngIf",n.excelImportConfig.length),e.xp6(9),e.Q6J("ngModel",n.selectedMasterName),e.xp6(1),e.Q6J("ngForOf",n.masterList),e.xp6(1),e.Q6J("ngIf","Import Purchase"==n.selectedMasterName),e.xp6(1),e.Q6J("ngIf","Import Purchase"==n.selectedMasterName),e.xp6(13),e.Q6J("ngIf",!n.importErrorList.length),e.xp6(1),e.Q6J("ngIf",n.importErrorList.length),e.xp6(2),e.Q6J("ngIf",n.importErrorList.length),e.xp6(8),e.Q6J("ngIf",n.importErrorList.length),e.xp6(10),e.Q6J("ngIf",n.importErrorList.length),e.xp6(10),e.Q6J("ngIf",n.importErrorList.length),e.xp6(1),e.Q6J("popupsettings",n.fileUploadPopupSettings))},dependencies:[Z.sg,Z.O5,E._Y,E.YN,E.Kr,E.Fj,E.wV,E.Wl,E.EJ,E.JJ,E.JL,E.On,E.sg,E.u,E.x0,E.CE,r.U,J.VO],styles:["input.non-editable[_ngcontent-%COMP%] {\n      border: none;\n      background: #f1f1f1;\n      text-align: left;\n    }\n  \n    .table[_ngcontent-%COMP%]    > thead[_ngcontent-%COMP%]    > tr[_ngcontent-%COMP%]    > th[_ngcontent-%COMP%]:first-child {\n      text-align: left;\n    }\n  \n    input[_ngcontent-%COMP%] {\n      min-width: 90px;\n      height: 23px;\n    }\n  \n    tr[_ngcontent-%COMP%] {\n      height: 30px;\n      line-height: 30px;\n      text-align: center;\n    }"]}),o})();var D=l(82661);const pe=[{path:"",component:de,canActivate:[D.C]}];let ue=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[b.Bz.forChild(pe),b.Bz]}),o})();var me=l(46543),he=l(70489),ge=l(74602);let fe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[D.C,P.p,N],imports:[Z.ez,me.m,ue,he.Is,ge.c.forRoot()]}),o})()},94327:function(Y,F){var b;void 0!==(b=function(){"use strict";function I(d,u,T){var a=new XMLHttpRequest;a.open("GET",d),a.responseType="blob",a.onload=function(){S(a.response,u,T)},a.onerror=function(){console.error("could not download file")},a.send()}function e(d){var u=new XMLHttpRequest;u.open("HEAD",d,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function x(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(u)}}var g="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,_=g.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),S=g.saveAs||("object"!=typeof window||window!==g?function(){}:"download"in HTMLAnchorElement.prototype&&!_?function(d,u,T){var a=g.URL||g.webkitURL,C=document.createElement("a");C.download=u=u||d.name||"download",C.rel="noopener","string"==typeof d?(C.href=d,C.origin===location.origin?x(C):e(C.href)?I(d,u,T):x(C,C.target="_blank")):(C.href=a.createObjectURL(d),setTimeout(function(){a.revokeObjectURL(C.href)},4e4),setTimeout(function(){x(C)},0))}:"msSaveOrOpenBlob"in navigator?function(d,u,T){if(u=u||d.name||"download","string"!=typeof d)navigator.msSaveOrOpenBlob(function r(d,u){return typeof u>"u"?u={autoBom:!1}:"object"!=typeof u&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\ufeff",d],{type:d.type}):d}(d,T),u);else if(e(d))I(d,u,T);else{var a=document.createElement("a");a.href=d,a.target="_blank",setTimeout(function(){x(a)})}}:function(d,u,T,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof d)return I(d,u,T);var C="application/octet-stream"===d.type,N=/constructor/i.test(g.HTMLElement)||g.safari,E=/CriOS\/[\d]+/.test(navigator.userAgent);if((E||C&&N||_)&&typeof FileReader<"u"){var P=new FileReader;P.onloadend=function(){var M=P.result;M=E?M:M.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=M:location=M,a=null},P.readAsDataURL(d)}else{var J=g.URL||g.webkitURL,m=J.createObjectURL(d);a?a.location=m:location.href=m,a=null,setTimeout(function(){J.revokeObjectURL(m)},4e4)}});g.saveAs=S.saveAs=S,Y.exports=S}.apply(F,[]))&&(Y.exports=b)}}]);