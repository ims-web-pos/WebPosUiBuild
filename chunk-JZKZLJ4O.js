import{a as H}from"./chunk-KR3K6WPQ.js";import{c as ve}from"./chunk-U5PHRH2R.js";import{a as Y,b as Z,c as ee}from"./chunk-A75OV2MK.js";import{A as ue,B as pe,C as de,G as fe,H as ge,I as be,J as he,K as E,L as P,Q as N,m as ie,n as ae,o as w,p as oe,q as ne,t as re,u as le,w as se,x as ce,z as me}from"./chunk-GLQ3AD37.js";import{$ as te,ga as Ce,k as J,m as X}from"./chunk-IOQHTKTC.js";import{$ as q,$a as p,$b as K,Ab as S,Bb as y,Cb as i,Db as a,Eb as c,F as U,Ib as x,Kc as z,Lb as b,Nb as d,Nc as W,Qc as $,Rb as _,Sb as M,Tb as D,Vb as r,Wb as C,Xb as A,Zb as L,_a as s,_b as Q,bc as I,ic as v,ja as k,p as j,pb as B,sa as f,ta as g,tb as m,yb as F,yc as h,z as G}from"./chunk-VBZWTO5P.js";var V=class n{constructor(t){this.tableFetchService=t}featureTableColumns=h(()=>[...this.tableFetchService.tableColumns(),{header:"ACTION",def:"ACTION"}]);featureTableData=h(()=>[...this.tableFetchService.tableData()]);ngOnInit(){this.tableFetchService.getTableData("getAllFeatureConfiguration"),this.tableFetchService.selectedTab.set("feature-form")}static \u0275fac=function(e){return new(e||n)(p(E))};static \u0275cmp=k({type:n,selectors:[["app-feature-config"]],standalone:!0,features:[I],decls:9,vars:4,consts:[[1,"container","mt-3"],[1,"heading","fw-bold","fs-5"],[1,"border-bottom","border-secondary"],[1,"container","d-flex","flex-column","flex-grow-1"],[1,"row"],[1,"col-md-6","mt-2","ms-auto"],[3,"columns","dataSource"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"h5",1),r(2,"Feature Configuration"),a()(),c(3,"div",2),i(4,"div",3)(5,"div",4)(6,"div",5),c(7,"app-generic-filter",6),a()(),c(8,"app-generic-table",6),a()),e&2&&(s(7),m("columns",o.featureTableColumns())("dataSource",o.featureTableData()),s(),m("columns",o.featureTableColumns())("dataSource",o.featureTableData()))},dependencies:[P,N]})};var O=class n{constructor(){}extractKeys(t,e){return t.map(o=>{let l={};return Object.keys(e).forEach(u=>{let T=e[u];u in o&&(l[T]=o[u])}),l})}static \u0275fac=function(e){return new(e||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};var _e=["dialogHeader"],Me=["subCatdialogContent"],De=["featureTablePopupContent"],we=["dialogFooter"];function Te(n,t){if(n&1&&(i(0,"option",34),r(1),a()),n&2){let e=t.$implicit;m("value",e.ID),s(),C(e.Category)}}function ke(n,t){if(n&1&&(i(0,"option",34),r(1),a()),n&2){let e=t.$implicit;m("value",e.ID),s(),C(e.SubCategory)}}function Ie(n,t){if(n&1&&(i(0,"option",34),r(1),a()),n&2){let e=t.$implicit;m("value",e.ID),s(),C(e.Module)}}function Ee(n,t){if(n&1&&(i(0,"option",34),r(1),a()),n&2){let e=t.$implicit;m("value",e.FeaturesID),s(),C(e.FeaturesName)}}function Pe(n,t){if(n&1&&(i(0,"div"),c(1,"app-generic-table",60),a()),n&2){let e=d();s(),m("columns",e.appMenuColumns)("dataSource",e.appMenuData())("paginationId","list1")}}function Ne(n,t){if(n&1&&(i(0,"div"),c(1,"app-generic-table",60),a()),n&2){let e=d();s(),m("columns",e.appSettingColumns)("dataSource",e.appSettingData())("paginationId","list2")}}function Ve(n,t){if(n&1&&(i(0,"h4",61),r(1),a()),n&2){let e=d();s(),C(e.contentHeader)}}function Oe(n,t){if(n&1&&(i(0,"h4",61),r(1),a()),n&2){let e=d();s(),C(e.contentHeader)}}function Re(n,t){if(n&1){let e=x();i(0,"div",12)(1,"div",40)(2,"div",62)(3,"label",63),r(4),a()(),i(5,"div",64)(6,"input",65),K("ngModelChange",function(l){f(e);let u=d();return Q(u.inputValue,l)||(u.inputValue=l),g(l)}),a()()()()}if(n&2){let e=d();s(4),A("",e.contentHeader," Name:"),s(2),L("ngModel",e.inputValue)}}function Be(n,t){if(n&1){let e=x();i(0,"div",12)(1,"div",66),c(2,"app-generic-filter",67),i(3,"button",68),b("click",function(){f(e);let l=d();return g(l.onOkClick())}),r(4,"OK"),a()(),c(5,"app-generic-table",60),a()}if(n&2){let e=d();s(2),m("columns",e.featurePopupColumns())("dataSource",e.featurePopupData()),s(3),m("columns",e.featurePopupColumns())("dataSource",e.featurePopupData())("paginationId","list3")}}function Ae(n,t){if(n&1){let e=x();i(0,"button",69),b("click",function(){f(e);let l=d();return g(l.saveSubCat())}),r(1,"Save"),a(),i(2,"button",70),r(3,"Cancel"),a()}}var R=class n{constructor(t,e,o,l,u,T,He,je,Ge){this.fb=t;this.apiService=e;this.route=o;this.router=l;this.tableFetchService=u;this.utilsService=T;this.location=He;this.dialog=je;this.snackBarService=Ge}dialogRef;featureForm;activePath;contentHeader;selectButtonLabel="Select Application Menu";selectedTabIndex=0;category=[];subCategory=[];module=[];mainFeatures=[];mode="add";inputValue;dialogHeader;subCatdialogContent;featureTablePopupContent;dialogFooter;featurePopupColumns=h(()=>[{header:"",def:"CHECKBOX"},...this.tableFetchService.featurePopupColumns()]);featurePopupData=h(()=>[...this.tableFetchService.featurePopupData()]);appMenuColumns;appSettingColumns;appMenuData=h(()=>[...this.tableFetchService.appMenuData()]);appSettingData=h(()=>[...this.tableFetchService.appSettingData()]);featureConfigData;ngOnInit(){this.route.queryParams.subscribe(t=>{let e=t.mode,o=t.id;e&&o&&(e==="view"&&(this.mode="view"),e==="edit"&&(this.mode="edit"),this.getViewApi("getFeatureByFeatureID",{featureID:o}))}),this.getData(),this.appMenuColumns=this.tableFetchService.appMenuColumns,this.appSettingColumns=this.tableFetchService.appSettingColumns,this.featureFormInit()}getData(){G({category:this.apiService.get("getCategory"),subCategory:this.apiService.get("getSubCategory"),module:this.apiService.get("getModule")}).subscribe(t=>{t.category?.result?.length>0&&(this.category=t.category.result),t.subCategory?.result?.length>0&&(this.subCategory=t.subCategory.result),t.module?.result?.length>0&&(this.module=t.module.result)})}getViewApi(t,e){this.apiService.get(t,e).subscribe(o=>{o?.result&&(this.featureConfigData=o.result,this.featureFormInit())})}featureFormInit(){this.featureForm=this.fb.group({mode:[this.mode||"",w.required],data:this.fb.group({sn:[this.featureConfigData?.sn||""],description:[this.featureConfigData?.description||""],featuresID:[this.featureConfigData?.featuresID||""],featuresName:[this.featureConfigData?.featuresName||"",w.required],category:[this.featureConfigData?.category||""],subCategory:[this.featureConfigData?.subCategory||""],module:[this.featureConfigData?.module||"",w.required],isBasic:[this.featureConfigData?.isBasic||0],hasMainFeatures:[this.featureConfigData?.hasMainFeatures||0],mainFeatures:[this.featureConfigData?.mainFeatures||""],isUserConfigurable:[this.featureConfigData?.isUserConfigurable||0],applicationMenu:[this.featureConfigData?.applicationMenu||[]],applicationSetting:[this.featureConfigData?.applicationSetting||[]],notes:[this.featureConfigData?.notes||""],displayName:[this.featureConfigData?.displayName||""]})}),this.featureConfigData?.applicationMenu?.length>0&&this.tableFetchService.appMenuData.set([...this.featureConfigData?.applicationMenu]),this.featureConfigData?.applicationSetting?.length>0&&this.tableFetchService.appSettingData.set([...this.featureConfigData?.applicationSetting]),this.getMainFeatures(),this.mode=="add"&&this.toggleMainFeature(0),this.featureForm.get("data.hasMainFeatures")?.valueChanges.subscribe(t=>{this.toggleMainFeature(t)}),this.mode=="view"&&this.featureForm.disable()}toggleMainFeature(t){t==1?(this.featureForm.get("data.mainFeatures")?.enable(),this.featureForm.get("data.mainFeatures")?.setValidators([w.required])):(this.featureForm.get("data.mainFeatures")?.disable(),this.featureForm.get("data.mainFeatures")?.clearValidators(),this.featureForm.get("data.mainFeatures")?.reset()),this.featureForm.get("data.mainFeatures")?.updateValueAndValidity()}getMainFeatures(){this.mainFeatures?.length==0&&this.apiService.get("getMainFeatures").subscribe(t=>{if(t?.result?.length>0){let e=t.result;if(this.mode==="edit"){let o=e.findIndex(l=>l.FeaturesID===this.featureForm.get("data.featuresID")?.value);o!==-1&&(e.splice(o,1),this.mainFeatures=e)}else this.mainFeatures=e}})}openDialog(t){this.contentHeader=t,this.dialog.open(H,{disableClose:!0,panelClass:"custom-dialog",data:{contentHeader:this.dialogHeader,contentTemplate:this.subCatdialogContent,contentFooter:this.dialogFooter},width:"35vw",height:"auto"})}onTabClick(t){switch(this.selectedTabIndex=t?.index,t?.index){case 0:this.selectButtonLabel="Select Application Menu";break;case 1:this.selectButtonLabel="Select application setting";break}}popupButtonClick(){this.selectedTabIndex==0?(this.contentHeader="Application Menu List",this.tableFetchService.getFeaturePopupData("getApplicationMenu")):(this.contentHeader="Application Setting List",this.tableFetchService.getFeaturePopupData("getApplicationSetting")),this.dialogRef=this.dialog.open(H,{disableClose:!0,data:{contentHeader:this.dialogHeader,contentTemplate:this.featureTablePopupContent},maxWidth:"80vw",height:"70vh"})}onOkClick(){this.selectedTabIndex==0?(this.tableFetchService.appMenuData.set(this.tableFetchService.selectedPopupRows),this.tableFetchService.selectedPopupRows=[]):(this.tableFetchService.appSettingData.set(this.tableFetchService.selectedPopupRows),this.tableFetchService.selectedPopupRows=[]),this.dialogRef.close(),this.tableFetchService.paginationPage.set(1)}saveSubCat(){let t;t={mode:this.mode,data:{subcategoryName:this.inputValue}},this.apiService.post("saveSubCategory",t).subscribe(e=>{this.dialog.closeAll(),this.getData()})}onFeatureSave(){let t=this.utilsService.extractKeys([...this.appMenuData()],{MenuID:"menuID"}),e=this.utilsService.extractKeys([...this.appSettingData()],{Setting_Name:"settingName"});this.featureForm.get("data.applicationMenu")?.setValue(t),this.featureForm.get("data.applicationSetting")?.setValue(e),this.featureForm.get("data.isBasic")?.setValue(this.featureForm.get("data.isBasic")?.value?1:0),this.featureForm.get("data.isUserConfigurable")?.setValue(this.featureForm.get("data.isUserConfigurable")?.value?1:0),this.featureForm.get("data.hasMainFeatures")?.setValue(this.featureForm.get("data.hasMainFeatures")?.value?1:0),this.featureForm.get("data.category")?.value||this.featureForm.get("data.category")?.setValue(null),this.featureForm.get("data.subCategory")?.value||this.featureForm.get("data.subCategory")?.setValue(null);let o=this.featureForm.getRawValue();this.featureForm.invalid||this.apiService.post("saveFeatureConfiguration",o).pipe(U(l=>{let u=l.error?.result||"Error while saving Feature Configuration!!";return this.snackBarService.showError(u),j(()=>l)})).subscribe(l=>{this.resetFeatureForm(),this.snackBarService.showSuccess("Feature configuration saved Sucessfully"),this.router.navigate(["/feature-config"])})}resetFeatureForm(){this.featureForm.reset(),this.category=[],this.subCategory=[],this.module=[],this.mainFeatures=[],this.tableFetchService.appMenuData.set([]),this.tableFetchService.appSettingData.set([])}ngOnDestroy(){this.resetFeatureForm()}back(){this.location.back()}static \u0275fac=function(e){return new(e||n)(p(fe),p(he),p(J),p(X),p(E),p(O),p(z),p(ve),p(Ce))};static \u0275cmp=k({type:n,selectors:[["app-feature-form"]],viewQuery:function(e,o){if(e&1&&(_(_e,7),_(Me,7),_(De,7),_(we,7)),e&2){let l;M(l=D())&&(o.dialogHeader=l.first),M(l=D())&&(o.subCatdialogContent=l.first),M(l=D())&&(o.featureTablePopupContent=l.first),M(l=D())&&(o.dialogFooter=l.first)}},standalone:!0,features:[I],decls:106,vars:8,consts:[["subCatdialogHeader",""],["dialogHeader",""],["subCatdialogContent",""],["featureTablePopupContent",""],["dialogFooter",""],[1,"container","my-1","d-flex","justify-content-between","align-items-center"],[1,"col-md-6","px-3"],[1,"mb-0","heading"],[1,"col-md-6","d-flex","justify-content-end"],["id","save",1,"btn","btn-primary","me-2","px-4",3,"click","disabled"],["id","back",1,"btn","px-4",3,"click"],[1,"border-bottom","mb-3"],[1,"container"],[3,"formGroup"],[1,"container",3,"formGroupName"],[1,"row","g-3"],[1,"row","col-md-6"],[1,"mt-3","col-md-2"],["for","sn",1,"form-label"],["type","text","id","sn","formControlName","sn",1,"form-control","px-2","py-1"],[1,"mt-3","col-md-5"],["for","featureName",1,"form-label"],[1,"star"],["type","text","id","featureName","formControlName","featuresName",1,"form-control","px-2","py-1"],["type","text","id","displayName","formControlName","displayName",1,"form-control","px-2","py-1"],[1,"mb-3","col-md-6"],["for","description",1,"form-label"],["id","description","formControlName","description",1,"form-control","px-1","py-1"],["for","notes",1,"form-label"],["id","notes","formControlName","notes",1,"form-control","px-1","py-1"],[1,"col-md-6"],[1,"row","mb-3"],["for","category",1,"form-label"],["id","category","formControlName","category",1,"form-select","px-2","py-1"],[3,"value"],["for","subCategory",1,"form-label"],[1,"input-group"],["id","subCategory","formControlName","subCategory",1,"form-select","px-2","py-1"],["type","button",1,"dialog-button",3,"click","disabled"],["src","assets/images/addButton.png","alt","addicon"],[1,"row"],[1,"mb-3","col-md-6","pe-2"],["for","modules",1,"form-label"],["id","modules","formControlName","module",1,"form-select","px-2","py-1"],["for","mainFeature",1,"form-label"],["id","mainFeature","formControlName","mainFeatures",1,"form-select","px-2","py-1"],[1,"row","align-items-center"],[1,"col-md-auto"],["type","checkbox","id","isBasicFeature","formControlName","isBasic",1,"form-check-input","me-2"],["for","isBasicFeature",1,"form-check-label"],["type","checkbox","id","isUserConfigurable","formControlName","isUserConfigurable",1,"form-check-input","me-2"],["for","isUserConfigurable",1,"form-check-label"],["type","checkbox","id","hasMainFeatures","formControlName","hasMainFeatures",1,"form-check-input","me-2"],["for","hasMainFeatures",1,"form-check-label"],[1,"row","align-items-center","my-2"],["animationDuration","0ms",1,"mt-2",3,"selectedTabChange"],["value","0","label","Application Menu"],["value","1","label","Application Setting Configuration"],[1,"btn","ok-btn","px-5","ms-3",3,"click","disabled"],[4,"ngIf"],[3,"columns","dataSource","paginationId"],["mat-dialog-title","",1,"text-white","mb-0","mx-3"],[1,"col-lg-4","col-md-5","col-11","px-0"],["for","sub-category",1,"form-label","text-body","mt-1"],[1,"col-lg-7","col-md-6","col-11","px-0"],["type","text",1,"form-control","px-2","py-1",3,"ngModelChange","ngModel"],[1,"d-flex","align-items-center","justify-content-between","mb-2"],[3,"columns","dataSource"],[1,"btn","ok-btn","px-5","ms-3",3,"click"],["type","button","id","save",1,"btn","px-4","m-2",3,"click"],["mat-dialog-close","","type","button","id","close",1,"btn","px-4"]],template:function(e,o){if(e&1){let l=x();i(0,"div",5)(1,"div",6)(2,"h4",7),r(3,"Feature Registration"),a()(),i(4,"div",8)(5,"button",9),b("click",function(){return f(l),g(o.onFeatureSave())}),r(6,"SAVE"),a(),i(7,"button",10),b("click",function(){return f(l),g(o.back())}),r(8,"BACK"),a()()(),c(9,"div",11),i(10,"div",12)(11,"form",13)(12,"div",14)(13,"div",15)(14,"div",16)(15,"div",17)(16,"label",18),r(17,"S.N:"),a(),c(18,"input",19),a(),i(19,"div",20)(20,"label",21),r(21,"Feature Name: "),i(22,"span",22),r(23,"*"),a()(),c(24,"input",23),a(),i(25,"div",20)(26,"label",18),r(27,"Display Name: "),i(28,"span",22),r(29,"*"),a()(),c(30,"input",24),a(),i(31,"div",25)(32,"label",26),r(33,"Description: "),i(34,"span",22),r(35,"*"),a()(),c(36,"textarea",27),a(),i(37,"div",25)(38,"label",28),r(39,"Notes:"),a(),c(40,"textarea",29),a()(),i(41,"div",30)(42,"div",31)(43,"div",30)(44,"label",32),r(45,"Category:"),a(),i(46,"select",33),S(47,Te,2,2,"option",34,F),a()(),i(49,"div",30)(50,"label",35),r(51,"Sub Category:"),a(),i(52,"div",36)(53,"select",37),S(54,ke,2,2,"option",34,F),a(),i(56,"button",38),b("click",function(){return f(l),g(o.openDialog("Sub Category"))}),c(57,"img",39),a()()()(),i(58,"div",40)(59,"div",41)(60,"label",42),r(61,"Modules: "),i(62,"span",22),r(63,"*"),a()(),i(64,"select",43),S(65,Ie,2,2,"option",34,F),a()(),i(67,"div",30)(68,"label",44),r(69,"Main Feature"),a(),i(70,"select",45),S(71,Ee,2,2,"option",34,F),a()()(),i(73,"div",46)(74,"div",47),c(75,"input",48),i(76,"label",49),r(77,"Is Basic Feature"),a()(),i(78,"div",47),c(79,"input",50),i(80,"label",51),r(81,"Is User Configurable"),a()(),i(82,"div",47),c(83,"input",52),i(84,"label",53),r(85,"Has Main Feature"),a()()()()()()(),i(86,"div",54)(87,"div",30)(88,"mat-tab-group",55),b("selectedTabChange",function(T){return f(l),g(o.onTabClick(T))}),c(89,"mat-tab",56)(90,"mat-tab",57),a()(),i(91,"div",8)(92,"button",58),b("click",function(){return f(l),g(o.popupButtonClick())}),r(93),a()()(),B(94,Pe,2,3,"div",59)(95,Ne,2,3,"div",59),a(),B(96,Ve,2,1,"ng-template",null,0,v)(98,Oe,2,1,"ng-template",null,1,v)(100,Re,7,2,"ng-template",null,2,v)(102,Be,6,5,"ng-template",null,3,v)(104,Ae,4,0,"ng-template",null,4,v)}e&2&&(s(5),m("disabled",o.mode=="view"),s(6),m("formGroup",o.featureForm),s(),m("formGroupName","data"),s(35),y(o.category),s(7),y(o.subCategory),s(2),m("disabled",o.mode=="view"),s(9),y(o.module),s(6),y(o.mainFeatures),s(21),m("disabled",o.mode=="view"),s(),A("",o.selectButtonLabel,">"),s(),m("ngIf",o.selectedTabIndex==0),s(),m("ngIf",o.selectedTabIndex==1))},dependencies:[$,W,be,le,pe,de,ae,ie,ue,oe,ne,se,me,ce,ge,re,ee,Y,Z,te,N,P],styles:["h4[_ngcontent-%COMP%]{font-size:20px;font-weight:500}label[_ngcontent-%COMP%], input[type=select][_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-weight:500}.star[_ngcontent-%COMP%]{color:red}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{font-size:14px}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#007bff40;box-shadow:0 0 0 .1rem #007bff40}.input-group[_ngcontent-%COMP%]{display:flex;align-items:center}.dialog-button[_ngcontent-%COMP%]{padding:0;background-color:transparent;border:none;margin-left:5px;cursor:pointer}.footer[_ngcontent-%COMP%]{width:100vw;position:fixed;bottom:5px;padding:1rem;background-color:#ffffff26;box-shadow:0 0 0 .2rem #7e7e7e22;border-top:1px solid #dee2e6}#save[_ngcontent-%COMP%]{background-color:#336799;color:#fff;font-size:14px;border:none}#back[_ngcontent-%COMP%]{color:#336799;border:1px solid rgba(51,103,153,1);font-size:14px}#save[_ngcontent-%COMP%]:hover, #back[_ngcontent-%COMP%]:hover{background-color:#336799cc;color:#fff}.form-check-input[_ngcontent-%COMP%]{height:1.1rem;width:1.1rem;margin-right:.5rem}.form-check-label[_ngcontent-%COMP%]{margin-left:.5rem}@media (min-width: 768px){.row.g-3[_ngcontent-%COMP%] > .col-md-4[_ngcontent-%COMP%], .row.g-3[_ngcontent-%COMP%] > .col-md-2[_ngcontent-%COMP%]{padding-right:15px;padding-left:15px}}.dialog-button[_ngcontent-%COMP%]{padding:0;background-color:transparent;border:none}.ok-btn[_ngcontent-%COMP%]{background-color:#4081bf;color:#fff;font-size:15px;font-weight:500}.search-button[_ngcontent-%COMP%]{background-color:#007bff;border:none;border-radius:4px;padding:3px 12px;cursor:pointer}.check-box[_ngcontent-%COMP%]{height:1.1rem;width:1.1rem}"]})};var Ft=[{path:"",component:V},{path:"feature-form",component:R}];export{Ft as Feature_routes};
