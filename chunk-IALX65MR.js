import{a as H}from"./chunk-33QFFTOG.js";import{c as he}from"./chunk-E5XJPHAI.js";import{a as X,b as Y,c as Z}from"./chunk-JXVKPTSL.js";import{a as Ce}from"./chunk-P4TCX2ZY.js";import{$ as ae,H as ee,Y as te,Z as ie,_ as F,aa as oe,da as ne,ea as re,ga as le,ha as se,ja as ce,ka as me,la as ue,ma as pe,pa as de,qa as fe,ra as ge,sa as be,ta as E,ua as P,za as V}from"./chunk-YAXADU3R.js";import{j as $,l as J}from"./chunk-7NLJT2D3.js";import"./chunk-XAZLOLJU.js";import{$a as p,$b as Q,Ab as _,Bb as y,Cb as i,Db as a,Eb as m,F as G,Ib as x,Jc as K,Lb as b,Mc as z,Nb as d,Pc as W,Rb as M,Sb as D,Tb as w,Vb as r,Wb as C,Xb as A,Zb as U,_a as s,_b as L,aa as q,bc as I,hc as v,ka as k,pb as B,ta as f,tb as c,ua as g,xc as h,yb as S,z as j}from"./chunk-ZOAWYHVV.js";var N=class n{constructor(t){this.tableFetchService=t}featureTableColumns=h(()=>[...this.tableFetchService.tableColumns(),{header:"ACTION",def:"ACTION"}]);featureTableData=h(()=>[...this.tableFetchService.tableData()]);ngOnInit(){this.tableFetchService.getTableData("getAllFeatureConfiguration"),this.tableFetchService.selectedTab.set("feature-form")}static \u0275fac=function(e){return new(e||n)(p(E))};static \u0275cmp=k({type:n,selectors:[["app-feature-config"]],standalone:!0,features:[I],decls:9,vars:4,consts:[[1,"container","mt-3"],[1,"heading","fw-bold","fs-5"],[1,"border-bottom","border-secondary"],[1,"container","d-flex","flex-column","flex-grow-1"],[1,"row"],[1,"col-md-6","mt-2","ms-auto"],[3,"columns","dataSource"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"h5",1),r(2,"Feature Configuration"),a()(),m(3,"div",2),i(4,"div",3)(5,"div",4)(6,"div",5),m(7,"app-generic-filter",6),a()(),m(8,"app-generic-table",6),a()),e&2&&(s(7),c("columns",o.featureTableColumns())("dataSource",o.featureTableData()),s(),c("columns",o.featureTableColumns())("dataSource",o.featureTableData()))},dependencies:[P,V]})};var O=class n{constructor(){}extractKeys(t,e){return t.map(o=>{let l={};return Object.keys(e).forEach(u=>{let T=e[u];u in o&&(l[T]=o[u])}),l})}static \u0275fac=function(e){return new(e||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};var ye=["dialogHeader"],xe=["subCatdialogContent"],Me=["featureTablePopupContent"],De=["dialogFooter"];function we(n,t){if(n&1&&(i(0,"option",29),r(1),a()),n&2){let e=t.$implicit;c("value",e.ID),s(),C(e.Category)}}function Te(n,t){if(n&1&&(i(0,"option",29),r(1),a()),n&2){let e=t.$implicit;c("value",e.ID),s(),C(e.SubCategory)}}function ke(n,t){if(n&1&&(i(0,"option",29),r(1),a()),n&2){let e=t.$implicit;c("value",e.ID),s(),C(e.Module)}}function Ie(n,t){if(n&1&&(i(0,"option",29),r(1),a()),n&2){let e=t.$implicit;c("value",e.FeaturesID),s(),C(e.FeaturesName)}}function Ee(n,t){if(n&1&&(i(0,"div"),m(1,"app-generic-table",56),a()),n&2){let e=d();s(),c("columns",e.appMenuColumns)("dataSource",e.appMenuData())}}function Pe(n,t){if(n&1&&(i(0,"div"),m(1,"app-generic-table",56),a()),n&2){let e=d();s(),c("columns",e.appSettingColumns)("dataSource",e.appSettingData())}}function Ve(n,t){if(n&1&&(i(0,"h4",57),r(1),a()),n&2){let e=d();s(),C(e.contentHeader)}}function Ne(n,t){if(n&1&&(i(0,"h4",57),r(1),a()),n&2){let e=d();s(),C(e.contentHeader)}}function Oe(n,t){if(n&1){let e=x();i(0,"div",11)(1,"div",35)(2,"div",58)(3,"label",59),r(4),a()(),i(5,"div",60)(6,"input",61),Q("ngModelChange",function(l){f(e);let u=d();return L(u.inputValue,l)||(u.inputValue=l),g(l)}),a()()()()}if(n&2){let e=d();s(4),A("",e.contentHeader," Name:"),s(2),U("ngModel",e.inputValue)}}function Re(n,t){if(n&1){let e=x();i(0,"div",11)(1,"div",62),m(2,"app-generic-filter",56),i(3,"button",63),b("click",function(){f(e);let l=d();return g(l.onOkClick())}),r(4,"OK"),a()(),m(5,"app-generic-table",56),a()}if(n&2){let e=d();s(2),c("columns",e.featurePopupColumns())("dataSource",e.featurePopupData()),s(3),c("columns",e.featurePopupColumns())("dataSource",e.featurePopupData())}}function Be(n,t){if(n&1){let e=x();i(0,"button",64),b("click",function(){f(e);let l=d();return g(l.saveSubCat())}),r(1,"Save"),a(),i(2,"button",65),r(3,"Cancel"),a()}}var R=class n{constructor(t,e,o,l,u,T,Ae,He,je){this.fb=t;this.apiService=e;this.route=o;this.router=l;this.tableFetchService=u;this.utilsService=T;this.location=Ae;this.dialog=He;this.snackBarService=je}dialogRef;featureForm;activePath;contentHeader;selectButtonLabel="Select Application Menu";selectedTabIndex=0;category=[];subCategory=[];module=[];mainFeatures=[];mode="add";inputValue;dialogHeader;subCatdialogContent;featureTablePopupContent;dialogFooter;featurePopupColumns=h(()=>[{header:"",def:"CHECKBOX"},...this.tableFetchService.featurePopupColumns()]);featurePopupData=h(()=>[...this.tableFetchService.featurePopupData()]);appMenuColumns;appSettingColumns;appMenuData=h(()=>[...this.tableFetchService.appMenuData()]);appSettingData=h(()=>[...this.tableFetchService.appSettingData()]);featureConfigData;ngOnInit(){this.route.queryParams.subscribe(t=>{let e=t.mode,o=t.id;e&&o&&(e==="view"&&(this.mode="view"),e==="edit"&&(this.mode="edit"),this.getViewApi("getFeatureByFeatureID",{featureID:o}))}),this.getData(),this.appMenuColumns=this.tableFetchService.appMenuColumns,this.appSettingColumns=this.tableFetchService.appSettingColumns,this.featureFormInit()}getData(){j({category:this.apiService.get("getCategory"),subCategory:this.apiService.get("getSubCategory"),module:this.apiService.get("getModule")}).subscribe(t=>{console.log(t),t.category?.result?.length>0&&(this.category=t.category.result),t.subCategory?.result?.length>0&&(this.subCategory=t.subCategory.result),t.module?.result?.length>0&&(this.module=t.module.result)})}getViewApi(t,e){this.apiService.get(t,e).subscribe(o=>{o?.result&&(this.featureConfigData=o.result,this.featureFormInit())})}featureFormInit(){this.featureForm=this.fb.group({mode:[this.mode||"",F.required],data:this.fb.group({description:[this.featureConfigData?.description||""],featuresID:[this.featureConfigData?.featuresID||""],featuresName:[this.featureConfigData?.featuresName||""],category:[this.featureConfigData?.category||"",F.required],subCategory:[this.featureConfigData?.subCategory||"",F.required],module:[this.featureConfigData?.module||"",F.required],isBasic:[this.featureConfigData?.isBasic||0],hasMainFeatures:[this.featureConfigData?.hasMainFeatures||0],mainFeatures:[this.featureConfigData?.mainFeatures||""],isUserConfigurable:[this.featureConfigData?.isUserConfigurable||0],applicationMenu:[this.featureConfigData?.applicationMenu||[]],applicationSetting:[this.featureConfigData?.applicationSetting||[]],notes:[this.featureConfigData?.notes||""]})}),this.featureConfigData?.applicationMenu?.length>0&&this.tableFetchService.appMenuData.set([...this.featureConfigData?.applicationMenu]),this.featureConfigData?.applicationSetting?.length>0&&this.tableFetchService.appSettingData.set([...this.featureConfigData?.applicationSetting]),this.toggleMainFeature(0),this.featureForm.get("data.hasMainFeatures")?.valueChanges.subscribe(t=>{this.toggleMainFeature(t)}),this.mode=="view"&&this.featureForm.disable()}toggleMainFeature(t){t==1?(this.featureForm.get("data.mainFeatures")?.enable(),this.featureForm.get("data.mainFeatures")?.setValidators([F.required]),this.mainFeatures?.length==0&&this.apiService.get("getMainFeatures").subscribe(e=>{e?.result?.length>0&&(this.mainFeatures=e.result)})):(this.featureForm.get("data.mainFeatures")?.disable(),this.featureForm.get("data.mainFeatures")?.clearValidators()),this.featureForm.get("data.mainFeatures")?.updateValueAndValidity()}openDialog(t){this.contentHeader=t,this.dialog.open(H,{disableClose:!0,panelClass:"custom-dialog",data:{contentHeader:this.dialogHeader,contentTemplate:this.subCatdialogContent,contentFooter:this.dialogFooter},width:"35vw",height:"auto"})}onTabClick(t){switch(this.selectedTabIndex=t?.index,t?.index){case 0:this.selectButtonLabel="Select Application Menu";break;case 1:this.selectButtonLabel="Select application setting";break}}popupButtonClick(){this.selectedTabIndex==0?(this.contentHeader="Application Menu List",this.tableFetchService.getFeaturePopupData("getApplicationMenu")):(this.contentHeader="Application Setting List",this.tableFetchService.getFeaturePopupData("getApplicationSetting")),this.dialogRef=this.dialog.open(H,{disableClose:!0,data:{contentHeader:this.dialogHeader,contentTemplate:this.featureTablePopupContent},maxWidth:"80vw",height:"70vh"})}onOkClick(){this.selectedTabIndex==0?(this.tableFetchService.appMenuData.set(this.tableFetchService.selectedPopupRows),this.tableFetchService.selectedPopupRows=[]):(this.tableFetchService.appSettingData.set(this.tableFetchService.selectedPopupRows),this.tableFetchService.selectedPopupRows=[]),this.dialogRef.close()}saveSubCat(){let t;t={mode:this.mode,data:{subcategoryName:this.inputValue}},this.apiService.post("saveSubCategory",t).subscribe(e=>{this.dialog.closeAll(),this.getData()})}onFeatureSave(){let t=this.utilsService.extractKeys([...this.appMenuData()],{MenuID:"menuID"}),e=this.utilsService.extractKeys([...this.appSettingData()],{Setting_Name:"settingName"});this.featureForm.get("data.applicationMenu")?.setValue(t),this.featureForm.get("data.applicationSetting")?.setValue(e),this.featureForm.get("data.isBasic")?.setValue(this.featureForm.get("data.isBasic")?.value?1:0),this.featureForm.get("data.isUserConfigurable")?.setValue(this.featureForm.get("data.isUserConfigurable")?.value?1:0),this.featureForm.get("data.hasMainFeatures")?.setValue(this.featureForm.get("data.hasMainFeatures")?.value?1:0);let o=this.featureForm.getRawValue();console.log(o),!this.featureForm.invalid&&this.apiService.post("saveFeatureConfiguration",o).pipe(G(l=>(this.snackBarService.showError("Error while saving Feature Configuration!!"),l))).subscribe(l=>{this.resetFeatureForm(),this.snackBarService.showSuccess("Feature configuration saved Sucessfully"),this.router.navigate(["/feature-config"])})}resetFeatureForm(){this.featureForm.reset(),this.category=[],this.subCategory=[],this.module=[],this.mainFeatures=[],this.tableFetchService.appMenuData.set([]),this.tableFetchService.appSettingData.set([])}ngOnDestroy(){this.resetFeatureForm()}back(){this.location.back()}static \u0275fac=function(e){return new(e||n)(p(de),p(be),p($),p(J),p(E),p(O),p(K),p(he),p(Ce))};static \u0275cmp=k({type:n,selectors:[["app-feature-form"]],viewQuery:function(e,o){if(e&1&&(M(ye,7),M(xe,7),M(Me,7),M(De,7)),e&2){let l;D(l=w())&&(o.dialogHeader=l.first),D(l=w())&&(o.subCatdialogContent=l.first),D(l=w())&&(o.featureTablePopupContent=l.first),D(l=w())&&(o.dialogFooter=l.first)}},standalone:!0,features:[I],decls:95,vars:8,consts:[["subCatdialogHeader",""],["dialogHeader",""],["subCatdialogContent",""],["featureTablePopupContent",""],["dialogFooter",""],[1,"my-3","d-flex","justify-content-between","align-items-center"],[1,"heading","mb-0"],[1,"pe-5"],["id","save",1,"btn","btn-primary","me-2","px-4",3,"click","disabled"],["id","back",1,"btn","px-4",3,"click"],[1,"border-bottom","mb-3"],[1,"container"],[3,"formGroup"],[1,"container",3,"formGroupName"],[1,"row","g-3"],[1,"row","col-md-6"],[1,"mt-3"],["for","featureName",1,"form-label"],[1,"star"],["type","text","id","featureName","formControlName","featuresName",1,"form-control","px-2","py-1"],[1,"mb-3","col-md-6"],["for","description",1,"form-label"],["id","description","formControlName","description",1,"form-control","px-1","py-1"],["for","notes",1,"form-label"],["id","notes","formControlName","notes",1,"form-control","px-1","py-1"],[1,"col-md-6"],[1,"row","mb-3"],["for","category",1,"form-label"],["id","category","formControlName","category",1,"form-select","px-2","py-1"],[3,"value"],["for","subCategory",1,"form-label"],[1,"input-group"],["id","subCategory","formControlName","subCategory",1,"form-select","px-2","py-1"],["type","button",1,"dialog-button",3,"click","disabled"],["src","assets/images/addButton.png","alt","addicon"],[1,"row"],[1,"mb-3","col-md-6","pe-2"],["for","modules",1,"form-label"],["id","modules","formControlName","module",1,"form-select","px-2","py-1"],["for","mainFeature",1,"form-label"],["id","mainFeature","formControlName","mainFeatures",1,"form-select","px-2","py-1"],[1,"row","align-items-center"],[1,"col-md-auto"],["type","checkbox","id","isBasicFeature","formControlName","isBasic",1,"form-check-input","me-2"],["for","isBasicFeature",1,"form-check-label"],["type","checkbox","id","isUserConfigurable","formControlName","isUserConfigurable",1,"form-check-input","me-2"],["for","isUserConfigurable",1,"form-check-label"],["type","checkbox","id","hasMainFeatures","formControlName","hasMainFeatures",1,"form-check-input","me-2"],["for","hasMainFeatures",1,"form-check-label"],[1,"row","align-items-center","my-2"],["animationDuration","0ms",1,"mt-2",3,"selectedTabChange"],["value","0","label","Application Menu"],["value","1","label","Application Setting Configuration"],[1,"col-md-6","d-flex","justify-content-end"],[1,"btn","ok-btn","px-5","ms-3",3,"click","disabled"],[4,"ngIf"],[3,"columns","dataSource"],["mat-dialog-title","",1,"text-white","mb-0","mx-3"],[1,"col-lg-4","col-md-5","col-11","px-0"],["for","sub-category",1,"form-label","text-body","mt-1"],[1,"col-lg-7","col-md-6","col-11","px-0"],["type","text",1,"form-control","px-2","py-1",3,"ngModelChange","ngModel"],[1,"d-flex","align-items-center","justify-content-between","mb-2"],[1,"btn","ok-btn","px-5","ms-3",3,"click"],["type","button","id","save",1,"btn","px-4","m-2",3,"click"],["mat-dialog-close","","type","button","id","close",1,"btn","px-4"]],template:function(e,o){if(e&1){let l=x();i(0,"div",5)(1,"h4",6),r(2,"Feature Registration"),a(),i(3,"div",7)(4,"button",8),b("click",function(){return f(l),g(o.onFeatureSave())}),r(5,"SAVE"),a(),i(6,"button",9),b("click",function(){return f(l),g(o.back())}),r(7,"BACK"),a()()(),m(8,"div",10),i(9,"div",11)(10,"form",12)(11,"div",13)(12,"div",14)(13,"div",15)(14,"div",16)(15,"label",17),r(16,"Feature Name: "),i(17,"span",18),r(18,"*"),a()(),m(19,"input",19),a(),i(20,"div",20)(21,"label",21),r(22,"Description: "),i(23,"span",18),r(24,"*"),a()(),m(25,"textarea",22),a(),i(26,"div",20)(27,"label",23),r(28,"Notes:"),a(),m(29,"textarea",24),a()(),i(30,"div",25)(31,"div",26)(32,"div",25)(33,"label",27),r(34,"Category:"),a(),i(35,"select",28),_(36,we,2,2,"option",29,S),a()(),i(38,"div",25)(39,"label",30),r(40,"Sub Category:"),a(),i(41,"div",31)(42,"select",32),_(43,Te,2,2,"option",29,S),a(),i(45,"button",33),b("click",function(){return f(l),g(o.openDialog("Sub Category"))}),m(46,"img",34),a()()()(),i(47,"div",35)(48,"div",36)(49,"label",37),r(50,"Modules: "),i(51,"span",18),r(52,"*"),a()(),i(53,"select",38),_(54,ke,2,2,"option",29,S),a()(),i(56,"div",25)(57,"label",39),r(58,"Main Feature"),a(),i(59,"select",40),_(60,Ie,2,2,"option",29,S),a()()(),i(62,"div",41)(63,"div",42),m(64,"input",43),i(65,"label",44),r(66,"Is Basic Feature"),a()(),i(67,"div",42),m(68,"input",45),i(69,"label",46),r(70,"Is User Configurable"),a()(),i(71,"div",42),m(72,"input",47),i(73,"label",48),r(74,"Has Main Feature"),a()()()()()()(),i(75,"div",49)(76,"div",25)(77,"mat-tab-group",50),b("selectedTabChange",function(T){return f(l),g(o.onTabClick(T))}),m(78,"mat-tab",51)(79,"mat-tab",52),a()(),i(80,"div",53)(81,"button",54),b("click",function(){return f(l),g(o.popupButtonClick())}),r(82),a()()(),B(83,Ee,2,2,"div",55)(84,Pe,2,2,"div",55),a(),B(85,Ve,2,1,"ng-template",null,0,v)(87,Ne,2,1,"ng-template",null,1,v)(89,Oe,7,2,"ng-template",null,2,v)(91,Re,6,4,"ng-template",null,3,v)(93,Be,4,0,"ng-template",null,4,v)}e&2&&(s(4),c("disabled",o.mode=="view"),s(6),c("formGroup",o.featureForm),s(),c("formGroupName","data"),s(25),y(o.category),s(7),y(o.subCategory),s(2),c("disabled",o.mode=="view"),s(9),y(o.module),s(6),y(o.mainFeatures),s(21),c("disabled",o.mode=="view"),s(),A("",o.selectButtonLabel,">"),s(),c("ngIf",o.selectedTabIndex==0),s(),c("ngIf",o.selectedTabIndex==1))},dependencies:[W,z,ge,re,ue,pe,ie,te,me,ae,oe,le,ce,se,fe,ne,Z,X,Y,ee,V,P],styles:["h4[_ngcontent-%COMP%]{font-size:20px;font-weight:500}label[_ngcontent-%COMP%], input[type=select][_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-weight:500}.heading[_ngcontent-%COMP%]{margin-left:7rem}.star[_ngcontent-%COMP%]{color:red}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{font-size:14px}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#007bff40;box-shadow:0 0 0 .1rem #007bff40}.input-group[_ngcontent-%COMP%]{display:flex;align-items:center}.dialog-button[_ngcontent-%COMP%]{padding:0;background-color:transparent;border:none;margin-left:5px;cursor:pointer}.footer[_ngcontent-%COMP%]{width:100vw;position:fixed;bottom:5px;padding:1rem;background-color:#ffffff26;box-shadow:0 0 0 .2rem #7e7e7e22;border-top:1px solid #dee2e6}#save[_ngcontent-%COMP%]{background-color:#336799;color:#fff;font-size:14px;border:none}#back[_ngcontent-%COMP%]{color:#336799;border:1px solid rgba(51,103,153,1);font-size:14px}#save[_ngcontent-%COMP%]:hover, #back[_ngcontent-%COMP%]:hover{background-color:#336799cc;color:#fff}.form-check-input[_ngcontent-%COMP%]{height:1.1rem;width:1.1rem;margin-right:.5rem}.form-check-label[_ngcontent-%COMP%]{margin-left:.5rem}@media (min-width: 768px){.row.g-3[_ngcontent-%COMP%] > .col-md-4[_ngcontent-%COMP%], .row.g-3[_ngcontent-%COMP%] > .col-md-2[_ngcontent-%COMP%]{padding-right:15px;padding-left:15px}}.dialog-button[_ngcontent-%COMP%]{padding:0;background-color:transparent;border:none}.ok-btn[_ngcontent-%COMP%]{background-color:#4081bf;color:#fff;font-size:15px;font-weight:500}.search-button[_ngcontent-%COMP%]{background-color:#007bff;border:none;border-radius:4px;padding:3px 12px;cursor:pointer}.check-box[_ngcontent-%COMP%]{height:1.1rem;width:1.1rem}"]})};var vt=[{path:"",component:N},{path:"feature-form",component:R}];export{vt as Feature_routes};
