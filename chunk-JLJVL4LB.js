import{a as ae,b as oe,c as re}from"./chunk-CIVJ5K55.js";import{A as Me,B as we,C as Ie,D as Se,G as Ee,I as ke,J as j,K as Te,L as Ve,M as Ne,N as Ae,O as Oe,P as z,b as de,c as ce,d as ue,e as he,f as me,g as _e,h as pe,i as fe,j as ge,k as Ce,l as ve,n as xe,p as be,t as ye,v as De}from"./chunk-33UYDJHM.js";import{$ as le,G as $,_ as se,ga as Fe,k as ne,m as ie}from"./chunk-IOQHTKTC.js";import{$a as I,$b as C,Ab as O,Bb as P,Cb as s,Db as r,Eb as b,F as J,Fb as y,Gb as D,Ib as v,Kc as X,Lb as M,Mc as Z,Nb as c,Nc as ee,Qc as te,Rb as k,Sb as F,Tb as T,Vb as u,Wb as B,Xb as w,Yb as Y,Zb as f,_a as l,_b as g,aa as W,bc as V,cc as R,ja as E,ka as K,p as G,pb as m,sa as _,sb as H,ta as p,tb as d,xb as N,yb as A,yc as L}from"./chunk-VBZWTO5P.js";var Q=class t{constructor(i){this.tableFetchService=i}variantConfigtableColumns=L(()=>[...this.tableFetchService.tableColumns(),{header:"ACTION",def:"ACTION"}]);variantConfigtableData=L(()=>this.tableFetchService.tableData());ngOnInit(){this.tableFetchService.paginationPage.set(1),this.tableFetchService.getTableData("getAllVariantConfiguation"),this.tableFetchService.selectedTab.set("variant-configuration")}static \u0275fac=function(e){return new(e||t)(I(j))};static \u0275cmp=E({type:t,selectors:[["app-variant-configuration"]],standalone:!0,features:[V],decls:9,vars:4,consts:[[1,"container","mt-3"],[1,"heading","fw-bold","fs-5"],[1,"border-bottom","border-secondary"],[1,"container","d-flex","flex-column","flex-grow-1"],[1,"row"],[1,"col-md-6","mt-2","ms-auto"],[3,"columns","dataSource"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"h5",1),u(2,"Variant Configuration"),r()(),b(3,"div",2),s(4,"div",3)(5,"div",4)(6,"div",5),b(7,"app-generic-filter",6),r()(),b(8,"app-generic-table",6),r()),e&2&&(l(7),d("columns",n.variantConfigtableColumns())("dataSource",n.variantConfigtableData()),l(),d("columns",n.variantConfigtableColumns())("dataSource",n.variantConfigtableData()))},dependencies:[z,Te]})};var Pe=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=K({type:t})}static{this.\u0275inj=W({})}}return t})();var Be=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=K({type:t})}static{this.\u0275inj=W({imports:[Pe,$,$]})}}return t})();var et=["categoryHiddenBtn"],tt=["subCategoryHiddenBtn"],nt=["isEnableHiddenButtons"],Re=()=>["checkbox","Interface_Name","feature_Name","Do_Menu_Visible"],Le=()=>["checkbox","Function_Name","feature_Name","Default_Value","Disabling_Value","Is_User_Configurable","For_System_User"];function it(t,i){if(t&1&&(s(0,"option",15),u(1),r()),t&2){let e=i.$implicit;d("value",e.ID),l(),B(e.Module)}}function at(t,i){if(t&1&&(s(0,"option",15),u(1),r()),t&2){let e=i.$implicit;d("value",e.VariantID),l(),B(e.VariantName)}}function ot(t,i){if(t&1){let e=v();s(0,"div",19)(1,"button",49),M("click",function(){_(e);let a=c();return p(a.loadViewEditData("edit",!0))}),u(2,"INHERIT"),r()()}}function rt(t,i){t&1&&(s(0,"th",50),u(1,"Feature Name"),r())}function st(t,i){if(t&1&&(s(0,"mat-icon"),u(1),r()),t&2){let e=c().index,n=c();l(),B(n.expandedRows[e]?"remove":"add")}}function lt(t,i){if(t&1){let e=v();s(0,"div",59)(1,"mat-checkbox",55),C("ngModelChange",function(a){let o=_(e).$implicit;return g(o.check,a)||(o.check=a),p(a)}),M("change",function(a){let o=_(e),h=o.$implicit,x=o.index,S=c(2),We=S.$implicit,Ke=S.index,He=c();return p(He.onChildCheckboxChange(a,h,We,Ke,x))}),u(2),r()()}if(t&2){let e=i.$implicit,n=c(3);l(),f("ngModel",e.check),d("disabled",n.mode==="view"),l(),w(" ",e.feature_Name," ")}}function dt(t,i){if(t&1&&(s(0,"div",57),m(1,lt,3,3,"div",58),r()),t&2){let e=c().$implicit;l(),d("ngForOf",e.children)}}function ct(t,i){if(t&1){let e=v();s(0,"td",51)(1,"div",52)(2,"button",53),M("click",function(){let a=_(e),o=a.$implicit,h=a.index,x=c();return p(x.toggleRow(h,o))}),m(3,st,2,1,"mat-icon",54),r(),s(4,"mat-checkbox",55),C("ngModelChange",function(a){let o=_(e).$implicit;return g(o.check,a)||(o.check=a),p(a)}),M("change",function(a){let o=_(e),h=o.$implicit,x=o.index,S=c();return p(S.onParentCheckboxChange(a,h,x))}),u(5),r(),m(6,dt,2,1,"div",56),r()()}if(t&2){let e=i.$implicit,n=i.index,a=c();l(2),d("disabled",!(e.children.length>0)),H("aria-label","Toggle "+e.feature_Name),l(),d("ngIf",e.children.length>0),l(),f("ngModel",e.check),d("disabled",a.parentCheckBoxDisable(e)||a.mode==="view"),l(),w(" ",e.feature_Name," "),l(),d("ngIf",a.expandedRows[n]&&e.children)}}function ut(t,i){t&1&&(s(0,"th",50),u(1,"Category"),r())}function ht(t,i){if(t&1&&(s(0,"div",61),u(1),r()),t&2){let e=i.$implicit;l(),w(" ",e.category," ")}}function mt(t,i){if(t&1&&(s(0,"div",57),m(1,ht,2,1,"div",60),r()),t&2){let e=c().$implicit;l(),d("ngForOf",e.children)}}function _t(t,i){if(t&1&&(s(0,"td",51),u(1),m(2,mt,2,1,"div",56),r()),t&2){let e=i.$implicit,n=i.index,a=c();l(),w(" ",e.category," "),l(),d("ngIf",a.expandedRows[n]&&e.children)}}function pt(t,i){t&1&&(s(0,"th",50),u(1,"Sub Category"),r())}function ft(t,i){if(t&1&&(s(0,"div",63),u(1),r()),t&2){let e=i.$implicit;l(),w(" ",e.sub_Category," ")}}function gt(t,i){if(t&1&&(s(0,"div",57),m(1,ft,2,1,"div",62),r()),t&2){let e=c().$implicit;l(),d("ngForOf",e.children)}}function Ct(t,i){if(t&1&&(s(0,"td",51),u(1),m(2,gt,2,1,"div",56),r()),t&2){let e=i.$implicit,n=i.index,a=c();l(),w(" ",e.sub_Category," "),l(),d("ngIf",a.expandedRows[n]&&e.children)}}function vt(t,i){t&1&&(s(0,"th",50),u(1,"Is Enabled"),r())}function xt(t,i){if(t&1){let e=v();s(0,"div",65)(1,"mat-checkbox",55),C("ngModelChange",function(a){let o=_(e).$implicit;return g(o.isEnable,a)||(o.isEnable=a),p(a)}),M("change",function(a){let o=_(e).$implicit,h=c(3);return p(h.onFeatureIsEnable(a,o))}),r()()}if(t&2){let e=i.$implicit,n=c(3);l(),f("ngModel",e.isEnable),d("disabled",!e.check||n.mode==="view")}}function bt(t,i){if(t&1&&(s(0,"div",57),m(1,xt,2,2,"div",64),r()),t&2){let e=c().$implicit;l(),d("ngForOf",e.children)}}function yt(t,i){if(t&1){let e=v();s(0,"td",51)(1,"mat-checkbox",55),C("ngModelChange",function(a){let o=_(e).$implicit;return g(o.isEnable,a)||(o.isEnable=a),p(a)}),M("change",function(a){let o=_(e).$implicit,h=c();return p(h.onFeatureIsEnable(a,o))}),r(),m(2,bt,2,1,"div",56),r()}if(t&2){let e=i.$implicit,n=i.index,a=c();l(),f("ngModel",e.isEnable),d("disabled",!e.check||a.mode==="view"),l(),d("ngIf",a.expandedRows[n]&&e.children)}}function Dt(t,i){t&1&&(s(0,"th",50),u(1,"Is For System User"),r())}function Mt(t,i){if(t&1){let e=v();s(0,"div",65)(1,"mat-checkbox",66),C("ngModelChange",function(a){let o=_(e).$implicit;return g(o.IsSystemFeatures,a)||(o.IsSystemFeatures=a),p(a)}),r()()}if(t&2){let e=i.$implicit,n=c(3);l(),f("ngModel",e.IsSystemFeatures),d("disabled",!e.check||n.mode==="view")}}function wt(t,i){if(t&1&&(s(0,"div",57),m(1,Mt,2,2,"div",64),r()),t&2){let e=c().$implicit;l(),d("ngForOf",e.children)}}function It(t,i){if(t&1){let e=v();s(0,"td",51)(1,"mat-checkbox",66),C("ngModelChange",function(a){let o=_(e).$implicit;return g(o.IsSystemFeatures,a)||(o.IsSystemFeatures=a),p(a)}),r(),m(2,wt,2,1,"div",56),r()}if(t&2){let e=i.$implicit,n=i.index,a=c();l(),f("ngModel",e.IsSystemFeatures),d("disabled",!e.check||a.mode==="view"),l(),d("ngIf",a.expandedRows[n]&&e.children)}}function St(t,i){t&1&&b(0,"tr",67)}function Et(t,i){t&1&&b(0,"tr",68)}function kt(t,i){if(t&1&&(s(0,"option",15),u(1),r()),t&2){let e=i.$implicit;d("value",e.featuresID),l(),w(" ",e.feature_Name," ")}}function Ft(t,i){if(t&1){let e=v();s(0,"select",69),C("ngModelChange",function(a){_(e);let o=c();return g(o.selectedID,a)||(o.selectedID=a),p(a)}),M("change",function(a){_(e);let o=c();return p(o.featureNameChange(a))}),s(1,"option",16),u(2," Filter By Feature Name (All)"),r(),O(3,kt,2,2,"option",15,A),r()}if(t&2){let e=c();f("ngModel",e.selectedID),l(3),P(e.featureName)}}function Tt(t,i){t&1&&b(0,"th",50)}function Vt(t,i){if(t&1){let e=v();s(0,"td",51)(1,"mat-checkbox",74),M("change",function(a){let o=_(e).$implicit,h=c(2);return p(h.onMenuCheckbox(a,o))}),C("ngModelChange",function(a){let o=_(e).$implicit;return g(o.check,a)||(o.check=a),p(a)}),r()()}if(t&2){let e=i.$implicit,n=c(2);l(),f("ngModel",e.check),d("disabled",n.mode==="view")}}function Nt(t,i){t&1&&(s(0,"th",50),u(1,"Menu Name "),r())}function At(t,i){if(t&1&&(s(0,"td",51),u(1),r()),t&2){let e=i.$implicit;l(),w(" ",e.interface_Name," ")}}function Ot(t,i){t&1&&(s(0,"th",50),u(1,"Feature Name "),r())}function Pt(t,i){if(t&1&&(s(0,"td",51),u(1),r()),t&2){let e=i.$implicit;l(),w(" ",e.feature_Name," ")}}function Bt(t,i){t&1&&(s(0,"th",50),u(1," Do Menu Visible "),r())}function Rt(t,i){if(t&1){let e=v();s(0,"td",51)(1,"mat-checkbox",66),C("ngModelChange",function(a){let o=_(e).$implicit;return g(o.do_Menu_Visible,a)||(o.do_Menu_Visible=a),p(a)}),r()()}if(t&2){let e=i.$implicit,n=c(2);l(),f("ngModel",e.do_Menu_Visible),d("disabled",!e.isDoMenuVisibleEnabled||n.mode==="view")}}function Lt(t,i){t&1&&b(0,"tr",67)}function Wt(t,i){t&1&&b(0,"tr",68)}function Kt(t,i){if(t&1&&(s(0,"div",48)(1,"table",28),y(2,70),m(3,Tt,1,0,"th",30)(4,Vt,2,2,"td",31),D(),y(5,71),m(6,Nt,2,0,"th",30)(7,At,2,1,"td",31),D(),y(8,29),m(9,Ot,2,0,"th",30)(10,Pt,2,1,"td",31),D(),y(11,72),m(12,Bt,2,0,"th",30)(13,Rt,2,2,"td",31),D(),m(14,Lt,1,0,"tr",73)(15,Wt,1,0,"tr",37),r()()),t&2){let e=c();l(),d("dataSource",e.menuData),l(13),d("matHeaderRowDef",R(4,Re))("matHeaderRowDefSticky",!0),l(),d("matRowDefColumns",R(5,Re))}}function Ht(t,i){t&1&&b(0,"th",50)}function jt(t,i){if(t&1){let e=v();s(0,"td",51)(1,"mat-checkbox",83),M("change",function(a){let o=_(e).$implicit,h=c(2);return p(h.onSettingCheckbox(a,o))}),C("ngModelChange",function(a){let o=_(e).$implicit;return g(o.check,a)||(o.check=a),p(a)}),r()()}if(t&2){let e=i.$implicit,n=c(2);l(),d("disabled",n.mode==="view"),f("ngModel",e.check)}}function zt(t,i){t&1&&(s(0,"th",50),u(1,"Setting Name "),r())}function Qt(t,i){if(t&1&&(s(0,"td",84),u(1),r()),t&2){let e=i.$implicit;l(),w(" ",e.function_Name," ")}}function Ut(t,i){t&1&&(s(0,"th",50),u(1,"Feature Name "),r())}function $t(t,i){if(t&1&&(s(0,"td",51),u(1),r()),t&2){let e=i.$implicit;l(),w(" ",e.feature_Name," ")}}function qt(t,i){t&1&&(s(0,"th",50),u(1," Default Value "),r())}function Gt(t,i){if(t&1){let e=v();s(0,"input",88),C("ngModelChange",function(a){_(e);let o=c().$implicit;return g(o.default_Value,a)||(o.default_Value=a),p(a)}),r()}if(t&2){let e=c().$implicit,n=c(2);f("ngModel",e.default_Value),d("disabled",!e.check||n.mode==="view")}}function Jt(t,i){if(t&1){let e=v();s(0,"input",89),C("ngModelChange",function(a){_(e);let o=c().$implicit;return g(o.default_Value,a)||(o.default_Value=a),p(a)}),r()}if(t&2){let e=c().$implicit,n=c(2);f("ngModel",e.default_Value),d("disabled",!e.check||n.mode==="view")}}function Yt(t,i){if(t&1){let e=v();s(0,"select",90),C("ngModelChange",function(a){_(e);let o=c().$implicit;return g(o.default_Value,a)||(o.default_Value=a),p(a)}),s(1,"option",15),u(2,"True "),r(),s(3,"option",15),u(4,"False "),r()()}if(t&2){let e=c().$implicit,n=c(2);f("ngModel",e.default_Value),d("disabled",!e.check||n.mode==="view"),l(),d("value",1),l(2),d("value",0)}}function Xt(t,i){if(t&1&&(s(0,"option",15),u(1),r()),t&2){let e=i.$implicit;d("value",e.Value),l(),Y("",e.Key," - ",e.Value," ")}}function Zt(t,i){if(t&1){let e=v();s(0,"select",90),C("ngModelChange",function(a){_(e);let o=c().$implicit;return g(o.default_Value,a)||(o.default_Value=a),p(a)}),O(1,Xt,2,3,"option",15,A),r()}if(t&2){let e=c().$implicit,n=c(2);f("ngModel",e.default_Value),d("disabled",!e.check||n.mode==="view"),l(),P(e.options)}}function en(t,i){if(t&1&&(s(0,"td",51),m(1,Gt,1,2,"input",85)(2,Jt,1,2,"input",86)(3,Yt,5,4,"select",87)(4,Zt,3,2,"select",87),r()),t&2){let e=i.$implicit;l(),N(e.dataType.toLowerCase()=="text"?1:e.dataType.toLowerCase()=="number"?2:e.dataType.toLowerCase()==="boolean"?3:4)}}function tn(t,i){t&1&&(s(0,"th",50),u(1," Disabling Value"),r())}function nn(t,i){if(t&1&&(s(0,"td",91),u(1),r()),t&2){let e=i.$implicit;l(),w(" ",e.disabling_Value,"")}}function an(t,i){t&1&&(s(0,"th",50),u(1," Is User Configurable "),r())}function on(t,i){if(t&1){let e=v();s(0,"td",91)(1,"mat-checkbox",66),C("ngModelChange",function(a){let o=_(e).$implicit;return g(o.is_User_Configurable,a)||(o.is_User_Configurable=a),p(a)}),r()()}if(t&2){let e=i.$implicit,n=c(2);l(),f("ngModel",e.is_User_Configurable),d("disabled",!e.check||n.mode==="view")}}function rn(t,i){t&1&&(s(0,"th",50),u(1," Is For System User "),r())}function sn(t,i){if(t&1){let e=v();s(0,"td",91)(1,"mat-checkbox",66),C("ngModelChange",function(a){let o=_(e).$implicit;return g(o.IsSystemSetting,a)||(o.IsSystemSetting=a),p(a)}),r()()}if(t&2){let e=i.$implicit,n=c(2);l(),f("ngModel",e.IsSystemSetting),d("disabled",!e.check||n.mode==="view")}}function ln(t,i){t&1&&b(0,"tr",67)}function dn(t,i){t&1&&b(0,"tr",68)}function cn(t,i){if(t&1&&(s(0,"table",28),y(1,70),m(2,Ht,1,0,"th",30)(3,jt,2,2,"td",31),D(),y(4,75),m(5,zt,2,0,"th",30)(6,Qt,2,1,"td",76),D(),y(7,29),m(8,Ut,2,0,"th",30)(9,$t,2,1,"td",31),D(),y(10,77),m(11,qt,2,0,"th",30)(12,en,5,1,"td",31),D(),y(13,78),m(14,tn,2,0,"th",30)(15,nn,2,1,"td",79),D(),y(16,80),m(17,an,2,0,"th",30)(18,on,2,2,"td",79),D(),y(19,81),m(20,rn,2,0,"th",30)(21,sn,2,2,"td",79),D(),m(22,ln,1,0,"tr",73),s(23,"tbody",82),m(24,dn,1,0,"tr",37),r()()),t&2){let e=c();d("dataSource",e.settingData),l(22),d("matHeaderRowDef",R(4,Le))("matHeaderRowDefSticky",!0),l(2),d("matRowDefColumns",R(5,Le))}}var U=class t{constructor(i,e,n,a,o,h){this.apiService=i;this.location=e;this.route=n;this.router=a;this.tableFetchService=o;this.snackBarService=h;this.route.queryParams.subscribe(x=>{let S=x.mode;this.variantId=x.id,this.moduleId=x.mid,S&&this.variantId&&this.moduleId&&(S==="view"&&(this.mode="view"),S==="edit"&&(this.mode="edit"),this.loadViewEditData(this.mode))}),this.tableFetchService.emptyTableData()}categoryHiddenButtons;subCategoryHiddenButtons;isEnableHiddenButtons;clickedTabIndex=0;formHeading="Variant Configuration ";mode="add";dataSource=[];module;variant;variantId;moduleId;settingData=[];allSettingData=[];menuData=[];allMenuData=[];menuSaveData=[];settingSaveData=[];expandedElement;doMenuVisible=!1;featureName=[];featureSave=[];selectedID="";isInherit;variantConfigtableData=L(()=>this.tableFetchService.tableData());childrenAccessor=i=>i.children??[];hasChild=(i,e)=>e.children&&e.children.length>0;expandedRows=[];featureTableColumnData=["feature_Name","category","sub_Category","isEnable","isForSystemUser"];featureColumn=[{header:"SEARCH BY",def:"search_By"},{header:"feature Name",def:"feature_Name"},{header:"category",def:"category"},{header:"sub Category",def:"sub_Category"}];loadViewEditData(i,e){e&&(this.isInherit=!0),this.mode=i;let n={variantID:this.variantId,moduleID:this.moduleId,mode:this.mode};this.tableFetchService.getTableData("LoadFeaturesForVariantConfiguation",n),this.getViewApi("LoadFeaturesForVariantConfiguation",n),this.apiService.get("getAllVariants",{mode:this.isInherit?"add":this.mode,moduleId:this.moduleId}).subscribe(a=>{this.variant=a.result})}isExpanded(i){return console.log("expanded"),this.expandedElement===i}getViewApi(i,e){this.apiService.get(i,e).subscribe(n=>{if(n?.result&&n.result.length>0){this.dataSource=[...n.result],this.menuData=[...n.result2.variantInterfaceMenus],this.allMenuData=[...n.result2.variantInterfaceMenus],this.menuSaveData=[...n.result2.variantInterfaceMenus],this.settingData=[...n.result2.variantFunctionSettings],this.allSettingData=[...n.result2.variantFunctionSettings];let a=[...n.result];this.featureSave=a.filter(h=>h.check==1);let o=a.flatMap(h=>h.children||[]).filter(h=>h.check==1);this.featureSave=[...this.featureSave,...o],this.allSettingData=this.allSettingData.map(h=>{if(typeof h.options=="string")try{h.options=JSON.parse(h.options)}catch(x){console.error("Failed to parse options:",x)}return h}),this.menuData.forEach(h=>h.isDoMenuVisibleEnabled=!0),this.mode=="view"&&this.menuData.forEach(h=>h.check=1),this.filterByFeatureName()}})}ngOnInit(){this.apiService.get("getModule").subscribe(i=>{this.module=i.result}),this.mode=="add"&&this.apiService.get("getAllVariants",{mode:this.mode,moduleId:this.moduleId}).subscribe(i=>{this.variant=i.result}),this.expandedRows=new Array(this.dataSource.length).fill(!1)}toggleRow(i,e){this.expandedRows[i]=!this.expandedRows[i]}onParentCheckboxChange(i,e,n){this.onCheckboxChange(i,e),e.children&&e.children.forEach(a=>{a.check||(a.isEnable=!1)})}parentCheckBoxDisable(i){return i.children?.some(n=>n.check)}onChildCheckboxChange(i,e,n,a,o){if(console.log("child",e),e.check){let h=this.variantConfigtableData().find(x=>x.featuresID===e.mainFeatures);h.check||(h.check=1,this.onCheckboxChange(i,h))}this.onCheckboxChange(i,e),e.check||(e.isEnable=!1)}loadFeature(){this.menuSaveData=[],this.menuData=[],this.settingData=[],this.featureName=[];let i={variantID:this.variantId,moduleID:this.moduleId,mode:"Load"};this.tableFetchService.getTableData("LoadFeaturesForVariantConfiguation",i),this.apiService.get("LoadFeaturesForVariantConfiguation",i).subscribe(e=>{e?.result?.length>0&&(this.dataSource=[...e.result])})}goBack(){this.location.back()}onModuleIdChange(i){this.moduleId=i,this.variantId="",this.apiService.get("getAllVariants",{mode:this.mode,moduleId:this.moduleId}).subscribe(e=>{this.variant=e.result})}onCheckboxChange(i,e){if(e.isEnable=i.checked,i.checked){let n={featuresID:e.featuresID,moduleID:this.moduleId,mode:"Load"};this.apiService.get("getFeatureDetailsForVariantConfiguation",n).subscribe(a=>{let o=a.result;this.featureSave=[...this.featureSave,e],o.variantInterfaceMenus?.length>0&&(this.allMenuData=[...this.allMenuData,...o.variantInterfaceMenus],this.menuData=[...this.menuData,...o.variantInterfaceMenus],this.menuData.forEach(h=>h.check=1)),o.variantFunctionSettings?.length>0&&(this.allSettingData=[...this.allSettingData,...o.variantFunctionSettings],this.settingData=[...this.settingData,...o.variantFunctionSettings],this.settingData=this.settingData.map(h=>{if(typeof h.options=="string")try{h.options=JSON.parse(h.options)}catch(x){console.error("Failed to parse options:",x)}return h}),this.allSettingData=this.allSettingData.map(h=>{if(typeof h.options=="string")try{h.options=JSON.parse(h.options)}catch(x){console.error("Failed to parse options:",x)}return h})),this.filterByFeatureName(),this.onFeatureIsEnable(i,e)}),this.selectedID=e.featuresID,this.featureNameChange(void 0,e.featuresID)}else e.isEnable=!1,this.featureSave=this.featureSave.filter(n=>n.featuresID!==e.featuresID),this.menuData=this.allMenuData.filter(n=>n.featuresID!==e.featuresID),this.menuSaveData=this.menuSaveData.filter(n=>n.featuresID!==e.featuresID),this.settingData=this.allSettingData.filter(n=>n.featuresID!==e.featuresID),this.allMenuData=this.allMenuData.filter(n=>n.featuresID!==e.featuresID),this.allSettingData=this.allSettingData.filter(n=>n.featuresID!==e.featuresID),this.featureName=this.featureName.filter(n=>n.featuresID!==e.featuresID),this.selectedID=""}updateParentCheckboxState(i){if(i.mainFeatures){let e=this.dataSource.find(n=>n.featuresID===i.mainFeatures);e&&(e.isEnable=i.isEnable)}}onFeatureIsEnable(i,e){this.featureSave.forEach(n=>{e.featuresID===n.featuresID&&(n.isEnable=i.checked)}),this.menuData.forEach(n=>{e.featuresID===n.featuresID&&(n.do_Menu_Visible=i.checked,n.isDoMenuVisibleEnabled=i.checked)})}featureNameChange(i,e){let n=i?i.target.value:e;if(n==""){this.menuData=[...this.allMenuData],this.settingData=[...this.allSettingData];return}this.menuData=this.allMenuData.filter(a=>a.featuresID==n),this.settingData=this.allSettingData.filter(a=>a.featuresID==n)}onMenuCheckbox(i,e){i.checked?(e.check=1,e.do_Menu_Visible=!0,e.isDoMenuVisibleEnabled=!0,this.menuSaveData=[...this.menuSaveData,e]):(e.check=0,e.do_Menu_Visible=!1,e.isDoMenuVisibleEnabled=!1,this.menuSaveData=this.menuSaveData.filter(n=>n.MenuID!==e.menuID))}filterByFeatureName(){let i=new Set,e=[...this.allMenuData.map(({feature_Name:n,featuresID:a})=>({feature_Name:n,featuresID:a})),...this.allSettingData.map(({feature_Name:n,featuresID:a})=>({feature_Name:n,featuresID:a}))];this.featureName=e.filter(n=>{let a=n.feature_Name;return i.has(a)?!1:(i.add(a),!0)})}onSettingCheckbox(i,e){i.checked?e.check=1:e.check=0}onTabClick(i){let e=i.index;this.clickedTabIndex=e}submit(){this.menuSaveData=this.allMenuData.filter(e=>e.check),this.isInherit&&(this.mode="add"),this.allSettingData.forEach(e=>e.default_Value=String(e.default_Value)),this.featureSave=this.featureSave.reduce((e,n)=>(e.push({featuresID:n.featuresID,isEnable:n.isEnable}),e),[]);let i={mode:this.mode,data:{variantID:this.variantId,moduleID:this.moduleId,variantInterfaceMenus:this.menuSaveData,variantFunctionSettings:this.allSettingData,features:this.featureSave}};this.apiService.post("saveVariantConfiguration",i).pipe(J(e=>{let n=e.error?.result||"Error while saving Feature Configuration!!";return this.snackBarService.showError(n),G(()=>e)})).subscribe(e=>{this.snackBarService.showSuccess(e.result),this.router.navigate(["/variant-configuration"])})}static \u0275fac=function(e){return new(e||t)(I(ke),I(X),I(ne),I(ie),I(j),I(Fe))};static \u0275cmp=E({type:t,selectors:[["app-variant-configuration-form"]],viewQuery:function(e,n){if(e&1&&(k(et,5),k(tt,5),k(nt,5)),e&2){let a;F(a=T())&&(n.categoryHiddenButtons=a),F(a=T())&&(n.subCategoryHiddenButtons=a),F(a=T())&&(n.isEnableHiddenButtons=a)}},standalone:!0,features:[V],decls:78,vars:14,consts:[[1,"container-main"],[1,"container","my-1","d-flex","justify-content-between","align-items-center"],[1,"col-md-6"],[1,"mb-0","heading"],[1,"col-md-6","d-flex","justify-content-end"],["id","save",1,"btn","me-2","px-4",3,"click","disabled"],["id","back",1,"btn","px-4",3,"click"],[1,"border-bottom","mb-3"],[1,"container-fluid","pb-5","px-5"],[1,"row","mb-2"],[1,"col-12","col-md-auto"],["for","mainMenu",1,"form-label","mb-0"],[1,"star"],[1,"col-12","col-md-3"],["id","modules",1,"form-select",3,"ngModelChange","ngModel","disabled"],[3,"value"],["value",""],[1,"col-12","col-md-1"],["id","load","type","button",1,"btn","me-2","px-4","py-1",3,"click","disabled"],[1,"col-12","col-md-1","ms-auto"],[1,"container-fluid","mb-2","p-0"],[1,"row"],[1,"col-md-6","mat-elevation-z2","p-0"],[1,"table-responsive","table1"],[1,"container"],[1,"h3","mt-2"],[1,"col-12"],[3,"columns"],["mat-table","",1,"custom-table",3,"dataSource"],["matColumnDef","feature_Name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","category"],["matColumnDef","sub_Category"],["matColumnDef","isEnable"],["matColumnDef","isForSystemUser"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"row","ms-1"],[1,"col-12","mat-elevation-z2","mb-2","p-0"],[1,"row","align-items-center"],[1,"col-md-12"],["animationDuration","0ms",1,"mt-2",3,"selectedTabChange"],["value","0","label","Menu Configuration"],["value","1","label","Setting Configuration"],[1,"filter"],[1,"form-control",3,"ngModel"],[1,"table-responsive"],[1,"table-size"],["id","load","type","button",1,"btn","me-2","px-4","py-1",3,"click"],["mat-header-cell",""],["mat-cell",""],[1,"feature-tree-container"],["mat-icon-button","",1,"plus-icon",3,"click","disabled"],[4,"ngIf"],[3,"ngModelChange","change","ngModel","disabled"],["class","child",4,"ngIf"],[1,"child"],["class","child-feature-row",4,"ngFor","ngForOf"],[1,"child-feature-row"],["class","child-category-row",4,"ngFor","ngForOf"],[1,"child-category-row"],["class","child-subcategory-row",4,"ngFor","ngForOf"],[1,"child-subcategory-row"],["class","child-enable-row",4,"ngFor","ngForOf"],[1,"child-enable-row"],[3,"ngModelChange","ngModel","disabled"],["mat-header-row",""],["mat-row",""],[1,"form-control",3,"ngModelChange","change","ngModel"],["matColumnDef","checkbox"],["matColumnDef","Interface_Name"],["matColumnDef","Do_Menu_Visible"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"change","ngModelChange","ngModel","disabled"],["matColumnDef","Function_Name"],["mat-cell","","style","width: 12.5rem;",4,"matCellDef"],["matColumnDef","Default_Value"],["matColumnDef","Disabling_Value"],["mat-cell","","style","text-align: center;",4,"matCellDef"],["matColumnDef","Is_User_Configurable"],["matColumnDef","For_System_User"],[1,"mat-row"],[3,"change","ngModelChange","disabled","ngModel"],["mat-cell","",2,"width","12.5rem"],[1,"form-control",3,"ngModel","disabled"],["type","number","min","0",1,"form-control",3,"ngModel","disabled"],["name","","id","",1,"form-select",3,"ngModel","disabled"],[1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","number","min","0",1,"form-control",3,"ngModelChange","ngModel","disabled"],["name","","id","",1,"form-select",3,"ngModelChange","ngModel","disabled"],["mat-cell","",2,"text-align","center"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),u(4),r()(),s(5,"div",4)(6,"button",5),M("click",function(){return n.submit()}),u(7,"SAVE"),r(),s(8,"button",6),M("click",function(){return n.goBack()}),u(9,"BACK"),r()()(),b(10,"div",7),s(11,"div",8)(12,"div",9)(13,"div",10)(14,"label",11),u(15,"Module:"),s(16,"span",12),u(17,"*"),r()()(),s(18,"div",13)(19,"select",14),M("ngModelChange",function(o){return n.onModuleIdChange(o)}),C("ngModelChange",function(o){return g(n.moduleId,o)||(n.moduleId=o),o}),O(20,it,2,2,"option",15,A),r()(),s(22,"div",10)(23,"label",11),u(24,"Variant Name:"),s(25,"span",12),u(26,"*"),r()()(),s(27,"div",13)(28,"select",14),C("ngModelChange",function(o){return g(n.variantId,o)||(n.variantId=o),o}),s(29,"option",16),u(30,"--Select--"),r(),O(31,at,2,2,"option",15,A),r()(),s(33,"div",17)(34,"button",18),M("click",function(){return n.loadFeature()}),u(35,"Load"),r()(),m(36,ot,3,0,"div",19),r(),s(37,"div",20)(38,"div",21)(39,"div",22)(40,"div",23)(41,"div",24)(42,"h3",25),u(43," Features"),r()(),s(44,"div",26),b(45,"app-generic-filter",27),r(),s(46,"table",28),y(47,29),m(48,rt,2,0,"th",30)(49,ct,7,7,"td",31),D(),y(50,32),m(51,ut,2,0,"th",30)(52,_t,3,2,"td",31),D(),y(53,33),m(54,pt,2,0,"th",30)(55,Ct,3,2,"td",31),D(),y(56,34),m(57,vt,2,0,"th",30)(58,yt,3,3,"td",31),D(),y(59,35),m(60,Dt,2,0,"th",30)(61,It,3,3,"td",31),D(),m(62,St,1,0,"tr",36)(63,Et,1,0,"tr",37),r()()(),s(64,"div",2)(65,"div",38)(66,"div",39)(67,"div",40)(68,"div",41)(69,"mat-tab-group",42),M("selectedTabChange",function(o){return n.onTabClick(o)}),b(70,"mat-tab",43)(71,"mat-tab",44),r()()(),s(72,"div",45),m(73,Ft,5,1,"select",46),r(),s(74,"div",47),m(75,Kt,16,6,"div",48)(76,cn,25,6,"table",28),b(77,"div"),r()()()()()()()()),e&2&&(l(4),B(n.formHeading),l(2),d("disabled",n.mode=="view"),l(13),f("ngModel",n.moduleId),d("disabled",n.mode==="view"||n.mode=="edit"||n.isInherit),l(),P(n.module),l(8),f("ngModel",n.variantId),d("disabled",n.mode==="view"||n.mode=="edit"&&!n.isInherit),l(3),P(n.variant),l(3),d("disabled",n.mode==="view"||n.mode=="edit"||n.isInherit||!n.moduleId||!n.variantId),l(2),N(n.mode==="view"?36:-1),l(9),d("columns",n.featureColumn),l(),d("dataSource",n.variantConfigtableData()),l(16),d("matHeaderRowDef",n.featureTableColumnData),l(),d("matRowDefColumns",n.featureTableColumnData),l(10),N(n.featureName.length>0?73:-1),l(2),N(n.clickedTabIndex===0?75:76))},dependencies:[z,le,se,Oe,Ae,Be,ve,de,ue,pe,he,ce,fe,me,_e,ge,Ce,Ne,Ve,Ee,we,Ie,xe,De,Me,be,Se,ye,re,ae,oe,te,Z,ee],styles:["h4[_ngcontent-%COMP%], .h3[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.h3[_ngcontent-%COMP%]{color:#336799}label[_ngcontent-%COMP%], input[type=select][_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-weight:500}input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;line-height:normal}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{font-size:14px}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#007bff40;box-shadow:0 0 0 .1rem #007bff40}.star[_ngcontent-%COMP%]{color:red}#load[_ngcontent-%COMP%]{background-color:#4081bf;color:#fff;font-size:14px}#save[_ngcontent-%COMP%]{background-color:#336799;color:#fff;font-size:14px}#back[_ngcontent-%COMP%]{color:#336799;border:1px solid rgba(51,103,153,1);font-size:14px}#back[_ngcontent-%COMP%]:hover, #save[_ngcontent-%COMP%]:hover{background-color:#336899ac;color:#fff;border:none}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f6f6f6f5}tr[_ngcontent-%COMP%]:nth-child(2n)   .mat-tree-node[_ngcontent-%COMP%]{background-color:#f6f6f6f5}tr[_ngcontent-%COMP%]:nth-child(odd)   .mat-tree-node[_ngcontent-%COMP%]{background-color:#fffffff5}.mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;cursor:pointer;padding:0}.mat-mdc-header-row[_ngcontent-%COMP%]{border-top:1px solid gainsboro}.mat-mdc-row[_ngcontent-%COMP%]{overflow-y:auto}.custom-table[_ngcontent-%COMP%]{background-color:#fffdfd;overflow-y:auto}.custom-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .custom-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:left;border-bottom:1px solid #ddd}.table-size[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.table-size[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1b0}.table-size[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#a5a5a5;border-radius:10px;border:2px solid #f1f1f1}.table-size[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#b0b0b0c0}.hiddenButton[_ngcontent-%COMP%]{display:none}.child-feature-row[_ngcontent-%COMP%], .child-category-row[_ngcontent-%COMP%], .child-subcategory-row[_ngcontent-%COMP%], .child-enable-row[_ngcontent-%COMP%]{display:flex;align-items:flex-end;min-height:48px}.child[_ngcontent-%COMP%]{padding-left:50px}.plus-icon[_ngcontent-%COMP%]{vertical-align:middle}"]})};var fi=[{path:"",component:Q},{path:":subpath",component:U}];export{fi as VariantConfig_routes};
