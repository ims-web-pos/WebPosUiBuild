"use strict";(self.webpackChunkimserp=self.webpackChunkimserp||[]).push([[9220],{66582:(D,C,l)=>{l.d(C,{M:()=>Jn});var e=l(64537),v=l(23815),O=l.n(v),o=l(42326),T=l(28698),p=l(19102),S=l(88692),b=l(92340),M=l(20092),f=l(91605),y=l(65705),I=l(53074),N=l(87584),P=l(7976),R=l(67297),L=l(54536),h=l(67311),g=l(14970),c=l(30334),_=l(48063),u=l(471),d=l(90253),m=l(9267),A=l(23470),x=l(63213);const B=["genericGridCustomer"],U=["genericGridRefBill"],V=["genericGridSalesMan"],k=["genericGridForTaxCancel"],K=["newgenericGridForTaxCancel"],G=["newgenericGridForSalesReturn"],J=["newgenericGridForDeliveryChalanReturn"],Q=["genericGridCustomerListBySalesmanAndRoute"],H=["genericGridAccount"],q=["CreateCustomerProfile"],Y=["CreateQuickParty"],W=["genericGridSalesOrder"],$=["LoadSalesOrder"],z=["genericGridJobCardNO"],X=["genericGridVehicleNo"],ee=["addDiscount"],ne=["focusInputUnit"],ie=["focusSalesman"],te=["focusInputFormat"],re=["FocusCustomer"],ae=["genericGridWarehouse"];function oe(a,s){if(1&a&&(e.TgZ(0,"div",38)(1,"label",10),e._uU(2),e.qZA(),e.TgZ(3,"td",39),e._uU(4),e.qZA()()),2&a){const n=e.oxw();e.xp6(2),e.Oqu(n.billLabel),e.xp6(2),e.hij(" ",n._trnMainService.TrnMainObj.VCHRNO," ")}}function se(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"Inv Date"),e.qZA(),e.TgZ(3,"td",40)(4,"input",41),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.TRN_DATE=t)})("change",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.changeInvDate(t.target.value,"AD"))}),e.qZA()(),e.TgZ(5,"td",42)(6,"nepali-date-picker",43),e.NdJ("change",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.changeInvDate(t.detail.value,"BS"))})("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.BS_DATE=t)}),e.qZA()()()}if(2&a){const n=e.oxw(2);e.xp6(4),e.s9C("max",n.currDate),e.Q6J("ngModel",n._trnMainService.TrnMainObj.TRN_DATE)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||("add-sales-invoice"==n.activeurlpath||1==n._trnMainService.TrnMainObj.VoucherType||"add-sales-invoice-wholesale"==n.activeurlpath||"add-creditnote-itembase"==n.activeurlpath)&&0==n._trnMainService.userProfile.CompanyInfo.AllowBackDateSalesEntry||"self-billing"==n.activeurlpath||"add-membership-sales-invoice"==n.activeurlpath||83==n._trnMainService.TrnMainObj.VoucherType||21==n._trnMainService.TrnMainObj.VoucherType)("min","add-creditnote-itembase"==n.activeurlpath&&1==n._trnMainService.userProfile.CompanyInfo.AllowBackDateSalesEntry?null==n._trnMainService?null:n._trnMainService.TrnMainObj.DateLimitForCreditNote:""),e.xp6(2),e.Q6J("id","InvnepaliDateFrom")("label","From")("disable",n._trnMainService.disableNepaliDate||"self-billing"==n.activeurlpath||73==n._trnMainService.TrnMainObj.VoucherType||("add-sales-invoice"==n.activeurlpath||1==n._trnMainService.TrnMainObj.VoucherType||"add-sales-invoice-wholesale"==n.activeurlpath||"add-creditnote-itembase"==n.activeurlpath)&&0==n._trnMainService.userProfile.CompanyInfo.AllowBackDateSalesEntry||"add-membership-sales-invoice"==n.activeurlpath||83==n._trnMainService.TrnMainObj.VoucherType||21==n._trnMainService.TrnMainObj.VoucherType)("ngModel",n._trnMainService.TrnMainObj.BS_DATE)}}function ce(a,s){if(1&a&&(e.ynx(0),e.YNc(1,se,7,8,"div",3),e.BQk()),2&a){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",14==n._trnMainService.TrnMainObj.VoucherType||1==n._trnMainService.TrnMainObj.VoucherType||15==n._trnMainService.TrnMainObj.VoucherType||57==n._trnMainService.TrnMainObj.VoucherType||41==n._trnMainService.TrnMainObj.VoucherType||73==n._trnMainService.TrnMainObj.VoucherType||83==n._trnMainService.TrnMainObj.VoucherType||86==n._trnMainService.TrnMainObj.VoucherType||21==n._trnMainService.TrnMainObj.VoucherType||46==n._trnMainService.TrnMainObj.VoucherType)}}function le(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"Inv Date"),e.qZA(),e.TgZ(3,"td",40)(4,"input",41),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.TRN_DATE=t)})("change",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.changeInvDate(t.target.value,"AD"))}),e.qZA()(),e.TgZ(5,"td",42)(6,"nepali-date-picker",43),e.NdJ("change",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.changeInvDate(t.detail.value,"BS"))})("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.BS_DATE=t)}),e.qZA()()()}if(2&a){const n=e.oxw(2);e.xp6(4),e.s9C("max",n.currDate),e.Q6J("ngModel",n._trnMainService.TrnMainObj.TRN_DATE)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||"add-sales-invoice"==n.activeurlpath||"self-billing"==n.activeurlpath||"add-sales-invoice-wholesale"==n.activeurlpath||"add-creditnote-itembase"==n.activeurlpath||"add-membership-sales-invoice"==n.activeurlpath||1==n._trnMainService.TrnMainObj.VoucherType)("min","add-creditnote-itembase"==n.activeurlpath&&1==n._trnMainService.userProfile.CompanyInfo.AllowBackDateSalesEntry?null==n._trnMainService?null:n._trnMainService.TrnMainObj.DateLimitForCreditNote:""),e.xp6(2),e.Q6J("id","InvnepaliDateFrom")("label","From")("disable",n._trnMainService.disableNepaliDate||"self-billing"==n.activeurlpath||73==n._trnMainService.TrnMainObj.VoucherType||"add-sales-invoice-wholesale"==n.activeurlpath||"add-creditnote-itembase"==n.activeurlpath||"add-sales-invoice"==n.activeurlpath||"add-membership-sales-invoice"==n.activeurlpath||1==n._trnMainService.TrnMainObj.VoucherType)("ngModel",n._trnMainService.TrnMainObj.BS_DATE)}}function _e(a,s){if(1&a&&(e.ynx(0),e.YNc(1,le,7,8,"div",3),e.BQk()),2&a){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",14==n._trnMainService.TrnMainObj.VoucherType||1==n._trnMainService.TrnMainObj.VoucherType||15==n._trnMainService.TrnMainObj.VoucherType||57==n._trnMainService.TrnMainObj.VoucherType||41==n._trnMainService.TrnMainObj.VoucherType||73==n._trnMainService.TrnMainObj.VoucherType)}}function Me(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"Entry Date"),e.qZA(),e.TgZ(3,"td",40)(4,"input",41),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r._trnMainService.TrnMainObj.TRNDATE=t)})("change",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r.changeEntryDate(t.target.value,"AD"))}),e.qZA()(),e.TgZ(5,"td",42)(6,"nepali-date-picker",44),e.NdJ("change",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r.changeEntryDate(t.detail.value,"BS"))})("ngModelChange",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r._trnMainService.TrnMainObj.BSDATE=t)}),e.qZA()()()}if(2&a){const n=e.oxw();e.xp6(4),e.s9C("max",n.currDate),e.Q6J("ngModel",n._trnMainService.TrnMainObj.TRNDATE)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||("add-sales-invoice"==n.activeurlpath||1==n._trnMainService.TrnMainObj.VoucherType||"add-sales-invoice-wholesale"==n.activeurlpath||"add-creditnote-itembase"==n.activeurlpath)&&0==n._trnMainService.userProfile.CompanyInfo.AllowBackDateSalesEntry||"self-billing"==n.activeurlpath||"add-membership-sales-invoice"==n.activeurlpath||83==n._trnMainService.TrnMainObj.VoucherType||21==n._trnMainService.TrnMainObj.VoucherType)("min","add-creditnote-itembase"==n.activeurlpath&&1==n._trnMainService.userProfile.CompanyInfo.AllowBackDateSalesEntry?null==n._trnMainService?null:n._trnMainService.TrnMainObj.DateLimitForCreditNote:""),e.xp6(2),e.Q6J("id","EntrynepaliDateFrom")("label","From")("disable",n._trnMainService.disableNepaliDate||"self-billing"==n.activeurlpath||("add-sales-invoice"==n.activeurlpath||1==n._trnMainService.TrnMainObj.VoucherType||"add-sales-invoice-wholesale"==n.activeurlpath||"add-creditnote-itembase"==n.activeurlpath)&&0==n._trnMainService.userProfile.CompanyInfo.AllowBackDateSalesEntry||"add-membership-sales-invoice"==n.activeurlpath||83==n._trnMainService.TrnMainObj.VoucherType||21==n._trnMainService.TrnMainObj.VoucherType||73==n._trnMainService.TrnMainObj.VoucherType)("ngModel",n._trnMainService.TrnMainObj.BSDATE)}}function de(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"Ref Bill No."),e.qZA(),e.TgZ(3,"input",45),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r._trnMainService.TrnMainObj.REFBILL=t)})("keydown.enter",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r.RefBillEnterCommand(t))})("keydown.tab",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r.RefBillEnterCommand(t))})("keydown",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r.preventInput(t))}),e.qZA()()}if(2&a){const n=e.oxw();e.xp6(3),e.Q6J("disabled",n.RefBillFieldDisabled())("ngModel",n._trnMainService.TrnMainObj.REFBILL)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode)}}function Te(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"input",48),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.REFBILL=t)})("keydown.enter",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.RefBillEnterCommand(t))})("keydown.tab",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.RefBillEnterCommand(t))}),e.qZA()}if(2&a){const n=e.oxw(2);e.Q6J("disabled",n.RefBillFieldDisabled()||"VIEW"==n._trnMainService.TrnMainObj.Mode)("ngModel",n._trnMainService.TrnMainObj.REFBILL)("readonly",n.disableRefBill())}}function ue(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"input",49),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.REFBILL=t)}),e.qZA()}if(2&a){const n=e.oxw(2);e.Q6J("ngModel",n._trnMainService.TrnMainObj.REFBILL)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode)}}function he(a,s){if(1&a&&(e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"Ref Bill No."),e.qZA(),e.YNc(3,Te,1,3,"input",46),e.YNc(4,ue,1,2,"input",47),e.qZA()),2&a){const n=e.oxw();e.xp6(3),e.Q6J("ngIf",0==n.userSetting.ENABLEMANUALSALESRETURN),e.xp6(1),e.Q6J("ngIf",1==n.userSetting.ENABLEMANUALSALESRETURN)}}function pe(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",52)(1,"input",53),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.DOFULLRETURN=t)})("change",function(t){e.CHM(n);const r=e.oxw(2);return r._trnMainService.TrnMainObj.DOFULLRETURN=t.target.checked?1:0,e.KtG(r.DoFulReturnClick(r._trnMainService.TrnMainObj.DOFULLRETURN))}),e.qZA(),e.TgZ(2,"label",54),e._uU(3,"Do Full Return"),e.qZA()()}if(2&a){const n=e.oxw(2);e.xp6(1),e.Q6J("ngModel",n._trnMainService.TrnMainObj.DOFULLRETURN)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||0==n._trnMainService.TrnMainObj.DOFULLRETURN)}}function ve(a,s){if(1&a&&(e.TgZ(0,"div",50),e.YNc(1,pe,4,2,"div",51),e.qZA()),2&a){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",0==n.userSetting.ENABLEMANUALSALESRETURN)}}function Se(a,s){1&a&&e._UZ(0,"div",38)}function me(a,s){1&a&&e.GkF(0)}function ge(a,s){1&a&&(e.TgZ(0,"label",10),e._uU(1,"Refno."),e.qZA())}function Oe(a,s){1&a&&(e.TgZ(0,"label",10),e._uU(1,"CouponNo."),e.qZA())}function be(a,s){if(1&a&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&a){const n=s.$implicit;e.s9C("value",null==n?null:n.series),e.xp6(1),e.Oqu(null==n?null:n.series)}}function Ce(a,s){if(1&a&&(e.ynx(0),e.YNc(1,be,2,2,"option",63),e.BQk()),2&a){const n=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",n.chalanSeries)}}function fe(a,s){1&a&&(e.TgZ(0,"option",65),e._uU(1,"Chalan series not found!"),e.qZA())}function Ee(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"select",61),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.CHALANNOPREFIX=t)}),e.YNc(1,Ce,2,1,"ng-container",4),e.YNc(2,fe,2,0,"option",62),e.qZA()}if(2&a){const n=e.oxw(2);e.Q6J("ngModel",n._trnMainService.TrnMainObj.CHALANNOPREFIX)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||1==n._trnMainService.disableAllFieldinPurchase),e.xp6(1),e.Q6J("ngIf",n.chalanSeries&&n.chalanSeries.length>0),e.xp6(1),e.Q6J("ngIf",n.chalanSeries&&0===n.chalanSeries.length)}}function Ae(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38),e.YNc(1,me,1,0,"ng-container",55),e.YNc(2,ge,2,0,"ng-template",null,56,e.W1O),e.YNc(4,Oe,2,0,"ng-template",null,57,e.W1O),e.TgZ(6,"td",58),e.YNc(7,Ee,3,4,"select",59),e.TgZ(8,"input",60),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r._trnMainService.TrnMainObj.REFBILL=t)})("focus",function(t){return t.target.select()})("keydown.tab",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.masterService.focusAnyControl(1==t.userSetting.GblEnableMixedTenderMode&&0==t.userSetting.ENABLE_SOINTI?"customerselectid":"soNoId"))})("keydown.enter",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.enterClickOnRefno(t.event))})("change",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.enterClickOnRefno(t.event))}),e.qZA()()()}if(2&a){const n=e.MAs(3),i=e.MAs(5),t=e.oxw();e.xp6(1),e.Q6J("ngIf",1==t.userSetting.EnablePetrolPumpFeatures&&83==t._trnMainService.TrnMainObj.VoucherType)("ngIfThen",i)("ngIfElse",n),e.xp6(6),e.Q6J("ngIf",1==t.userSetting.PrefixForRefNoInVEntry),e.xp6(1),e.Q6J("ngClass",1==t.userSetting.PrefixForRefNoInVEntry?"prefixYes":"prefixNo")("ngModel",t._trnMainService.TrnMainObj.REFBILL)("disabled","VIEW"==t._trnMainService.TrnMainObj.Mode||"EDIT"==t._trnMainService.TrnMainObj.Mode&&1==t.userSetting.EnablePetrolPumpFeatures&&83==t._trnMainService.TrnMainObj.VoucherType)}}function je(a,s){if(1&a&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&a){const n=s.$implicit;e.s9C("value",n.ID),e.xp6(1),e.hij(" ",n.PAYMENTTERMS||"No Payment Term"," ")}}function De(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"span",70),e.NdJ("click",function(){e.CHM(n);const t=e.oxw(2);return e.KtG(t.onClickAdd())}),e.TgZ(1,"p"),e._uU(2,"+"),e.qZA()()}}function ye(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"Payment Terms"),e.qZA(),e.TgZ(3,"div",66)(4,"select",67),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r._trnMainService.TrnMainObj.AdditionalObj.PAYMENTTERMS=t)})("change",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r.onPaymentChange(t))}),e.TgZ(5,"option",68),e._uU(6,"Select a Payment Term"),e.qZA(),e.YNc(7,je,2,2,"option",63),e.qZA(),e.YNc(8,De,3,0,"span",69),e.qZA()()}if(2&a){const n=e.oxw();e.xp6(4),e.Q6J("ngModel",n._trnMainService.TrnMainObj.AdditionalObj.PAYMENTTERMS)("disabled","VIEW"===n._trnMainService.TrnMainObj.Mode),e.xp6(3),e.Q6J("ngForOf",n.payment),e.xp6(1),e.Q6J("ngIf","VIEW"!=n._trnMainService.TrnMainObj.Mode)}}function Ie(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"Ref Bill No."),e.qZA(),e.TgZ(3,"input",71),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r._trnMainService.TrnMainObj.REFBILL=t)})("keydown.enter",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r.RefBillEnterCommand(t))})("keydown.tab",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r.RefBillEnterCommand(t))}),e.qZA()()}if(2&a){const n=e.oxw();e.xp6(3),e.Q6J("disabled",n.RefBillFieldDisabled()||"VIEW"==n._trnMainService.TrnMainObj.Mode||"EDIT"==n._trnMainService.TrnMainObj.Mode&&21==n._trnMainService.TrnMainObj.VoucherType)("ngModel",n._trnMainService.TrnMainObj.REFBILL)}}function Ne(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",50)(1,"div",72)(2,"input",73),e.NdJ("change",function(t){e.CHM(n);const r=e.oxw();return r._trnMainService.TrnMainObj.DOFULLRETURN=t.target.checked?1:0,e.KtG(r._trnMainService.callPipe=!r._trnMainService.callPipe)})("ngModelChange",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r._trnMainService.TrnMainObj.DOFULLRETURN=t)})("click",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r.DoFulReturnClick(t.target.checked))}),e.qZA(),e.TgZ(3,"label",54),e._uU(4,"Do Full Return"),e.qZA()()()}if(2&a){const n=e.oxw();e.xp6(2),e.Q6J("ngModel",n._trnMainService.TrnMainObj.DOFULLRETURN)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||"EDIT"==n._trnMainService.TrnMainObj.Mode)}}function Pe(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"PP No./Date:"),e.qZA(),e.TgZ(3,"input",74),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r._trnMainService.TrnMainObj.PRAGYAPANPATRA=t)}),e.qZA(),e.TgZ(4,"input",75),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r._trnMainService.TrnMainObj.PPDATE=t)}),e.qZA()()}if(2&a){const n=e.oxw();e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.PRAGYAPANPATRA)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||1==n._trnMainService.disableAllFieldinPurchase),e.xp6(1),e.Q6J("ngModel",n._trnMainService.TrnMainObj.PPDATE)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode)}}function Re(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"Job Card No."),e.qZA(),e.TgZ(3,"td",58)(4,"input",76),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r._trnMainService.TrnMainObj.AdditionalObj.JOBCARDNO=t)})("Keydown.Enter",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.JobCardNoEnter())})("focus",function(t){return t.target.select()}),e.qZA()()()}if(2&a){const n=e.oxw();e.xp6(4),e.Q6J("ngModel",n._trnMainService.TrnMainObj.AdditionalObj.JOBCARDNO)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode)}}function Le(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"Bill Format"),e.qZA(),e.TgZ(3,"select",77),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r._trnMainService.TrnMainObj.AdditionalObj.BILLFORMATS=t)}),e.TgZ(4,"option",78),e._uU(5,"Full Bill"),e.qZA(),e.TgZ(6,"option",79),e._uU(7,"Half Bill"),e.qZA()()()}if(2&a){const n=e.oxw();e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.AdditionalObj.BILLFORMATS)("disabled",n.UnitandFormatDisabled())}}function xe(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",80)(1,"label",10),e._uU(2,"SO NO"),e.qZA(),e.TgZ(3,"td",81)(4,"input",82),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r._trnMainService.TrnMainObj.REFORDBILL=t)})("keydown.enter",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r.SalesOrderEnter(t))})("keydown.Tab",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.masterService.focusAnyControl(1==t.userSetting.GblEnableMixedTenderMode?"customerselectid":"paymentTerms"))})("keydown.delete",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.salesOrderDelete())}),e.qZA()(),e.TgZ(5,"td")(6,"input",83),e.NdJ("change",function(t){e.CHM(n);const r=e.oxw();return r._trnMainService.TrnMainObj.LOADFULLFROMQT=t.target.checked?1:0,e.KtG(r.onChangeSOLoad(t))})("ngModelChange",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r._trnMainService.TrnMainObj.LOADFULLFROMQT=t)})("keydown.delete",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.removeReferenceNumber())}),e.qZA(),e.TgZ(7,"label",84),e._uU(8,"Load Full SO Detail"),e.qZA()()()}if(2&a){const n=e.oxw();e.xp6(4),e.Q6J("ngModel",n._trnMainService.TrnMainObj.REFORDBILL)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode),e.xp6(2),e.Q6J("ngModel",n._trnMainService.TrnMainObj.LOADFULLFROMQT)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||n._trnMainService.TrnMainObj.REFORDBILL)}}function we(a,s){if(1&a&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&a){const n=s.$implicit;e.Q6J("value",n.MODEVALUE),e.xp6(1),e.Oqu(n.PAYMENTMODENAME)}}function Fe(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"select",94),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(3);return e.KtG(r._trnMainService.TrnMainObj.TRNMODE=t)})("change",function(t){e.CHM(n);const r=e.oxw(3);return e.KtG(r.paymentTermsChange(t))}),e.YNc(1,we,2,2,"option",63),e.qZA()}if(2&a){const n=e.oxw(3);e.Q6J("ngModel",n._trnMainService.TrnMainObj.TRNMODE)("disabled",n.disablePaymentTermsField()),e.xp6(1),e.Q6J("ngForOf",n.paymentList)}}function Ze(a,s){if(1&a&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&a){const n=s.$implicit;e.Q6J("value",n.NAME),e.xp6(1),e.Oqu(n.NAME)}}function Be(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"select",95),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(3);return e.KtG(r._trnMainService.TrnMainObj.AdditionalObj.PAYMENTTERMS=t)})("change",function(t){e.CHM(n);const r=e.oxw(3);return e.KtG(r.onExportSalesPaymentChange(t))}),e._UZ(1,"option",65),e.YNc(2,Ze,2,2,"option",63),e.qZA()}if(2&a){const n=e.oxw(3);e.Q6J("ngModel",n._trnMainService.TrnMainObj.AdditionalObj.PAYMENTTERMS)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode),e.xp6(2),e.Q6J("ngForOf",n.ExportPayment)}}function Ue(a,s){if(1&a&&(e.TgZ(0,"div",38)(1,"label",10),e._uU(2),e.qZA(),e.YNc(3,Fe,2,3,"select",92),e.YNc(4,Be,3,3,"select",93),e.qZA()),2&a){const n=e.oxw(2);e.xp6(2),e.Oqu(n.paymentModeLabel),e.xp6(1),e.Q6J("ngIf","export-sales-invoice"!=n.activeurlpath),e.xp6(1),e.Q6J("ngIf","export-sales-invoice"===n.activeurlpath)}}function Ve(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"Account"),e.qZA(),e.TgZ(3,"input",96),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.TRNACName=t)})("keydown.enter",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.AccountEnterCommand(t))}),e.qZA()()}if(2&a){const n=e.oxw(2);e.xp6(3),e.Q6J("disabled",n.disableAccountSelection()||n._trnMainService.disableAccountInputField)("ngModel",n._trnMainService.TrnMainObj.TRNACName)}}function ke(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"input",99),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(3);return e.KtG(r._trnMainService.TrnMainObj.MWAREHOUSE=t)})("keydown.enter",function(t){e.CHM(n);const r=e.oxw(3);return e.KtG(r.WarehouseEnterCommand(t))}),e.ALo(1,"disableField"),e.qZA()}if(2&a){const n=e.oxw(3);e.Q6J("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||e.lcZ(1,3,"disableWareHouse")||1==(null==n._trnMainService.disableMaster?null:n._trnMainService.disableMaster.Warehouse)||1==n._trnMainService.disableAllFieldinPurchase||0==n.userSetting.ENABLEMANUALSALESRETURN&&15==n._trnMainService.TrnMainObj.VoucherType||21==n._trnMainService.TrnMainObj.VoucherType)("ngModel",n._trnMainService.TrnMainObj.MWAREHOUSE)("readonly",!0)}}function Ke(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"input",100),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(3);return e.KtG(r._trnMainService.TrnMainObj.MWAREHOUSE=t)})("keydown.enter",function(t){e.CHM(n);const r=e.oxw(3);return e.KtG(r.WarehouseEnterForUnsalableCommand(t))}),e.ALo(1,"disableField"),e.qZA()}if(2&a){const n=e.oxw(3);e.Q6J("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||e.lcZ(1,2,"disableWareHouse")||1==(null==n._trnMainService.disableMaster?null:n._trnMainService.disableMaster.Warehouse)||1==n._trnMainService.disableAllFieldinPurchase||0==n.userSetting.ENABLEMANUALSALESRETURN)("ngModel",n._trnMainService.TrnMainObj.MWAREHOUSE)}}function Ge(a,s){if(1&a&&(e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"Warehouse"),e.qZA(),e.YNc(3,ke,2,5,"input",97),e.YNc(4,Ke,2,4,"input",98),e.qZA()),2&a){const n=e.oxw(2);e.xp6(3),e.Q6J("ngIf","self-billing"!=n.activeurlpath),e.xp6(1),e.Q6J("ngIf","self-billing"==n.activeurlpath)}}function Je(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",101)(1,"label",10),e._uU(2,"Salesman"),e.qZA(),e.TgZ(3,"input",102),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.SALESMAN=t)})("keydown.enter",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.salesManEnterCommand(t))})("keydown.delete",function(){e.CHM(n);const t=e.oxw(2);return e.KtG(t.deleteSalesman())}),e.qZA()()}if(2&a){const n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.SALESMAN)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode)}}function Qe(a,s){if(1&a&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&a){const n=s.$implicit;e.s9C("value",n.CCID),e.xp6(1),e.hij(" ",n.COSTCENTERNAME,"")}}function He(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"Cost Center"),e.qZA(),e.TgZ(3,"select",103),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.COSTCENTER=t)})("keydown.tab",function(){e.CHM(n);const t=e.oxw(2);return e.KtG(t.focusToRemarks())}),e._UZ(4,"option",65),e.YNc(5,Qe,2,2,"option",63),e.qZA()()}if(2&a){const n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.COSTCENTER)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||0==n.userSetting.ENABLEMANUALSALESRETURN&&15==n._trnMainService.TrnMainObj.VoucherType||n._trnMainService.disableCostCenterForCargo||1==n.userSetting.enableCostCenter&&1==n.userSetting.EnableCostCenterWiseAccounting&&"add-creditnote-itembase"==n.activeurlpath&&0==n.userSetting.ENABLEMANUALSALESRETURN||21==n._trnMainService.TrnMainObj.VoucherType),e.xp6(2),e.Q6J("ngForOf",n.costlists)}}function qe(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"A/C B/L"),e.qZA(),e.TgZ(3,"input",104),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.BALANCEAMOUNT=t)}),e.qZA(),e.TgZ(4,"label",105)(5,"b"),e._uU(6),e.qZA()()()}if(2&a){const n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.BALANCEAMOUNT),e.xp6(3),e.Oqu(n._trnMainService.TrnMainObj.LIMITINDICATOR)}}function Ye(a,s){if(1&a&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&a){const n=s.$implicit;e.s9C("value",n.CURNAME),e.xp6(1),e.hij(" ",n.CURNAME," ")}}function We(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",106)(1,"label",106),e._uU(2,"Currency :"),e.qZA(),e.TgZ(3,"select",107),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.FCurrency=t)})("change",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.onCurrenyChange(t.target.value))})("keydown.Tab",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.focusToExcRate(t))})("keydown.Enter",function(t){e.CHM(n);const r=e.oxw(2);return t.preventDefault(),e.KtG(r.focusToExcRate(t))}),e.YNc(4,Ye,2,2,"option",63),e.qZA()()}if(2&a){const n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.FCurrency)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode),e.xp6(1),e.Q6J("ngForOf",n.masterService.Currencies)}}function $e(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",106)(1,"label",108),e._uU(2,"EX Rate :"),e.qZA(),e.TgZ(3,"input",109),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.EXRATE=t)}),e.qZA()()}if(2&a){const n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.EXRATE)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode)}}function ze(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",110)(1,"label",10),e._uU(2,"Transportation Mode:"),e.qZA(),e.TgZ(3,"select",111),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.AdditionalObj.TRANSPORTATIONMODE=t)}),e.TgZ(4,"option",112),e._uU(5,"Air"),e.qZA(),e.TgZ(6,"option",113),e._uU(7,"Road"),e.qZA(),e.TgZ(8,"option",114),e._uU(9,"Ship"),e.qZA()()()}if(2&a){const n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.AdditionalObj.TRANSPORTATIONMODE)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode)}}function Xe(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"Billing Mode"),e.qZA(),e.TgZ(3,"select",115),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.BILLMODE=t)}),e.TgZ(4,"option",116),e._uU(5,"New Registration"),e.qZA(),e.TgZ(6,"option",117),e._uU(7,"Renewable"),e.qZA()()()}if(2&a){const n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.BILLMODE)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode)}}function en(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"Bill Format"),e.qZA(),e.TgZ(3,"select",118),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(3);return e.KtG(r._trnMainService.TrnMainObj.AdditionalObj.BILLFORMATS=t)}),e.TgZ(4,"option",78),e._uU(5,"Full Bill"),e.qZA(),e.TgZ(6,"option",79),e._uU(7,"Half Bill"),e.qZA()()()}if(2&a){const n=e.oxw(3);e.xp6(3),e.Q6J("disabled",n.UnitandFormatDisabled())("ngModel",n._trnMainService.TrnMainObj.AdditionalObj.BILLFORMATS)}}function nn(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"Unit"),e.qZA(),e.TgZ(3,"select",119,120),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(3);return e.KtG(r._trnMainService.TrnMainObj.AdditionalObj.BILLUNITS=t)})("keydown.tab",function(){e.CHM(n);const t=e.oxw(3);return e.KtG(t.UniEnterCommand())})("keydown.enter",function(){e.CHM(n);const t=e.oxw(3);return e.KtG(t.UniEnterCommand())}),e.TgZ(5,"option",121),e._uU(6,"Case"),e.qZA(),e.TgZ(7,"option",122),e._uU(8,"Each"),e.qZA()()()}if(2&a){const n=e.oxw(3);e.xp6(3),e.Q6J("disabled",n.UnitandFormatDisabled())("ngModel",n._trnMainService.TrnMainObj.AdditionalObj.BILLUNITS)}}function tn(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"Bill Format"),e.qZA(),e.TgZ(3,"select",77),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(3);return e.KtG(r._trnMainService.TrnMainObj.AdditionalObj.BILLFORMATS=t)}),e.TgZ(4,"option",78),e._uU(5,"Full Bill"),e.qZA(),e.TgZ(6,"option",79),e._uU(7,"Half Bill"),e.qZA()()()}if(2&a){const n=e.oxw(3);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.AdditionalObj.BILLFORMATS)("disabled",n.UnitandFormatDisabled())}}function rn(a,s){if(1&a&&(e.TgZ(0,"option",128),e._uU(1),e.qZA()),2&a){const n=s.$implicit;e.Q6J("ngValue",n.CURNAME),e.xp6(1),e.hij("",n.CURNAME," ")}}function an(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",124),e._uU(2,"Currency"),e.qZA(),e.TgZ(3,"select",125),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(4);return e.KtG(r._trnMainService.TrnMainObj.FCurrency=t)})("change",function(){e.CHM(n);const t=e.oxw(4);return e.KtG(t.CurrencyChange())}),e.YNc(4,rn,2,2,"option",126),e.qZA(),e.TgZ(5,"label",124),e._uU(6,"Exchange Rate"),e.qZA(),e.TgZ(7,"input",127),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(4);return e.KtG(r._trnMainService.TrnMainObj.EXRATE=t)}),e.qZA()()}if(2&a){const n=e.oxw(4);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.FCurrency),e.xp6(1),e.Q6J("ngForOf",n.masterService.Currencies),e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.EXRATE)}}function on(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"Barcode"),e.qZA(),e.TgZ(3,"input",123),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(3);return e.KtG(r._trnMainService.BarcodeFromScan=t)})("keydown.enter",function(t){e.CHM(n);const r=e.oxw(3);return e.KtG(r._trnMainService.barcodeEnterCommand(t))}),e.qZA(),e.YNc(4,an,8,3,"div",3),e.qZA()}if(2&a){const n=e.oxw(3);e.xp6(3),e.Q6J("ngModel",n._trnMainService.BarcodeFromScan),e.xp6(1),e.Q6J("ngIf",1==n._trnMainService.AppSettings.ENABLEMULTICURRENCY)}}function sn(a,s){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,en,8,2,"div",3),e.YNc(2,nn,9,2,"div",3),e.YNc(3,tn,8,2,"div",3),e.YNc(4,on,5,2,"div",3),e.qZA()),2&a){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(57==n._trnMainService.TrnMainObj.VoucherType||61==n._trnMainService.TrnMainObj.VoucherType||64==n._trnMainService.TrnMainObj.VoucherType)&&1==n.userSetting.EnableBillFormatInBilling),e.xp6(1),e.Q6J("ngIf",(57==n._trnMainService.TrnMainObj.VoucherType||61==n._trnMainService.TrnMainObj.VoucherType||64==n._trnMainService.TrnMainObj.VoucherType)&&1==n.userSetting.EnableBillFormatInBilling),e.xp6(1),e.Q6J("ngIf",1==n.userSetting.ENABLEMULTISPRINTFORMAT&&(15==n._trnMainService.TrnMainObj.VoucherType||41==n._trnMainService.TrnMainObj.VoucherType)),e.xp6(1),e.Q6J("ngIf",14==n._trnMainService.TrnMainObj.VoucherType&&"retailer"==n._trnMainService.userProfile.CompanyInfo.ORG_TYPE)}}function cn(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",8),e.YNc(1,Ue,5,3,"div",3),e.TgZ(2,"div",85)(3,"label",10),e._uU(4,"Card No/Cheque:"),e.qZA(),e.TgZ(5,"td",66)(6,"input",86),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r._trnMainService.TrnMainObj.CHEQUENO=t)}),e.qZA(),e.TgZ(7,"input",87),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r._trnMainService.TrnMainObj.CHEQUEDATE=t)})("change",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.getEnglishDate())}),e.qZA()()(),e.YNc(8,Ve,4,2,"div",3),e.YNc(9,Ge,5,2,"div",3),e.YNc(10,Je,4,2,"div",88),e.YNc(11,He,6,3,"div",3),e.YNc(12,qe,7,2,"div",3),e.TgZ(13,"div",89),e.YNc(14,We,5,3,"div",90),e.YNc(15,$e,4,2,"div",90),e.qZA(),e.YNc(16,ze,10,2,"div",91),e.YNc(17,Xe,8,2,"div",3),e.YNc(18,sn,5,4,"div",4),e.qZA()}if(2&a){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.showPaymentTerms()),e.xp6(1),e.Q6J("hidden",15==n._trnMainService.TrnMainObj.VoucherType||41==n._trnMainService.TrnMainObj.VoucherType||43==n._trnMainService.TrnMainObj.VoucherType||14==n._trnMainService.TrnMainObj.VoucherType||1==n._trnMainService.TrnMainObj.VoucherType||57==n._trnMainService.TrnMainObj.VoucherType||83==n._trnMainService.TrnMainObj.VoucherType||86==n._trnMainService.TrnMainObj.VoucherType||64==n._trnMainService.TrnMainObj.VoucherType||73==n._trnMainService.TrnMainObj.VoucherType||21==n._trnMainService.TrnMainObj.VoucherType||46==n._trnMainService.TrnMainObj.VoucherType),e.xp6(4),e.Q6J("ngModel",n._trnMainService.TrnMainObj.CHEQUENO)("disabled","cheque"!=n._trnMainService.TrnMainObj.TRNMODE&&"creditcard"!=n._trnMainService.TrnMainObj.TRNMODE),e.xp6(1),e.Q6J("ngModel",n._trnMainService.TrnMainObj.CHEQUEDATE)("disabled","cheque"!=n._trnMainService.TrnMainObj.TRNMODE),e.xp6(1),e.Q6J("ngIf",n.hideAccount()),e.xp6(1),e.Q6J("ngIf",(14==n._trnMainService.TrnMainObj.VoucherType||15==n._trnMainService.TrnMainObj.VoucherType||43==n._trnMainService.TrnMainObj.VoucherType||1==n._trnMainService.TrnMainObj.VoucherType||57==n._trnMainService.TrnMainObj.VoucherType||46==n._trnMainService.TrnMainObj.VoucherType||83==n._trnMainService.TrnMainObj.VoucherType||86==n._trnMainService.TrnMainObj.VoucherType||64==n._trnMainService.TrnMainObj.VoucherType||41==n._trnMainService.TrnMainObj.VoucherType||73==n._trnMainService.TrnMainObj.VoucherType||21==n._trnMainService.TrnMainObj.VoucherType)&&"lite"!=n.AppMode),e.xp6(1),e.Q6J("ngIf",n.hideSalesman()&&"lite"!=n.AppMode),e.xp6(1),e.Q6J("ngIf",n.hideCostCentre()&&"lite"!=n.AppMode),e.xp6(1),e.Q6J("ngIf","add-sales-invoice"==n.activeurlpath&&"credit"==n._trnMainService.TrnMainObj.TRNMODE&&"lite"!=n.AppMode&&0==n.userSetting.GblEnableMixedTenderMode),e.xp6(2),e.Q6J("ngIf","export-sales-invoice"==n.activeurlpath),e.xp6(1),e.Q6J("ngIf","export-sales-invoice"==n.activeurlpath),e.xp6(1),e.Q6J("ngIf","export-sales-invoice"==n.activeurlpath),e.xp6(1),e.Q6J("ngIf","add-membership-sales-invoice"==n.activeurlpath),e.xp6(1),e.Q6J("ngIf",1==n.masterService.ShowMore)}}function ln(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"span",129),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.onAddNewCustomer())}),e.TgZ(1,"p"),e._uU(2,"+"),e.qZA()()}}function _n(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"Member ID"),e.qZA(),e.TgZ(3,"input",130),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.MEMBERNO=t)}),e.qZA()()}if(2&a){const n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.MEMBERNO)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||1==n._trnMainService.disableAllFieldinPurchase)}}function Mn(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"Account"),e.qZA(),e.TgZ(3,"input",133),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.TRNACName=t)})("keydown.enter",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.AccountEnterCommand(t))}),e.qZA()()}if(2&a){const n=e.oxw(2);e.xp6(3),e.Q6J("disabled",n.disableAccountSelection())("ngModel",n._trnMainService.TrnMainObj.TRNACName)}}function dn(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"Country"),e.qZA(),e.TgZ(3,"input",134),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.COUNTRY=t)}),e.qZA()()}if(2&a){const n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.COUNTRY)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode)}}function Tn(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"Mobile No."),e.qZA(),e.TgZ(3,"input",130),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.BILLTOMOB=t)}),e.qZA()()}if(2&a){const n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.BILLTOMOB)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||1==n._trnMainService.disableAllFieldinPurchase)}}function un(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"VATNO"),e.qZA(),e.TgZ(3,"input",130),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.BILLTOTEL=t)}),e.qZA()()}if(2&a){const n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.BILLTOTEL)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||1==n._trnMainService.disableAllFieldinPurchase)}}function hn(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",9)(1,"label",10),e._uU(2,"Vehicle No"),e.qZA(),e.TgZ(3,"input",135),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.AdditionalObj.VEHICLENO=t)})("keydown.enter",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.onVehicleNoEnter(t))})("keyup",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.onVehicleNoEnter(t))}),e.qZA()()}if(2&a){const n=e.oxw(2);e.xp6(3),e.Q6J("disabled","VIEW"===n._trnMainService.TrnMainObj.Mode)("ngModel",n._trnMainService.TrnMainObj.AdditionalObj.VEHICLENO)}}function pn(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"span",140),e.NdJ("click",function(){e.CHM(n);const t=e.oxw(3);return e.KtG(t.onClickAddDiscounts())}),e.TgZ(1,"p"),e._uU(2,"+"),e.qZA(),e.TgZ(3,"span",141),e._uU(4,"Add Additional Discount"),e.qZA()()}}function vn(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"div",136)(2,"label",106),e._uU(3,"Flat Dis(%)"),e.qZA(),e.TgZ(4,"input",137),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.DCRATE=t)})("keydown.Enter",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.applyFlatDiscount(t))})("keydown.Tab",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.applyFlatDiscount(t))})("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return r._trnMainService.callPipe=!r._trnMainService.callPipe,e.KtG(r.validateFlatDiscount(t))})("focusout",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.applyFlatDiscount(t))}),e.qZA()(),e.TgZ(5,"div",136)(6,"label",108),e._uU(7,"Flat Dis(Rs)"),e.qZA(),e.TgZ(8,"input",138),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.FLATDCAMNT=t)})("focusout",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.applyFlatDiscount(t))})("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return r._trnMainService.callPipe=!r._trnMainService.callPipe,e.KtG(r.validateFlatDiscountAmount(t))})("keydown.Enter",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.applyFlatDiscount(t))})("change",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.applyFlatDiscount(t))}),e.qZA(),e.YNc(9,pn,5,0,"span",139),e.qZA()()}if(2&a){const n=e.oxw(2);e.xp6(4),e.Q6J("ngModel",n._trnMainService.TrnMainObj.DCRATE)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||n.showDiscountAddButton()||1==(null==n._trnMainService.disableMaster?null:n._trnMainService.disableMaster.FlatDisPer)||n._trnMainService.nullToZeroConverter(n._trnMainService.TrnMainObj.FLATDCAMNT)>0||n._trnMainService.disableOnPerFormaSelect||n.disableFlatDisField()),e.xp6(4),e.Q6J("ngModel",n._trnMainService.TrnMainObj.FLATDCAMNT)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||n.showDiscountAddButton()||1==(null==n._trnMainService.disableMaster?null:n._trnMainService.disableMaster.FlatDisRs)||n._trnMainService.nullToZeroConverter(n._trnMainService.TrnMainObj.DCRATE)>0||n._trnMainService.disableOnPerFormaSelect||n.disableFlatDisField()),e.xp6(1),e.Q6J("ngIf",n.showDiscountAddButton())}}function Sn(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",142),e._uU(2,"Load Wholesale Rate"),e.qZA(),e.TgZ(3,"input",143),e.NdJ("change",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.AdditionalObj.LoadWholeSaleRate=t.target.checked?1:0)})("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.AdditionalObj.LoadWholeSaleRate=t)}),e.qZA()()}if(2&a){const n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.AdditionalObj.LoadWholeSaleRate)("disabled",n.disableWholeSaleRateOption())}}function mn(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div"),e.YNc(1,_n,4,2,"div",3),e.YNc(2,Mn,4,2,"div",3),e.TgZ(3,"div",38)(4,"label",10),e._uU(5,"Address"),e.qZA(),e.TgZ(6,"input",130),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r._trnMainService.TrnMainObj.BILLTOADD=t)}),e.qZA()(),e.YNc(7,dn,4,2,"div",3),e.YNc(8,Tn,4,2,"div",3),e.YNc(9,un,4,2,"div",3),e.YNc(10,hn,4,2,"div",131),e.TgZ(11,"div",38)(12,"label",10),e._uU(13,"Remarks"),e.qZA(),e.TgZ(14,"textarea",132),e.NdJ("keydown.Tab",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r.focusToBarcode(t))})("ngModelChange",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r._trnMainService.TrnMainObj.REMARKS=t)}),e.qZA()(),e.YNc(15,vn,10,5,"div",3),e.YNc(16,Sn,4,2,"div",3),e.qZA()}if(2&a){const n=e.oxw();e.xp6(1),e.Q6J("ngIf","add-membership-sales-invoice"===n.activeurlpath),e.xp6(1),e.Q6J("ngIf","export-sales-invoice"===n.activeurlpath),e.xp6(4),e.Q6J("ngModel",n._trnMainService.TrnMainObj.BILLTOADD)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||1==n._trnMainService.disableAllFieldinPurchase),e.xp6(1),e.Q6J("ngIf","export-sales-invoice"==n.activeurlpath),e.xp6(1),e.Q6J("ngIf","add-membership-sales-invoice"===n.activeurlpath),e.xp6(1),e.Q6J("ngIf","export-sales-invoice"!=n.activeurlpath),e.xp6(1),e.Q6J("ngIf",("add-sales-invoice"==n.activeurlpath||"abbreviated-sales-invoice"==n.activeurlpath)&&1==n.userSetting.EnableVehicleMappingForCustomer),e.xp6(4),e.Q6J("ngModel",n._trnMainService.TrnMainObj.REMARKS)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode),e.xp6(1),e.Q6J("ngIf",n.hideFlatDiscount()),e.xp6(1),e.Q6J("ngIf",n.showWholesaleRateOption())}}function gn(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"div",136)(2,"label",106),e._uU(3,"Flat Dis(%)"),e.qZA(),e.TgZ(4,"input",145),e.NdJ("focusout",function(){e.CHM(n);const t=e.oxw(2);return e.KtG(t._trnMainService.clearFlatPercentageAndAmount())})("keydown.Enter",function(){e.CHM(n);const t=e.oxw(2);return e.KtG(t._trnMainService.onApplyClicked())})("keydown.Tab",function(){e.CHM(n);const t=e.oxw(2);return e.KtG(t._trnMainService.onApplyClicked())})("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.DCRATE=t)}),e.qZA()(),e.TgZ(5,"div",136)(6,"label",146),e._uU(7,"Flat Dis(Rs)"),e.qZA(),e.TgZ(8,"input",147),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.FLATDCAMNT=t)})("focusout",function(){e.CHM(n);const t=e.oxw(2);return e.KtG(t._trnMainService.clearFlatPercentageAndAmount())})("keydown.Enter",function(){e.CHM(n);const t=e.oxw(2);return e.KtG(t._trnMainService.onApplyClicked())})("keydown.Tab",function(){e.CHM(n);const t=e.oxw(2);return e.KtG(t._trnMainService.onApplyClicked())}),e.qZA()()()}if(2&a){const n=e.oxw(2);e.xp6(4),e.Q6J("ngModel",n._trnMainService.TrnMainObj.DCRATE)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||1==n._trnMainService.disableMaster.FlatDisPer||n._trnMainService.nullToZeroConverter(n._trnMainService.TrnMainObj.FLATDCAMNT)>0||0==n.userSetting.ENABLEMANUALSALESRETURN),e.xp6(4),e.Q6J("ngModel",n._trnMainService.TrnMainObj.FLATDCAMNT)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||1==n._trnMainService.disableMaster.FlatDisRs||n._trnMainService.nullToZeroConverter(n._trnMainService.TrnMainObj.DCRATE)>0||0==n.userSetting.ENABLEMANUALSALESRETURN)}}function On(a,s){if(1&a&&(e.TgZ(0,"div",38)(1,"label",10),e._uU(2),e.qZA(),e.TgZ(3,"select",148)(4,"option",149),e._uU(5,"Credit"),e.qZA(),e.TgZ(6,"option",150),e._uU(7,"Cash"),e.qZA(),e.TgZ(8,"option",151),e._uU(9,"Credit Card"),e.qZA(),e.TgZ(10,"option",152),e._uU(11,"Cheque Deposite"),e.qZA(),e.TgZ(12,"option",153),e._uU(13,"Mixed"),e.qZA()()()),2&a){const n=e.oxw(2);e.xp6(2),e.Oqu(n.paymentModeLabel),e.xp6(1),e.Q6J("ngModel",n._trnMainService.TrnMainObj.TRNMODE)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||"self-billing"==n._trnMainService.activeurlpath)}}function bn(a,s){if(1&a&&(e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"Account"),e.qZA(),e._UZ(3,"input",154),e.qZA()),2&a){const n=e.oxw(2);e.xp6(3),e.Q6J("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode)("ngModel",n._trnMainService.TrnMainObj.TRNACName)}}function Cn(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",144)(1,"div",38)(2,"label",10),e._uU(3,"Remarks"),e.qZA(),e.TgZ(4,"textarea",132),e.NdJ("keydown.Tab",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r.focusToBarcode(t))})("ngModelChange",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r._trnMainService.TrnMainObj.REMARKS=t)}),e.qZA()(),e.YNc(5,gn,9,4,"div",3),e.YNc(6,On,14,3,"div",3),e.YNc(7,bn,4,2,"div",3),e.qZA()}if(2&a){const n=e.oxw();e.xp6(4),e.Q6J("ngModel",n._trnMainService.TrnMainObj.REMARKS)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode),e.xp6(1),e.Q6J("ngIf",n.hideFlatDiscountinLite()),e.xp6(1),e.Q6J("ngIf",1==n.userSetting.GblEnableMixedTenderMode&&"VIEW"==n._trnMainService.TrnMainObj.Mode),e.xp6(1),e.Q6J("ngIf",1==n.userSetting.GblEnableMixedTenderMode&&"VIEW"==n._trnMainService.TrnMainObj.Mode&&"mixed"!=n._trnMainService.TrnMainObj.TRNMODE)}}function fn(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"span",140),e.NdJ("click",function(){e.CHM(n);const t=e.oxw(3);return e.KtG(t.onClickAddDiscounts())}),e.TgZ(1,"p"),e._uU(2,"+"),e.qZA(),e.TgZ(3,"span",162),e._uU(4,"Add Additional Discount"),e.qZA()()}}function En(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",101)(1,"label",10),e._uU(2,"Salesman"),e.qZA(),e.TgZ(3,"input",163),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(3);return e.KtG(r._trnMainService.TrnMainObj.SALESMAN=t)})("keydown.enter",function(t){e.CHM(n);const r=e.oxw(3);return e.KtG(r.salesManEnterCommand(t))})("keydown.delete",function(){e.CHM(n);const t=e.oxw(3);return e.KtG(t.deleteSalesman())}),e.qZA()()}if(2&a){const n=e.oxw(3);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.SALESMAN)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode)}}function An(a,s){if(1&a&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&a){const n=s.$implicit;e.s9C("value",n.ID),e.xp6(1),e.Oqu(n.Description)}}function jn(a,s){if(1&a&&(e.TgZ(0,"option",64),e._uU(1),e.qZA()),2&a){const n=s.$implicit;e.s9C("value",n.ID),e.xp6(1),e.Oqu(n.STATUS)}}function Dn(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",38)(1,"label",10),e._uU(2,"Decline Remarks"),e.qZA(),e.TgZ(3,"select",164),e.NdJ("keydown.Tab",function(t){e.CHM(n);const r=e.oxw(3);return e.KtG(r.focusToBarcode(t))})("ngModelChange",function(t){e.CHM(n);const r=e.oxw(3);return e.KtG(r._trnMainService.TrnMainObj.AdditionalObj.CFORM=t)})("change",function(){e.CHM(n);const t=e.oxw(3);return e.KtG(t.loadDeclineRemarks())}),e.YNc(4,jn,2,2,"option",63),e.qZA(),e.TgZ(5,"span",70),e.NdJ("click",function(){e.CHM(n);const t=e.oxw(3);return e.KtG(t.onClickAddRemarks())}),e.TgZ(6,"p"),e._uU(7,"+"),e.qZA()()()}if(2&a){const n=e.oxw(3);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.AdditionalObj.CFORM)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||"NEW"==n._trnMainService.TrnMainObj.Mode),e.xp6(1),e.Q6J("ngForOf",n.remarksList)}}function yn(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div")(1,"div",38)(2,"div",156)(3,"div",38)(4,"label",157),e._uU(5,"Flat Dis(%)"),e.qZA(),e.TgZ(6,"input",158),e.NdJ("change",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.applyFlatDiscount(t))})("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return r._trnMainService.callPipe=!r._trnMainService.callPipe,e.KtG(r.validateFlatDiscount(t))})("keydown.Enter",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.applyFlatDiscount(t))})("keydown.Tab",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.applyFlatDiscount(t))})("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.DCRATE=t)}),e.qZA()(),e.TgZ(7,"div",38)(8,"label",157),e._uU(9,"Flat Dis(Rs)"),e.qZA(),e.TgZ(10,"input",159),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.FLATDCAMNT=t)})("change",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.applyFlatDiscount(t))})("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return r._trnMainService.callPipe=!r._trnMainService.callPipe,e.KtG(r.validateFlatDiscountAmount(t))})("keydown.Enter",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r.applyFlatDiscount(t))}),e.qZA()()(),e.TgZ(11,"div",160),e.YNc(12,fn,5,0,"span",139),e.qZA()(),e.YNc(13,En,4,2,"div",88),e.TgZ(14,"div",101)(15,"label",10),e._uU(16,"Status"),e.qZA(),e.TgZ(17,"select",161),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.INVOICETYPE=t)}),e._UZ(18,"option",65),e.YNc(19,An,2,2,"option",63),e.qZA()(),e.YNc(20,Dn,8,3,"div",3),e.qZA()}if(2&a){const n=e.oxw(2);e.xp6(6),e.Q6J("ngModel",n._trnMainService.TrnMainObj.DCRATE)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||n.showDiscountAddButton()||1==(null==n.disableMaster?null:n.disableMaster.FlatDisPer)||null==n._trnMainService.TrnMainObj.ProdList[0].MCODE||n._trnMainService.nullToZeroConverter(n._trnMainService.TrnMainObj.FLATDCAMNT)>0),e.xp6(4),e.Q6J("ngModel",n._trnMainService.TrnMainObj.FLATDCAMNT)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||n.showDiscountAddButton()||1==(null==n._trnMainService.disableMaster?null:n._trnMainService.disableMaster.FlatDisRs)||n._trnMainService.nullToZeroConverter(n._trnMainService.TrnMainObj.DCRATE)>0||null==n._trnMainService.TrnMainObj.ProdList[0].MCODE),e.xp6(2),e.Q6J("ngIf",n.showDiscountAddButton()),e.xp6(1),e.Q6J("ngIf",n.hideSalesman()),e.xp6(4),e.Q6J("ngModel",n._trnMainService.TrnMainObj.INVOICETYPE)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||"NEW"==n._trnMainService.TrnMainObj.Mode),e.xp6(2),e.Q6J("ngForOf",n.quotationStatusList),e.xp6(1),e.Q6J("ngIf",1==n._trnMainService.TrnMainObj.INVOICETYPE)}}function In(a,s){if(1&a&&(e.TgZ(0,"div",155),e.YNc(1,yn,21,10,"div",4),e.qZA()),2&a){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",1==n.masterService.ShowMore)}}function Nn(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",165)(1,"div",166)(2,"div",167)(3,"div",168)(4,"h5",169),e._uU(5,"Discount authorization"),e.qZA(),e.TgZ(6,"button",170),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.closeModal())}),e.TgZ(7,"span",171),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",172)(10,"div",173)(11,"div",174)(12,"div",38)(13,"label",175),e._uU(14,"User Name:"),e.qZA(),e.TgZ(15,"div",176)(16,"input",177),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r._trnMainService.disLimitAuthObj.username=t)}),e.qZA()()()(),e.TgZ(17,"div",174)(18,"div",38)(19,"label",175),e._uU(20,"Password:"),e.qZA(),e.TgZ(21,"div",176)(22,"input",178),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r._trnMainService.disLimitAuthObj.password=t)}),e.qZA()()()()(),e.TgZ(23,"div",173)(24,"div",174)(25,"div",38)(26,"label",175),e._uU(27,"Discount Percent:"),e.qZA(),e.TgZ(28,"input",179),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r._trnMainService.disLimitAuthObj.discountRate=t)}),e.qZA()()(),e.TgZ(29,"div",174)(30,"div",38)(31,"label",175),e._uU(32,"Discount Amount:"),e.qZA(),e.TgZ(33,"input",179),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r._trnMainService.disLimitAuthObj.discountAmt=t)}),e.qZA()()()(),e.TgZ(34,"div",180)(35,"fieldset",181)(36,"legend",182),e._uU(37,"Discount authorization remarks:"),e.qZA(),e.TgZ(38,"textarea",183),e.NdJ("ngModelChange",function(t){e.CHM(n);const r=e.oxw();return e.KtG(r._trnMainService.disLimitAuthObj.remarks=t)}),e.qZA()()()(),e.TgZ(39,"div",184)(40,"button",185),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.discountAuthConfirm())}),e._uU(41,"Confirm"),e.qZA()()()()()}if(2&a){const n=e.oxw();e.xp6(16),e.Q6J("ngModel",n._trnMainService.disLimitAuthObj.username),e.xp6(6),e.Q6J("ngModel",n._trnMainService.disLimitAuthObj.password),e.xp6(6),e.Q6J("disabled",n._trnMainService.nullToZeroConverter(n._trnMainService.disLimitAuthObj.discountAmt)>0||1==n.userSetting.enableAdditionalFlatDiscountsInSales)("ngModel",n._trnMainService.disLimitAuthObj.discountRate),e.xp6(5),e.Q6J("disabled",n._trnMainService.nullToZeroConverter(n._trnMainService.disLimitAuthObj.discountRate)>0||1==n.userSetting.enableAdditionalFlatDiscountsInSales)("ngModel",n._trnMainService.disLimitAuthObj.discountAmt),e.xp6(5),e.Q6J("ngModel",n._trnMainService.disLimitAuthObj.remarks)}}function Pn(a,s){1&a&&(e.TgZ(0,"p",191),e._uU(1,"Do you want to apply flat discount before or after the individual discount ?"),e.qZA())}function Rn(a,s){1&a&&(e.TgZ(0,"p",191),e._uU(1,"How do you want to apply flat discount?"),e.qZA())}function Ln(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"button",190),e.NdJ("click",function(){e.CHM(n);const t=e.oxw(2);return t._trnMainService.beforeDiscFlat(),e.KtG(t._trnMainService.showFlatDiscOption=!1)}),e._uU(1,"BEFORE "),e.qZA()}}function xn(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"button",190),e.NdJ("click",function(){e.CHM(n);const t=e.oxw(2);return t._trnMainService.onApplyClicked(),e.KtG(t._trnMainService.showFlatDiscOption=!1)}),e._uU(1,"OVERWRITE"),e.qZA()}}function wn(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",165)(1,"div",186)(2,"div",187)(3,"div",168)(4,"h6",169),e._uU(5,"Confirmation"),e.qZA(),e.TgZ(6,"button",170),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.closeFlatDiscOption())}),e.TgZ(7,"span",171),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",172),e.YNc(10,Pn,2,0,"p",188),e.YNc(11,Rn,2,0,"p",188),e.qZA(),e.TgZ(12,"div",184),e.YNc(13,Ln,2,0,"button",189),e.TgZ(14,"button",190),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return t._trnMainService.afterDiscFlat(),e.KtG(t._trnMainService.showFlatDiscOption=!1)}),e._uU(15,"AFTER"),e.qZA(),e.YNc(16,xn,2,0,"button",189),e.TgZ(17,"button",190),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return t._trnMainService.onRevertClicked(),e.KtG(t._trnMainService.showFlatDiscOption=!1)}),e._uU(18,"REVERT"),e.qZA()()()()()}if(2&a){const n=e.oxw();e.xp6(10),e.Q6J("ngIf",1==n.userSetting.EnableFDiscountBeforeIDiscount&&n.showBeforeOverwrite()),e.xp6(1),e.Q6J("ngIf",1!=n.userSetting.EnableFDiscountBeforeIDiscount||!n.showBeforeOverwrite()),e.xp6(2),e.Q6J("ngIf",1==n.userSetting.EnableFDiscountBeforeIDiscount&&n.showBeforeOverwrite()),e.xp6(3),e.Q6J("ngIf",n.showBeforeOverwrite())}}function Fn(a,s){1&a&&(e.TgZ(0,"p",191),e._uU(1,"Do you want to apply flat discount before or after the individual discount ?"),e.qZA())}function Zn(a,s){1&a&&(e.TgZ(0,"p",191),e._uU(1,"How do you want to apply flat discount?"),e.qZA())}function Bn(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"button",190),e.NdJ("click",function(){e.CHM(n);const t=e.oxw(2);return t.flatDiscountType="before",e.KtG(t.onAddNewDiscounts())}),e._uU(1,"BEFORE "),e.qZA()}}function Un(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"button",190),e.NdJ("click",function(){e.CHM(n);const t=e.oxw(2);return t.flatDiscountType="overwrite",e.KtG(t.onAddNewDiscounts())}),e._uU(1,"OVERWRITE"),e.qZA()}}function Vn(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div",165)(1,"div",186)(2,"div",187)(3,"div",168)(4,"h6",169),e._uU(5,"Confirmation"),e.qZA(),e.TgZ(6,"button",170),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.closeAdditionalFlatDiscOption())}),e.TgZ(7,"span",171),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",172),e.YNc(10,Fn,2,0,"p",188),e.YNc(11,Zn,2,0,"p",188),e.qZA(),e.TgZ(12,"div",184),e.YNc(13,Bn,2,0,"button",189),e.TgZ(14,"button",190),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return t.flatDiscountType="after",e.KtG(t.onAddNewDiscounts())}),e._uU(15,"AFTER"),e.qZA(),e.YNc(16,Un,2,0,"button",189),e.qZA()()()()}if(2&a){const n=e.oxw();e.xp6(10),e.Q6J("ngIf",1==n.userSetting.EnableFDiscountBeforeIDiscount&&n.showBeforeOverwrite()),e.xp6(1),e.Q6J("ngIf",1!=n.userSetting.EnableFDiscountBeforeIDiscount||!n.showBeforeOverwrite()),e.xp6(2),e.Q6J("ngIf",1==n.userSetting.EnableFDiscountBeforeIDiscount&&n.showBeforeOverwrite()),e.xp6(3),e.Q6J("ngIf",n.showBeforeOverwrite())}}function kn(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div")(1,"div",192)(2,"div",193)(3,"div",168)(4,"h5",169),e._uU(5,"Add/Edit Payment Terms"),e.qZA(),e.TgZ(6,"button",170),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.closePaymentTermModal())}),e.TgZ(7,"span",171),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"form",194),e.NdJ("ngSubmit",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.onPaymentSubmit())}),e.TgZ(10,"div",172)(11,"div",195)(12,"label",196),e._uU(13,"Payment Term Name:"),e.qZA(),e.TgZ(14,"div",197),e._UZ(15,"input",198),e.qZA()()(),e.TgZ(16,"div",184)(17,"button",199),e._uU(18,"Save"),e.qZA()()()()()()}if(2&a){const n=e.oxw();e.xp6(9),e.Q6J("formGroup",n.paymentTermForm)}}function Kn(a,s){if(1&a){const n=e.EpF();e.TgZ(0,"div")(1,"div",192)(2,"div",193)(3,"div",168)(4,"h5",169),e._uU(5,"Add New Remarks"),e.qZA(),e.TgZ(6,"button",170),e.NdJ("click",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.closeDeclineTermModal())}),e.TgZ(7,"span",171),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"form",194),e.NdJ("ngSubmit",function(){e.CHM(n);const t=e.oxw();return e.KtG(t.onRemarkSubmit())}),e.TgZ(10,"div",172)(11,"div",195)(12,"label",196),e._uU(13,"Decline Remarks:"),e.qZA(),e.TgZ(14,"div",197),e._UZ(15,"input",200),e.qZA()()(),e.TgZ(16,"div",184)(17,"button",199),e._uU(18,"Save"),e.qZA()()()()()()}if(2&a){const n=e.oxw();e.xp6(9),e.Q6J("formGroup",n.declineTermForm)}}const Gn=function(){return{height:"155px"}};let Jn=(()=>{class a{constructor(n,i,t,r,w,Qn,Hn,qn,Yn,Wn){this.masterService=n,this._trnMainService=i,this.arouter=t,this._authService=r,this.dialog=w,this._alertService=Qn,this.loader=Hn,this._paymentTermsService=qn,this.fb=Yn,this.productHelper=Wn,this.gridPopupSettingsForTaxCancel=new T.im,this.newgridPopupSettingsForTaxCancel=new p.sG,this.newgridPopupSettingsForSalesReturn=new T.im,this.newgridPopupSettingsForDeliveryChalanReturn=new T.im,this.gridPopupSettingsForCustomer=new p.sG,this.gridPopupSettingsForRefBill=new T.im,this.gridPopupSettingsForSalesMan=new T.im,this.gridPopupSettingsForCustomerListBySalesmanAndRoute=new p.sG,this.onDblClickSOLoadInTI=new e.vpe,this.enterClickOnRefnoEventEmit=new e.vpe,this.genericGridAccountSetting=new T.im,this.genericGridSalesOrderSetting=new T.im,this.genericGridJobCardNoSetting=new T.im,this.gridPopupSettingsForVehicleNo=new p.sG,this.billLabel="Bill No",this.salesTransactionAccountList=[],this.ShowTransactionMode=!1,this.doubleClick=!1,this.salesManList=[],this.showBalance=!1,this.dateMiti=[],this.paymentModeLabel="Payment Terms",this.disableOnCreditSelect=!1,this.customerLabel="Customer",this.ExportPayment=[],this.addNewPayment=!1,this.addNewDeclineRemark=!1,this.selectedPaymentTerm="",this.quotationStatusList=[],this.remarksList=[],this.disablePaymentTerms=!1,this.showAdditionalFlatDiscountPopUp=!1,this.flatDiscountType="",this.grossAmount=this._trnMainService.TrnMainObj.GROSSAMNT,this.showDiscountPopup=!1,this.totalIndividualDiscount=0,this.paymentList=[],this.isSO=!1,this.Disable_CashCreditMode_RefLoaded=!1,this.gridPopupSettingsForWarehouse=new T.im,this.showCustomerProfile=new e.vpe,this.appType=this.masterService.appType,this.userProfile=this._authService.getUserProfile(),this.userSetting=r.getSetting(),this.AppMode=b.N.appMode,"lite"==this.AppMode&&(this.disableForLite=!0),"self-billing"===this.arouter.snapshot.url[0].path&&(this._trnMainService.TrnMainObj.MWAREHOUSE=this.userProfile.userWarehouse),"export-sales-invoice"===this.arouter.snapshot.url[0].path&&this.masterService.getExportPayment().subscribe(j=>{this.ExportPayment=j.result}),this._trnMainService.TrnMainObj.CHALANNOPREFIX="",this.masterService.getAllCostCenter().subscribe(j=>{j&&(this.costlists=j,this.valueforCostCenterWiseAccounting(this.costlists))},j=>{this.costlists=[]}),(this._trnMainService.TrnMainObj.VoucherType==o.Km.SalesOrder||this._trnMainService.TrnMainObj.VoucherType==o.Km.PerformaSalesInvoice||this._trnMainService.TrnMainObj.VoucherType===o.Km.Sales||this._trnMainService.TrnMainObj.VoucherType===o.Km.Quotation||this._trnMainService.TrnMainObj.VoucherType===o.Km.DeliveryChalan||this._trnMainService.TrnMainObj.VoucherType===o.Km.DeliveryReturn||this._trnMainService.TrnMainObj.VoucherType==o.Km.TaxInvoice||this._trnMainService.TrnMainObj.VoucherType==o.Km.CreditNote)&&(this.ShowTransactionMode=!0),this.gridPopupSettingsForRefBill=this.masterService.getGenericGridPopUpSettings("REFBILLOFSALESRETURN"),this.loadCompanyInfo(),this.activeurlpath=t.snapshot.url[0].path;var F=this.masterService.PhiscalObj.BeginDate;if(F=F.substring(0,10),this.date2=F,this.userProfile.CompanyInfo.ActualFY==this.masterService.PhiscalObj.PhiscalID)this.date1=(new Date).toJSON().split("T")[0];else{var Z=this.masterService.PhiscalObj.EndDate;Z=Z.substring(0,10),this.date1=Z}this.getPaymentTerms(),this.getDeclineStatusRemarks()}removeReferenceNumber(){this._trnMainService.TrnMainObj.REFORDBILL=null}getPaymentModes(){let n="WITHOUTEPAYMENT";this._trnMainService.TrnMainObj.VoucherType==o.Km.CreditNote&&(n="FORCN"),this.masterService.getPaymentModeList(n).subscribe(i=>{i&&i.result&&i.result.length>0&&(this.paymentList=i.result)})}ngOnInit(){this.getPaymentModes();const n=new Date;this.currDate=(0,S.p6)(n,"yyyy-MM-dd","en-US"),this.currDateBS=this.masterService.toBSDate(this.currDate),this.subscription=this.productHelper.deliveryChalanToTrnMainSubject$.subscribe(i=>{this._trnMainService.TrnMainObj.BILLTO=i.ACNAME,this._trnMainService.TrnMainObj.BILLTOADD=i.ADDRESS,this._trnMainService.TrnMainObj.RECEIVEBY=i.ACID,this._trnMainService.TrnMainObj.PARAC=i.ACID,this._trnMainService.TrnMainObj.BILLTOTEL=i.VATNO}),this._trnMainService.TrnMainObj.VoucherType===o.Km.Sales&&(this._trnMainService.TrnMainObj.TRNMODE="cash",this._trnMainService.disableNepaliDate=0==this._trnMainService.userProfile.CompanyInfo.AllowBackDateSalesEntry),this._trnMainService.TrnMainObj.VoucherType===o.Km.TaxInvoice&&("add-sales-invoice"==this.activeurlpath||"self-billing"==this.activeurlpath)&&("add-sales-invoice"==this.activeurlpath?("cash"==this._trnMainService.TrnMainObj.TRNMODE&&this._trnMainService.setCashProperty(),this._trnMainService.disableNepaliDate=0==this._trnMainService.userProfile.CompanyInfo.AllowBackDateSalesEntry):"self-billing"==this.activeurlpath&&(this._trnMainService.disableNepaliDate=!0)),this._trnMainService.TrnMainObj.VoucherType===o.Km.Quotation&&(this.billLabel="Quotation No"),"add-membership-sales-invoice"===this.activeurlpath&&(this.customerLabel="Member"),this._trnMainService.TrnMainObj.VoucherType===o.Km.CreditNote||this._trnMainService.TrnMainObj.VoucherType===o.Km.SalesReturn?(this.userSetting.EnableUserWiseCreditSalesRights&&!this._trnMainService.checkUserRightsForCreditSales()?this._trnMainService.TrnMainObj.TRNMODE="cash":(this._trnMainService.TrnMainObj.TRNMODE="credit",console.log("disableMastermode bhaw"),this._trnMainService.DisableMasterMode(!0)),console.log("get1")):(console.log("get2"),this._trnMainService.DisableMasterMode(!1)),this.getChalanSeries(),this.getDateMiti(),1==this.doubleClick&&this.getSalesManListCustomerWise(this.customerId),this.setDefaultValues(),(this._trnMainService.TrnMainObj.VoucherType===o.Km.SalesReturn||this._trnMainService.TrnMainObj.VoucherType===o.Km.CreditNote)&&(this.paymentModeLabel="Return Mode",this._trnMainService.DOFULLRETURN=this._trnMainService.TrnMainObj.DOFULLRETURN=1),0!==this.userSetting.ENABLE_SOINTI&&(this._trnMainService.TrnMainObj.VoucherType===o.Km.TaxInvoice||0!==this.userSetting.ENABLE_SOINABB&&this._trnMainService.TrnMainObj.VoucherType===o.Km.Sales||0!==this.userSetting.ENABLE_SOINDCHALAN&&this._trnMainService.TrnMainObj.VoucherType===o.Km.DeliveryChalan||0!==this.userSetting.PERFOMASOBILLMODE&&this._trnMainService.TrnMainObj.VoucherType===o.Km.PerformaSalesInvoice)&&null==this._trnMainService.TrnMainObj.LOADFULLFROMQT&&(this._trnMainService.TrnMainObj.LOADFULLFROMQT=1),this.paymentTermForm=this.fb.group({paymentName:["",[M.kI.required]],GUID:[""],ID:[""]}),this.declineTermForm=this.fb.group({remarkName:["",[M.kI.required]],GUID:[""]}),this._trnMainService.TrnMainObj.VoucherType===o.Km.Quotation&&this.getQuotationStatus()}getQuotationStatus(){this._paymentTermsService.getQuotationStatus().subscribe(n=>{this.quotationStatusList=n})}onPaymentChange(n){const i=n.target.value,t=this.payment.find(r=>r.ID.toString()===i);this._trnMainService.TrnMainObj.AdditionalObj.PAYMENTTERMS=i,this.selectedPaymentTerm=t.PAYMENTTERMS,this.paymentTermForm.patchValue({paymentName:t.PAYMENTTERMS,ID:t.ID})}onExportSalesPaymentChange(n){const i=this.paymentList.find(t=>t.PAYMENTMODENAME.trim().toLowerCase()===n.target.value.toLowerCase());this._trnMainService.TrnMainObj.TRNMODE=i?i.MODEVALUE:null,this._trnMainService.TrnMainObj.TRNAC=null,this._trnMainService.TrnMainObj.TRNACName=null}getDateMiti(){this.masterService.getDateMiti(this.userProfile.PhiscalYearInfo.PhiscalID).subscribe(n=>{this.dateMiti=n&&"ok"===n.status&&n.result&&n.result?n.result:[]},n=>{this.dateMiti=[]})}getChalanSeries(){this.masterService.getAllChalanSeries(this._trnMainService.TrnMainObj.VoucherPrefix?this._trnMainService.TrnMainObj.VoucherPrefix:"").subscribe(i=>{i&&"ok"===i.status&&i.result?(this.chalanSeries=i.result?i.result:[],this._trnMainService.TrnMainObj.CHALANNOPREFIX=""):this.chalanSeries=[]},i=>{this.chalanSeries=[]})}getNepaliDate(){if(""!==this._trnMainService.TrnMainObj.TRNDATE&&null!==this._trnMainService.TrnMainObj.TRNDATE){const n=`${this._trnMainService.TrnMainObj.TRNDATE}`,i=O().find(this.dateMiti,["AD",n]);this._trnMainService.TrnMainObj.BSDATE=i&&i.MITI}}getEnglishDate(){if(""!==this._trnMainService.TrnMainObj.BSDATE&&null!==this._trnMainService.TrnMainObj.BSDATE){const n=`${this._trnMainService.TrnMainObj.BSDATE}`,i=O().find(this.dateMiti,["MITI",n]);this._trnMainService.TrnMainObj.TRNDATE=i&&i.AD}}getNepali_Date(){if(""!==this._trnMainService.TrnMainObj.TRN_DATE&&null!==this._trnMainService.TrnMainObj.TRN_DATE){const n=`${this._trnMainService.TrnMainObj.TRN_DATE}`,i=O().find(this.dateMiti,["AD",n]);this._trnMainService.TrnMainObj.BS_DATE=i&&i.MITI}}getEnglish_Date(n){if(console.log("rrr",n),""!==this._trnMainService.TrnMainObj.BS_DATE&&null!==this._trnMainService.TrnMainObj.BS_DATE){const i=`${this._trnMainService.TrnMainObj.BS_DATE}`,t=O().find(this.dateMiti,["MITI",i]);this._trnMainService.TrnMainObj.TRN_DATE=t&&t.AD}}disableAccountSelection(){return!!("VIEW"==this._trnMainService.TrnMainObj.Mode||(1==this._trnMainService.disableMaster.Account||14===this._trnMainService.TrnMainObj.VoucherType&&0!==this.userSetting.ENABLE_SOINTI&&this._trnMainService.TrnMainObj.REFORDBILL&&"credit"==this._trnMainService.TrnMainObj.TRNMODE)&&15===this._trnMainService.TrnMainObj.VoucherType&&"lite"!=this.AppMode||14===this._trnMainService.TrnMainObj.VoucherType&&"self-billing"==this.activeurlpath||"add-sales-invoice"==this.activeurlpath&&"credit"==this._trnMainService.TrnMainObj.TRNMODE&&"lite"!=this.AppMode&&0==this.userSetting.GblEnableMixedTenderMode&&"VIEW"==this._trnMainService.TrnMainObj.Mode)||"cash"==this._trnMainService.TrnMainObj.TRNMODE&&(this._trnMainService.TrnMainObj.VoucherType===o.Km.Sales||this._trnMainService.TrnMainObj.VoucherType===o.Km.TaxInvoice)}hideFlatDiscount(){return!(14==this._trnMainService.TrnMainObj.VoucherType&&"self-billing"===this.activeurlpath||"add-membership-sales-invoice"==this.activeurlpath||"lite"==this.AppMode&&"add-creditnote-itembase"!=this.activeurlpath||64==this._trnMainService.TrnMainObj.VoucherType||this._trnMainService.TrnMainObj.VoucherType===o.Km.DeliveryChalan||this._trnMainService.TrnMainObj.VoucherType===o.Km.DeliveryReturn)}hideFlatDiscountinLite(){return(14!=this._trnMainService.TrnMainObj.VoucherType||"self-billing"!==this.activeurlpath)&&"add-membership-sales-invoice"!=this.activeurlpath&&64!=this._trnMainService.TrnMainObj.VoucherType}hideSalesman(){return 0!=this.userSetting.enablesalesman&&(this._trnMainService.TrnMainObj.VoucherType==o.Km.Quotation&&0!=this.userSetting.enablesalesman||"add-membership-sales-invoice"!=this.activeurlpath&&(14==this._trnMainService.TrnMainObj.VoucherType&&"export-sales-invoice"!=this.activeurlpath||43==this._trnMainService.TrnMainObj.VoucherType||1==this._trnMainService.TrnMainObj.VoucherType||this._trnMainService.TrnMainObj.VoucherType==o.Km.PerformaSalesInvoice||void 0))}hideAccount(){if(14==this._trnMainService.TrnMainObj.VoucherType&&"export-sales-invoice"!=this.activeurlpath&&0==this.userSetting.GblEnableMixedTenderMode&&"self-billing"!==this.activeurlpath||15==this._trnMainService.TrnMainObj.VoucherType||43==this._trnMainService.TrnMainObj.VoucherType||41==this._trnMainService.TrnMainObj.VoucherType||1==this._trnMainService.TrnMainObj.VoucherType&&0==this.userSetting.GblEnableMixedTenderMode||"add-sales-invoice"==this.activeurlpath&&"B2B"==this.userSetting.CompanyType&&1==this.userSetting.GblEnableMixedTenderMode||"self-billing"==this.activeurlpath)return!0}hideCostCentre(){return"add-membership-sales-invoice"!=this.activeurlpath&&this._trnMainService.TrnMainObj.VoucherType!==o.Km.ReverseDeliveryChalan&&(0!=this.userSetting.enableCostCenter||void 0)}changeInvDate(n,i){"AD"==i?(n>this.currDate&&(n=this.currDate,this._trnMainService.TrnMainObj.TRN_DATE=this.currDate),this._trnMainService.TrnMainObj.BS_DATE=this.masterService.toBSDate(n)):"BS"==i&&(this.formatDate(n)>this.formatDate(this.currDateBS)&&(this._trnMainService.TrnMainObj.BS_DATE=this.currDateBS,n=this.currDateBS),this._trnMainService.TrnMainObj.TRN_DATE=this.masterService.toADDate(n))}changeEntryDate(n,i){"AD"==i?(n>this.currDate&&(n=this.currDate,this._trnMainService.TrnMainObj.TRNDATE=this.currDate),this._trnMainService.TrnMainObj.BSDATE=this.masterService.toBSDate(n)):"BS"==i&&(this.formatDate(n)>this.formatDate(this.currDateBS)&&(this._trnMainService.TrnMainObj.BSDATE=this.currDateBS,n=this.currDateBS),this._trnMainService.TrnMainObj.TRNDATE=this.masterService.toADDate(n))}formatDate(n){return n.replace(/(\d{2})\/(\d{2})\/(\d{4})/,"$3-$2-$1")}customerEnterCommand(n){n.preventDefault(),document.getElementById("customerselectid").blur(),this._trnMainService.customerEvent=!0,this.showPartyMasterPopup=!1,this.showCustomerProfilePopup=!0,"add-sales-invoice"===this.activeurlpath||"add-sales-invoice-wholesale"===this.activeurlpath||"self-billing"===this.activeurlpath||"export-sales-invoice"===this.activeurlpath||"abbreviated-sales-invoice"===this.activeurlpath?(this.getCustomerLists(),this.genericGridCustomer.show()):"add-membership-sales-invoice"===this.activeurlpath?(this.getMembershipList(),this.genericGridCustomer.show()):"quotation"===this.activeurlpath?(this.getCustomerLists("2"),this.genericGridCustomer.show()):(this.getCustomerLists(),this.genericGridCustomer.show()),this._trnMainService.TrnMainObj.VoucherType==o.Km.TaxInvoice&&1!=this._trnMainService.saveButton&&this.focusInputFormat.nativeElement.focus(),(this._trnMainService.TrnMainObj.VoucherType==o.Km.PerformaSalesInvoice||this._trnMainService.TrnMainObj.VoucherType==o.Km.TaxInvoice||this._trnMainService.TrnMainObj.VoucherType==o.Km.Quotation)&&this.masterService.focusAnyControl("unit")}onVehicleNoEnter(n){document.getElementById("vehiclenoid").blur(),this.getVehicleNoList(),this.genericGridVehicleNo.show()}getVehicleNoList(){let n=this._trnMainService.TrnMainObj.PARAC;n||(n=this._trnMainService.TrnMainObj.MEMBERNO),n||(n="tag"),this.gridPopupSettingsForVehicleNo={title:"Vehicle No List",apiEndpoints:`/getAllCustomerVehiclesList/${n}`,defaultFilterIndex:0,useDefinefilterValue:this._trnMainService.TrnMainObj.BILLTO,columns:[{key:"VEHICLENO",title:"VEHICLE NO",hidden:!1,noSearch:!1},{key:"ACNAME",title:"CUSTOMER",hidden:!1,noSearch:!1}]}}onVehicleNoSelected(n){("add-sales-invoice"==this.activeurlpath||"abbreviated-sales-invoice"==this.activeurlpath)&&1==this.userSetting.EnableVehicleMappingForCustomer&&(this._trnMainService.TrnMainObj.AdditionalObj.VEHICLENO=n.VEHICLENO,this._trnMainService.TrnMainObj.BILLTO=n.ACNAME,this._trnMainService.TrnMainObj.BILLTOADD=n.ADDRESS,this._trnMainService.TrnMainObj.BILLTOTEL=n.VATNO,this._trnMainService.TrnMainObj.BILLTOMOB=n.MOBILENO,this._trnMainService.TrnMainObj.CREDITLIMIT=n.CRLIMIT,null==n.ACID?this._trnMainService.TrnMainObj.MEMBERNO=n.CUSTID:this._trnMainService.TrnMainObj.PARAC=n.ACID,document.getElementById("remarksid").focus())}setDefaultValues(){"retailer"==this._trnMainService.userProfile.CompanyInfo.ORG_TYPE&&(this._trnMainService.TrnMainObj.INVOICETYPE="retailinvoice")}ngAfterViewInit(){this._trnMainService.TrnMainObj.VoucherType==o.Km.CreditNote||this._trnMainService.TrnMainObj.VoucherType==o.Km.TaxInvoiceCancel?document.getElementById("refbill").focus():this._trnMainService.TrnMainObj.VoucherType==o.Km.TaxInvoice?1==this.userSetting.PrefixForRefNoInVEntry?document.getElementById("refno").focus():document.getElementById("refnoInput").focus():this._trnMainService.TrnMainObj.VoucherType==o.Km.Quotation?document.getElementById("refnoInput").focus():this._trnMainService.TrnMainObj.VoucherType==o.Km.DeliveryReturn||(this._trnMainService.TrnMainObj.VoucherType==o.Km.Sales?setTimeout(()=>{1==this.userSetting.GblEnableMixedTenderMode?document.getElementById("itemDesc0").focus():document.getElementById("paymentTerms").focus()},200):document.getElementById("customerselectid").focus())}customerFieldChange(){this._trnMainService.TrnMainObj.PARAC=null,this._trnMainService.TrnMainObj.TRNAC=null,this._trnMainService.TrnMainObj.BILLTOADD=null,this._trnMainService.TrnMainObj.AdditionalObj.TRNTYPE=null,this._trnMainService.TrnMainObj.TRNMODE="credit",this._trnMainService.TrnMainObj.PARTY_ORG_TYPE=null,this._trnMainService.TrnMainObj.CREDITDAYS=0,this._trnMainService.TrnMainObj.AdditionalObj.VEHICLENO=null}UniEnterCommand(){this.masterService.focusAnyControl("menucode0"),this.masterService.ShowMore=!1}onCustomerSelected(n){if(1==this.userSetting.EnableContractPrice&&(this._trnMainService.TrnMainObj.VoucherType==o.Km.TaxInvoice||this._trnMainService.TrnMainObj.VoucherType==o.Km.PerformaSalesInvoice||this._trnMainService.TrnMainObj.VoucherType==o.Km.SalesOrder)&&this._trnMainService.TrnMainObj.PARAC&&this._trnMainService.TrnMainObj.ProdList.find(i=>i.MCODE)&&n.ACID!=this._trnMainService.TrnMainObj.PARAC&&n.CUSTID!=this._trnMainService.TrnMainObj.PARAC){if(!confirm("Are you sure you want to change customer? This will empty product selection grid."))return;this._trnMainService.TrnMainObj.ProdList=[],this._trnMainService.addRow()}this._trnMainService.TrnMainObj.MEMBERNO=n.CUSTID,this._trnMainService.TrnMainObj.MEMBERNAME=n.CUSTNAME,this._trnMainService.TrnMainObj.SCHEMENAME=n.SCHEMEID,this._trnMainService.TrnMainObj.PARAC=n.ACID,this._trnMainService.TrnMainObj.RECEIVEBY=n.CUSTID,this._trnMainService.TrnMainObj.VoucherType==o.Km.PerformaSalesInvoice&&(this._trnMainService.TrnMainObj.TRNAC=n.ACID),this._trnMainService.TrnMainObj.CREDITLIMIT=n.CRLIMIT,this._trnMainService.TrnMainObj.SCHEMENAME=n.SCHEMENAME,this._trnMainService.TrnMainObj.SALESMAN=n.SALESMAN,this._trnMainService.TrnMainObj.SALESMANID=n.SALESMANID,this._trnMainService.CUSEMAIL=n.ACID?n.ACID:n.CUSTID,this._trnMainService.TrnMainObj.AdditionalObj.MOBILE=n.MOBILENO,(14==this._trnMainService.TrnMainObj.VoucherType||this._trnMainService.TrnMainObj.VoucherType==o.Km.PerformaSalesInvoice||this._trnMainService.TrnMainObj.VoucherType==o.Km.SalesOrder)&&(this._trnMainService.TrnMainObj.PRICEMODE=n.PRICEMODE?n.PRICEMODE:1),(this._trnMainService.TrnMainObj.VoucherType==o.Km.TaxInvoice||this._trnMainService.TrnMainObj.VoucherType==o.Km.Sales)&&this._trnMainService.getCustomerwiseCreditLimit(this._trnMainService.TrnMainObj.PARAC,this._trnMainService.TrnMainObj.TRN_DATE),"B2C"==this.userSetting.CompanyType&&(14==this._trnMainService.TrnMainObj.VoucherType||1==this._trnMainService.TrnMainObj.VoucherType)&&"cash"==this._trnMainService.TrnMainObj.TRNMODE&&(this._trnMainService.TrnMainObj.BILLTOMOB=n.MOBILENO,this._trnMainService.TrnMainObj.SCHEMENAME=n.SCHEMENAME,this._trnMainService.vatFreeBill(),null!=this._trnMainService.TrnMainObj.ProdList[0].MENUCODE&&this._trnMainService.ReCalculateBillWithNormal(),this.focusAfterCustomerSelect()),this._trnMainService.TrnMainObj.BILLTOMOB="add-membership-sales-invoice"===this.activeurlpath?n.MOBILENO:n.PHONE,"creditcard"==this._trnMainService.TrnMainObj.TRNMODE&&(this._trnMainService.TrnMainObj.BILLTOMOB=n.MOBILE),this._trnMainService.TrnMainObj.BILLTO=n.ACNAME,this._trnMainService.TrnMainObj.BILLTOTEL=n.VATNO,this._trnMainService.TrnMainObj.BILLTOADD=n.ADDRESS,this._trnMainService.TrnMainObj.AdditionalObj.TRNTYPE=null==n.PSTYPE?null:n.PSTYPE.toLowerCase(),this._trnMainService.TrnMainObj.PARTY_ORG_TYPE=n.ORG_TYPE,this._trnMainService.TrnMainObj.CREDITDAYS=n.CRPERIOD,this._trnMainService.TrnMainObj.CUS_FIX_DISCOUNT_PER=n.CUS_FIX_DISCOUNT_PER,this._trnMainService.TrnMainObj.CUS_Remote_Discount=n.CUS_Remote_Discount,this._trnMainService.TrnMainObj.CUS_Remote_Discount=n.CUS_Remote_Discount,(this._trnMainService.TrnMainObj.VoucherType==o.Km.Quotation||this._trnMainService.TrnMainObj.VoucherType===o.Km.PerformaSalesInvoice||this._trnMainService.TrnMainObj.VoucherType===o.Km.DeliveryChalan||this._trnMainService.TrnMainObj.VoucherType===o.Km.DeliveryReturn)&&(this._trnMainService.TrnMainObj.TRNAC=n.ACID),this._trnMainService.vatFreeBill(),null!=this._trnMainService.TrnMainObj.ProdList[0].MENUCODE&&this._trnMainService.ReCalculateBillWithNormal(),this.focusAfterCustomerSelect()}focusAfterCustomerSelect(){"add-sales-invoice"!=this.activeurlpath&&"abbreviated-sales-invoice"!=this.activeurlpath||1!=this.userSetting.EnableVehicleMappingForCustomer?document.getElementById("remarksid").focus():document.getElementById("vehiclenoid").focus()}getSalesManListCustomerWise(n){this.masterService.getSalesmanBasedUponCustomer(n).subscribe(i=>{this.salesManList=i})}salesManChange(){}RefBillEnterCommand(n){if(document.getElementById("refbill").blur(),this._trnMainService.customerEvent=!0,61===this._trnMainService.TrnMainObj.VoucherType)document.getElementById("refbill").blur(),this.newRefBill(),this.newgenericGridForTaxCancel.show();else if(15===this._trnMainService.TrnMainObj.VoucherType){if(1==this.userSetting.ENABLEMANUALSALESRETURN)return;"add-creditnote-itembase-approval"===this.activeurlpath?(this.genericGridSettingForSalesReturn("/getTrnMainPagedListForSalesReturnApproval"),this.newgenericGridForSalesReturn.show()):(this.genericGridSettingForSalesReturn("/getSalesListForSalesReturn"),this.newgenericGridForSalesReturn.show())}else 21===this._trnMainService.TrnMainObj.VoucherType?(this.genericGridSettingForDeliveryChalanReturn("/getDeliveryVoucherPagedList"),this.newgenericGridForDeliveryChalanReturn.show()):this.genericGridRefBill.show()}onRefBillSelected(n){let i;console.log("reachhere"),"delivery-chalan-return"==this.activeurlpath&&1==this._trnMainService.TrnMainObj.DOFULLRETURN&&(i="FullReturn"),this.masterService.checkDuplicateReverseEntry(n.VCHRNO,i).subscribe(t=>{"ok"==t.status?(this.ReffBillObj=n,this._trnMainService.TrnMainObj.REFBILL=n.VCHRNO,this._trnMainService.TrnMainObj.PARAC=n.PARAC,this._trnMainService.TrnMainObj.BILLTO=n.BILLTO,this._trnMainService.TrnMainObj.TRNAC=n.TRNAC,this._trnMainService.TrnMainObj.BILLTOADD=n.BILLTOADD,this._trnMainService.TrnMainObj.TRNMODE=n.TRNMODE,this._trnMainService.TrnMainObj.DCRATE=n.DCRATE,this._trnMainService.TrnMainObj.FLATDCAMNT=n.FLATDCAMNT,this._trnMainService.TrnMainObj.TOTALFLATDISCOUNT=n.TOTALFLATDISCOUNT,this._trnMainService.TrnMainObj.TRNACName=n.TRNACNAME?n.TRNACNAME:n.BILLTO,this._trnMainService.TrnMainObj.BILLTOTEL=n.BILLTOTEL,this._trnMainService.TrnMainObj.MEMBERNO=n.MEMBERNO,this._trnMainService.TrnMainObj.MEMBERNAME=n.MEMBERNAME,this._trnMainService.TrnMainObj.COSTCENTER=n.COSTCENTER,this._trnMainService.TrnMainObj.RECEIVEBY=n.RECEIVEBY,15===this._trnMainService.TrnMainObj.VoucherType&&0===this._trnMainService.TrnMainObj.DOFULLRETURN&&(this._trnMainService.TrnMainObj.DIVISION=n.DIVISION,this._trnMainService.TrnMainObj.MWAREHOUSE=n.MWAREHOUSE,1==n.isDeliveryOrder&&(this._trnMainService.TrnMainObj.MWAREHOUSE=this.userProfile.userWarehouse)),this._trnMainService.TrnMainObj.AdditionalObj.AFTERFLATDISCRATE=n.AFTERFLATDISCRATE,this._trnMainService.TrnMainObj.AdditionalObj.BEFOREFLATDISCRATE=n.BEFOREFLATDISCRATE,this._trnMainService.isRatePartial=n.DCRATE>0,(n.AFTERFLATDISCRATE>0||n.BEFOREFLATDISCRATE>0)&&(this._trnMainService.TrnMainObj.DCRATE=n.AFTERFLATDISCRATE>0?n.AFTERFLATDISCRATE:n.BEFOREFLATDISCRATE),this._trnMainService.TrnMainObj.VoucherType!=o.Km.DeliveryReturn&&("credit"==this._trnMainService.TrnMainObj.TRNMODE?.toLowerCase()?this._trnMainService.DisableMasterMode(!0):(this._trnMainService.setSalesReturnVoucherAccount(),this._trnMainService.DisableMasterMode(!1),this._trnMainService.disableMaster.Account=!0)),"creditcard"==n.TRNMODE&&(this._trnMainService.showModesForCC=!1),this._trnMainService.callPipe=!this._trnMainService.callPipe,15===this._trnMainService.TrnMainObj.VoucherType&&"add-creditnote-itembase"===this.activeurlpath&&1==this._trnMainService.TrnMainObj.DOFULLRETURN?this._trnMainService.loadDataForSalesReturn(n.VCHRNO,n.DIVISION,n.PhiscalID,"","","creditnote"):15===this._trnMainService.TrnMainObj.VoucherType&&0==this._trnMainService.TrnMainObj.DOFULLRETURN?(this._trnMainService.TrnMainObj.ProdList=[],this._trnMainService.addRow()):15===this._trnMainService.TrnMainObj.VoucherType&&"add-creditnote-itembase-approval"===this.activeurlpath?this._trnMainService.loadDataForSalesReturnArrpoval(n.VCHRNO,n.DIVISION,n.PhiscalID):21===this._trnMainService.TrnMainObj.VoucherType&&1==this._trnMainService.TrnMainObj.DOFULLRETURN&&this._trnMainService.loadDataForDeliveryChalanReturn(n.VCHRNO,n.DIVISION,n.PhiscalID,"","",""),15===this._trnMainService.TrnMainObj.VoucherType&&"add-creditnote-itembase"===this.activeurlpath&&0==this._trnMainService.TrnMainObj.DOFULLRETURN&&this.getRecurringLogDetails(n)):this._alertService.info(t.result.error)},t=>{console.log("err",t),this._alertService.info(t)})}getRecurringLogDetails(n){this._trnMainService.GetRecurringLogDetails(n.VCHRNO,n.DIVISION,n.PhiscalID).subscribe(i=>{console.log("recurring log get",i),"ok"==i.status?(this._trnMainService.TrnMainObj.RecurringItemList=i.result?i.result:[],this._trnMainService.TrnMainObj.CommissionItemList=i.result2?i.result2:[],console.log("recurring items",this._trnMainService.TrnMainObj.RecurringItemList),console.log("commsiion items",this._trnMainService.TrnMainObj.CommissionItemList),this._trnMainService.TrnMainObj.RecurringItemList.forEach(t=>{t.LAST_RECUR_DATE=t.LAST_RECUR_DATE.toString().substring(0,10),t.RECURRING_DATE=t.RECURRING_DATE.toString().substring(0,10),t.STATUS=10==t.STATUS?1:0}),this._trnMainService.TrnMainObj.CommissionItemList.forEach(t=>{t.STATUS=10==t.STATUS?1:0})):(this._trnMainService.TrnMainObj.RecurringItemList=[],this._trnMainService.TrnMainObj.CommissionItemList=[])})}RefBillFieldDisabled(){return!1}UnitandFormatDisabled(){return null!=this._trnMainService.TrnMainObj.ProdList&&this._trnMainService.TrnMainObj.ProdList.filter(n=>null!=n.MCODE).length>0}salesManEnterCommand(){this.getSalesManList(),this.genericGridSalesMan.show()}onSalesManSelect(n){console.log("sales man select",n),this._trnMainService.TrnMainObj.SALESMANID=n.SALESMANID,this._trnMainService.TrnMainObj.SALESMAN=n.NAME,console.log("trnmain on sales man slect",this._trnMainService.TrnMainObj.SALESMANID,this._trnMainService.TrnMainObj.SALESMAN),this._trnMainService.TrnMainObj.VoucherType==o.Km.TaxInvoice||this._trnMainService.TrnMainObj.VoucherType==o.Km.CreditNote?this.masterService.focusAnyControl("costCenter"):this._trnMainService.TrnMainObj.VoucherType==o.Km.Quotation&&document.getElementById("itemDesc0").focus()}deleteSalesman(){null!=this._trnMainService.TrnMainObj.SALESMAN&&(this._trnMainService.TrnMainObj.SALESMAN=null,this._trnMainService.TrnMainObj.SALESMANID=null)}getSalesManList(){this.gridPopupSettingsForSalesMan=this.masterService.getGenericGridPopUpSettings("SalesManList")}loadCompanyInfo(){1!=this._trnMainService.inputCode&&this.masterService.loadCompany().subscribe(n=>{this._trnMainService.TrnMainObj.AdditionalObj.BILLFORMATS=n.BILLFORMATS,this._trnMainService.TrnMainObj.AdditionalObj.BILLUNITS=n.BILLUNITS})}WarehouseEnterCommand(n){this.gridPopupSettingsForWarehouse={title:2==this.appType?"Godown":"Warehouse",apiEndpoints:"/getDivisionWiseWarehousePagedList",defaultFilterIndex:0,columns:[{key:"NAME",title:"NAME",hidden:!1,noSearch:!1}]},this.genericGridWarehouse.show()}WarehouseEnterForUnsalableCommand(n){this.gridPopupSettingsForWarehouse={title:2==this.appType?"Godown":"Warehouse",apiEndpoints:"/getUnsalableWarehousePagedList",defaultFilterIndex:0,columns:[{key:"NAME",title:"NAME",hidden:!1,noSearch:!1}]},this.genericGridWarehouse.show()}onWarehouseSelected(n){this._trnMainService.TrnMainObj.MWAREHOUSE=n.NAME,document.getElementById("costCenter").focus()}setFocusSalesman(){this.focusSalesman.nativeElement.focus()}onItemDoubleClick(n){this._trnMainService.TrnMainObj.REFBILL=n.VCHRNO,this._trnMainService.loadDataForTaxCancel(n.VCHRNO,n.DIVISION,n.PhiscalID),this._trnMainService.showPerformaApproveReject=!1}newRefBill(){this.newgridPopupSettingsForTaxCancel={title:"Vouchers",apiEndpoints:"/getTrnMainPagedListForTaxCancel/TI",defaultFilterIndex:1,useDefinefilterValue:this._trnMainService.TrnMainObj.REFBILL,columns:[{key:"TRNDATE",title:"DATE",hidden:!1,noSearch:!1},{key:"CHALANNO",title:"VOUCHER NO.",hidden:!1,noSearch:!1},{key:"NETAMNT",title:"AMOUNT",hidden:!1,noSearch:!1},{key:"REMARKS",title:"REMARKS",hidden:!1,noSearch:!1}]}}SalesmanFieldDisabled(){return null!=this._trnMainService.TrnMainObj.ProdList&&this._trnMainService.TrnMainObj.ProdList.filter(n=>null!=n.MCODE).length>0}getCustomersList(){this.gridPopupSettingsForCustomer={title:"Customers",apiEndpoints:"cash"==this._trnMainService.TrnMainObj.TRNMODE||"salesreturn"==this._trnMainService.TrnMainObj.TRNMODE&&1==this.userSetting.ENABLEMANUALSALESRETURN?"/getCustomerFromCustomerProfile":"/getAccountPagedListByPType/PA/C/0",defaultFilterIndex:this.userSetting.FilterIndexForCustomer,useDefinefilterValue:this._trnMainService.TrnMainObj.BILLTO,columns:[{key:"ACNAME",title:"NAME",hidden:!1,noSearch:!1},{key:"VATNO",title:"VAT No.",hidden:!1,noSearch:!1},{key:"ADDRESS",title:"ADDRESS",hidden:!1,noSearch:!1},{key:"MOBILENO",title:"Mobile No.",hidden:!1,noSearch:!1}]}}getCustomerLists(n="0"){this.getNormalCustomerForSalesInvoice(n)}getNormalCustomerForSalesInvoice(n="0"){this.gridPopupSettingsForCustomer={title:"Customers",apiEndpoints:`/getAccountPagedListByPType/PA/C/${n}`,defaultFilterIndex:this.userSetting.FilterIndexForCustomer,useDefinefilterValue:this._trnMainService.TrnMainObj.BILLTO,columns:[{key:"ACNAME",title:"NAME",hidden:!1,noSearch:!1},{key:"VATNO",title:"VAT No.",hidden:!1,noSearch:!1},{key:"ADDRESS",title:"ADDRESS",hidden:!1,noSearch:!1},{key:"MOBILE",title:"MOBILE No.",hidden:!1,noSearch:!1}]}}getCashcustomerList(){let n="Customers";"add-membership-sales-invoice"===this.activeurlpath&&(n="Members"),this.gridPopupSettingsForCustomer={title:n,apiEndpoints:"/getCustomerFromCustomerProfile",defaultFilterIndex:0,useDefinefilterValue:this._trnMainService.TrnMainObj.BILLTO,columns:[{key:"CUSTNAME",title:"NAME",hidden:!1,noSearch:!1},{key:"ADDRESS",title:"ADDRESS",hidden:!1,noSearch:!1},{key:"MOBILENO",title:"MOBILE",hidden:!1,noSearch:!1}]}}getMembershipList(){this.gridPopupSettingsForCustomer={title:"Members",apiEndpoints:"/getMembersFromMembership",defaultFilterIndex:0,useDefinefilterValue:this._trnMainService.TrnMainObj.BILLTO,columns:[{key:"CUSTNAME",title:"NAME",hidden:!1,noSearch:!1},{key:"ADDRESS",title:"ADDRESS",hidden:!1,noSearch:!1},{key:"MOBILENO",title:"MOBILE",hidden:!1,noSearch:!1}]}}getB2CWiseCustomer(){"credit"==this._trnMainService.TrnMainObj.TRNMODE&&null!=this._trnMainService.TrnMainObj.TRNAC?this.gridPopupSettingsForCustomer={title:"Customers",apiEndpoints:`/getCustomerProfilebyACID/${this._trnMainService.TrnMainObj.TRNAC}`,defaultFilterIndex:2,useDefinefilterValue:this._trnMainService.TrnMainObj.BILLTO,columns:[{key:"ACNAME",title:"NAME",hidden:!1,noSearch:!1},{key:"ADDRESS",title:"ADDRESS",hidden:!1,noSearch:!1},{key:"MOBILENO",title:"MOBILE",hidden:!1,noSearch:!1}]}:"cash"==this._trnMainService.TrnMainObj.TRNMODE||"cashondelivery"==this._trnMainService.TrnMainObj.TRNMODE?this.gridPopupSettingsForCustomer={title:"Customers",apiEndpoints:"/getCustomerFromCustomerProfile",defaultFilterIndex:this.userSetting.FilterIndexForCustomer,useDefinefilterValue:this._trnMainService.TrnMainObj.BILLTO,columns:[{key:"CUSTNAME",title:"NAME",hidden:!1,noSearch:!1},{key:"ADDRESS",title:"ADDRESS",hidden:!1,noSearch:!1},{key:"MOBILENO",title:"MOBILE",hidden:!1,noSearch:!1}]}:this.getNormalCustomerForSalesInvoice()}getCustomerList(){this._trnMainService.TrnMainObj.SALESMANID=this._trnMainService.salesmanID,this._trnMainService.TrnMainObj.ROUTE=this._trnMainService.routeCode,this.gridPopupSettingsForCustomerListBySalesmanAndRoute={title:"Customers",apiEndpoints:`/getPagedCustomerListBySalesmanAndRoute/${this._trnMainService.TrnMainObj.SALESMANID}/${this._trnMainService.TrnMainObj.ROUTE}`,defaultFilterIndex:this.userSetting.FilterIndexForCustomer,useDefinefilterValue:this._trnMainService.TrnMainObj.BILLTO,columns:[{key:"ACNAME",title:"NAME",hidden:!1,noSearch:!1},{key:"ACCODE",title:"CODE",hidden:!1,noSearch:!1},{key:"ADDRESS",title:"ADDRESS",hidden:!1,noSearch:!1},{key:"EMAIL",title:"EMAIL",hidden:!1,noSearch:!1}]}}genericGridSettingForSalesReturn(n){this.newgridPopupSettingsForSalesReturn={title:"Vouchers",apiEndpoints:`${n}`,defaultFilterIndex:1,columns:[{key:"TRNDATE",title:"DATE",hidden:!1,noSearch:!1},{key:"VCHRNO",title:"VOUCHER NO.",hidden:!1,noSearch:!1},{key:"REFBILL",title:"REF NO.",hidden:!1,noSearch:!1},{key:"BILLTO",title:"CUSTOMER",hidden:!1,noSearch:!1},{key:"NETAMNT",title:"AMOUNT",hidden:!1,noSearch:!1},{key:"REMARKS",title:"REMARKS",hidden:!1,noSearch:!1}]}}genericGridSettingForDeliveryChalanReturn(n){this.newgridPopupSettingsForDeliveryChalanReturn={title:"Vouchers",apiEndpoints:`${n}`,defaultFilterIndex:1,columns:[{key:"TRNDATE",title:"DATE",hidden:!1,noSearch:!1},{key:"VCHRNO",title:"VOUCHER NO.",hidden:!1,noSearch:!1},{key:"NETAMNT",title:"AMOUNT",hidden:!1,noSearch:!1},{key:"REMARKS",title:"REMARKS",hidden:!1,noSearch:!1}]}}triggerRefBillCheck(){if(this._trnMainService.TrnMainObj.VoucherType==o.Km.CreditNote){if(null==this._trnMainService.TrnMainObj.REFBILL||null===this._trnMainService.TrnMainObj.REFBILL||"undefined"===this._trnMainService.TrnMainObj.REFBILL)return;this.masterService.getRefBillCheck(this._trnMainService.TrnMainObj.REFBILL).subscribe(n=>{this._trnMainService.TrnMainObj.AdditionalObj.INVOICETYPE="ok"==n.status?"NewBill":""})}}paymentTermsChange(n){let i=this.paymentList.filter(t=>t.MODEVALUE==this._trnMainService.TrnMainObj.TRNMODE)[0];this.flushCreditSelectedData(),this.disableOnCreditSelect=!1,this._trnMainService.disableAccountInputField=!1,"self-billing"!=this.activeurlpath&&(this._trnMainService.TrnMainObj.TRNACName=null,this._trnMainService.TrnMainObj.TRNAC=null),i&&(!i.MODE||"FIXED"==i.MODE?.toUpperCase())&&(this._trnMainService.TrnMainObj.TRNAC=i.ACID,this._trnMainService.TrnMainObj.TRNACName=i.ACNAME,this._trnMainService.disableAccountInputField=!0),(null!=this._trnMainService.TrnMainObj.PARAC||"credit"!=this._trnMainService.TrnMainObj.TRNMODE||"PP"!=this._trnMainService.TrnMainObj.VoucherAbbName||confirm("Are you sure you want to override proforma tagged customer?"))&&("cash"==this._trnMainService.TrnMainObj.TRNMODE?this._trnMainService.setCashProperty():this._trnMainService.TrnMainObj.VoucherType===o.Km.TaxInvoice&&0!==this.userSetting.ENABLE_SOINTI&&this._trnMainService.TrnMainObj.REFORDBILL&&"credit"==this._trnMainService.TrnMainObj.TRNMODE&&(this._trnMainService.TrnMainObj.TRNACName=this._trnMainService.TrnMainObj.BILLTO,this._trnMainService.TrnMainObj.TRNAC=this._trnMainService.TrnMainObj.PARAC,this._trnMainService.TrnMainObj.REFORDBILL.startsWith("SO")&&!this._trnMainService.TrnMainObj.PARAC&&(this._trnMainService.TrnMainObj.TRNACName=null),this.disableOnCreditSelect=!0),this._trnMainService.TrnMainObj.VoucherType===o.Km.CreditNote&&0==this.userSetting.ENABLEMANUALSALESRETURN&&this._trnMainService.TrnMainObj.REFBILL&&(this._trnMainService.disableMaster.Account=!1,"credit"==this._trnMainService.TrnMainObj.TRNMODE?this._trnMainService.disableMaster.Account=!0:"salesreturn"==this._trnMainService.TrnMainObj.TRNMODE&&this._trnMainService.setSalesReturnVoucherAccount()),this._trnMainService.TrnMainObj.VoucherType===o.Km.CreditNote&&1==this.userSetting.ENABLEMANUALSALESRETURN&&"salesreturn"==this._trnMainService.TrnMainObj.TRNMODE&&this._trnMainService.setSalesReturnVoucherAccount())}AccountEnterCommand(){this.showPartyMasterPopup=!1,this.showCustomerProfilePopup=!1,this.paymentList.find(i=>i.MODEVALUE==this._trnMainService.TrnMainObj.TRNMODE),this.genericGridAccountSetting={title:"Accounts",apiEndpoints:"/getpaymentmodepagedlist",defaultFilterIndex:1,columns:[{key:"ACCODE",title:"AC CODE",hidden:!1,noSearch:!1},{key:"ACNAME",title:"A/C NAME",hidden:!1,noSearch:!1}]},this.genericGridAccount.show()}flushCreditSelectedData(){0!=this.userSetting.ENABLE_SOINTI&&this._trnMainService.TrnMainObj.REFORDBILL?.startsWith("SO")&&this._trnMainService.TrnMainObj.VoucherType!=o.Km.SalesOrder||this._trnMainService.TrnMainObj.VoucherType==o.Km.CreditNote||(this._trnMainService.TrnMainObj.PARAC="",this._trnMainService.TrnMainObj.BILLTO="",this._trnMainService.TrnMainObj.BILLTOADD="",this._trnMainService.TrnMainObj.BILLTOTEL="",this._trnMainService.TrnMainObj.MEMBERNO="",this._trnMainService.TrnMainObj.RECEIVEBY="",this._trnMainService.TrnMainObj.TRNAC="",this._trnMainService.TrnMainObj.TRNACName="",this._trnMainService.TrnMainObj.MEMBERNAME="",this._trnMainService.TrnMainObj.SCHEMENAME="")}onAccountSelect(n){try{if(1==this.userSetting.EnableContractPrice&&(this._trnMainService.TrnMainObj.VoucherType==o.Km.TaxInvoice||this._trnMainService.TrnMainObj.VoucherType==o.Km.PerformaSalesInvoice||this._trnMainService.TrnMainObj.VoucherType==o.Km.SalesOrder)&&this._trnMainService.TrnMainObj.TRNAC&&this._trnMainService.TrnMainObj.ProdList.find(i=>i.MCODE)&&n.ACID!=this._trnMainService.TrnMainObj.TRNAC&&n.CUSTID!=this._trnMainService.TrnMainObj.TRNAC){if(!confirm("Are you sure you want to change account? This will empty product selection grid."))return;this._trnMainService.TrnMainObj.ProdList=[],this._trnMainService.addRow()}this.flushCreditSelectedData(),this._trnMainService.TrnMainObj.TRNAC=n.ACID,"credit"==this._trnMainService.TrnMainObj.TRNMODE?.toLowerCase()&&(this._trnMainService.TrnMainObj.PARAC=n.ACID,this._trnMainService.TrnMainObj.RECEIVEBY=n.CUSTID),this._trnMainService.TrnMainObj.TRNACName=n.ACNAME,this._trnMainService.TrnMainObj.AdditionalObj.MOBILE=n.MOBILE,this._trnMainService.TrnMainObj.PRICEMODE=n?.PRICEMODE,2==this.userSetting.SendInvoiceEmail&&(this._trnMainService.CUSEMAIL=n.ACID?n.ACID:n.CUSTID),"credit"==this._trnMainService.TrnMainObj.TRNMODE&&"add-membership-sales-invoice"!=this.activeurlpath&&(this._trnMainService.TrnMainObj.SALESMAN=n.SALESMAN,this._trnMainService.TrnMainObj.SALESMANID=n.SALESMANID,this._trnMainService.TrnMainObj.BILLTO=n.ACNAME,this._trnMainService.TrnMainObj.BILLTOADD=n.ADDRESS,this._trnMainService.TrnMainObj.BILLTOTEL=n.VATNO,this._trnMainService.TrnMainObj.BILLTOMOB=n.PHONE,this._trnMainService.TrnMainObj.CREDITLIMIT=n.CRLIMIT,"add-sales-invoice"==this.activeurlpath&&0==this.userSetting.GblEnableMixedTenderMode&&this.masterService.getCustomerwiseCreditLimit(this._trnMainService.TrnMainObj.PARAC,this._trnMainService.TrnMainObj.TRN_DATE).subscribe(i=>{this._trnMainService.TrnMainObj.BALANCEAMOUNT=i.BL.toFixed(2),this._trnMainService.TrnMainObj.BALANCEAMOUNT<0?(this._trnMainService.TrnMainObj.BALANCEAMOUNT=Math.abs(this._trnMainService.TrnMainObj.BALANCEAMOUNT),this._trnMainService.TrnMainObj.LIMITINDICATOR="Cr."):this._trnMainService.TrnMainObj.LIMITINDICATOR="Dr."}),(this._trnMainService.TrnMainObj.VoucherType==o.Km.TaxInvoice||this._trnMainService.TrnMainObj.VoucherType==o.Km.Sales)&&(this._trnMainService.TrnMainObj.DELIVERYREF="",this._trnMainService.TrnMainObj.SalesDeliveryList=[],this._trnMainService.getCustomerwiseCreditLimit(this._trnMainService.TrnMainObj.PARAC,this._trnMainService.TrnMainObj.TRN_DATE)),this.masterService.getCustomerIDFromCProfile(n.ACID).subscribe(i=>{i.length>0&&1==this.masterService.userSetting.EnableMembershipModule&&(this._trnMainService.TrnMainObj.MEMBERNO=i[0].CUSTID,this._trnMainService.TrnMainObj.MEMBERNAME=i[0].CUSTNAME,this._trnMainService.TrnMainObj.SCHEMENAME=i[0].SCHEMEID)}),this._trnMainService.vatFreeBill(),null!=this._trnMainService.TrnMainObj.ProdList[0].MENUCODE&&this._trnMainService.ReCalculateBillWithNormal())}catch(i){alert(i)}1==this.userSetting.enableCostCenter?document.getElementById("costCenter").focus():"add-membership-sales-invoice"==this.activeurlpath?document.getElementById("customerselectid").focus():"export-sales-invoice"==this.activeurlpath?document.getElementById("country").focus():document.getElementById("remarksid").focus()}focusToCustomer(){this._trnMainService.TrnMainObj.VoucherType==o.Km.TaxInvoice&&document.getElementById("customerselectid").focus()}focusToCostcenter(){this._trnMainService.TrnMainObj.VoucherType==o.Km.TaxInvoice&&document.getElementById("costCenter").focus()}focusToWarehouse(){this._trnMainService.TrnMainObj.VoucherType==o.Km.TaxInvoice&&document.getElementById("warehouseId").focus()}focusToRemarks(){if(this._trnMainService.TrnMainObj.VoucherType==o.Km.TaxInvoice)"credit"==this._trnMainService.TrnMainObj.TRNMODE?this.masterService.focusAnyControl("remarksid"):"credit"!=this._trnMainService.TrnMainObj.TRNMODE&&this.masterService.focusAnyControl("customerselectid");else{if(this._trnMainService.TrnMainObj.VoucherType!=o.Km.PerformaSalesInvoice||null==this._trnMainService.TrnMainObj.REFORDBILL)return;this.masterService.focusAnyControl("remarksid")}}onpaymentmodechange(){"B2C"==this.userSetting.CompanyType&&(this._trnMainService.TrnMainObj.BILLTO="",this._trnMainService.TrnMainObj.BILLTOMOB="",this._trnMainService.TrnMainObj.BILLTOADD="",this._trnMainService.TrnMainObj.BILLTOTEL="")}CustomerProfileDate(n){"B2C"==this.userSetting.CompanyType&&14==this._trnMainService.TrnMainObj.VoucherType&&"cash"==this._trnMainService.TrnMainObj.TRNMODE&&0==n&&confirm("Cannot find Customer. Do you want to create new?")&&(this.genericGridCustomer.hide(),this.showCustomerProfile.emit(n))}openQuickCusProfilePopup(){("TI"==this._trnMainService.TrnMainObj.VoucherPrefix||this._trnMainService.TrnMainObj.VoucherType==o.Km.Sales||this._trnMainService.TrnMainObj.VoucherType==o.Km.Quotation&&1==this.userSetting.EnableCusProfileInSOrder)&&(this.CreateCustomerProfile.show(),this.genericGridCustomer.hide(),this.showCustomerProfilePopup=!1)}openQuickPartyMasterPopup(){"TI"==this._trnMainService.TrnMainObj.VoucherPrefix&&1==this.showPartyMasterPopup&&(this.masterService.isSalesPage=!0,this.CreateQuickParty.show(),this.genericGridAccount.hide(),this.showPartyMasterPopup=!1)}onSaveCustomerProfile(n){1==this.userSetting.ShowCashAccountingInLedgerReport&&(this._trnMainService.TrnMainObj.PARAC=n.account,this._trnMainService.TrnMainObj.RECEIVEBY=n.memID,"B2C"==this.userSetting.CompanyType&&(this._trnMainService.TrnMainObj.TRNACName=n.name,this._trnMainService.TrnMainObj.TRNAC=n.account)),this._trnMainService.TrnMainObj.BILLTO=n.name,this._trnMainService.TrnMainObj.BILLTOADD=n.address,this._trnMainService.TrnMainObj.BILLTOTEL=n.pan,this._trnMainService.TrnMainObj.BILLTOMOB=n.mobNo,2===this.userSetting.SendInvoiceEmail&&(this._trnMainService.CUSEMAIL=n.memID?n.memID:""),document.getElementById("remarksid").focus(),this.masterService.getMemershipFromMemberNo(n.memID).subscribe(i=>{this._trnMainService.TrnMainObj.MEMBERNO=i[0].MEMID,this._trnMainService.TrnMainObj.MEMBERNAME=i[0].FNAME,this._trnMainService.TrnMainObj.SCHEMENAME=i[0].SCHEMEID,this._trnMainService.TrnMainObj.RECEIVEBY=i[0].MEMID,i[0].ACCOUNT&&(this._trnMainService.TrnMainObj.PARAC=i[0].ACCOUNT)})}onSavePartyMaster(n){this._trnMainService.TrnMainObj.TRNACName=n.ACNAME,this._trnMainService.TrnMainObj.TRNAC=n.ACID,this._trnMainService.TrnMainObj.BILLTO=n.ACNAME,this._trnMainService.TrnMainObj.BILLTOADD=n.ADDRESS,this._trnMainService.TrnMainObj.BILLTOTEL=n.VATNO,this._trnMainService.TrnMainObj.PARAC=n.ACID,this.masterService.getMemershipFromCustID(n.ACID).subscribe(i=>{i.length>0&&(this._trnMainService.TrnMainObj.MEMBERNO=i[0].MEMID,this._trnMainService.TrnMainObj.MEMBERNAME=i[0].FNAME,this._trnMainService.TrnMainObj.SCHEMENAME=i[0].SCHEMEID)})}getMembershipInfoFromCustId(n){this.masterService.getMemershipFromMemberNo(n).subscribe(i=>{i.length>0&&(this._trnMainService.TrnMainObj.MEMBERNO=i[0].MEMID,this._trnMainService.TrnMainObj.MEMBERNAME=i[0].FNAME,this._trnMainService.TrnMainObj.SCHEMENAME=i[0].SCHEMEID)})}ConfirmChangeReturnMode(n){0==n?(this._trnMainService.DOFULLRETURN=0,1==this._trnMainService.TrnMainObj.isDeliveryOrder&&(this._trnMainService.TrnMainObj.MWAREHOUSE=null),this._trnMainService.isRatePartial=this._trnMainService.TrnMainObj.DCRATE>0,this._trnMainService.TrnMainObj.DCRATE=0!=this._trnMainService.nullToZeroConverter(this.ReffBillObj.AFTERFLATDISCRATE)?this.ReffBillObj.AFTERFLATDISCRATE:this.ReffBillObj.BEFOREFLATDISCRATE,this._trnMainService.TrnMainObj.FLATDCAMNT=0):(this._trnMainService.TrnMainObj.ProdList=[],this._trnMainService.addRow(),this._trnMainService.onFlatDiscountClear())}disableRefBill(){return 1!=this.userSetting.ENABLEMANUALSALESRETURN&&(!this._trnMainService.disableAllFieldinPurchase||void 0)}DoManualSalesReturn(n){1==n?(this._trnMainService.DisableMasterMode(!1),this._trnMainService.TrnMainObj.DOFULLRETURN=0):(this._trnMainService.DisableMasterMode(!0),this._trnMainService.TrnMainObj.DOFULLRETURN=1),this._trnMainService.callPipe=!this._trnMainService.callPipe,this._trnMainService.showCertainModes=!0}DoFulReturnClick(n){if(null==this._trnMainService.TrnMainObj.REFBILL||""==this._trnMainService.TrnMainObj.REFBILL||null==this._trnMainService.TrnMainObj.REFBILL)return;const i=0==this._trnMainService.TrnMainObj.DOFULLRETURN?1:0;n?confirm("Below data will be refreshed. Do you want to continue?")?(this._trnMainService.TrnMainObj.DOFULLRETURN=1,this.ConfirmChangeReturnMode(n),this._trnMainService.callPipe=!this._trnMainService.callPipe):setTimeout(()=>{this._trnMainService.TrnMainObj.DOFULLRETURN=i}):confirm("Do you want to switch to Partial Return Mode?")?(this._trnMainService.TrnMainObj.DOFULLRETURN=0,this.ConfirmChangeReturnMode(n),this._trnMainService.callPipe=!this._trnMainService.callPipe):setTimeout(()=>{this._trnMainService.TrnMainObj.DOFULLRETURN=i})}preventInput(n){return n.preventDefault(),!1}updown(n){"Insert"===n.code&&!this.hideCustomerPlus()&&(n.preventDefault(),1==this.showCustomerProfilePopup||o.Km.TaxInvoice?this.openQuickCusProfilePopup():(1==this.showPartyMasterPopup||o.Km.TaxInvoice)&&this.openQuickPartyMasterPopup()),"F2"===n.key&&n.altKey&&(n.preventDefault(),document.getElementById("flatDis").focus())}JobCardNoEnter(){this.genericGridJobCardNoSetting={title:"Job Card List",apiEndpoints:"/getJobCardNoPagedList",defaultFilterIndex:0,columns:[{key:"JobCardNO",title:"Job Card No",hidden:!1,noSearch:!1},{key:"CustomerName",title:"Customer Name",hidden:!1,noSearch:!1},{key:"MobileNo",title:"Mobile No",hidden:!1,noSearch:!1},{key:"VehicleNO",title:"VehicleNo",hidden:!1,noSearch:!1}]},this.genericGridJobCardNO.show()}SalesOrderEnter(){let n="SO";"add-sales-invoice-wholesale"==this.activeurlpath&&(n="SOWHOLESALE"),("add-sales-invoice"==this.activeurlpath||this._trnMainService.TrnMainObj.VoucherType===o.Km.Sales)&&(n="SORETAIL"),this.genericGridSalesOrderSetting={title:"Sales Order",apiEndpoints:`/getPurchaseOrderPagedList/undefined/${n}`,defaultFilterIndex:0,columns:[{key:"PONUMBER",title:"SO Number",hidden:!1,noSearch:!1},{key:"DATE",title:"Date",hidden:!1,noSearch:!1},{key:"SUPPLIERNAME",title:"Customer Name",hidden:!1,noSearch:!1}]},this.genericGridSalesOrder.show()}SalesOrderDetail(){this.LoadSalesOrder.show()}onSelectJobCardEntry(n){this._trnMainService.TrnMainObj.BILLTO=n.CustomerName,this._trnMainService.TrnMainObj.BILLTOADD=n.Address,this._trnMainService.TrnMainObj.PARAC=n.ACID,this._trnMainService.TrnMainObj.AdditionalObj.JOBCARDNO=n.JobCardNO,this._trnMainService.TrnMainObj.MobileNo=n.MobileNo}onSalesOrderSelect(n){n&&(this._trnMainService.TrnMainObj.REFORDBILL=n.PONUMBER,this._trnMainService.TrnMainObj.CREDITLIMIT=n.CRLIMIT,this._trnMainService.TrnMainObj.AdditionalObj.SONO=n.PONUMBER,this._trnMainService.TrnMainObj.AdditionalObj.INVOICETYPE="FROMSO",this._trnMainService.TrnMainObj.BILLTO=n.SUPPLIERNAME,this._trnMainService.TrnMainObj.BILLTOADD=n.ADDRESS,this._trnMainService.TrnMainObj.BILLTOTEL=n.VATNO,this._trnMainService.TrnMainObj.TRNAC=n.ACID,this._trnMainService.TrnMainObj.PARAC=n.ACID,this._trnMainService.TrnMainObj.RECEIVEBY=n.CUSTID,this._trnMainService.TrnMainObj.SALESMAN=n.SALESMAN,this._trnMainService.TrnMainObj.SALESMANID=n.SALESMANID,(this._trnMainService.TrnMainObj.VoucherType===o.Km.Sales||this._trnMainService.TrnMainObj.VoucherType===o.Km.PerformaSalesInvoice||this._trnMainService.TrnMainObj.VoucherType===o.Km.TaxInvoice)&&0==this._trnMainService.TrnMainObj.LOADFULLFROMQT&&(this._trnMainService.TrnMainObj.AdditionalObj.AFTERFLATDISCRATE=n.AFTERFLATDISCRATE,this._trnMainService.TrnMainObj.AdditionalObj.BEFOREFLATDISCRATE=n.BEFOREFLATDISCRATE,this._trnMainService.isRatePartial=n.DCRATE>0,(this._trnMainService.TrnMainObj.AdditionalObj.AFTERFLATDISCRATE>0||this._trnMainService.TrnMainObj.AdditionalObj.BEFOREFLATDISCRATE>0)&&(this._trnMainService.TrnMainObj.DCRATE=n.AFTERFLATDISCRATE>0?n.AFTERFLATDISCRATE:n.BEFOREFLATDISCRATE)),this._trnMainService.TrnMainObj.PARAC?this._trnMainService.TrnMainObj.TRNMODE="credit":(this._trnMainService.TrnMainObj.TRNMODE="cash",this._trnMainService.setCashProperty()),"credit"==this._trnMainService.TrnMainObj.TRNMODE&&(this._trnMainService.TrnMainObj.TRNACName=n.SUPPLIERNAME),1==this._trnMainService.TrnMainObj.LOADFULLFROMQT&&(this._trnMainService.disableOnCreditSelect=!0,this._trnMainService.disableAccountInputField=!0),this._trnMainService.TrnMainObj.ProdList=[],this._trnMainService.addRow(),this._trnMainService.TrnMainObj.TOTALSQTY=0,this._trnMainService.TrnMainObj.GROSSAMNT=0,this._trnMainService.TrnMainObj.TAXABLE=0,this._trnMainService.TrnMainObj.NONTAXABLE=0,this._trnMainService.TrnMainObj.VATAMNT=0,this._trnMainService.TrnMainObj.NETWITHOUTROUNDOFF=0,this._trnMainService.callPipe=!this._trnMainService.callPipe,("abbreviated-sales-invoice"===this._trnMainService.activeurlpath||"add-sales-invoice"===this._trnMainService.activeurlpath||"add-sales-invoice-wholesale"==this.activeurlpath)&&(this._trnMainService.disableCustomerInputField=!0),1===this._trnMainService.TrnMainObj.LOADFULLFROMQT&&(this._trnMainService.TrnMainObj.VoucherType===o.Km.TaxInvoice||this._trnMainService.TrnMainObj.VoucherType==o.Km.Sales)&&this._trnMainService.loadDataForSalesInoviceFromSO(this._trnMainService.TrnMainObj.REFORDBILL,this._trnMainService.TrnMainObj.DIVISION,this._trnMainService.TrnMainObj.PhiscalID,"SOINTI"),1===this._trnMainService.TrnMainObj.LOADFULLFROMQT&&this._trnMainService.TrnMainObj.VoucherType===o.Km.PerformaSalesInvoice&&this._trnMainService.loadDataForPerfromaInoviceFromSO(this._trnMainService.TrnMainObj.REFORDBILL,this._trnMainService.TrnMainObj.DIVISION,this._trnMainService.TrnMainObj.PhiscalID,"SOINTI"),this._trnMainService.TrnMainObj.VoucherType===o.Km.TaxInvoice?setTimeout(()=>{document.getElementById("paymentTerms").focus()},100):this._trnMainService.TrnMainObj.VoucherType===o.Km.PerformaSalesInvoice&&setTimeout(()=>{document.getElementById("warehouseId").focus()},100),(1==this._trnMainService.TrnMainObj.LOADFULLFROMQT||this._trnMainService.TrnMainObj.VoucherType===o.Km.TaxInvoice&&0==this._trnMainService.TrnMainObj.LOADFULLFROMQT)&&0==this.userSetting.EnableCusProfileInSOrder&&this._trnMainService.TrnMainObj.REFORDBILL?.startsWith("SO")&&(this._trnMainService.disableAccountInputField=!0),(this._trnMainService.TrnMainObj.VoucherType===o.Km.TaxInvoice||this._trnMainService.TrnMainObj.VoucherType===o.Km.Sales)&&1==this.userSetting.EnableCusProfileInSOrder&&this._trnMainService.TrnMainObj.REFORDBILL.startsWith("SO")&&(this._trnMainService.TrnMainObj.TRNMODE="cash",this._trnMainService.setCashProperty()),"credit"==this._trnMainService.TrnMainObj.TRNMODE&&(this._trnMainService.TrnMainObj.TRNACName=n.SUPPLIERNAME),null!=this._trnMainService.TrnMainObj.ProdList[0].MENUCODE&&this._trnMainService.ReCalculateBillWithNormal())}salesOrderDelete(){null!=this._trnMainService.TrnMainObj.REFORDBILL&&(this._trnMainService.TrnMainObj.REFORDBILL=null,this._trnMainService.TrnMainObj.AdditionalObj.SONO=null,this._trnMainService.TrnMainObj.AdditionalObj.INVOICETYPE=null,this._trnMainService.TrnMainObj.TRNACName=null,this._trnMainService.TrnMainObj.BILLTO=null,this._trnMainService.TrnMainObj.BILLTOADD=null,this._trnMainService.TrnMainObj.BILLTOTEL=null,this._trnMainService.TrnMainObj.TRNAC=null,this._trnMainService.TrnMainObj.PARAC=null,this._trnMainService.TrnMainObj.SALESMAN=null,this._trnMainService.TrnMainObj.SALESMANID=null,this._trnMainService.TrnMainObj.TRNMODE="credit",this._trnMainService.TrnMainObj.ProdList=[],this._trnMainService.addRow(),this._trnMainService.TrnMainObj.TOTALSQTY=0,this._trnMainService.TrnMainObj.GROSSAMNT=0,this._trnMainService.TrnMainObj.TAXABLE=0,this._trnMainService.TrnMainObj.NONTAXABLE=0,this._trnMainService.TrnMainObj.VATAMNT=0,this._trnMainService.TrnMainObj.NETWITHOUTROUNDOFF=0)}OKLoadSalesOrder(n){for(let i in n)this._trnMainService.TrnMainObj.ProdList[i].MENUCODE=this._trnMainService.TrnMainObj.PODetailList[i].MENUCODE,this._trnMainService.TrnMainObj.ProdList[i].MCODE=this._trnMainService.TrnMainObj.PODetailList[i].MCODE,this._trnMainService.TrnMainObj.ProdList[i].ITEMDESC=this._trnMainService.TrnMainObj.PODetailList[i].DESCA,this._trnMainService.TrnMainObj.ProdList[i].ALTUNIT=this._trnMainService.TrnMainObj.PODetailList[i].UNIT,this._trnMainService.TrnMainObj.ProdList[i].BASEUNIT=this._trnMainService.TrnMainObj.PODetailList[i].UNIT,this._trnMainService.TrnMainObj.ProdList[i].ALTERNATEQUANTIY=this._trnMainService.TrnMainObj.PODetailList[i].DELIVERQTY,this._trnMainService.TrnMainObj.ProdList[i].Quantity=this._trnMainService.TrnMainObj.PODetailList[i].DELIVERQTY,this._trnMainService.TrnMainObj.ProdList[i].ALTRATE=this._trnMainService.TrnMainObj.PODetailList[i].DELIVERRATE,this._trnMainService.TrnMainObj.ProdList[i].RATE=this._trnMainService.TrnMainObj.PODetailList[i].DELIVERRATE,this._trnMainService.TrnMainObj.ProdList[i].AMOUNT=this._trnMainService.TrnMainObj.PODetailList[i].AMOUNT,this._trnMainService.TrnMainObj.ProdList[i].NETAMOUNT=this._trnMainService.TrnMainObj.PODetailList[i].AMOUNT,this._trnMainService.TrnMainObj.ProdList[i].NETAMNT=this._trnMainService.TrnMainObj.PODetailList[i].AMOUNT,this._trnMainService.TrnMainObj.ProdList[i].MFGDATE=this._trnMainService.TrnMainObj.PODetailList[i].MFGDATE,this._trnMainService.TrnMainObj.ProdList[i].EXPDATE=this._trnMainService.TrnMainObj.PODetailList[i].EXPIRYDATE,this._trnMainService.TrnMainObj.ProdList[i].isPurchaseOrderItem=!0,this._trnMainService.getAllUnitsOfItem(i),this._trnMainService.addRow();this._trnMainService.ReCalculateBillWithNormal(),this._trnMainService.TrnMainObj.ProdList.splice(-1),this.LoadSalesOrder.hide()}loadFromSalesOrderinTI(){this._trnMainService.TrnMainObj.REFORDBILL?1===this._trnMainService.TrnMainObj.LOADFULLFROMQT&&this._trnMainService.loadDataForSalesInoviceFromSO(this._trnMainService.TrnMainObj.REFORDBILL,this._trnMainService.TrnMainObj.DIVISION,this._trnMainService.TrnMainObj.PhiscalID,""):this._alertService.info("Please select reference invoice no")}showPopup(){this._trnMainService.TrnMainObj.AdditionalObj.SONO&&this.LoadSalesOrder.show()}closeModal(){this._trnMainService.onFlatDiscountClear(),this._trnMainService.clearDisAuthValues(),this._trnMainService.showDiscountAuth=!1}discountAuthConfirm(){this._trnMainService.disLimitAuthObj.isAuthDisLim=!0,this.loader.show("Authorizing Please wait");let n=this._trnMainService.TrnMainObj.ProdList.reduce((i,t)=>i+(t.INDDISCOUNT??0),0);this.masterService.authorizeDiscountLimitInSO(this._trnMainService.disLimitAuthObj).subscribe(i=>{if(this.loader.hide(),"ok"==i.status){let t=0!=this._trnMainService.nullToZeroConverter(i.result.userDisLimit)?i.result.userDisLimit:i.result.roleDisLimit;this._trnMainService.nullToZeroConverter(this._trnMainService.disLimitAuthObj.discountAmt)>0&&(this._trnMainService.limitValue=100*(n+Number(this._trnMainService.disLimitAuthObj.discountAmt))/this._trnMainService.TrnMainObj.GROSSAMNT),this._trnMainService.nullToZeroConverter(this._trnMainService.disLimitAuthObj.discountRate)>0&&(this._trnMainService.limitValue=100*(n+this._trnMainService.disLimitAuthObj.discountRate*this._trnMainService.TrnMainObj.GROSSAMNT/100)/this._trnMainService.TrnMainObj.GROSSAMNT),this._trnMainService.limitValue>t?(this._alertService.error("Specified discount value exceeded authorized discount limit!!!"),this._trnMainService.clearDisAuthValues(),this._trnMainService.onFlatDiscountClear(),this.savedDiscountObj=this._trnMainService.TrnMainObj.DiscountObj):(this._alertService.success("Authorization Sucessfull"),this._trnMainService.TrnMainObj.FLATDCAMNT=this._trnMainService.disLimitAuthObj.discountAmt,this._trnMainService.TrnMainObj.DCRATE=this._trnMainService.disLimitAuthObj.discountRate,this._trnMainService.resetDisLimitAuthObj()),this._trnMainService.showDiscountAuth=!1}else this._trnMainService.clearDisAuthValues(),this._trnMainService.onFlatDiscountClear()})}showReferenceBill(){return("add-sales-invoice"==this.activeurlpath||"add-sales-invoice-wholesale"==this.activeurlpath)&&0!==this.userSetting.ENABLE_SOINTI||this._trnMainService.TrnMainObj.VoucherType==o.Km.PerformaSalesInvoice&&0!==this.userSetting.ENABLE_SOINTI&&0!==this.userSetting.PERFOMASOBILLMODE||this._trnMainService.TrnMainObj.VoucherType==o.Km.DeliveryChalan&&0!==this.userSetting.ENABLE_SOINTI&&0!==this.userSetting.ENABLE_SOINDCHALAN||this._trnMainService.TrnMainObj.VoucherType==o.Km.Sales&&0!==this.userSetting.ENABLE_SOINTI&&0!=this.userSetting.ENABLE_SOINABB||73==this._trnMainService.TrnMainObj.VoucherType}focusToBarcode(n){n.preventDefault(),this._trnMainService.TrnMainObj.VoucherType!==o.Km.Quotation?0==this.userSetting.GblBarcodeWiseBilling?document.getElementById("itemDesc0").focus():this.masterService.focusAnyControl(this._trnMainService.TrnMainObj.ProdList[0].MCODE?"flatDis1":"barcodeField"):this.masterService.focusAnyControl("salesmanQuo")}showPaymentTerms(){return!(this._trnMainService.TrnMainObj.VoucherType!=o.Km.TaxInvoice&&this._trnMainService.TrnMainObj.VoucherType!=o.Km.ReverseTaxInvoice&&this._trnMainService.TrnMainObj.VoucherType!=o.Km.CreditNote&&this._trnMainService.TrnMainObj.VoucherType!=o.Km.Sales||(("add-sales-invoice"==this.activeurlpath||"add-sales-invoice-wholesale"==this.activeurlpath)&&"B2B"!=this.userSetting.CompanyType||"abbreviated-sales-invoice"==this.activeurlpath)&&1==this.userSetting.GblEnableMixedTenderMode)}disablePaymentTermsField(){return!!("VIEW"==this._trnMainService.TrnMainObj.Mode||1==this._trnMainService.disableMaster?.ReturnMode||1==this._trnMainService.disableAllFieldinPurchase||"self-billing"==this._trnMainService.activeurlpath||this._trnMainService.TrnMainObj.REFORDBILL&&this._trnMainService.TrnMainObj.VoucherType===o.Km.TaxInvoice&&this._trnMainService.TrnMainObj.REFORDBILL.startsWith("SO")&&0==this.userSetting.EnableCusProfileInSOrder)}onCurrenyChange(n){let i=this.masterService.Currencies.filter(t=>t.CURNAME==n)[0];this._trnMainService.TrnMainObj.EXRATE=i.EXRATE}onActivate(n){window.scroll(0,0)}focusToExcRate(n){n.preventDefault(),this.masterService.focusAnyControl("exchangerateid")}showCashinPaymentTerms(){return"self-billing"!==this.activeurlpath&&!(this._trnMainService.TrnMainObj.VoucherType==o.Km.CreditNote&&0==this.userSetting.showcashinreturnmode)}showReturnVoucherInPaymentTerms(){return this._trnMainService.TrnMainObj.VoucherType==o.Km.CreditNote&&0!=this.userSetting.ShowReturnVoucherAcInReturnMode}valueforCostCenterWiseAccounting(n){if(this.userSetting.enableCostCenter>0&&1==this.userSetting.EnableCostCenterWiseAccounting&&("add-sales-invoice"==this.activeurlpath||"add-creditnote-itembase"==this.activeurlpath)){let i=n.filter(t=>t.COSTCENTERNAME==this.userProfile.costCenter);this._trnMainService.accountWiseCostCenter=i[0].CCID,this._trnMainService.TrnMainObj.COSTCENTER=i[0].CCID}}validateFlatDiscount(n){let i;return i=n instanceof Event?this._trnMainService.nullToZeroConverter(n.target.value):this._trnMainService.nullToZeroConverter(n),i>100?(this._trnMainService.TrnMainObj.DCRATE=0,void this._alertService.info("Flat discount rate cannot be greater than 100%")):i<0?(this._alertService.info("Flat discount rate cannot be less than 0%"),void(this._trnMainService.TrnMainObj.DCRATE=0)):void(0==this._trnMainService.nullToZeroConverter(i)&&this._trnMainService.discountsOnFlatZero())}onAddNewCustomer(){this.openQuickCusProfilePopup()}showAddButton(){if(this._trnMainService.TrnMainObj.VoucherType==o.Km.Sales||this._trnMainService.TrnMainObj.VoucherType==o.Km.TaxInvoice&&"self-billing"!=this.activeurlpath||this._trnMainService.TrnMainObj.VoucherType==o.Km.Quotation&&1==this.userSetting.EnableCusProfileInSOrder&&"view"!=this._trnMainService.TrnMainObj.Mode?.toLowerCase())return!0}showDiscountAddButton(){if(this.isSO=!(!this._trnMainService.TrnMainObj.REFORDBILL||!this._trnMainService.TrnMainObj.REFORDBILL.startsWith("SO")||this._trnMainService.TrnMainObj.VoucherType==o.Km.SalesOrder||1==this._trnMainService.TrnMainObj.DOFULLRETURN&&2!=this.userSetting.ENABLE_SOINTI),1==this.userSetting.enableAdditionalFlatDiscountsInSales&&!this.isSO)return!0}onClickAddDiscounts(){this.totalIndividualDiscount=this._trnMainService.TrnMainObj.ProdList.reduce((i,t)=>i+(t.INDDISCOUNT??0),0);const n=this._trnMainService.TrnMainObj?.DiscountObj?.discountRowDetail.some(i=>i.discountAmount>0&&null!=i.discountAmount);if(this.isSO=!(!this._trnMainService.TrnMainObj.REFORDBILL||!this._trnMainService.TrnMainObj.REFORDBILL.startsWith("SO")),this.previousTotalIndividualDiscount=this.masterService.getPreviousTotalIndividualDiscount()?this.masterService.getPreviousTotalIndividualDiscount():0,this._trnMainService.TrnMainObj.GROSSAMNT){if("EDIT"==this._trnMainService.TrnMainObj.Mode&&n&&0==this._trnMainService.discountSelectionEdit)return this._trnMainService.discountSelectionEdit=!0,this.savedDiscountObj=this._trnMainService.TrnMainObj.DiscountObj,this.onAddNewDiscounts(),!0;if("VIEW"==this._trnMainService.TrnMainObj.Mode||this._trnMainService.TrnMainObj.VoucherType!=o.Km.PerformaSalesInvoice&&"PP"==this._trnMainService.TrnMainObj.VoucherAbbName||("abbreviated-sales-invoice"===this.activeurlpath||"add-sales-invoice-wholesale"==this.activeurlpath||"add-sales-invoice"==this.activeurlpath||this._trnMainService.TrnMainObj.VoucherType==o.Km.PerformaSalesInvoice)&&this.isSO)return this.savedDiscountObj=this._trnMainService.TrnMainObj.DiscountObj,this.onAddNewDiscounts(),!0;if("NEW"==this._trnMainService.TrnMainObj.Mode&&0==this._trnMainService.discountSelectionEdit){if(this.savedDiscountObj=this._trnMainService.TrnMainObj.DiscountObj,this._trnMainService.discountSelectionEdit=!0,!this.totalIndividualDiscount)return this.flatDiscountType="after",this.onAddNewDiscounts(),!0}else{if(!this.totalIndividualDiscount)return this.flatDiscountType="after",this.onAddNewDiscounts(),!0;if(this.savedDiscountObj?.discountRowDetail?.find(i=>i.discountAmount)&&(this._trnMainService.nullToZeroConverter(this.previousTotalIndividualDiscount)>0&&this.previousTotalIndividualDiscount==this.totalIndividualDiscount||"EDIT"==this._trnMainService.TrnMainObj.Mode))return this.onAddNewDiscounts(),!0}this.masterService.setPreviousTotalIndividualDiscount(this.totalIndividualDiscount),this.showAdditionalFlatDiscountPopUp=!0}else this._alertService.info("Please Select Product to apply additional discount!!!")}onAddNewDiscounts(){this.showAdditionalFlatDiscountPopUp=!1,!this.flatDiscountType&&"EDIT"!=this._trnMainService.TrnMainObj.Mode&&(this.flatDiscountType=this._trnMainService.TrnMainObj.AdditionalObj.BEFOREFLATDISCRATE?"before":"after"),this._trnMainService.TrnMainObj.DiscountObj?.discountRowDetail.some(i=>i.discountAmount>0&&null!=i.discountAmount)||(this.savedDiscountObj={}),0===this._trnMainService.TrnMainObj.FLATDCAMNT&&(this.savedDiscountObj={}),this.dialog.open(y.C,{data:{object:this._trnMainService.TrnMainObj,grossAmount:this._trnMainService.TrnMainObj.GROSSAMNT,discountAmount:this._trnMainService.TrnMainObj.FLATDCAMNT,discountRate:this._trnMainService.TrnMainObj.DCRATE,ecsAmount:this._trnMainService.TrnMainObj.TOTALECS,listDiscounts:this.savedDiscountObj,totalIndDiscount:this.totalIndividualDiscount,flatDisCalcType:this.flatDiscountType,urlPath:this.activeurlpath}}).afterClosed().subscribe(i=>{null===i?this._trnMainService.TrnMainObj.DiscountObj=null:(this._trnMainService.TrnMainObj.DiscountObj=i,this._trnMainService.TrnMainObj.FLATDCAMNT=i?.totalDiscountAmount?i?.totalDiscountAmount:0,this._trnMainService.TrnMainObj.TOTALFLATDISCOUNT=i?.totalDiscountAmount?i?.totalDiscountAmount:0,"after"===this.flatDiscountType?this._trnMainService.afterDiscFlat():"before"===this.flatDiscountType?this._trnMainService.beforeDiscFlat():"overwrite"===this.flatDiscountType&&this._trnMainService.TrnMainObj.FLATDCAMNT&&this._trnMainService.onApplyClicked(),this.savedDiscountObj="overwrite"!=this.flatDiscountType?i:this._trnMainService.TrnMainObj.DiscountObj),0==this._trnMainService.nullToZeroConverter(i?.totalDiscountAmount)&&(this._trnMainService.onFlatDiscountClear(),this._trnMainService.clearDisAuthValues(),this._trnMainService.callPipe=!this._trnMainService.callPipe),this._trnMainService.callPipe=!this._trnMainService.callPipe})}showAddDiscount(){if(this._trnMainService.TrnMainObj.VoucherType==o.Km.Sales||this._trnMainService.TrnMainObj.VoucherType==o.Km.TaxInvoice&&"add-sales-invoice"==this.activeurlpath)return!0}validateFlatDiscountAmount(n){let i;i=n instanceof Event?this._trnMainService.nullToZeroConverter(n.target.value):this._trnMainService.nullToZeroConverter(n);let t=this._trnMainService.nullToZeroConverter(this._trnMainService.TrnMainObj.NETAMNT/1.13);return i>=t?(this._alertService.info(`Flat discount amount cannot be greater than or equal to total amount: ${t}`),void(this._trnMainService.TrnMainObj.FLATDCAMNT=0)):i<0?(this._alertService.info("Flat discount amount cannot be less than 0"),void(this._trnMainService.TrnMainObj.FLATDCAMNT=0)):void(0==this._trnMainService.nullToZeroConverter(i)&&this._trnMainService.discountsOnFlatZero())}showWholesaleRateOption(){return 1==this.userSetting.LoadWholesaleRateinProforma&&this._trnMainService.TrnMainObj.VoucherType==o.Km.PerformaSalesInvoice}disableWholeSaleRateOption(){return"VIEW"==this._trnMainService.TrnMainObj.Mode||this._trnMainService.TrnMainObj.ProdList.filter(n=>null!=n.MCODE).length>0}applyFlatDiscount(n){this._trnMainService.TrnMainObj.TOTALFLATDISCOUNT=this._trnMainService.TrnMainObj.FLATDCAMNT?this._trnMainService.TrnMainObj.FLATDCAMNT:0,this._trnMainService.nullToZeroConverter(this._trnMainService.TrnMainObj.FLATDCAMNT)>0||this._trnMainService.nullToZeroConverter(this._trnMainService.TrnMainObj.DCRATE)>0&&this._trnMainService.nullToZeroConverter(this._trnMainService.TrnMainObj.DCRATE)<100?this._trnMainService.showFlatDiscOption=!0:this._trnMainService.beforeDiscFlat()}closeFlatDiscOption(){this._trnMainService.showFlatDiscOption=!1,this._trnMainService.onFlatDiscountClear(),this._trnMainService.clearDisAuthValues()}closeAdditionalFlatDiscOption(){this.showAdditionalFlatDiscountPopUp=!1,this._trnMainService.onFlatDiscountClear(),this._trnMainService.clearDisAuthValues()}onChangeSOLoad(n){!n.target.checked&&this._trnMainService.TrnMainObj.ProdList.find(i=>i.MCODE)&&confirm("Are you sure you want to clear list?")&&(this._trnMainService.TrnMainObj.ProdList=[],this._trnMainService.onFlatDiscountClear(),1==this._trnMainService.callPipe&&(this._trnMainService.callPipe=!this._trnMainService.callPipe),this._trnMainService.addRow()),0==this._trnMainService.TrnMainObj.LOADFULLFROMQT&&this._trnMainService.TrnMainObj.REFORDBILL&&(this._trnMainService.disableOnCreditSelect=!1),this._trnMainService.callPipe=!this._trnMainService.callPipe}onClickAdd(){this.paymentTermForm.patchValue(this.selectedPaymentTerm?{paymentName:this.selectedPaymentTerm}:{paymentName:""}),this.addNewPayment=!0}onClickAddRemarks(){this.addNewDeclineRemark=!0}closePaymentTermModal(){this.addNewPayment=!1,this.paymentTermForm.reset(),this.selectedPaymentTerm=""}closeDeclineTermModal(){this.addNewDeclineRemark=!1,this.declineTermForm.reset()}onPaymentSubmit(){let n={};if(n.PAYMENTTERMS=this.paymentTermForm.value.paymentName,n.GUID=f(),n.INITIALTERM=this.selectedPaymentTerm?this.selectedPaymentTerm:"",n.PAYMENTTERMS&&""!=n.PAYMENTTERMS?.trim())return this.payment.some(t=>t.PAYMENTTERMS===n.PAYMENTTERMS)?(this._alertService.warning("Payment Terms already exist!"),this.paymentTermForm.reset(),void(this.selectedPaymentTerm="")):void this._paymentTermsService.postPaymentTerms(n).subscribe(t=>{"ok"===t.status?(this.loader.hide(),this._alertService.info("Saved Successfully"),this.getPaymentTerms().then(()=>{const r=this.payment.find(w=>w.PAYMENTTERMS===n.PAYMENTTERMS);r&&(this._trnMainService.TrnMainObj.AdditionalObj.PAYMENTTERMS=r.ID,this.selectedPaymentTerm=r.PAYMENTTERMS),this.paymentTermForm.reset(),this.selectedPaymentTerm="",this.closePaymentTermModal()})):(this.loader.hide(),this._alertService.error(t.result))},t=>{this.loader.hide(),this._alertService.error("An error occurred while saving Payment Terms.")});this._alertService.warning("Please Enter Payment Terms!!!")}getPaymentTerms(){return new Promise((n,i)=>{this._paymentTermsService.getPaymentTerms().subscribe(t=>{this.payment=t.result,n()},t=>{console.error("Error fetching payment terms",t),i(t)})})}onRemarkSubmit(){let n={};n.STATUS=this.declineTermForm.value.remarkName,n.GUID=f(),this.loader.show("Data is Saving ..."),this._paymentTermsService.saveDeclineStatus(n).subscribe(i=>{"ok"==i.status?(this.loader.hide(),this._alertService.info("Saved Successfully"),this.declineTermForm.reset(),this.getDeclineStatusRemarks(),this.closeDeclineTermModal()):(this.loader.hide(),this._alertService.error(i.result))},i=>{this.loader.hide()})}getDeclineStatusRemarks(){this._paymentTermsService.getDeclineStatusRemarks().subscribe(n=>{this.remarksList=n.result})}enterClickOnRefno(n){this._trnMainService.TrnMainObj.VoucherType==o.Km.DeliveryChalan&&1==this.userSetting.EnablePetrolPumpFeatures&&this.enterClickOnRefnoEventEmit.emit(n)}disableCustomerField(){return!!((this._trnMainService.TrnMainObj.VoucherType===o.Km.TaxInvoice||"add-sales-invoice-wholesale"==this.activeurlpath)&&("PP"===this._trnMainService.TrnMainObj.VoucherAbbName||"DL"===this._trnMainService.TrnMainObj.VoucherAbbName||1==this._trnMainService.disableCustomerInputField)||"VIEW"===this._trnMainService.TrnMainObj.Mode||1===this.userSetting.EnablePetrolPumpFeatures&&this._trnMainService.TrnMainObj.BILLTO&&83===this._trnMainService.TrnMainObj.VoucherType||"self-billing"===this._trnMainService.activeurlpath||this._trnMainService.TrnMainObj.VoucherType===o.Km.DeliveryReturn||!0===this._trnMainService.disableMaster?.Customer||"CREDIT"==this._trnMainService.TrnMainObj.TRNMODE?.toUpperCase()&&"add-membership-sales-invoice"!=this.activeurlpath)}hideCustomerPlus(){return!!((this._trnMainService.TrnMainObj.VoucherType===o.Km.TaxInvoice||"add-sales-invoice-wholesale"==this.activeurlpath||"abbreviated-sales-invoice"===this._trnMainService.activeurlpath)&&("PP"===this._trnMainService.TrnMainObj.VoucherAbbName||"DL"===this._trnMainService.TrnMainObj.VoucherAbbName||1==this._trnMainService.disableCustomerInputField)||"VIEW"===this._trnMainService.TrnMainObj.Mode||1===this.userSetting.EnablePetrolPumpFeatures&&this._trnMainService.TrnMainObj.BILLTO&&83===this._trnMainService.TrnMainObj.VoucherType||"self-billing"===this._trnMainService.activeurlpath||this._trnMainService.TrnMainObj.VoucherType===o.Km.DeliveryReturn||!0===this._trnMainService.disableMaster?.Customer||"CREDIT"==this._trnMainService.TrnMainObj.TRNMODE?.toUpperCase()&&"add-membership-sales-invoice"!=this.activeurlpath&&"B2C"==this.userSetting.CompanyType&&0==this.userSetting.ShowCashAccountingInLedgerReport)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}showBeforeOverwrite(){return this.totalIndividualDiscount=this._trnMainService.TrnMainObj.ProdList.reduce((n,i)=>n+(i.INDDISCOUNT??0),0),this.totalIndividualDiscount>0}disableFlatDisField(){return this.isSO=!(!this._trnMainService.TrnMainObj.REFORDBILL||!this._trnMainService.TrnMainObj.REFORDBILL.startsWith("SO")),!!(this._trnMainService.TrnMainObj.VoucherType!=o.Km.PerformaSalesInvoice&&"PP"==this._trnMainService.TrnMainObj.VoucherAbbName||("abbreviated-sales-invoice"===this.activeurlpath||"add-sales-invoice-wholesale"==this.activeurlpath||"add-sales-invoice"==this.activeurlpath)&&this.isSO||0==this.userSetting.ENABLEMANUALSALESRETURN&&15==this._trnMainService.TrnMainObj.VoucherType||null==this._trnMainService.TrnMainObj.ProdList[0].MCODE)}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(I.P),e.Y36(N.p),e.Y36(P.gz),e.Y36(R.e),e.Y36(L.uw),e.Y36(h.c),e.Y36(g.V),e.Y36(c.S),e.Y36(M.qu),e.Y36(_.h))},a.\u0275cmp=e.Xpm({type:a,selectors:[["trnmain-parameters-master"]],viewQuery:function(n,i){if(1&n&&(e.Gf(B,5),e.Gf(U,5),e.Gf(V,5),e.Gf(k,5),e.Gf(K,5),e.Gf(G,5),e.Gf(J,5),e.Gf(Q,5),e.Gf(H,5),e.Gf(q,5),e.Gf(Y,5),e.Gf(W,5),e.Gf($,5),e.Gf(z,5),e.Gf(X,5),e.Gf(ee,5),e.Gf(ne,5),e.Gf(ie,5),e.Gf(te,5),e.Gf(re,5),e.Gf(ae,5)),2&n){let t;e.iGM(t=e.CRH())&&(i.genericGridCustomer=t.first),e.iGM(t=e.CRH())&&(i.genericGridRefBill=t.first),e.iGM(t=e.CRH())&&(i.genericGridSalesMan=t.first),e.iGM(t=e.CRH())&&(i.genericGridForTaxCancel=t.first),e.iGM(t=e.CRH())&&(i.newgenericGridForTaxCancel=t.first),e.iGM(t=e.CRH())&&(i.newgenericGridForSalesReturn=t.first),e.iGM(t=e.CRH())&&(i.newgenericGridForDeliveryChalanReturn=t.first),e.iGM(t=e.CRH())&&(i.genericGridCustomerListBySalesmanAndRoute=t.first),e.iGM(t=e.CRH())&&(i.genericGridAccount=t.first),e.iGM(t=e.CRH())&&(i.CreateCustomerProfile=t.first),e.iGM(t=e.CRH())&&(i.CreateQuickParty=t.first),e.iGM(t=e.CRH())&&(i.genericGridSalesOrder=t.first),e.iGM(t=e.CRH())&&(i.LoadSalesOrder=t.first),e.iGM(t=e.CRH())&&(i.genericGridJobCardNO=t.first),e.iGM(t=e.CRH())&&(i.genericGridVehicleNo=t.first),e.iGM(t=e.CRH())&&(i.addDiscount=t.first),e.iGM(t=e.CRH())&&(i.focusInputUnit=t.first),e.iGM(t=e.CRH())&&(i.focusSalesman=t.first),e.iGM(t=e.CRH())&&(i.focusInputFormat=t.first),e.iGM(t=e.CRH())&&(i.FocusCustomer=t.first),e.iGM(t=e.CRH())&&(i.genericGridWarehouse=t.first)}},hostBindings:function(n,i){1&n&&e.NdJ("keydown",function(r){return i.updown(r)},!1,e.evT)},outputs:{onDblClickSOLoadInTI:"onDblClickSOLoadInTI",enterClickOnRefnoEventEmit:"enterClickOnRefnoEventEmit",showCustomerProfile:"showCustomerProfile"},decls:67,vars:46,consts:[[1,"pd0","mr5","plainBackGround",3,"ngStyle"],[1,"row","col-md-12",2,"padding","15px"],[1,"col-md-4"],["class","row",4,"ngIf"],[4,"ngIf"],["class","row","style","float: right;",4,"ngIf"],["class","row","style","margin-top: 6px;",4,"ngIf"],["class","col-md-4","style","overflow-x: hidden",4,"ngIf"],[1,"col-md-4",2,"overflow-x","hidden"],[1,"row","cell-with-comment"],[2,"width","25%"],["id","customerselectid","type","text","autocomplete","off","title","Enter or Tab to select",2,"width","69%",3,"disabled","readOnly","ngModel","placeholder","change","ngModelChange","keydown.enter"],["focusInputFormat",""],["style","margin-left: 2px;","class","add",3,"click",4,"ngIf"],["class","col-md-4","style","overflow-x: hidden; overflow-y: auto; height: 160px;","id","scrollableDiv",4,"ngIf"],["class","col-md-4","style","overflow-x: hidden; overflow-y: auto; height: 160px;",4,"ngIf"],[3,"popupsettings","onItemDoubleClick","isCustomerProfileData"],["genericGridCustomer",""],[3,"popupsettings","onItemDoubleClick"],["genericGridSalesMan",""],["genericGridRefBill",""],["genericGridWarehouse",""],["genericGridCustomerListBySalesmanAndRoute",""],["genericGridForTaxCancel",""],["newgenericGridForTaxCancel",""],["newgenericGridForSalesReturn",""],["newgenericGridForDeliveryChalanReturn",""],["genericGridAccount",""],["genericGridSalesOrder",""],[3,"onLoadPO"],["LoadSalesOrder",""],[3,"onSaveParty"],["CreateQuickParty",""],[3,"onSave"],["CreateCustomerProfile",""],["genericGridJobCardNO",""],["genericGridVehicleNo",""],["class","backdrop",4,"ngIf"],[1,"row"],[2,"float","right","width","73%","margin-top","3px","font-weight","bold"],[2,"float","right","width","34%","margin-top","7px"],["type","date",2,"width","100%",3,"ngModel","disabled","min","max","ngModelChange","change"],[2,"float","right","width","27.2%","margin-top","7px"],["name","InvnepaliDateFrom",3,"id","label","disable","ngModel","change","ngModelChange"],["name","EntrynepaliDateFrom",3,"id","label","disable","ngModel","change","ngModelChange"],["id","refbill","type","text","autocomplete","off","placeholder","Please Enter To Select Ref Bill No",2,"width","64%",3,"disabled","ngModel","ngModelChange","keydown.enter","keydown.tab","keydown"],["id","refbill","type","text","autocomplete","off","style","width:64%;","placeholder","Please Enter To Select Ref Bill No",3,"disabled","ngModel","readonly","ngModelChange","keydown.enter","keydown.tab",4,"ngIf"],["id","refbill","type","text","autocomplete","off","style","width:64%;",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["id","refbill","type","text","autocomplete","off","placeholder","Please Enter To Select Ref Bill No",2,"width","64%",3,"disabled","ngModel","readonly","ngModelChange","keydown.enter","keydown.tab"],["id","refbill","type","text","autocomplete","off",2,"width","64%",3,"ngModel","disabled","ngModelChange"],[1,"row",2,"float","right"],["style","display: flex; padding-right: 36px;",4,"ngIf"],[2,"display","flex","padding-right","36px"],["type","checkbox",2,"width","25px","height","19px","margin-top","4px","margin-right","9px",3,"ngModel","disabled","ngModelChange","change"],[2,"width","100%"],[4,"ngIf","ngIfThen","ngIfElse"],["refNo",""],["couponNo",""],[2,"float","right","width","73%","margin-top","7px"],["name","refno","id","refno","style","width:52%;",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["id","refnoInput","type","text","autocomplete","off",3,"ngClass","ngModel","disabled","ngModelChange","focus","keydown.tab","keydown.enter","change"],["name","refno","id","refno",2,"width","52%",3,"ngModel","disabled","ngModelChange"],["value","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["value",""],[2,"float","right","width","73%"],["id","payment",2,"width","75%",3,"ngModel","disabled","ngModelChange","change"],["value","","disabled",""],["class","add",3,"click",4,"ngIf"],[1,"add",3,"click"],["id","refbill","type","text","autocomplete","off","placeholder","Please Enter To Select Ref Bill No",2,"width","64%",3,"disabled","ngModel","ngModelChange","keydown.enter","keydown.tab"],[2,"display","flex","/* margin-left","20px","*/\n        padding-right","36px"],["type","checkbox",2,"width","25px","height","19px","margin-top","4px","margin-right","9px",3,"ngModel","disabled","change","ngModelChange","click"],["type","text",2,"width","31%","margin-top","7px",3,"ngModel","disabled","ngModelChange"],["type","date",2,"width","33%","margin-top","7px",3,"ngModel","disabled","ngModelChange"],["id","refnoInput","type","text","placeholder","Enter to Select Job Card Entry no.","autocomplete","off",2,"width","87%",3,"ngModel","disabled","ngModelChange","Keydown.Enter","focus"],[2,"width","64%",3,"ngModel","disabled","ngModelChange"],["value","FULL"],["value","HALF"],[1,"row",2,"margin-top","6px"],[2,"float","right","width","36%"],["id","soNoId","type","text","placeholder","Enter to Select SO no.","autocomplete","off","readonly","",2,"width","95%",3,"ngModel","disabled","ngModelChange","keydown.enter","keydown.Tab","keydown.delete"],["type","checkbox",2,"width","17px","height","19px","margin-top","-8px",3,"ngModel","disabled","change","ngModelChange","keydown.delete"],[2,"width","auto","font-size","12px"],[1,"row",3,"hidden"],["type","text",2,"width","52%",3,"ngModel","disabled","ngModelChange"],["type","date",2,"width","44%",3,"ngModel","disabled","ngModelChange","change"],["class","row cell-with-comment","style","padding: 0px;",4,"ngIf"],[1,"row",2,"margin-top","-5px"],["style","width: 50%",4,"ngIf"],["class","row","style","margin-top: 3px;",4,"ngIf"],["id","paymentTerms","style","width:70%;",3,"ngModel","disabled","ngModelChange","change",4,"ngIf"],["id","exportpaymentTerms","style","width:70%;",3,"ngModel","disabled","ngModelChange","change",4,"ngIf"],["id","paymentTerms",2,"width","70%",3,"ngModel","disabled","ngModelChange","change"],["id","exportpaymentTerms",2,"width","70%",3,"ngModel","disabled","ngModelChange","change"],["id","accountField","type","text","autocomplete","off","placeholder","Press Enter to Select Account","readonly","",2,"width","70%",3,"disabled","ngModel","ngModelChange","keydown.enter"],["id","warehouseId","type","text","style","width:70%;","autocomplete","off","placeholder","Press Enter to Select Warehouse",3,"disabled","ngModel","readonly","ngModelChange","keydown.enter",4,"ngIf"],["id","warehouseId","type","text","style","width:70%;","autocomplete","off","placeholder","Press Enter to Select Warehouse","readonly","",3,"disabled","ngModel","ngModelChange","keydown.enter",4,"ngIf"],["id","warehouseId","type","text","autocomplete","off","placeholder","Press Enter to Select Warehouse",2,"width","70%",3,"disabled","ngModel","readonly","ngModelChange","keydown.enter"],["id","warehouseId","type","text","autocomplete","off","placeholder","Press Enter to Select Warehouse","readonly","",2,"width","70%",3,"disabled","ngModel","ngModelChange","keydown.enter"],[1,"row","cell-with-comment",2,"padding","0px"],["type","text","placeholder","Press ENTER to Select Salesman","autocomplete","off","readonly","",2,"width","70%",3,"ngModel","disabled","ngModelChange","keydown.enter","keydown.delete"],["id","costCenter",2,"width","70%",3,"ngModel","disabled","ngModelChange","keydown.tab"],["type","number","disabled","true",2,"width","35%","position","absolute","right","37%","text-align","right",3,"ngModel","ngModelChange"],[2,"width","25%","position","absolute","right","10%"],[2,"width","50%"],["id","currency",2,"width","47%",3,"ngModel","disabled","ngModelChange","change","keydown.Tab","keydown.Enter"],[2,"width","40%"],["id","exchangerateid","type","number",2,"width","50%",3,"ngModel","disabled","ngModelChange"],[1,"row",2,"margin-top","3px"],["id","modetransportation",2,"width","70%",3,"ngModel","disabled","ngModelChange"],["value","BY AIR CARGO"],["value","BY COURIER"],["value","ship"],["id","billMode",2,"width","70%",3,"ngModel","disabled","ngModelChange"],["value","new"],["value","renew"],[2,"width","70%",3,"disabled","ngModel","ngModelChange"],["id","unit",2,"width","70%",3,"disabled","ngModel","ngModelChange","keydown.tab","keydown.enter"],["focusInputUnit",""],["value","CASE"],["value","EACH"],["id","itembarcode","type","text",2,"width","70%",3,"ngModel","ngModelChange","keydown.enter"],[2,"width","20%"],[2,"width","30%",3,"ngModel","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],["type","text","readonly","",2,"width","18%",3,"ngModel","ngModelChange"],[3,"ngValue"],[1,"add",2,"margin-left","2px",3,"click"],["type","text","readonly","",2,"width","70%",3,"ngModel","disabled","ngModelChange"],["class","row cell-with-comment",4,"ngIf"],["id","remarksid","type","text",2,"width","70%","height","24px","min-height","24px","max-height","55px",3,"ngModel","disabled","keydown.Tab","ngModelChange"],["type","text","autocomplete","off","placeholder","Press Enter to Select Account",2,"width","70%",3,"disabled","ngModel","ngModelChange","keydown.enter"],["id","country","type","text",2,"width","70%",3,"ngModel","disabled","ngModelChange"],["id","vehiclenoid","type","text","autocomplete","off","placeholder","Press ENTER to Select Vehicle No",2,"width","70%",3,"disabled","ngModel","ngModelChange","keydown.enter","keyup"],[1,"col-md-6",2,"padding","0px"],["type","number","id","flatDis1",2,"width","46%",3,"ngModel","disabled","ngModelChange","keydown.Enter","keydown.Tab","focusout"],["type","number",2,"width","48%",3,"ngModel","disabled","ngModelChange","focusout","keydown.Enter","change"],["class","add-discount-button add",3,"click",4,"ngIf"],[1,"add-discount-button","add",3,"click"],[1,"tooltip-text"],[2,"width","25%","font-size","11px"],["type","checkbox",2,"width","17px","height","19px","margin-top","4px","margin-right","9px",3,"ngModel","disabled","change","ngModelChange"],["id","scrollableDiv",1,"col-md-4",2,"overflow-x","hidden","overflow-y","auto","height","160px"],["type","text","id","flatDis",2,"width","46%",3,"ngModel","disabled","focusout","keydown.Enter","keydown.Tab","ngModelChange"],[2,"width","45%"],["type","text",2,"width","46%",3,"ngModel","disabled","ngModelChange","focusout","keydown.Enter","keydown.Tab"],["id","paymentTermsview",2,"width","70%",3,"ngModel","disabled"],["value","credit"],["value","cash"],["value","creditcard"],["value","cheque"],["value","mixed"],["type","text","autocomplete","off",2,"width","70%",3,"disabled","ngModel"],[1,"col-md-4",2,"overflow-x","hidden","overflow-y","auto","height","160px"],[1,"col-11","pl-0","pr-1"],[2,"width","27%"],["id","flatDisRate","type","text",2,"width","63%",3,"ngModel","disabled","change","ngModelChange","keydown.Enter","keydown.Tab"],["type","text",2,"width","63%",3,"ngModel","disabled","ngModelChange","change","keydown.Enter"],[1,"col-1","pl-0","pr-0"],["id","quotationstatus",2,"width","60%",3,"ngModel","disabled","ngModelChange"],[1,"tooltip-text","quotation"],["id","salesmanQuo","type","text","placeholder","Press ENTER to Select Salesman","autocomplete","off","readonly","",2,"width","60%",3,"ngModel","disabled","ngModelChange","keydown.enter","keydown.delete"],["id","remarksid","type","text",2,"width","60%","height","24px","min-height","24px","max-height","55px",3,"ngModel","disabled","keydown.Tab","ngModelChange","change"],[1,"backdrop"],[1,"modal-sticky",2,"display","block","padding","0px","margin-bottom","-4rem","margin-right","20rem"],[1,"modal-content","modal-content-main-area",2,"width","auto","height","auto"],[1,"modal-header",2,"padding","0px","background","#c0c0c0"],[1,"modal-title",2,"padding-left","5px"],["aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row","mb-2",2,"margin","0.5rem"],[1,"col-md-6","col-sm-12"],[1,"col-5","form-control-label","p-0","m-0",2,"font-size","13px"],[1,"col-6",2,"padding","0px"],["type","text","id","Parent","autocomplete","off",1,"form-control",2,"height","4vh","font-size","13px",3,"ngModel","ngModelChange"],["type","password","id","Parent","autocomplete","off",1,"form-control",2,"height","4vh","font-size","13px",3,"ngModel","ngModelChange"],["type","number","id","Parent","autocomplete","off",1,"col-6","form-control",2,"height","4vh","font-size","13px",3,"disabled","ngModel","ngModelChange"],[1,"form-group-row",2,"margin","0.5rem"],[2,"border","2px solid #d9d9d9","width","100%"],[2,"font-size","13px","text-align","left","margin-bottom","3px","width","auto"],[1,"form-control",2,"width","100%",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-sm","btn-info",2,"font-size","12px",3,"click"],[1,"modal-sticky",2,"display","block","padding","0px","margin-bottom","0rem","margin-right","-1rem"],[1,"modal-content","modal-content-main-area",2,"width","53%"],["class"," form-control-label","style","font-size: 14px;",4,"ngIf"],["type","button","class","btn btn-sm btn-info","style","font-size: 10px;padding:6px",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-info",2,"font-size","10px","padding","6px",3,"click"],[1,"form-control-label",2,"font-size","14px"],[1,"modal-sticky",2,"display","block","padding","0px","margin-bottom","20px","margin-right","8rem"],[1,"modal-content","modal-content-main-area",2,"width","70%"],[3,"formGroup","ngSubmit"],[1,"form-group","row",2,"margin-top","1rem","margin-bottom","2px"],[1,"col-sm-4","form-control-label",2,"margin-left","-12px"],[1,"col-sm-8"],["type","text","formControlName","paymentName","autocomplete","off",1,"form-control",2,"height","4vh","font-size","13px"],["type","submit",1,"btn","btn-sm","btn-info",2,"font-size","12px"],["type","text","formControlName","remarkName","autocomplete","off",1,"form-control",2,"height","4vh","font-size","13px"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,oe,5,2,"div",3),e.YNc(4,ce,2,1,"ng-container",4),e.YNc(5,_e,2,1,"ng-container",4),e.YNc(6,Me,7,8,"div",3),e.YNc(7,de,4,3,"div",3),e.YNc(8,he,5,2,"div",3),e.YNc(9,ve,2,1,"div",5),e.YNc(10,Se,1,0,"div",3),e.YNc(11,Ae,9,7,"div",3),e.YNc(12,ye,9,4,"div",3),e.YNc(13,Ie,4,2,"div",3),e.YNc(14,Ne,5,2,"div",5),e.YNc(15,Pe,5,4,"div",3),e.YNc(16,Re,5,2,"div",3),e.YNc(17,Le,8,2,"div",3),e.YNc(18,xe,9,4,"div",6),e.qZA(),e.YNc(19,cn,19,16,"div",7),e.TgZ(20,"div",8)(21,"div",9)(22,"label",10),e._uU(23),e.qZA(),e.TgZ(24,"input",11,12),e.NdJ("change",function(){return i.customerFieldChange()})("ngModelChange",function(r){return i._trnMainService.TrnMainObj.BILLTO=r})("keydown.enter",function(r){return i.customerEnterCommand(r)}),e.qZA(),e.YNc(26,ln,3,0,"span",13),e.qZA(),e.YNc(27,mn,17,12,"div",4),e.qZA(),e.YNc(28,Cn,8,5,"div",14),e.YNc(29,In,2,1,"div",15),e.qZA()(),e.TgZ(30,"generic-popup-grid",16,17),e.NdJ("onItemDoubleClick",function(r){return i.onCustomerSelected(r)})("isCustomerProfileData",function(r){return i.CustomerProfileDate(r)}),e.qZA(),e.TgZ(32,"generic-popup-grid",18,19),e.NdJ("onItemDoubleClick",function(r){return i.onSalesManSelect(r)}),e.qZA(),e.TgZ(34,"generic-popup-grid",18,20),e.NdJ("onItemDoubleClick",function(r){return i.onRefBillSelected(r)}),e.qZA(),e.TgZ(36,"generic-popup-grid",18,21),e.NdJ("onItemDoubleClick",function(r){return i.onWarehouseSelected(r)}),e.qZA(),e.TgZ(38,"new-generic-popup-grid",18,22),e.NdJ("onItemDoubleClick",function(r){return i.onCustomerSelected(r)}),e.qZA(),e.TgZ(40,"generic-popup-grid",18,23),e.NdJ("onItemDoubleClick",function(r){return i.onItemDoubleClick(r)}),e.qZA(),e.TgZ(42,"new-generic-popup-grid",18,24),e.NdJ("onItemDoubleClick",function(r){return i.onItemDoubleClick(r)}),e.qZA(),e.TgZ(44,"generic-popup-grid",18,25),e.NdJ("onItemDoubleClick",function(r){return i.onRefBillSelected(r)}),e.qZA(),e.TgZ(46,"generic-popup-grid",18,26),e.NdJ("onItemDoubleClick",function(r){return i.onRefBillSelected(r)}),e.qZA(),e.TgZ(48,"generic-popup-grid",18,27),e.NdJ("onItemDoubleClick",function(r){return i.onAccountSelect(r)}),e.qZA(),e.TgZ(50,"generic-popup-grid",18,28),e.NdJ("onItemDoubleClick",function(r){return i.onSalesOrderSelect(r)}),e.qZA(),e.TgZ(52,"load-purchase-order",29,30),e.NdJ("onLoadPO",function(r){return i.OKLoadSalesOrder(r)}),e.qZA(),e.TgZ(54,"quick-party-master",31,32),e.NdJ("onSaveParty",function(r){return i.onSavePartyMaster(r)}),e.qZA(),e.TgZ(56,"create-customer-dialog",33,34),e.NdJ("onSave",function(r){return i.onSaveCustomerProfile(r)}),e.qZA(),e.TgZ(58,"generic-popup-grid",18,35),e.NdJ("onItemDoubleClick",function(r){return i.onSelectJobCardEntry(r)}),e.qZA(),e.TgZ(60,"generic-popup-grid",18,36),e.NdJ("onItemDoubleClick",function(r){return i.onVehicleNoSelected(r)}),e.qZA(),e.YNc(62,Nn,42,7,"div",37),e.YNc(63,wn,19,4,"div",37),e.YNc(64,Vn,17,4,"div",37),e.YNc(65,kn,19,1,"div",4),e.YNc(66,Kn,19,1,"div",4)),2&n&&(e.Q6J("ngStyle",14!=i._trnMainService.TrnMainObj.VoucherType&&"abbreviated-sales-invoice"!=i.activeurlpath||"lite"!=i.AppMode?null:e.DdM(45,Gn)),e.xp6(3),e.Q6J("ngIf",i.ShowTransactionMode),e.xp6(1),e.Q6J("ngIf",1==i.userSetting.SHOWTRNDATE&&"lite"!=i.AppMode),e.xp6(1),e.Q6J("ngIf",1==i.userSetting.SHOWTRNDATE&&"lite"==i.AppMode&&"abbreviated-sales-invoice"!=i.activeurlpath),e.xp6(1),e.Q6J("ngIf",14==i._trnMainService.TrnMainObj.VoucherType||43==i._trnMainService.TrnMainObj.VoucherType||1==i._trnMainService.TrnMainObj.VoucherType||15==i._trnMainService.TrnMainObj.VoucherType||57==i._trnMainService.TrnMainObj.VoucherType||83==i._trnMainService.TrnMainObj.VoucherType||86==i._trnMainService.TrnMainObj.VoucherType||64==i._trnMainService.TrnMainObj.VoucherType||41==i._trnMainService.TrnMainObj.VoucherType||73==i._trnMainService.TrnMainObj.VoucherType||46==i._trnMainService.TrnMainObj.VoucherType||21==i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",2==i._trnMainService.TrnMainObj.VoucherType||61==i._trnMainService.TrnMainObj.VoucherType||"canceladdsientry"==i.activeurlpath),e.xp6(1),e.Q6J("ngIf",15==i._trnMainService.TrnMainObj.VoucherType||41==i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",15==i._trnMainService.TrnMainObj.VoucherType||41==i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",1==i.userSetting.REFBILLCOMPULSORINDNOTE&&15==i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",14==i._trnMainService.TrnMainObj.VoucherType||43==i._trnMainService.TrnMainObj.VoucherType||57==i._trnMainService.TrnMainObj.VoucherType||64==i._trnMainService.TrnMainObj.VoucherType||73==i._trnMainService.TrnMainObj.VoucherType||83==i._trnMainService.TrnMainObj.VoucherType||86==i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",64==i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",21==i._trnMainService.TrnMainObj.VoucherType||46==i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",21==i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf","export-sales-invoice"==i.activeurlpath),e.xp6(1),e.Q6J("ngIf",1==i.userSetting.EnableJobCardEntry&&14==i._trnMainService.TrnMainObj.VoucherType&&"lite"!=i.AppMode),e.xp6(1),e.Q6J("ngIf",1==i.userSetting.ENABLEMULTISPRINTFORMAT&&14==i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",i.showReferenceBill()),e.xp6(1),e.Q6J("ngIf",64!=i._trnMainService.TrnMainObj.VoucherType&&15==i._trnMainService.TrnMainObj.VoucherType&&"lite"==i.AppMode||64!=i._trnMainService.TrnMainObj.VoucherType&&"pro"==i.AppMode),e.xp6(4),e.Oqu(i.customerLabel),e.xp6(1),e.MGl("placeholder","Press ENTER to Select ",i.customerLabel,""),e.Q6J("disabled",i.disableCustomerField())("readOnly",!0)("ngModel",i._trnMainService.TrnMainObj.BILLTO),e.xp6(2),e.Q6J("ngIf",i.showAddButton()&&!i.hideCustomerPlus()),e.xp6(1),e.Q6J("ngIf",1==i.masterService.ShowMore),e.xp6(1),e.Q6J("ngIf","lite"==i.AppMode&&(14==i._trnMainService.TrnMainObj.VoucherType||"abbreviated-sales-invoice"==i.activeurlpath)),e.xp6(1),e.Q6J("ngIf",64==i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("popupsettings",i.gridPopupSettingsForCustomer),e.xp6(2),e.Q6J("popupsettings",i.gridPopupSettingsForSalesMan),e.xp6(2),e.Q6J("popupsettings",i.gridPopupSettingsForRefBill),e.xp6(2),e.Q6J("popupsettings",i.gridPopupSettingsForWarehouse),e.xp6(2),e.Q6J("popupsettings",i.gridPopupSettingsForCustomerListBySalesmanAndRoute),e.xp6(2),e.Q6J("popupsettings",i.gridPopupSettingsForTaxCancel),e.xp6(2),e.Q6J("popupsettings",i.newgridPopupSettingsForTaxCancel),e.xp6(2),e.Q6J("popupsettings",i.newgridPopupSettingsForSalesReturn),e.xp6(2),e.Q6J("popupsettings",i.newgridPopupSettingsForDeliveryChalanReturn),e.xp6(2),e.Q6J("popupsettings",i.genericGridAccountSetting),e.xp6(2),e.Q6J("popupsettings",i.genericGridSalesOrderSetting),e.xp6(8),e.Q6J("popupsettings",i.genericGridJobCardNoSetting),e.xp6(2),e.Q6J("popupsettings",i.gridPopupSettingsForVehicleNo),e.xp6(2),e.Q6J("ngIf",i._trnMainService.showDiscountAuth),e.xp6(1),e.Q6J("ngIf",i._trnMainService.showFlatDiscOption),e.xp6(1),e.Q6J("ngIf",i.showAdditionalFlatDiscountPopUp),e.xp6(1),e.Q6J("ngIf",i.addNewPayment),e.xp6(1),e.Q6J("ngIf",i.addNewDeclineRemark))},dependencies:[S.mk,S.sg,S.O5,S.PC,M._Y,M.YN,M.Kr,M.Fj,M.wV,M.Wl,M.EJ,M.JJ,M.JL,M.On,M.sg,M.u,T.Zl,p.QE,u.X,d.c,m.r,A.v,x.u],styles:['.prefixYes[_ngcontent-%COMP%] {\n        width: 34%;\n    }\n    \n    .prefixNo[_ngcontent-%COMP%] {\n        width: 88%;\n    }\n    \n    .btn[_ngcontent-%COMP%] {\n        width: 65px;\n    }\n\n    .add[_ngcontent-%COMP%]{\n  color: #2E8B57;\n  border: 2px solid #2E8B57;\n  margin-left: 2px;\n}\n\nspan.add[_ngcontent-%COMP%]:hover{\ncolor: #04AA6D;\nborder-color:#04AA6D;\n}\n\nspan.add[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{\n  position: absolute;\n  left: 50%;\n  top:50%;\n  transform: translate(-50%, -50%);\n}\n\nspan.add[_ngcontent-%COMP%]{\n  display: inline-block;\n    width: 15px;\n    height: 15px;\n    text-align: center;\n    font-size: 16px;\n    font-family: "Roboto";\n    border-radius: 50%;\n    background: #F7F7F7;\n    position: relative;\n    cursor: pointer;\n    margin-top: 7px;\n}\n.add-discount-button[_ngcontent-%COMP%] {\n      position: relative;\n      display: inline-block;\n      cursor: pointer;\n    }\n\n.add-discount-button[_ngcontent-%COMP%]   .quotation[_ngcontent-%COMP%]{\n    bottom: -500% !important;\n    right: 150% !important;\n}\n.add-discount-button[_ngcontent-%COMP%]   .tooltip-text[_ngcontent-%COMP%] {\n  visibility: hidden;\n  width: 100px;\n  background-color: #555;\n  color: #fff;\n  text-align: center;\n  border-radius: 5px;\n  padding: 5px;\n  position: absolute;\n  z-index: 1;\n  bottom: 125%;\n  right: 50%;\n  opacity: 0;\n  transition: opacity 0.3s;\n}\n\n.add-discount-button[_ngcontent-%COMP%]:hover   .tooltip-text[_ngcontent-%COMP%] {\n  visibility: visible;\n  opacity: 1;\n}\n\n.backdrop[_ngcontent-%COMP%] {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(61, 60, 60, 0.5);\n    z-index: 9999;\n  }']}),a})()},30334:(D,C,l)=>{l.d(C,{S:()=>T});var e=l(64537),v=l(35732),O=l(67297),o=l(71180);let T=(()=>{class p{constructor(b,M,f){this.http=b,this.authService=M,this.state=f;const E=this.state.getGlobalSetting("apiUrl");E&&E.length>0&&(this.apiUrl=E)}postPaymentTerms(b){const M={headers:this.authService.getRequestOption(),method:"post"};return this.http.post(`${this.apiUrl}/savePaymentTerms`,b,M)}saveDeclineStatus(b){const M={headers:this.authService.getRequestOption(),method:"post"};return this.http.post(`${this.apiUrl}/saveDeclineStatus`,b,M)}getPaymentTerms(){return this.http.get(this.apiUrl+"/LoadPaymentTerms")}getQuotationStatus(){return this.http.get(this.apiUrl+"/getQuotationStatus")}getDeclineStatusRemarks(){return this.http.get(this.apiUrl+"/LoadDeclineStatus")}}return p.\u0275fac=function(b){return new(b||p)(e.LFG(v.eN),e.LFG(O.e),e.LFG(o.q))},p.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},24029:(D,C,l)=>{l.d(C,{M:()=>o});var e=l(92340),v=l(64537),O=l(35732);let o=(()=>{class T{constructor(S){this.http=S,this.apiUrl=e.N.apiUrl}getProdListForSalesInvoice(S){return this.http.post(this.apiUrl+"/getProdListForSalesInvoice",S)}}return T.\u0275fac=function(S){return new(S||T)(v.LFG(O.eN))},T.\u0275prov=v.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})()},76018:(D,C,l)=>{l.d(C,{E:()=>L});var e=l(64537),v=l(42326),O=l(87584),o=l(67311),T=l(14970),p=l(24029),S=l(53074),b=l(88692),M=l(20092);function f(h,g){if(1&h&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&h){const c=g.$implicit;e.Q6J("ngValue",c.INITIAL),e.xp6(1),e.hij(" ",c.NAME," ")}}function E(h,g){if(1&h){const c=e.EpF();e.TgZ(0,"div",19)(1,"div",20)(2,"div"),e._uU(3,"Entry No:"),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.qZA()(),e.TgZ(6,"div",20)(7,"label"),e._uU(8,"Requested By :"),e.qZA(),e.TgZ(9,"select",21),e.NdJ("ngModelChange",function(u){e.CHM(c);const d=e.oxw();return e.KtG(d._trnMainService.TrnMainObj.BILLTOADD=u)}),e.YNc(10,f,2,2,"option",22),e.qZA()()()}if(2&h){const c=e.oxw();e.xp6(5),e.hij(" ",c._trnMainService.TrnMainObj.REFBILL," "),e.xp6(4),e.Q6J("ngModel",c._trnMainService.TrnMainObj.BILLTOADD)("disabled",!0),e.xp6(1),e.Q6J("ngForOf",c.divisionlist)}}function y(h,g){1&h&&(e.TgZ(0,"th",13),e._uU(1," Requested QTY "),e.qZA())}function I(h,g){1&h&&(e.TgZ(0,"th",13),e._uU(1," Stock "),e.qZA())}function N(h,g){if(1&h&&(e.TgZ(0,"td",13),e._uU(1),e.qZA()),2&h){const c=e.oxw().$implicit;e.xp6(1),e.hij(" ",c.ALTERNATEQUANTIY," ")}}function P(h,g){if(1&h&&(e.TgZ(0,"td",13),e._uU(1),e.qZA()),2&h){const c=e.oxw().$implicit;e.xp6(1),e.hij(" ",c.STOCK," ")}}function R(h,g){if(1&h){const c=e.EpF();e.TgZ(0,"tr")(1,"td",9)(2,"input",24),e.NdJ("ngModelChange",function(u){const m=e.CHM(c).$implicit;return e.KtG(m.SELECTEDITEM=u)})("click",function(u){const d=e.CHM(c),m=d.$implicit,A=d.index,x=e.oxw();return e.KtG(x.isSelected(u,m,A))}),e.qZA(),e._uU(3),e.qZA(),e.TgZ(4,"td",10),e._uU(5),e.qZA(),e.TgZ(6,"td",11),e._uU(7),e.qZA(),e.TgZ(8,"td",10),e._uU(9),e.qZA(),e.YNc(10,N,2,1,"td",12),e.TgZ(11,"td",13)(12,"input",25),e.NdJ("ngModelChange",function(u){const m=e.CHM(c).$implicit,A=e.oxw();return e.KtG(m[A.selectedKey]=u)})("keydown.enter",function(){const d=e.CHM(c).$implicit,m=e.oxw();return e.KtG(m.onQuantityChangeEvent(d))})("change",function(){const d=e.CHM(c).$implicit,m=e.oxw();return e.KtG(m.onQuantityChangeEvent(d))}),e.qZA()(),e.YNc(13,P,2,1,"td",12),e.qZA()}if(2&h){const c=g.$implicit,_=g.index,u=e.oxw();e.xp6(2),e.Q6J("checked",1==c.SELECTEDITEM)("ngModel",c.SELECTEDITEM),e.xp6(1),e.hij(" ",_+1," "),e.xp6(2),e.hij(" ",u.showQuantityChangePopup?c.BC:c.MENUCODE," "),e.xp6(2),e.Oqu(c.ITEMDESC),e.xp6(2),e.Oqu(c.ALTUNIT),e.xp6(1),e.Q6J("ngIf",8===u._trnMainService.TrnMainObj.VoucherType),e.xp6(2),e.MGl("id","inputqty",_,""),e.Q6J("ngModel",c[u.selectedKey]),e.xp6(1),e.Q6J("ngIf",8===u._trnMainService.TrnMainObj.VoucherType)}}let L=(()=>{class h{constructor(c,_,u,d,m){this._trnMainService=c,this.alertService=_,this.loadingService=u,this.salesService=d,this.masterService=m,this.showProdListInTIfromDCOutput=new e.vpe,this.showQuantityChangePopupOutput=new e.vpe}ngOnInit(){this.masterService.getAllDivisions().subscribe(c=>{this.divisionlist=c}),this.selectedKey=this._trnMainService.TrnMainObj.VoucherType===v.Km.BranchTransferOut?"issueQuantity":"ALTERNATEQUANTIY",this._trnMainService.TrnMainObj.VoucherType===v.Km.TaxInvoice?(this.title="Quantity Change Popup",this.quantityHeader="Quantity"):this._trnMainService.TrnMainObj.VoucherType===v.Km.BranchTransferOut&&(this.title="Requested Product List(Request Vs Issue)",this.quantityHeader="Issue QTY")}onQuantityChange(c){if(this.showProdListInTIfromDC)return"apply"===c&&this.addInProd(),void this.showProdListInTIfromDCOutput.emit(!1);if("apply"==c){this._trnMainService.requisitionFromNotification=!1;const _=this._trnMainService.TrnMainObj.ViewList.filter(d=>1==d.SELECTEDITEM);if(0===_.length)return void this.alertService.error("No item is selected. Please select at least one item.");let u=this.makeProdObj(_);if(u.ProdList?.length>0){if(!u.ProdList.find(d=>d.Quantity>0))return void this.alertService.info("Invalid Quantity found in grid");u.ProdList=u.ProdList.filter(d=>d.Quantity>0)}this.loadingService.show("Loading data..."),this.salesService.getProdListForSalesInvoice(u).subscribe(d=>{"ok"===d.status&&(this.loadingService.hide(),this._trnMainService.TrnMainObj.ProdList=d.result,this._trnMainService.TrnMainObj.ProdList.forEach(m=>m.rowMode="EDIT"),this._trnMainService.requisitionFromNotification=!0,this._trnMainService.TrnMainObj.ViewList=[],null!=this._trnMainService.TrnMainObj.ProdList[0].MENUCODE&&this._trnMainService.ReCalculateBillWithNormal())},d=>{this.loadingService.hide()})}"close"==c&&(this._trnMainService.disableCustomerInputField=!1),this.showQuantityChangePopupOutput.emit(!1)}isSelected(c,_,u){const d=this._trnMainService.TrnMainObj.VoucherType===v.Km.BranchTransferOut?"issueQuantity":"ALTERNATEQUANTIY";_.SELECTEDITEM=c.target.checked?1:0,this._trnMainService.TrnMainObj.VoucherType===v.Km.BranchTransferOut&&(0==_.SELECTEDITEM&&(_[d]=0),1==_.SELECTEDITEM&&(_[d]=_.REALQTY_IN>_.STOCK||_[d]==_.STOCK?_.STOCK:_.REALQTY_IN)),document.getElementById("inputqty"+u).focus()}onQuantityChangeEvent(c){const _=this._trnMainService.TrnMainObj.VoucherType===v.Km.BranchTransferOut?"issueQuantity":"ALTERNATEQUANTIY";return this._trnMainService.TrnMainObj.VoucherType===v.Km.BranchTransferOut&&c[_]>c.ALTERNATEQUANTIY?(this.alertService.info(`Entered quantity is greater than requested quantity: ${c.ALTERNATEQUANTIY}!`),void(c[_]=c.ALTERNATEQUANTIY>c.STOCK?c.STOCK:c.ALTERNATEQUANTIY)):9!=c.PTYPE&&c[_]>c.STOCK?(this.alertService.info(`Entered quantity is greater than the available stock: ${c.STOCK}!`),void(c[_]=c.STOCK)):void 0}addInProd(){this._trnMainService.TrnMainObj.ProdList=this._trnMainService.TrnMainObj.ViewList.filter(c=>1==c.SELECTEDITEM)}makeProdObj(c){return{ProdList:c.map(_=>({MCODE:_.MCODE,Quantity:this._trnMainService.TrnMainObj.VoucherType===v.Km.BranchTransferOut?_.issueQuantity:_.ALTERNATEQUANTIY,Unit:_.ALTUNIT,BaseUnit:_.BASEUNIT,AltUnit:_.ALTUNIT,AltConfactor:_.ALTCONFACTOR,ALTRATE:_.ALTRATE,RATE:_.RATE,STOCK:_.STOCK})),TRNAC:this._trnMainService.TrnMainObj.TRNAC,BILLTYPE:this._trnMainService.TrnMainObj.INVOICETYPE,soVchrno:this._trnMainService.TrnMainObj.REFORDBILL}}}return h.\u0275fac=function(c){return new(c||h)(e.Y36(O.p),e.Y36(o.c),e.Y36(T.V),e.Y36(p.M),e.Y36(S.P))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-quantity-change-popup"]],inputs:{showProdListInTIfromDC:["showProdList","showProdListInTIfromDC"],showQuantityChangePopup:["show","showQuantityChangePopup"]},outputs:{showProdListInTIfromDCOutput:"showProdListChange",showQuantityChangePopupOutput:"showChange"},decls:33,vars:6,consts:[[1,"host","transfer-out"],[1,"card"],[1,"card-header",2,"background-color","lightsteelblue","padding","0.5rem 1.25rem"],[1,"row"],[2,"font-size","1.1rem"],["class","flex padding",4,"ngIf"],[1,"row",2,"margin-top","1rem","width","95%"],[1,"col-lg-12","mx-4",2,"width","100%","height","50vh","overflow-y","scroll"],[1,"table","table-sm","table-striped"],["scope","col",2,"width","10%"],["scope","col",2,"width","15%"],["scope","col",1,"desc"],["scope","col","style","width: 35%",4,"ngIf"],["scope","col",2,"width","35%"],[4,"ngFor","ngForOf"],[1,"col-md-12",2,"display","flex","align-items","flex-end","justify-content","center"],[1,"button-group","my-2"],["type","button",1,"btn","btn-info",2,"margin-right","2px","width","75px","font-size","12px",3,"click"],["type","button","title","Cancel",1,"btn","btn-info",2,"margin-right","2px","width","75px","font-size","12px",3,"click"],[1,"flex","padding"],[1,"flex","gap"],[3,"ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["type","checkbox",1,"isSelect",3,"checked","ngModel","ngModelChange","click"],["type","number",3,"id","ngModel","ngModelChange","keydown.enter","change"]],template:function(c,_){1&c&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h6",4),e._uU(5),e.qZA()()(),e.YNc(6,E,11,4,"div",5),e.TgZ(7,"div",6)(8,"div",7)(9,"table",8)(10,"thead")(11,"tr")(12,"th",9),e._uU(13,"S.No"),e.qZA(),e.TgZ(14,"th",10),e._uU(15,"Code"),e.qZA(),e.TgZ(16,"th",11),e._uU(17,"Description"),e.qZA(),e.TgZ(18,"th",10),e._uU(19,"Unit"),e.qZA(),e.YNc(20,y,2,0,"th",12),e.TgZ(21,"th",13),e._uU(22),e.qZA(),e.YNc(23,I,2,0,"th",12),e.qZA()(),e.TgZ(24,"tbody"),e.YNc(25,R,14,10,"tr",14),e.qZA()()()(),e.TgZ(26,"div",3)(27,"div",15)(28,"div",16)(29,"button",17),e.NdJ("click",function(){return _.onQuantityChange("apply")}),e._uU(30," APPLY "),e.qZA(),e.TgZ(31,"button",18),e.NdJ("click",function(){return _.onQuantityChange("close")}),e._uU(32," CANCEL "),e.qZA()()()()()()),2&c&&(e.xp6(5),e.Oqu(_.title),e.xp6(1),e.Q6J("ngIf",8===_._trnMainService.TrnMainObj.VoucherType),e.xp6(14),e.Q6J("ngIf",8===_._trnMainService.TrnMainObj.VoucherType),e.xp6(2),e.Oqu(_.quantityHeader),e.xp6(1),e.Q6J("ngIf",8===_._trnMainService.TrnMainObj.VoucherType),e.xp6(2),e.Q6J("ngForOf",_._trnMainService.TrnMainObj.ViewList))},dependencies:[b.sg,b.O5,M.YN,M.Kr,M.Fj,M.wV,M.Wl,M.EJ,M.JJ,M.On],styles:[".host[_ngcontent-%COMP%]{display:block;position:fixed!important;transform:translate(-50px,-50px);background:#ffffff;z-index:99999;width:55%;top:25%;left:26%}.transfer-out[_ngcontent-%COMP%]{width:82%;left:15%}.desc-classic[_ngcontent-%COMP%]{width:60%}.desc[_ngcontent-%COMP%]{width:40%}.flex[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.flex[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:auto}.gap[_ngcontent-%COMP%]{gap:10px}.padding[_ngcontent-%COMP%]{padding:12px}"]}),h})()},64548:(D,C,l)=>{l.d(C,{x:()=>o});var e=l(88692),v=l(20092),O=l(64537);let o=(()=>{class T{}return T.\u0275fac=function(S){return new(S||T)},T.\u0275mod=O.oAB({type:T}),T.\u0275inj=O.cJS({imports:[e.ez,v.u5]}),T})()}}]);