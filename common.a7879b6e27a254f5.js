"use strict";var w=Object.defineProperty,R=(L,C,n)=>C in L?w(L,C,{enumerable:!0,configurable:!0,writable:!0,value:n}):L[C]=n,v=(L,C,n)=>(R(L,"symbol"!=typeof C?C+"":C,n),n);(self.webpackChunkimserp=self.webpackChunkimserp||[]).push([[8592],{30334:(L,C,n)=>{n.d(C,{S:()=>g});var t=n(64537),e=n(35732),I=n(67297),x=n(71180);let g=(()=>{class f{constructor(d,c,o){this.http=d,this.authService=c,this.state=o;const i=this.state.getGlobalSetting("apiUrl");i&&i.length>0&&(this.apiUrl=i)}postPaymentTerms(d){const c={headers:this.authService.getRequestOption(),method:"post"};return this.http.post(`${this.apiUrl}/savePaymentTerms`,d,c)}saveDeclineStatus(d){const c={headers:this.authService.getRequestOption(),method:"post"};return this.http.post(`${this.apiUrl}/saveDeclineStatus`,d,c)}getPaymentTerms(){return this.http.get(this.apiUrl+"/LoadPaymentTerms")}getQuotationStatus(){return this.http.get(this.apiUrl+"/getQuotationStatus")}getDeclineStatusRemarks(){return this.http.get(this.apiUrl+"/LoadDeclineStatus")}}return f.\u0275fac=function(d){return new(d||f)(t.LFG(e.eN),t.LFG(I.e),t.LFG(x.q))},f.\u0275prov=t.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},94071:(L,C,n)=>{n.d(C,{u:()=>e});var t=n(64537);let e=(()=>{class I{constructor(g){this.el=g}onKeyPress(g){g.preventDefault()}}return I.\u0275fac=function(g){return new(g||I)(t.Y36(t.SBq))},I.\u0275dir=t.lG2({type:I,selectors:[["","IMSINPUTREADONLY",""]],hostBindings:function(g,f){1&g&&t.NdJ("keydown",function(d){return f.onKeyPress(d)})}}),I})()},99515:(L,C,n)=>{n.d(C,{L:()=>s});var t=n(64537),e=n(20092),I=n(7976),x=n(67311),g=n(88692);function f(_,l){if(1&_&&(t.TgZ(0,"option",15),t._uU(1),t.qZA()),2&_){const a=l.$implicit;t.s9C("value",a.ATTRIBUTEID),t.xp6(1),t.Oqu(a.AttributeValue)}}function m(_,l){if(1&_){const a=t.EpF();t.TgZ(0,"select",12),t.NdJ("change",function(){t.CHM(a);const E=t.oxw(2);return t.KtG(E.onAddressEnter())})("keydown.enter",function(){t.CHM(a);const E=t.oxw(),M=E.index,S=E.$implicit,u=t.oxw();return t.KtG(u.addshippingAddress(M,S.value))}),t.TgZ(1,"option",13),t._uU(2,"Select Parent"),t.qZA(),t.YNc(3,f,2,2,"option",14),t.qZA()}if(2&_){const a=t.oxw().index,T=t.oxw();t.MGl("id","list",a,""),t.xp6(3),t.Q6J("ngForOf",T.ParentList)}}function d(_,l){if(1&_){const a=t.EpF();t.ynx(0),t.TgZ(1,"input",16),t.NdJ("click",function(){t.CHM(a);const E=t.oxw().index,M=t.oxw();return t.KtG(M.isdefaultclick(E))}),t.qZA(),t.TgZ(2,"label",17),t._uU(3,"Make Default"),t.qZA(),t.BQk()}}function c(_,l){if(1&_){const a=t.EpF();t.TgZ(0,"a",18),t.NdJ("click",function(){t.CHM(a);const E=t.oxw(2);return t.KtG(E.addshippingAddress())}),t._UZ(1,"span",19),t.qZA()}}function o(_,l){if(1&_){const a=t.EpF();t.TgZ(0,"a",18),t.NdJ("click",function(){t.CHM(a);const E=t.oxw().index,M=t.oxw();return t.KtG(M.removeAddress(E))}),t._UZ(1,"span",20),t.qZA()}}function i(_,l){if(1&_){const a=t.EpF();t.TgZ(0,"div",6)(1,"input",7),t.NdJ("change",function(){t.CHM(a);const E=t.oxw();return t.KtG(E.onAddressEnter())})("keydown.enter",function(){const M=t.CHM(a).index,S=t.oxw();return t.KtG(S.focusTolist(M))})("click",function(){const M=t.CHM(a).index,S=t.oxw();return t.KtG(S.InputClick(M))}),t.qZA(),t.TgZ(2,"input",8),t.NdJ("change",function(){t.CHM(a);const E=t.oxw();return t.KtG(E.onAddressEnter())})("keydown.enter",function(){const E=t.CHM(a),M=E.index,S=E.$implicit,u=t.oxw();return t.KtG(u.addshippingAddress(M,S.value))})("click",function(){const M=t.CHM(a).index,S=t.oxw();return t.KtG(S.InputClick(M))}),t.qZA(),t.YNc(3,m,4,2,"select",9),t._uU(4,"2yr' "),t.YNc(5,d,4,0,"ng-container",10),t.YNc(6,c,2,0,"a",11),t.YNc(7,o,2,0,"a",11),t.qZA()}if(2&_){const a=l.$implicit,T=l.index,E=t.oxw();t.Q6J("formGroupName",T),t.xp6(1),t.s9C("placeholder",E.placeholder),t.MGl("id","input",T,""),t.Q6J("readonly",1==a.controls.IsUsedInTransaction.value),t.xp6(1),t.s9C("placeholder",E.placeholder),t.MGl("id","input",T,""),t.Q6J("readonly",1==a.controls.IsUsedInTransaction.value),t.xp6(1),t.Q6J("ngIf","add-attribute"===E.activeurlpath),t.xp6(2),t.Q6J("ngIf",1==E.showDefault),t.xp6(1),t.Q6J("ngIf","VIEW"!==E.mode),t.xp6(1),t.Q6J("ngIf","VIEW"!==E.mode)}}let s=(()=>{class _{constructor(a,T,E){this.fb=a,this._activatedRoute=T,this.alertService=E,this.multiInputLabelName="",this.height="",this.shipadress=new t.vpe,this.placeholder="",this.showDefault=!1,this.activerowIndex=0,this.activeurlpath=T.snapshot?.url[0]?.path}ngOnInit(){this.forminit(),this._activatedRoute.snapshot.params.ID&&this.ShippingArray&&(this.ShippingArray?.length>0&&this.shippingAddress?.removeAt(0),this.ShippingArray.forEach(a=>{console.log("value ma k aaucha",a),this.shippingAddress.push(new e.cw({ATTRIBUTE:new e.NI(a.ATTRIBUTE),IsUsedInTransaction:new e.NI(a.IsUsedInTransaction),Parent:new e.NI(a.Parent)})),"VIEW"==this.mode?this.form.get("shippingAddress").disable():this.form.get("shippingAddress").enable()}))}ngOnChanges(a){a.resetform&&!0===this.resetform&&(this.form.reset(),this.form.controls.shippingAddress.controls=[],this.addshippingAddress(0)),a.ShippingArray&&(this.ShippingArray?.length>0&&this.shippingAddress?.removeAt(0),this.ShippingArray.forEach(T=>{this.shippingAddress.push(new e.cw({NAME:new e.NI(T.NAME),IsUsedInTransaction:new e.NI(T.IsUsedInTransaction),ISDEFAULT:new e.NI(Number(T.ISDEFAULT))})),"view"===this.mode&&this.shippingAddress.disable()}))}forminit(){this.form=new e.cw({shippingAddress:new e.Oe([new e.cw({NAME:new e.NI(""),IsUsedInTransaction:new e.NI(Boolean),ISDEFAULT:new e.NI(0),ATTRIBUTE:new e.NI(""),Parent:new e.NI("")})])})}get shippingAddress(){return this.form?.get("shippingAddress")}addshippingAddress(a){console.log("ShippingAddress",this.shippingAddress,this.shippingAddress.value[this.activerowIndex],this.activerowIndex),""!==this.shippingAddress.value[this.activerowIndex].ATTRIBUTE?this.shippingAddress.length>1?this.duplicateFilter()?(this.nextLine(),this.nextFocus(a)):this.alertService.warning("Please enter unique data."):(this.nextLine(),this.nextFocus(a)):this.alertService.info("Fill the value!!!")}nextFocus(a){this.activerowIndex=a+1,setTimeout(()=>{document.getElementById("input"+this.activerowIndex)?.focus()},50)}duplicateFilter(){let a=this.shippingAddress.value;if(a?.length>0&&a)return!(a.filter(E=>E.ATTRIBUTE==this.shippingAddress.value[this.activerowIndex].ATTRIBUTE).length>1&&(this.shippingAddress.removeAt(this.activerowIndex),this.nextLine(),1))}focusTolist(a){this.activerowIndex=a,setTimeout(()=>{document.getElementById("list"+this.activerowIndex)?.focus()},50)}nextLine(){this.shippingAddress.push(new e.cw({NAME:new e.NI(""),IsUsedInTransaction:new e.NI(!1),ISDEFAULT:new e.NI(0),ATTRIBUTE:new e.NI(""),Parent:new e.NI("")}))}removeAddress(a){if(this.activerowIndex=a,1==this.shippingAddress.length)this.shippingAddress.reset();else{if(1==this.shippingAddress.value[this.activerowIndex].IsUsedInTransaction)return void this.alertService.info("Cannot remove...The Vehicle No is already used in transaction!!!");this.shippingAddress.removeAt(this.activerowIndex)}this.shipadress.emit(this.shippingAddress.value)}onAddressEnter(){this.shipadress.emit(this.shippingAddress.value)}heightChange(){return this.height}InputClick(a){console.log("inDEX",a),this.activerowIndex=a}isdefaultclick(a){this.shippingAddress.value.forEach(T=>{T.ISDEFAULT=0}),this.shippingAddress.value[a].ISDEFAULT=1,this.shipadress.emit(this.shippingAddress.value)}}return _.\u0275fac=function(a){return new(a||_)(t.Y36(e.qu),t.Y36(I.gz),t.Y36(x.c))},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-multi-input"]],inputs:{resetform:"resetform",multiInputLabelName:"multiInputLabelName",height:"height",ShippingArray:"ShippingArray",ParentList:"ParentList",placeholder:"placeholder",showDefault:"showDefault",mode:"mode"},outputs:{shipadress:"shipadress"},features:[t.TTD],decls:7,vars:5,consts:[[1,"form-group","row"],["id","labelname","for","labelname",1,"col-sm-3","form-control-label",2,"margin-left","-12px"],["id","inputMulti",1,"col-sm-7"],[3,"formGroup"],["formArrayName","shippingAddress",2,"overflow-y","scroll"],["style","display: flex;",3,"formGroupName",4,"ngFor","ngForOf"],[2,"display","flex",3,"formGroupName"],["type","text","formControlName","ATTRIBUTE",1,"form-control",3,"placeholder","id","readonly","change","keydown.enter","click"],["type","text","formControlName","NAME",1,"form-control",3,"placeholder","id","readonly","change","keydown.enter","click"],["class","form-control","formControlName","Parent","style","height: 4vh; font-size: 14px;width: 100%;",3,"id","change","keydown.enter",4,"ngIf"],[4,"ngIf"],[3,"click",4,"ngIf"],["formControlName","Parent",1,"form-control",2,"height","4vh","font-size","14px","width","100%",3,"id","change","keydown.enter"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","radio","formControlName","ISDEFAULT","name","ISDEFAULT","value","1",1,"",2,"margin-left","15px","width","15px",3,"click"],[2,"font-size","13px","font-style","italic","margin-left","5px"],[3,"click"],[1,"fa","fa-plus-circle","fa-lg","mr-1"],[1,"fa","fa-minus-circle","fa-lg"]],template:function(a,T){1&a&&(t.TgZ(0,"div",0)(1,"label",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"form",3)(5,"div",4),t.YNc(6,i,8,11,"div",5),t.qZA()()()()),2&a&&(t.xp6(2),t.hij(" ",T.multiInputLabelName,":"),t.xp6(2),t.Q6J("formGroup",T.form),t.xp6(1),t.Udp("max-height",T.heightChange()+"vh"),t.xp6(1),t.Q6J("ngForOf",null==T.shippingAddress?null:T.shippingAddress.controls))},dependencies:[g.sg,g.O5,e._Y,e.YN,e.Kr,e.Fj,e.EJ,e._,e.JJ,e.JL,e.sg,e.u,e.x0,e.CE],styles:[".card[_ngcontent-%COMP%]{margin:10px 30px 0 300px!important;width:60%}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{border:1px solid #cbcbcb;border-radius:3px;height:4vh;color:#000}label[_ngcontent-%COMP%]{height:25px;font-size:14px}.col-sm-7[_ngcontent-%COMP%]{padding-left:1px}.form-control[_ngcontent-%COMP%]{font-size:14px}.fa-plus-circle[_ngcontent-%COMP%]{color:#33a1a1;margin-top:4px}.fa-minus-circle[_ngcontent-%COMP%]{color:red;margin-top:4px}"]}),_})()},24029:(L,C,n)=>{n.d(C,{M:()=>x});var t=n(92340),e=n(64537),I=n(35732);let x=(()=>{class g{constructor(m){this.http=m,this.apiUrl=t.N.apiUrl}getProdListForSalesInvoice(m){return this.http.post(this.apiUrl+"/getProdListForSalesInvoice",m)}}return g.\u0275fac=function(m){return new(m||g)(e.LFG(I.eN))},g.\u0275prov=e.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},56552:(L,C,n)=>{n.r(C),n.d(C,{MasterSettingModule:()=>i});var t=n(88692),e=n(54536),I=n(69401),x=n(12640),g=n(31784),f=n(7976),m=n(65778),d=n(64537);const c=[{path:"",component:m.L},{path:"bulkprice",component:m.L}];let o=(()=>{class s{}return s.\u0275fac=function(l){return new(l||s)},s.\u0275mod=d.oAB({type:s}),s.\u0275inj=d.cJS({imports:[f.Bz.forChild(c),f.Bz]}),s})(),i=(()=>{class s{}return s.\u0275fac=function(l){return new(l||s)},s.\u0275mod=d.oAB({type:s}),s.\u0275inj=d.cJS({providers:[g.W],imports:[t.ez,o,I.m,x.Xd,e.Is]}),s})()},59866:(L,C,n)=>{n.d(C,{n:()=>f});var t=n(79765),e=n(64537),I=n(35732),x=n(67297),g=n(71180);let f=(()=>{class m{constructor(c,o,i){this.http=c,this.authService=o,this.state=i;const s=this.state.getGlobalSetting("apiUrl");s&&s.length>0&&(this.apiUrl=s)}getItemWiseBarcodeList(c){let o={status:"error",result:""},i=new t.xQ;return this.http.get(this.apiUrl+`/getItemWiseBarcodeList/${c}`).subscribe(s=>{i.next(s),i.unsubscribe()},s=>{o.status="error",o.result=s,i.next(o),i.unsubscribe()}),i}getItemWiseBatchLst(c,o){let i={status:"error",result:""},s=new t.xQ;return this.http.get(this.apiUrl+`/getItemWiseBatch/${c}/${o}`).subscribe(_=>{s.next(_),s.unsubscribe()},_=>{i.status="error",i.result=_,s.next(i),s.unsubscribe()}),s}}return m.\u0275fac=function(c){return new(c||m)(e.LFG(I.eN),e.LFG(x.e),e.LFG(g.q))},m.\u0275prov=e.Yz7({token:m,factory:m.\u0275fac}),m})()},5615:(L,C,n)=>{n.d(C,{u:()=>f});var t=n(79765),e=n(64537),I=n(35732),x=n(67297),g=n(71180);let f=(()=>{class m{constructor(c,o,i){this.http=c,this.authService=o,this.state=i;const s=this.state.getGlobalSetting("apiUrl");s&&s.length>0&&(this.apiUrl=s)}postCategoryGroup(c){const o={headers:this.authService.getRequestOption(),method:"post"};return this.http.post(`${this.apiUrl}/saveCategory`,c,o)}getCategoryGroup(){return this.http.get(this.apiUrl+"/getAllCategoryList")}getCategoryForEdit(c){let o={status:"error",result:""},i=new t.xQ,s={mode:"query",data:{MENUCAT:c}};const _={headers:this.authService.getRequestOption(),method:"post"};return this.http.post(this.apiUrl+"/getCategoryMaster",s,_).subscribe(l=>{i.next(l),i.unsubscribe()},l=>{o.status="error",o.result=l,i.next(o),i.unsubscribe()}),i}deleteCategory(c){let o={status:"error",result:""},i=new t.xQ,s={mode:"query",data:{MENUCAT:c}};const _={headers:this.authService.getRequestOption(),method:"post"};return this.http.post(this.apiUrl+"/deleteCategoryMaster",s,_).subscribe(l=>{i.next(l),i.unsubscribe()},l=>{o.status="error",o.result=l,i.next(o),i.unsubscribe()}),i}masterPostmethod_NEW(c,o){const i={headers:this.authService.getRequestOption(),method:"post"};return this.http.post(this.apiUrl+c,o,i).map(s=>s.json()).share()}getUserList(){return this.http.get(this.apiUrl+"/getUserList")}}return m.\u0275fac=function(c){return new(c||m)(e.LFG(I.eN),e.LFG(x.e),e.LFG(g.q))},m.\u0275prov=e.Yz7({token:m,factory:m.\u0275fac}),m})()},18285:(L,C,n)=>{n.d(C,{A:()=>g});var t=n(35732),e=n(64537),I=n(67297),x=n(71180);let g=(()=>{class f{constructor(d,c,o){this.http=d,this.authService=c,this.state=o;const i=this.state.getGlobalSetting("apiUrl");i&&i.length>0&&(this.apiUrl=i)}saveDocumentHeading(d){return this.http.post(`${this.apiUrl}/saveDocumentHeading`,d)}getDocumentHeadingList(){return this.http.get(this.apiUrl+"/getAllDocumentHeading")}deleteDocument(d){const c={headers:new t.WM({Authorization:`${this.authService.getAuth().token}`}),method:"post"};return this.http.post(`${this.apiUrl}/deleteFileUpload?Path=${d}`,c)}getDocumentForEdit(d){return this.http.get(this.apiUrl+`/getDocumentHeadingById?id=${d}`)}deleteDocHeading(d){return this.http.delete(this.apiUrl+`/deleteDocumentHeading?id=${d}`)}getImage(d,c){const o={headers:new t.WM({Authorization:`${this.authService.getAuth().token}`})};return this.http.get(`${this.apiUrl}/viewImage?Acid=${d}&DocumentHeading=${c}`,o)}uploadDocument(d){const c={headers:new t.WM({Authorization:`${this.authService.getAuth().token}`}),method:"post"};return this.http.post(`${this.apiUrl}/FileUpload`,d,c)}}return f.\u0275fac=function(d){return new(d||f)(e.LFG(t.eN),e.LFG(I.e),e.LFG(x.q))},f.\u0275prov=e.Yz7({token:f,factory:f.\u0275fac}),f})()},57453:(L,C,n)=>{n.d(C,{k:()=>m});var t=n(35732),e=n(79765),I=n(64537),x=n(7976),g=n(67297),f=n(71180);let m=(()=>{class d{constructor(o,i,s,_){this.http=o,this.activatedRoute=i,this.authService=s,this.state=_,this.userProfile={};const l=this.state.getGlobalSetting("apiUrl");l&&l.length>0&&(this.apiUrl=l),this.userProfile=s.getUserProfile()}deleteManualStockEntry(o,i){return this.http.post(this.apiUrl+`/deleteManualStockEntry?TNO=${o}&division=${i}`,"")}getEntryNumber(){return this.http.get(this.apiUrl+"/getManualStockID")}getBatchNumber(o,i){return this.http.get("close"==i?this.apiUrl+`/getManualStockBatchList?mode=${i}&division=${o}`:this.apiUrl+`/getManualStockBatchList?division=${o}`)}getRequestOption(){return new t.WM({"Content-type":"application/json",Authorization:this.authService.getAuth().token,"X-Requested-With":"XMLHttpRequest"})}saveManualStock(o){let i={status:"error",result:""},s=new e.xQ;return this.getRequestOption(),this.http.post(this.apiUrl+"/saveManualStockEntry",o).subscribe(l=>{s.next(l),s.unsubscribe()},l=>{i.status="error",i.result=l,s.next(i),s.unsubscribe()}),s}getManualStockListView(o,i){return this.http.get(`${this.apiUrl}/getManualStockListFroView?TNO=${o}&DIVISION=${i}`)}getWarehouseByDivision(o){let i={status:"error",result:""},s=new e.xQ;return this.http.get(`${this.apiUrl}/getWarehouseByDivision?DIVISION=${o}`).subscribe(_=>{s.next(_),s.unsubscribe()},_=>{i.status="error",i.result=_,s.next(i),s.unsubscribe()}),s}postBatchUnit(o){return this.http.post(this.apiUrl+"/saveManualStockBatch",o)}closeManualStockBatch(o){let i={status:"error",result:""},s=new e.xQ;return this.getRequestOption(),this.http.post(this.apiUrl+"/closeManualStockBatch",{BATCH:o}).subscribe(a=>{s.next(a),s.unsubscribe()},a=>{i.status="error",i.result=a,s.next(i),s.unsubscribe()}),s}loadManualBatchList(o,i){return this.http.get(this.apiUrl+"/loadManualBatchList?countDate="+o+"&division="+i)}mergeBatches(o){return this.http.post(this.apiUrl+"/saveMergedBatch",o)}viewMergedBatch(o,i){return this.http.get(this.apiUrl+"/viewMergedBatch?batch="+o+"&division="+i)}}return d.\u0275fac=function(o){return new(o||d)(I.LFG(t.eN),I.LFG(x.gz),I.LFG(g.e),I.LFG(f.q))},d.\u0275prov=I.Yz7({token:d,factory:d.\u0275fac}),d})()},79829:(L,C,n)=>{n.d(C,{P:()=>f});var t=n(79765),e=n(64537),I=n(35732),x=n(67297),g=n(71180);let f=(()=>{class m{constructor(c,o,i){this.http=c,this.authService=o,this.state=i;const s=this.state.getGlobalSetting("apiUrl");s&&s.length>0&&(this.apiUrl=s)}postUnitGroup(c){const o={headers:this.authService.getRequestOption(),method:"post"};return this.http.post(`${this.apiUrl}/saveUnit`,c,o)}getUnitGroup(){return this.http.get(this.apiUrl+"/getUnitList")}getUnitForEdit(c){let o={status:"error",result:""},i=new t.xQ,s={mode:"query",data:{UNITS:c}};const _={headers:this.authService.getRequestOption(),method:"post"};return this.http.post(this.apiUrl+"/getUnitMaster",s,_).subscribe(l=>{i.next(l),i.unsubscribe()},l=>{o.status="error",o.result=l,i.next(o),i.unsubscribe()}),i}deleteUnit(c,o){return this.http.post(this.apiUrl+"/deleteUnitMaster",{mode:"query",data:{UNITS:c,STOPDECIMAL:o}})}}return m.\u0275fac=function(c){return new(c||m)(e.LFG(I.eN),e.LFG(x.e),e.LFG(g.q))},m.\u0275prov=e.Yz7({token:m,factory:m.\u0275fac}),m})()},76018:(L,C,n)=>{n.d(C,{E:()=>E});var t=n(64537),e=n(42326),I=n(87584),x=n(67311),g=n(14970),f=n(24029),m=n(53074),d=n(88692),c=n(20092);function o(M,S){if(1&M&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&M){const u=S.$implicit;t.Q6J("ngValue",u.INITIAL),t.xp6(1),t.hij(" ",u.NAME," ")}}function i(M,S){if(1&M){const u=t.EpF();t.TgZ(0,"div",19)(1,"div",20)(2,"div"),t._uU(3,"Entry No:"),t.qZA(),t.TgZ(4,"div"),t._uU(5),t.qZA()(),t.TgZ(6,"div",20)(7,"label"),t._uU(8,"Requested By :"),t.qZA(),t.TgZ(9,"select",21),t.NdJ("ngModelChange",function(y){t.CHM(u);const O=t.oxw();return t.KtG(O._trnMainService.TrnMainObj.BILLTOADD=y)}),t.YNc(10,o,2,2,"option",22),t.qZA()()()}if(2&M){const u=t.oxw();t.xp6(5),t.hij(" ",u._trnMainService.TrnMainObj.REFBILL," "),t.xp6(4),t.Q6J("ngModel",u._trnMainService.TrnMainObj.BILLTOADD)("disabled",!0),t.xp6(1),t.Q6J("ngForOf",u.divisionlist)}}function s(M,S){1&M&&(t.TgZ(0,"th",13),t._uU(1," Requested QTY "),t.qZA())}function _(M,S){1&M&&(t.TgZ(0,"th",13),t._uU(1," Stock "),t.qZA())}function l(M,S){if(1&M&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&M){const u=t.oxw().$implicit;t.xp6(1),t.hij(" ",u.ALTERNATEQUANTIY," ")}}function a(M,S){if(1&M&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&M){const u=t.oxw().$implicit;t.xp6(1),t.hij(" ",u.STOCK," ")}}function T(M,S){if(1&M){const u=t.EpF();t.TgZ(0,"tr")(1,"td",9)(2,"input",24),t.NdJ("ngModelChange",function(y){const A=t.CHM(u).$implicit;return t.KtG(A.SELECTEDITEM=y)})("click",function(y){const O=t.CHM(u),A=O.$implicit,r=O.index,p=t.oxw();return t.KtG(p.isSelected(y,A,r))}),t.qZA(),t._uU(3),t.qZA(),t.TgZ(4,"td",10),t._uU(5),t.qZA(),t.TgZ(6,"td",11),t._uU(7),t.qZA(),t.TgZ(8,"td",10),t._uU(9),t.qZA(),t.YNc(10,l,2,1,"td",12),t.TgZ(11,"td",13)(12,"input",25),t.NdJ("ngModelChange",function(y){const A=t.CHM(u).$implicit,r=t.oxw();return t.KtG(A[r.selectedKey]=y)})("keydown.enter",function(){const O=t.CHM(u).$implicit,A=t.oxw();return t.KtG(A.onQuantityChangeEvent(O))})("change",function(){const O=t.CHM(u).$implicit,A=t.oxw();return t.KtG(A.onQuantityChangeEvent(O))}),t.qZA()(),t.YNc(13,a,2,1,"td",12),t.qZA()}if(2&M){const u=S.$implicit,h=S.index,y=t.oxw();t.xp6(2),t.Q6J("checked",1==u.SELECTEDITEM)("ngModel",u.SELECTEDITEM),t.xp6(1),t.hij(" ",h+1," "),t.xp6(2),t.hij(" ",y.showQuantityChangePopup?u.BC:u.MENUCODE," "),t.xp6(2),t.Oqu(u.ITEMDESC),t.xp6(2),t.Oqu(u.ALTUNIT),t.xp6(1),t.Q6J("ngIf",8===y._trnMainService.TrnMainObj.VoucherType),t.xp6(2),t.MGl("id","inputqty",h,""),t.Q6J("ngModel",u[y.selectedKey]),t.xp6(1),t.Q6J("ngIf",8===y._trnMainService.TrnMainObj.VoucherType)}}let E=(()=>{class M{constructor(u,h,y,O,A){this._trnMainService=u,this.alertService=h,this.loadingService=y,this.salesService=O,this.masterService=A,this.showProdListInTIfromDCOutput=new t.vpe,this.showQuantityChangePopupOutput=new t.vpe}ngOnInit(){this.masterService.getAllDivisions().subscribe(u=>{this.divisionlist=u}),this.selectedKey=this._trnMainService.TrnMainObj.VoucherType===e.Km.BranchTransferOut?"issueQuantity":"ALTERNATEQUANTIY",this._trnMainService.TrnMainObj.VoucherType===e.Km.TaxInvoice?(this.title="Quantity Change Popup",this.quantityHeader="Quantity"):this._trnMainService.TrnMainObj.VoucherType===e.Km.BranchTransferOut&&(this.title="Requested Product List(Request Vs Issue)",this.quantityHeader="Issue QTY")}onQuantityChange(u){if(this.showProdListInTIfromDC)return"apply"===u&&this.addInProd(),void this.showProdListInTIfromDCOutput.emit(!1);if("apply"==u){this._trnMainService.requisitionFromNotification=!1;const h=this._trnMainService.TrnMainObj.ViewList.filter(O=>1==O.SELECTEDITEM);if(0===h.length)return void this.alertService.error("No item is selected. Please select at least one item.");let y=this.makeProdObj(h);if(y.ProdList?.length>0){if(!y.ProdList.find(O=>O.Quantity>0))return void this.alertService.info("Invalid Quantity found in grid");y.ProdList=y.ProdList.filter(O=>O.Quantity>0)}this.loadingService.show("Loading data..."),this.salesService.getProdListForSalesInvoice(y).subscribe(O=>{"ok"===O.status&&(this.loadingService.hide(),this._trnMainService.TrnMainObj.ProdList=O.result,this._trnMainService.TrnMainObj.ProdList.forEach(A=>A.rowMode="EDIT"),this._trnMainService.requisitionFromNotification=!0,this._trnMainService.TrnMainObj.ViewList=[],null!=this._trnMainService.TrnMainObj.ProdList[0].MENUCODE&&this._trnMainService.ReCalculateBillWithNormal())},O=>{this.loadingService.hide()})}"close"==u&&(this._trnMainService.disableCustomerInputField=!1),this.showQuantityChangePopupOutput.emit(!1)}isSelected(u,h,y){const O=this._trnMainService.TrnMainObj.VoucherType===e.Km.BranchTransferOut?"issueQuantity":"ALTERNATEQUANTIY";h.SELECTEDITEM=u.target.checked?1:0,this._trnMainService.TrnMainObj.VoucherType===e.Km.BranchTransferOut&&(0==h.SELECTEDITEM&&(h[O]=0),1==h.SELECTEDITEM&&(h[O]=h.REALQTY_IN>h.STOCK||h[O]==h.STOCK?h.STOCK:h.REALQTY_IN)),document.getElementById("inputqty"+y).focus()}onQuantityChangeEvent(u){const h=this._trnMainService.TrnMainObj.VoucherType===e.Km.BranchTransferOut?"issueQuantity":"ALTERNATEQUANTIY";return this._trnMainService.TrnMainObj.VoucherType===e.Km.BranchTransferOut&&u[h]>u.ALTERNATEQUANTIY?(this.alertService.info(`Entered quantity is greater than requested quantity: ${u.ALTERNATEQUANTIY}!`),void(u[h]=u.ALTERNATEQUANTIY>u.STOCK?u.STOCK:u.ALTERNATEQUANTIY)):9!=u.PTYPE&&u[h]>u.STOCK?(this.alertService.info(`Entered quantity is greater than the available stock: ${u.STOCK}!`),void(u[h]=u.STOCK)):void 0}addInProd(){this._trnMainService.TrnMainObj.ProdList=this._trnMainService.TrnMainObj.ViewList.filter(u=>1==u.SELECTEDITEM)}makeProdObj(u){return{ProdList:u.map(h=>({MCODE:h.MCODE,Quantity:this._trnMainService.TrnMainObj.VoucherType===e.Km.BranchTransferOut?h.issueQuantity:h.ALTERNATEQUANTIY,Unit:h.ALTUNIT,BaseUnit:h.BASEUNIT,AltUnit:h.ALTUNIT,AltConfactor:h.ALTCONFACTOR,ALTRATE:h.ALTRATE,RATE:h.RATE,STOCK:h.STOCK})),TRNAC:this._trnMainService.TrnMainObj.TRNAC,BILLTYPE:this._trnMainService.TrnMainObj.INVOICETYPE,soVchrno:this._trnMainService.TrnMainObj.REFORDBILL}}}return M.\u0275fac=function(u){return new(u||M)(t.Y36(I.p),t.Y36(x.c),t.Y36(g.V),t.Y36(f.M),t.Y36(m.P))},M.\u0275cmp=t.Xpm({type:M,selectors:[["app-quantity-change-popup"]],inputs:{showProdListInTIfromDC:["showProdList","showProdListInTIfromDC"],showQuantityChangePopup:["show","showQuantityChangePopup"]},outputs:{showProdListInTIfromDCOutput:"showProdListChange",showQuantityChangePopupOutput:"showChange"},decls:33,vars:6,consts:[[1,"host","transfer-out"],[1,"card"],[1,"card-header",2,"background-color","lightsteelblue","padding","0.5rem 1.25rem"],[1,"row"],[2,"font-size","1.1rem"],["class","flex padding",4,"ngIf"],[1,"row",2,"margin-top","1rem","width","95%"],[1,"col-lg-12","mx-4",2,"width","100%","height","50vh","overflow-y","scroll"],[1,"table","table-sm","table-striped"],["scope","col",2,"width","10%"],["scope","col",2,"width","15%"],["scope","col",1,"desc"],["scope","col","style","width: 35%",4,"ngIf"],["scope","col",2,"width","35%"],[4,"ngFor","ngForOf"],[1,"col-md-12",2,"display","flex","align-items","flex-end","justify-content","center"],[1,"button-group","my-2"],["type","button",1,"btn","btn-info",2,"margin-right","2px","width","75px","font-size","12px",3,"click"],["type","button","title","Cancel",1,"btn","btn-info",2,"margin-right","2px","width","75px","font-size","12px",3,"click"],[1,"flex","padding"],[1,"flex","gap"],[3,"ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["type","checkbox",1,"isSelect",3,"checked","ngModel","ngModelChange","click"],["type","number",3,"id","ngModel","ngModelChange","keydown.enter","change"]],template:function(u,h){1&u&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h6",4),t._uU(5),t.qZA()()(),t.YNc(6,i,11,4,"div",5),t.TgZ(7,"div",6)(8,"div",7)(9,"table",8)(10,"thead")(11,"tr")(12,"th",9),t._uU(13,"S.No"),t.qZA(),t.TgZ(14,"th",10),t._uU(15,"Code"),t.qZA(),t.TgZ(16,"th",11),t._uU(17,"Description"),t.qZA(),t.TgZ(18,"th",10),t._uU(19,"Unit"),t.qZA(),t.YNc(20,s,2,0,"th",12),t.TgZ(21,"th",13),t._uU(22),t.qZA(),t.YNc(23,_,2,0,"th",12),t.qZA()(),t.TgZ(24,"tbody"),t.YNc(25,T,14,10,"tr",14),t.qZA()()()(),t.TgZ(26,"div",3)(27,"div",15)(28,"div",16)(29,"button",17),t.NdJ("click",function(){return h.onQuantityChange("apply")}),t._uU(30," APPLY "),t.qZA(),t.TgZ(31,"button",18),t.NdJ("click",function(){return h.onQuantityChange("close")}),t._uU(32," CANCEL "),t.qZA()()()()()()),2&u&&(t.xp6(5),t.Oqu(h.title),t.xp6(1),t.Q6J("ngIf",8===h._trnMainService.TrnMainObj.VoucherType),t.xp6(14),t.Q6J("ngIf",8===h._trnMainService.TrnMainObj.VoucherType),t.xp6(2),t.Oqu(h.quantityHeader),t.xp6(1),t.Q6J("ngIf",8===h._trnMainService.TrnMainObj.VoucherType),t.xp6(2),t.Q6J("ngForOf",h._trnMainService.TrnMainObj.ViewList))},dependencies:[d.sg,d.O5,c.YN,c.Kr,c.Fj,c.wV,c.Wl,c.EJ,c.JJ,c.On],styles:[".host[_ngcontent-%COMP%]{display:block;position:fixed!important;transform:translate(-50px,-50px);background:#ffffff;z-index:99999;width:55%;top:25%;left:26%}.transfer-out[_ngcontent-%COMP%]{width:82%;left:15%}.desc-classic[_ngcontent-%COMP%]{width:60%}.desc[_ngcontent-%COMP%]{width:40%}.flex[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.flex[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:auto}.gap[_ngcontent-%COMP%]{gap:10px}.padding[_ngcontent-%COMP%]{padding:12px}"]}),M})()},64548:(L,C,n)=>{n.d(C,{x:()=>x});var t=n(88692),e=n(20092),I=n(64537);let x=(()=>{class g{}return g.\u0275fac=function(m){return new(m||g)},g.\u0275mod=I.oAB({type:g}),g.\u0275inj=I.cJS({imports:[t.ez,e.u5]}),g})()},24315:(L,C,n)=>{n.d(C,{Jo:()=>a,o4:()=>T,q0:()=>l});var t=n(64537),e=n(20092),I=n(54395),x=n(88692);const S=class{constructor(){}};let g=S;v(g,"\u0275fac",function(p){return new(p||S)}),v(g,"\u0275prov",t.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}));const u=class{constructor(){}toFormGroup(r){const p={};return console.log({CustomFieldService_cFields:r}),r.forEach(P=>{p[P.FieldName]=new e.NI(P.value||"");var D=[];P.IsRequired&&D.push(e.kI.required),P.MaxLength>0&&D.push(e.kI.maxLength(P.MaxLength)),P.MinLength>0&&D.push(e.kI.minLength(P.MinLength)),P.Regex&&D.push(e.kI.pattern(P.Regex)),D&&D.length>0&&p[P.FieldName].setValidators(D)}),new e.cw(p)}};let f=u;function m(A,r){if(1&A&&t._UZ(0,"input",6),2&A){const p=t.oxw();t.Q6J("formControlName",p.customField.FieldName)("id",p.customField.FieldName)("type",p.customField.DataType)}}function d(A,r){if(1&A&&(t.TgZ(0,"option",10),t._uU(1),t.qZA()),2&A){const p=r.$implicit;t.Q6J("value",p.key),t.xp6(1),t.Oqu(p.value)}}function c(A,r){if(1&A&&(t.TgZ(0,"select",7),t._UZ(1,"option",8),t.YNc(2,d,2,2,"option",9),t.qZA()),2&A){const p=t.oxw();t.Q6J("id",p.customField.FieldName)("formControlName",p.customField.FieldName),t.xp6(2),t.Q6J("ngForOf",p.customField.options)}}function o(A,r){if(1&A&&(t.TgZ(0,"div",12),t._uU(1),t.qZA()),2&A){const p=r.$implicit;t.xp6(1),t.Oqu(p)}}function i(A,r){if(1&A&&(t.TgZ(0,"div"),t.YNc(1,o,2,1,"div",11),t.qZA()),2&A){const p=t.oxw();t.xp6(1),t.Q6J("ngForOf",p.error)}}v(f,"\u0275fac",function(p){return new(p||u)}),v(f,"\u0275prov",t.Yz7({token:u,factory:u.\u0275fac}));const h=class{constructor(){v(this,"customField"),v(this,"form")}get isValid(){return this.form?.controls[this.customField.FieldName].valid}get error(){var r=[],p=this.form?.controls[this.customField.FieldName].errors;return p?.required&&r.push("Required"),p?.pattern&&r.push("Pattern Mismatch"),p?.maxlength&&r.push("Max Length exceeded"),r}};let s=h;function _(A,r){if(1&A&&(t.TgZ(0,"div"),t._UZ(1,"ims-custom-field",4),t.qZA()),2&A){const p=r.$implicit,P=t.oxw();t.xp6(1),t.Q6J("customField",p)("form",P.form)}}v(s,"\u0275fac",function(p){return new(p||h)}),v(s,"\u0275cmp",t.Xpm({type:h,selectors:[["ims-custom-field"]],inputs:{customField:"customField",form:"form"},decls:8,vars:7,consts:[[1,"row",3,"formGroup"],[1,"col-6","col-md-5","col-lg-4"],[1,"col-6","col-md-7","col-lg-8",3,"ngSwitch"],["class","ims-custom-input",3,"formControlName","id","type",4,"ngSwitchCase"],["class","form-control ims-custom-select",3,"id","formControlName",4,"ngSwitchCase"],[4,"ngIf"],[1,"ims-custom-input",3,"formControlName","id","type"],[1,"form-control","ims-custom-select",3,"id","formControlName"],["selected","true",2,"display","none"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","errorMessage",4,"ngFor","ngForOf"],[1,"errorMessage"]],template:function(p,P){1&p&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label"),t._uU(3),t.qZA()(),t.TgZ(4,"div",2),t.YNc(5,m,1,3,"input",3),t.YNc(6,c,3,3,"select",4),t.YNc(7,i,2,1,"div",5),t.qZA()()),2&p&&(t.Q6J("formGroup",P.form),t.xp6(2),t.uIk("for",P.customField.FieldName),t.xp6(1),t.Oqu(P.customField.FieldDesc),t.xp6(1),t.Q6J("ngSwitch",P.customField.IsList),t.xp6(1),t.Q6J("ngSwitchCase",!1),t.xp6(1),t.Q6J("ngSwitchCase",!0),t.xp6(1),t.Q6J("ngIf",!P.isValid))},dependencies:[e.YN,e.Kr,e.Fj,e.EJ,e.JJ,e.JL,e.sg,e.u,x.sg,x.O5,x.RF,x.n9],styles:[".errorMessage[_ngcontent-%COMP%] {\n    color: red;\n    font-size: xx-small;\n    margin: 0px;\n  }"]}));const y=class{constructor(r){v(this,"cfService"),v(this,"customFields",[]),v(this,"service"),v(this,"form"),v(this,"payLoad",""),this.cfService=r}ngOnInit(){}onSubmit(){console.log(this.form),this.customFields?.forEach(r=>{r.value=this.form.value[r.FieldName],console.log("element",r.value)}),this.payLoad=JSON.stringify(this.getValues("1")),console.log("payload",this.payLoad),console.log("CustomFields",this.customFields)}setForm(r){this.customFields=r,this.form=this.cfService.toFormGroup(this.customFields),this.customFields&&this.customFields.forEach(p=>{if(!0===p.IsList&&0===p.options.length){var P=this.form.get(p.ParentField),D=this.form.get(p.FieldName);P&&(P.valueChanges.pipe((0,I.b)(500)).subscribe(U=>{U?this.service.getDropDownOptions({ListSql:p.ListSql,ParentField:U}).subscribe(F=>{p.options=F.result,D&&0==p.options.filter(b=>b.key==p.value).length&&D.patchValue(void 0)}):D&&D.patchValue(void 0)}),P.updateValueAndValidity({onlySelf:!0,emitEvent:!0}))}})}onchange(){this.setForm(this.customFields)}getValues(r){console.log("form",this.form);var p=[];return this.customFields?.forEach(P=>{p.push({CustomFieldId:P.ID,Value:this.form.value[P.FieldName],FieldName:P.FieldName,EntityId:r})}),p}};let l=y;v(l,"\u0275fac",function(p){return new(p||y)(t.Y36(f))}),v(l,"\u0275cmp",t.Xpm({type:y,selectors:[["ims-custom-form"]],inputs:{customFields:"customFields",service:"service"},features:[t._Bn([f])],decls:4,vars:2,consts:[[2,"height","120px","overflow-y","auto","overflow-x","hidden","border","1px solid lightgrey","padding","10px 0"],[1,"form-horizontal","form-material",3,"formGroup","ngSubmit"],[1,"form-group","row"],[4,"ngFor","ngForOf"],[3,"customField","form"]],template:function(p,P){1&p&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return P.onSubmit()}),t.TgZ(2,"div",2),t.YNc(3,_,2,2,"div",3),t.qZA()()()),2&p&&(t.xp6(1),t.Q6J("formGroup",P.form),t.xp6(2),t.Q6J("ngForOf",P.customFields))},dependencies:[e._Y,e.JL,e.sg,x.sg,s],encapsulation:2}));const O=class{};let a=O;v(a,"\u0275fac",function(p){return new(p||O)}),v(a,"\u0275mod",t.oAB({type:O})),v(a,"\u0275inj",t.cJS({imports:[e.UX,x.ez]}));class T{constructor(r={}){v(this,"ID"),v(this,"value"),v(this,"FieldName"),v(this,"FieldDesc"),v(this,"IsRequired"),v(this,"order"),v(this,"IsList"),v(this,"DataType"),v(this,"options"),v(this,"Regex"),v(this,"MinLength"),v(this,"MaxLength"),v(this,"ParentField"),v(this,"ListSql"),this.ID=r.ID||0,this.value=r.value,this.FieldName=r.FieldName||"",this.FieldDesc=r.label||"",this.IsRequired=!!r.required,this.order=void 0===r.order?1:r.order,this.IsList=!!r.isList,this.DataType=r.type||"",this.options=r.options||[],this.Regex=r.regex||"",this.MinLength=r.minLength||0,this.MaxLength=r.maxLength||0,this.ParentField=r.ParentField||"",this.ListSql=r.ListSql||""}deserialize(r){return this.value=r.value,this.FieldName=r.FieldName||"",this.FieldDesc=r.FieldDesc||r.FieldName||"",this.IsRequired=!!r.IsRequired,this.order=void 0===r.order?1:r.order,this.IsList=!!r.IsList,this.DataType=r.DataType||"",this.options=r.options||[],this.Regex=r.Regex||"",this.MinLength=r.MinLength||0,this.MaxLength=r.MaxLength||0,this.ID=r.ID||0,this.ParentField=r.ParentField||"",this.ListSql=r.ListSql||"",this}}}}]);