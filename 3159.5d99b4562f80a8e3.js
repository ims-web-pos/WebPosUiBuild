"use strict";(self.webpackChunkimserp=self.webpackChunkimserp||[]).push([[3159],{33159:(Tn,Z,_)=>{_.d(Z,{Z:()=>cn});var S=_(88692),e=_(64537),s=_(42326),w=_(32711),R=_(64752),L=_(27009);let N=(()=>{class o{constructor(t){this.template=t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.Rgc))},o.\u0275dir=e.lG2({type:o,selectors:[["","appCtrlTemplate",""]],inputs:{name:["appCtrlTemplate","name"]}}),o})();var O=_(53074),B=_(87584),f=_(7976),b=_(54536),Q=_(14970),H=_(67297),F=_(7782),J=_(74263),E=_(67311),v=_(94534),W=_(11192),C=_(60694),j=_(48063),Y=_(33612),q=_(8630),$=_(28698),X=_(94619),z=_(87454),ee=_(88762),h=_(20092),te=_(37051),k=_(64657),ne=_(71800),M=_(77398);let ie=(()=>{class o{constructor(t,n,i,r,a,l){this.alertService=t,this.masterService=n,this.productEntryService=i,this.arouter=r,this._trnMainService=a,this.genericProductService=l,this.ItemkeyEvent=new e.vpe,this.dblClickPopupItem=new e.vpe,this.activerowIndex=0,this.showBarCodeDetail=!1,this.loadFromBarcode=!1,this.showStockedQuantityOnly=0,this.userSetting=this._trnMainService.userSetting,this.userProfile=this._trnMainService.userProfile,this.activeurlpath=r.snapshot.url[0].path,this._trnMainService=i._trnMainService,this._trnMainService.activeurlpath=this.genericProductService.activeurlpath}disablePipe(t,n){let i="";return t.disablePipe&&(i=t.disablePipe(t,n)),i}ItemBarCodeClick(t,n){if(this.eventparam=n,this.activerowIndex=t,this._trnMainService.TrnMainObj.VoucherType!=s.Km.ProductionEntry||this._trnMainService.TrnMainObj.BILLTO){if(!this._trnMainService.TrnMainObj.ProdList[t].BC&&(this._trnMainService.TrnMainObj.VoucherType===s.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType===s.Km.GoodsReceived)&&"NEW"!==this._trnMainService.TrnMainObj.Mode.toUpperCase())return this.showBarCodeDetail=!0,this.productWiseBarCode=this._trnMainService.TrnMainObj.ProdList[t].ProductDetails,this._trnMainService.TrnMainObj.ProdList[t].visible=!0,this.productEntryService.getProductColorMcodeWise(),!1;if(this._trnMainService.TrnMainObj.VoucherType===s.Km.DebitNote&&"PI"===this._trnMainService.TrnMainObj.REFBILL.substring(0,2).toUpperCase())return this.showBarCodeDetail=!0,this.productWiseBarCode=this._trnMainService.TrnMainObj.ProdList[t].ProductDetails,this._trnMainService.TrnMainObj.ProdList[t].visible=!0,this.productEntryService.getProductColorMcodeWise(),!1;if(("VIEW"===this._trnMainService.TrnMainObj.Mode||"EDIT"===this._trnMainService.TrnMainObj.Mode)&&6===this._trnMainService.TrnMainObj.ProdList[t].Ptype&&(this.productEntryService.getProductColorMcodeWise(),this.showBarCodeDetail=!0),void 0===this._trnMainService.TrnMainObj.ProdList[t].BC||null==this._trnMainService.TrnMainObj.ProdList[t].BC||""==this._trnMainService.TrnMainObj.ProdList[t].BC)1==this._trnMainService.TrnMainObj.ProdList[t].isBarcodeOfPtypeSix&&(this._trnMainService.TrnMainObj.ProdList[t].isBarcodeOfPtypeSix=!1,setTimeout(()=>{console.log("k1"),this._trnMainService.TrnMainObj.ProdList[t]={}},0)),null!=document.getElementById("itemDesc"+t)&&setTimeout(()=>{document.getElementById("itemDesc"+t).focus()},50);else{if(this._trnMainService.hideProductDescriptionPopUp=!0,this._trnMainService.TrnMainObj.VoucherType!==s.Km.CreditNote&&this._trnMainService.TrnMainObj.VoucherType!==s.Km.SalesReturn){let i=this._trnMainService.TrnMainObj.ProdList.filter(a=>a.BC==this._trnMainService.TrnMainObj.ProdList[t].BC);if(null!=i&&i?.length>1)return this.alertService.info(`Duplicate barcode:${this._trnMainService.TrnMainObj.ProdList[t].BC} is detected.`),void this.alertService.emitShowHideSubject.subscribe(a=>{setTimeout(()=>{document.getElementById("barcode"+t).focus()},0)});this._trnMainService.TrnMainObj.ProdList.filter(a=>6==a.PTYPE).forEach(a=>a.ProductDetails?.forEach(l=>{if(l.IEMI1==this._trnMainService.TrnMainObj.ProdList[this.activerowIndex].BC)return this.alertService.info(`Duplicte IMEI1 :${l.IEMI1} is found on Bulk Entry Grid`),this._trnMainService.TrnMainObj.ProdList[this.activerowIndex].BC=null,!1}))}this._trnMainService.TrnMainObj.ProdList[t].BC&&(this._trnMainService.CheckIfSalesReturn()?this._trnMainService.checkBarcodeForSalesReturn(this._trnMainService.TrnMainObj.ProdList[t].BC,this._trnMainService.TrnMainObj.REFBILL).subscribe(i=>{"ok"==i.status?(this._trnMainService.ReturnStockObj=i.result,this.loadBarcodeWiseProductList(i.result.TotalStock)):(this.alertService.info(i.result),this.alertService.emitShowHideSubject.subscribe(r=>{setTimeout(()=>{document.getElementById("barcode"+t).focus()},0)}))},i=>{this.alertService.info(i.result)}):this._trnMainService.checkBarcode(this._trnMainService.TrnMainObj.ProdList[t].BC,this._trnMainService.TrnMainObj.MWAREHOUSE).subscribe(i=>{"ok"==i.status?this.loadBarcodeWiseProductList():this.alertService.info(i.result)},i=>{this.alertService.info(i.result)}))}}else this.alertService.info("Please select Production warehouse")}loadBarcodeWiseProductList(t=0){this.loadFromBarcode=!1;let i=[];this.masterService.masterGetmethod(`/getMenuitemBarCodeWise?showstockqty=${this.showStockedQuantityOnly}&prefix=${this._trnMainService.TrnMainObj.VoucherPrefix}&barcode=${this._trnMainService.TrnMainObj.ProdList[this.activerowIndex].BC}&warehouse=${this._trnMainService.userProfile.userWarehouse}`).subscribe(a=>{if("ok"===a.status)if(i=a.result.data,0===i.length)this.alertService.info("Product is out of Stock ");else if(1===i.length){this.loadFromBarcode=!0;var l=i[0];if(this._trnMainService.CheckIfSalesReturn()){l.STOCK=t;var d=0;for(let y of this._trnMainService.TrnMainObj.ProdList)y.BC==this._trnMainService.TrnMainObj.ProdList[this.activerowIndex].BC&&(d+=y.ALTERNATEQUANTIY);if(l.STOCK<d)return void this.alertService.warning("Quantity exceed the actual Barcode stock!")}if(this.dblClickPopupItem.emit(l),this.loadFromBarcode=!1,this._trnMainService.TrnMainObj.ProdList[this.activerowIndex].VARIANTDESCA="",l.barcodeDetails){var u=JSON.parse(l.barcodeDetails);for(var T in console.log("varDetail",u),u)this._trnMainService.TrnMainObj.ProdList[this.activerowIndex].VARIANTDESCA+=`<b>${T}</b>:${u[T]} &nbsp;`}}else this.ItemkeyEvent.emit(this.eventparam);else this.alertService.info(a.result.error)})}ItemBarCodeFoucusOut(t,n){this.productEntryService.barcodeDisplay=!1}ItemBarCodeClickFocusIn(t,n){this.productEntryService.barcodeDisplay=!0}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(E.c),e.Y36(O.P),e.Y36(v.w),e.Y36(f.gz),e.Y36(B.p),e.Y36(v.w))},o.\u0275cmp=e.Xpm({type:o,selectors:[["barcodeBox"]],inputs:{i:["index","i"],col:"col",trnprod:"trnprod"},outputs:{ItemkeyEvent:"ItemkeyEvent",dblClickPopupItem:"dblClickPopupItem"},decls:2,vars:8,consts:[["type","text",2,"width","100%",3,"id","ngModel","disabled","ngModelChange","keydown.Tab","change","keydown.enter","focusout","focus"]],template:function(t,n){1&t&&(e.TgZ(0,"input",0),e.NdJ("ngModelChange",function(r){return n.trnprod[n.col.field]=r})("keydown.Tab",function(r){return n.ItemBarCodeClick(n.i,r)})("change",function(r){return n.ItemBarCodeClick(n.i,r)})("keydown.enter",function(r){return n.ItemBarCodeClick(n.i,r)})("focusout",function(r){return n.ItemBarCodeFoucusOut(n.i,r)})("focus",function(r){return n.ItemBarCodeClickFocusIn(n.i,r)}),e.ALo(1,"disable"),e.qZA()),2&t&&(e.Q6J("id",n.col.field+n.i)("ngModel",n.trnprod[n.col.field])("disabled",e.Dn7(1,4,n.disablePipe(n.col,n.i),n.i,n._trnMainService.callPipe)),e.uIk("disabled",!0))},dependencies:[h.Fj,h.JJ,h.On,M.e],encapsulation:2}),o})();function re(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"input",3),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onChangeAllocation(i))}),e.qZA()}}let oe=(()=>{class o{constructor(t,n,i,r,a,l){this.alertService=t,this.genericProductService=n,this.responseMsgService=i,this.arouter=r,this.dialog=a,this.productHelper=l,this.showGenericGrid=new e.vpe,this.dialogueOpen=new e.vpe,this._trnMainService=n._trnMainService,this.prodlist=this._trnMainService.TrnMainObj.ProdList,this._trnMainService.activeurlpath=this.genericProductService.activeurlpath}onClicked(){this._trnMainService.inputCode=!0}ngOnInit(){this.showAllocationCheckBox$=this.productHelper.forceAllocation$}disablePipe(t,n){var i="";return t.disablePipe&&(i=t.disablePipe(t,n)),i}checkDiscount(){if(this._trnMainService.TrnMainObj.VoucherType===s.Km.Purchase&&(this._trnMainService.nullToZeroConverter(this._trnMainService.TrnMainObj.TOTALFLATDISCOUNT)>0||this._trnMainService.nullToZeroConverter(this._trnMainService.TrnMainObj.DCRATE)>0))return this.alertService.info("Flat Discount is already given could not add new product"),!0}checkSelfBilling(){return!("self-billing"!==this._trnMainService.activeurlpath||(""==this._trnMainService.TrnMainObj.MWAREHOUSE?(this.alertService.warning("Please select an unsalable warehouse!"),this.alertService.emitShowHideSubject.subscribe(t=>{this.genericProductService.masterService.ShowMore=!0,setTimeout(()=>{document.getElementById("warehouseId").focus()},100)}),0):""==this._trnMainService.TrnMainObj.TRNACName||null==this._trnMainService.TrnMainObj.TRNACName?(this.alertService.warning("Please select an Account Name!"),0):""==this._trnMainService.TrnMainObj.TRNACName||null==this._trnMainService.TrnMainObj.TRNACName?(this.alertService.warning("Please select an Account Before self billing!"),0):""==this._trnMainService.TrnMainObj.REMARKS||null==this._trnMainService.TrnMainObj.REMARKS?(this.alertService.warning("Remarks is mandatory!"),this.alertService.emitShowHideSubject.subscribe(t=>{this.genericProductService.masterService.ShowMore=!0,setTimeout(()=>{document.getElementById("remarksid").focus()},100)}),0):(console.log("Check Tna",this._trnMainService.TrnMainObj.TRNACName,this._trnMainService.TrnMainObj.REMARKS),this.genericProductService.showStockedQuantityOnly=0,0)))}onChangeAllocation(t){const n={showOrHideAllocationPopup:!1,index:this.i};t.target.checked?(console.log("Hello"),n.showOrHideAllocationPopup=!0,this.productHelper.showOrHideAllocationPopup(n)):this.productHelper.showOrHideAllocationPopup(n)}checkBarcodeSetting(){this._trnMainService.TrnMainObj.VoucherType===s.Km.PerformaSalesInvoice||this._trnMainService.TrnMainObj.VoucherType===s.Km.SalesOrder||this._trnMainService.TrnMainObj.VoucherType===s.Km.Sales||this._trnMainService.TrnMainObj.VoucherType===s.Km.TaxInvoice||this._trnMainService.TrnMainObj.VoucherType===s.Km.StockIssue||this._trnMainService.TrnMainObj.VoucherType===s.Km.Repack||this._trnMainService.TrnMainObj.VoucherType===s.Km.Quotation?(this.genericProductService.showStockedQuantityOnly=1,this.genericProductService.loadBarCodeWiseProduct=this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].BARCODE??""):this.genericProductService.showStockedQuantityOnly=0}checkRefOrderBill(){if(1==this.genericProductService.genericProductEntrySetting.checkRefOrderBill){let t=this.responseMsgService.getProperMessageForRefBill(this._trnMainService.TrnMainObj);return this.alertService.info(t),!1}if(this._trnMainService.TrnMainObj.VoucherType===s.Km.CreditNote&&1!==this._trnMainService.TrnMainObj.DONONSALEABLERETURN&&0==this.genericProductService.userSetting.ENABLEMANUALSALESRETURN||this._trnMainService.TrnMainObj.VoucherType===s.Km.DebitNote&&1===this.genericProductService.userSetting.REFBILLCOMPULSORINDNOTE||this._trnMainService.TrnMainObj.VoucherType===s.Km.Purchase&&0!==this.genericProductService.userSetting.PODELIVERYMODE&&"purchase-import"!==this._trnMainService.activeurlpath||this._trnMainService.TrnMainObj.VoucherType===s.Km.GoodsReceived&&0!==this.genericProductService.userSetting.PODELIVERYMODE||this._trnMainService.TrnMainObj.VoucherType===s.Km.SalesOrder&&this._trnMainService.TrnMainObj.REFORDBILL&&0!==this.genericProductService.userSetting.ENABLE_QUOTATTION_INSO||this._trnMainService.TrnMainObj.VoucherType===s.Km.TaxInvoice&&0!==this.genericProductService.userSetting.ENABLE_SOINTI&&1==this.genericProductService.userSetting.SOREFERENCE_REQUIRED||this._trnMainService.TrnMainObj.VoucherType===s.Km.BranchTransferOut&&1===this._trnMainService.TrnMainObj.ISLOADFROMORDER||this._trnMainService.TrnMainObj.VoucherType===s.Km.StockIssue&&1===this._trnMainService.TrnMainObj.ISLOADFROMORDER){if(!this._trnMainService.TrnMainObj.REFORDBILL){let t=this.responseMsgService.getProperMessageForRefBill(this._trnMainService.TrnMainObj);return this.alertService.info(t),!1}if(null==this._trnMainService.TrnMainObj.REFBILL||""==this._trnMainService.TrnMainObj.REFBILL)return!1}}setGridPopupApi(){var t=this.setPrefix(),n=this.setBarcode(),i=this.setWarehouse();switch(this.genericProductService.gridPopupSettings.apiEndpoints=`/getMenuitemWithStockPagedList/${this.genericProductService.showStockedQuantityOnly}/${n}/all/${t}/${i}`,this._trnMainService.TrnMainObj.VoucherType){case s.Km.CreditNote:if(1!==this._trnMainService.TrnMainObj.DONONSALEABLERETURN&&0==this.genericProductService.userSetting.ENABLEMANUALSALESRETURN){this.genericProductService.gridPopupSettings.apiEndpoints="/getMenuitemFromProdForReturnPagedList";break}"NewBill"===this._trnMainService.TrnMainObj.AdditionalObj.INVOICETYPE&&(t=this.setPrefix(),n=this.setBarcode(),i=this.setWarehouse(),this.genericProductService.gridPopupSettings.apiEndpoints=`/getMenuitemWithStockPagedList/${this.genericProductService.showStockedQuantityOnly}/all/PI/${i}`);break;case s.Km.DebitNote:1===this.genericProductService.userSetting.REFBILLCOMPULSORINDNOTE&&(this.genericProductService.gridPopupSettings.apiEndpoints="/getMenuitemFromProdForReturnPagedList");break;case s.Km.Purchase:if(0!==this.genericProductService.userSetting.PODELIVERYMODE&&"purchase-import"!==this._trnMainService.activeurlpath){this.genericProductService.gridPopupSettings.apiEndpoints="/getMenuitemFromProdForReturnPagedList";break}"IMPORT_PURCHASE"==this._trnMainService.TrnMainObj.AdditionalObj.tag&&0!=this.genericProductService.userSetting.IMPORTPOBILLMODE&&(this.genericProductService.gridPopupSettings.apiEndpoints="/getMenuitemFromProdForReturnPagedList");break;case s.Km.GoodsReceived:0!==this.genericProductService.userSetting.PODELIVERYMODE&&(this.genericProductService.gridPopupSettings.apiEndpoints="/getMenuitemFromProdForReturnPagedList");break;case s.Km.SalesOrder:this._trnMainService.TrnMainObj.REFORDBILL&&0!==this.genericProductService.userSetting.ENABLE_QUOTATTION_INSO&&(this.genericProductService.gridPopupSettings.apiEndpoints="/getMenuitemFromProdForReturnPagedList");break;case s.Km.TaxInvoice:0!==this.genericProductService.userSetting.ENABLE_SOINTI&&1==this.genericProductService.userSetting.SOREFERENCE_REQUIRED&&(this.genericProductService.gridPopupSettings.apiEndpoints="/getMenuitemFromProdForReturnPagedList");break;case s.Km.BranchTransferIn:1===this._trnMainService.TrnMainObj.ISLOADFROMORDER&&(this.genericProductService.gridPopupSettings.apiEndpoints="/getMenuitemFromProdForReturnPagedList");break;case s.Km.StockIssue:1===this._trnMainService.TrnMainObj.ISLOADFROMORDER&&(this.genericProductService.gridPopupSettings.apiEndpoints="/getMenuitemFromProdForReturnPagedList");case s.Km.StockIssueReturn:this.genericProductService.gridPopupSettings.apiEndpoints=`/getMenuitemFromProdForIssueReturnPagedList/${this._trnMainService.TrnMainObj.BILLTO}`;case s.Km.ProductionEntry:if("EDIT"==this._trnMainService.TrnMainObj.Mode)break;default:if("add-membership-sales-invoice"==this._trnMainService.activeurlpath){this.genericProductService.gridPopupSettings.apiEndpoints="/getMenuItemListForMembershipSales";break}t=this.setPrefix(),n=this.setBarcode(),i=this.setWarehouse(),this.genericProductService.gridPopupSettings.apiEndpoints=`/getMenuitemWithStockPagedList/${this.genericProductService.showStockedQuantityOnly}/${n}/all/${t}/${i}`}}dialougeOpen(){console.log("dialouge open ProductDetails",this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ProductDetails),this._trnMainService.currentIndexProductDetails=this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ProductDetails,this.dialog.open(L.H,{hasBackdrop:!0,autoFocus:!1,data:{type:this._trnMainService.TrnMainObj.VoucherPrefix,mode:this._trnMainService.TrnMainObj.Mode,warehouse:this._trnMainService.TrnMainObj.MWAREHOUSE,message:this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex],curretnIndexPrevDetials:this._trnMainService.currentIndexProductDetails,productList:this._trnMainService.TrnMainObj.ProdList}}).afterClosed().subscribe(i=>{this.productLists=this._trnMainService.TrnMainObj.VoucherType===s.Km.TaxInvoice||this._trnMainService.TrnMainObj.VoucherType===s.Km.CreditNote||this._trnMainService.TrnMainObj.VoucherType===s.Km.DebitNote?i?.data:i&&i.data&&i.data.productColorList?i.data.productColorList:[],this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ProductDetails=this.productLists,this._trnMainService.currentIndexProductDetails=this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ProductDetails,this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ALTERNATEQUANTIY=this.productLists?this.productLists.length:0,(this._trnMainService.TrnMainObj.VoucherType==s.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType===s.Km.GoodsReceived)&&this._trnMainService.calculateNetRATE(this.genericProductService.activerowIndex),setTimeout(()=>{if(0==this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ALTERNATEQUANTIY){if(this._trnMainService.TrnMainObj.VoucherType==s.Km.TaxInvoice)return void this.alertService.warning(`Zero Quantity Detected for Item ${this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ITEMDESC} (${this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].MENUCODE}). Please Check Your Entry.`)}else document.getElementById("rate"+this.genericProductService.activerowIndex).focus()},20)})}displayProductDetailInViewMode(t){console.log("eventlog",t),"VIEW"==this._trnMainService.TrnMainObj.Mode.toUpperCase()&&"F9"==t.code&&this.dialougeOpen()}setPrefix(){let t="";return"self-billing"===this._trnMainService.activeurlpath?t="SB":null!=this._trnMainService.TrnMainObj.VoucherPrefix&&(t=this._trnMainService.TrnMainObj.VoucherPrefix),t}setWarehouse(){let t="";if(t=this._trnMainService.TrnMainObj.MWAREHOUSE?this._trnMainService.TrnMainObj.MWAREHOUSE:this._trnMainService.userProfile.userWarehouse,this._trnMainService.TrnMainObj.VoucherType===s.Km.StockIssue&&(t=this._trnMainService.TrnMainObj.BILLTO,null==this._trnMainService.TrnMainObj.BILLTO))return this.alertService.info("Please select From Warehouse before selecting an item "),"";if(this._trnMainService.TrnMainObj.VoucherType===s.Km.RequisitionEntry&&(null==this._trnMainService.TrnMainObj.MWAREHOUSE||""==this._trnMainService.TrnMainObj.MWAREHOUSE))return this.alertService.info("Please select Warehouse before selecting item"),"";if(this._trnMainService.TrnMainObj.VoucherType==s.Km.ProductionEntry){if(!this._trnMainService.TrnMainObj.BILLTO)return this.alertService.info("Please select Production warehouse"),"";t=this._trnMainService.TrnMainObj.BILLTO}return t}checkExchangeRate(){if(1==this.genericProductService.genericProductEntrySetting.multiCurrency||this._trnMainService.TrnMainObj.VoucherType==s.Km.Purchase&&"IMPORT_PURCHASE"==this._trnMainService.TrnMainObj.AdditionalObj.tag||this._trnMainService.TrnMainObj.VoucherType==s.Km.PurchaseOrder&&"IMPORT_PURCHASE_ORDER"==this._trnMainService.TrnMainObj.AdditionalObj.tag||this._trnMainService.TrnMainObj.VoucherType==s.Km.GoodsReceived&&"GOODS_RECEIVED_NOTE_IMPORT"==this._trnMainService.TrnMainObj.AdditionalObj.tag){if(null==this._trnMainService.TrnMainObj.BILLTO||void 0===this._trnMainService.TrnMainObj.BILLTO||""==this._trnMainService.TrnMainObj.BILLTO)return this.alertService.info("Please Choose Supplier to Proceed..."),!1;if(!this._trnMainService.TrnMainObj.EXRATE)return this.alertService.info("Please choose exchange rate to proceed or exchange rate cannot be zero..."),!1}return!0}setBarcode(){console.log({prodlist:this._trnMainService.TrnMainObj.ProdList,activeRowIndex:this.genericProductService.activerowIndex});let t=this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex]?.BC;return(0==this.genericProductService.userSetting.GblBarcodeWiseBilling||null==t||void 0===t||""==t)&&(t="A"),t}ItemkeyEvent(t,n){n.preventDefault(),this.showGenericGrid.emit({event:n,index:t,genericGrid:null})}ItemkeyEvent_old(t,n){if(n.preventDefault(),this.genericProductService.setItemPopupUrl(),this._trnMainService.currentIndexProductDetails=[],1!=this.checkDiscount()){if("VIEW"==this._trnMainService.TrnMainObj.Mode.toUpperCase())return this.displayProductDetailInViewMode(n),void console.log({view:!0});if(1!=this.checkSelfBilling())if(this.checkBarcodeSetting(),0!=this.checkRefOrderBill()){if(this.setGridPopupApi(),0!=this.checkExchangeRate())return this._trnMainService.itemselectevent=!0,this.showGenericGrid.emit(this._trnMainService.TrnMainObj.VoucherType==s.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType==s.Km.StockIssueReturn||this._trnMainService.TrnMainObj.VoucherType==s.Km.BranchTransferOut||this._trnMainService.TrnMainObj.VoucherType==s.Km.TaxInvoice||this._trnMainService.TrnMainObj.VoucherType==s.Km.SalesOrder||"FROMPO"==this._trnMainService.TrnMainObj.AdditionalObj.INVOICETYPE||"FROMSO"==this._trnMainService.TrnMainObj.AdditionalObj.INVOICETYPE||"FROMIMPORTPO"==this._trnMainService.TrnMainObj.AdditionalObj.INVOICETYPE?this._trnMainService.TrnMainObj.REFORDBILL:this._trnMainService.TrnMainObj.REFBILL),!1;console.log({checkExchangeRate:!1})}else console.log({checkRefOrderBill:!1});else console.log({chekcSelfBilling:!0})}else console.log({checkDiscount:!0})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(E.c),e.Y36(v.w),e.Y36(C.T),e.Y36(f.gz),e.Y36(b.uw),e.Y36(j.h))},o.\u0275cmp=e.Xpm({type:o,selectors:[["itemDescInputBox"]],inputs:{trnprod:"trnprod",col:"col",i:["index","i"]},outputs:{showGenericGrid:"showGenericGrid",dialogueOpen:"dialogueOpen"},decls:6,vars:11,consts:[["type","text","autocomplete","off","placeholder","Press ENTER to Select",2,"width","100%",3,"id","readonly","ngModel","disabled","ngModelChange","keydown.enter","click"],["contenteditable","false",1,"CellComment"],["type","checkbox","class","allocation-for-new",3,"change",4,"ngIf"],["type","checkbox",1,"allocation-for-new",3,"change"]],template:function(t,n){1&t&&(e.TgZ(0,"input",0),e.NdJ("ngModelChange",function(r){return n.trnprod[n.col.field]=r})("keydown.enter",function(r){return n.ItemkeyEvent(n.i,r),n.genericProductService.displayProductDetailInViewMode(r)})("click",function(){return n.onClicked()}),e.ALo(1,"disable"),e.qZA(),e.TgZ(2,"span",1),e._uU(3,"Press ENTER to Select Item"),e.qZA(),e.YNc(4,re,1,0,"input",2),e.ALo(5,"async")),2&t&&(e.Q6J("id",n.col.field+n.i)("readonly",!0)("ngModel",n.trnprod[n.col.field])("disabled",e.Dn7(1,5,n.disablePipe(n.col,n.i),n.i,n._trnMainService.callPipe)),e.xp6(4),e.Q6J("ngIf",e.lcZ(5,9,n.showAllocationCheckBox$)))},dependencies:[S.O5,h.Fj,h.JJ,h.On,S.Ov,M.e],styles:[".allocation-for-new[_ngcontent-%COMP%]{position:absolute;border:1px solid #cbcbcb!important;height:23px!important;border-radius:3px;width:auto!important;right:1rem}"]}),o})();function ce(o,c){if(1&o&&(e.ynx(0),e.TgZ(1,"option",2),e._uU(2),e.qZA(),e.BQk()),2&o){const t=c.$implicit;e.xp6(1),e.s9C("value",t.ALTUNIT),e.xp6(1),e.Oqu(t.ALTUNIT)}}let ae=(()=>{class o{constructor(t,n,i,r,a){this.alertService=t,this.genericProductService=n,this.responseMsgService=i,this.arouter=r,this.dialog=a,this.showGenericGrid=new e.vpe,this.dialogueOpen=new e.vpe,this._trnMainService=n._trnMainService,this.prodlist=this._trnMainService.TrnMainObj.ProdList,this.prod=this.prodlist[this.i],this._trnMainService.activeurlpath=this.genericProductService.activeurlpath}onFocus(){}disablePipe(t,n){var i="";return t.disablePipe&&(i=t.disablePipe(t,n)),i}SelectUnit(t){this._trnMainService.TrnMainObj.ProdList[t].DiscountOnAltUnit=!1,this._trnMainService.TrnMainObj.ProdList[t].ALTERNATEQUANTIY=0,this._trnMainService.TrnMainObj.ProdList[t].CRATE=0;let n=this._trnMainService.TrnMainObj.ProdList[t].Product.AlternateUnits.find(i=>i.ALTUNIT==this._trnMainService.TrnMainObj.ProdList[t].ALTUNIT);this._trnMainService.TrnMainObj.ProdList[t].StopDecimal=n.StopDecimal,this._trnMainService.TrnMainObj.ProdList[t].ALTUNIT==this._trnMainService.TrnMainObj.ProdList[t].BASEUNIT?(this._trnMainService.TrnMainObj.ProdList[t].ALTRATE=this._trnMainService.TrnMainObj.ProdList[t].RATE,this._trnMainService.TrnMainObj.ProdList[t].ALTCONFACTOR=1,this._trnMainService.TrnMainObj.ProdList[t].INDDISCOUNTRATE=0):(this._trnMainService.TrnMainObj.ProdList[t].ALTCONFACTOR=n.CONFACTOR,this._trnMainService.TrnMainObj.ProdList[t].ALTRATE=this._trnMainService.TrnMainObj.ProdList[t].RATE*this._trnMainService.TrnMainObj.ProdList[t].ALTCONFACTOR,this._trnMainService.ReCalculateBillWithNormal()),this._trnMainService.TrnMainObj.VoucherType==s.Km.DeliveryChalan&&this.applyDiscountOnUnitChangeOnSales(n,t),this._trnMainService.ReCalculateBillWithNormal()}applyDiscountOnUnitChangeOnSales(t,n){1==this.genericProductService.userSetting.EnableAltUnitDiscOnRate?(console.log("unit4"),this._trnMainService.TrnMainObj.ProdList[n].ALTRATE=this._trnMainService.TrnMainObj.ProdList[n].ALTRATE-this._trnMainService.TrnMainObj.ProdList[n].ALTRATE*(t.SRATE_DISCOUNT/100),this._trnMainService.TrnMainObj.ProdList[n].RATE=this._trnMainService.TrnMainObj.ProdList[n].ALTRATE):this._trnMainService.TrnMainObj.ProdList[n].INDDISCOUNTRATE=1==this.genericProductService.userSetting.EnableDiscountInAltUnit?t.WSRATE_DISCOUNT:t.SRATE_DISCOUNT}onKeyDown(t,n,i,r){if(console.log({trnprod:r,col:n,i,event:t}),"Enter"===t.key)console.log({tofocus:n.focusTo+i}),this.genericProductService.focusByElementId(n.focusTo+i),n.onEnter&&n.onEnter(r,i,n,t);else if("Tab"==t.key){if(1==t.shiftKey)return;this.genericProductService.focusByElementId(n.focusTo+i)}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(E.c),e.Y36(v.w),e.Y36(C.T),e.Y36(f.gz),e.Y36(b.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["unitSelectionInputBox"]],inputs:{trnprod:"trnprod",col:"col",i:["index","i"]},outputs:{showGenericGrid:"showGenericGrid",dialogueOpen:"dialogueOpen"},decls:3,vars:8,consts:[["type","text",2,"width","100%",3,"id","ngModel","disabled","ngModelChange","change","keydown.enter","keydown.tab"],[4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"select",0),e.NdJ("ngModelChange",function(r){return n.trnprod[n.col.field]=r})("change",function(){return n.SelectUnit(n.i)})("keydown.enter",function(r){return n.onKeyDown(r,n.col,n.i,n.trnprod)})("keydown.tab",function(r){return n.onKeyDown(r,n.col,n.i,n.trnprod)}),e.ALo(1,"disable"),e.YNc(2,ce,3,2,"ng-container",1),e.qZA()),2&t&&(e.Q6J("id",n.col.field+n.i)("ngModel",n.trnprod[n.col.field])("disabled",e.Dn7(1,4,n.disablePipe(n.col,n.i),n.i,n._trnMainService.callPipe)),e.xp6(2),e.Q6J("ngForOf",null==n.trnprod.Product?null:n.trnprod.Product.AlternateUnits))},dependencies:[S.sg,h.YN,h.Kr,h.EJ,h.JJ,h.On,M.e],styles:["select[_ngcontent-%COMP%]:disabled{opacity:1}"]}),o})();var se=_(91772),le=_(90994),D=_(89952);const de=function(o,c,t,n){return{green:o,red:c,yellow:t,brown:n}};let ue=(()=>{class o{constructor(t,n,i){this.genericProductService=t,this.quantityChangeService=n,this.masterService=i,this._trnMainService=this.genericProductService._trnMainService,this._userSetting=this.genericProductService.userSetting,this._trnMainService.activeurlpath=this.genericProductService.activeurlpath,this.userSetting=this.genericProductService.userSetting}disablePipe(t,n){let i="";return t.disablePipe&&(i=t.disablePipe(t,n)),i}class(t,n,i){if(t.class)return t.class(t,n,i)}onKeyDown(t,n,i,r){"Enter"!==t.key&&"Tab"!=t.key||(t.preventDefault(),console.log({tofocus:n.focusTo+i}),this.genericProductService.focusByElementId(n.focusTo+i),!n.onKeyPress||this.addNextRow(i))}okKeyPress(t,n,i,r){n.onKeyPress&&n.onKeyPress(t,n,i,r)}onChange(t,n,i,r){n.onChange&&n.onChange(t,n,i,r)}onFocusOut(t,n,i,r){n.onFocusOut&&n.onFocusOut(t,n,i,r)}addNextRow(t){if(this.quantityChangeService.AlternateQuantityEventClick(t),this._trnMainService.TrnMainObj.VoucherType==s.Km.ProductionEntry)return!0;const n=this.masterService.userProfile.userRights.find(i=>"AllowRateChangeInSO"==i.right);return this._trnMainService.TrnMainObj.VoucherType==s.Km.DeliveryReturn||0==n?.value||1==this.masterService.userSetting.EnableBatchWisePrice||1===this._trnMainService.TrnMainObj.ProdList[t].HASBATCH}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.w),e.Y36(se.s),e.Y36(O.P))},o.\u0275cmp=e.Xpm({type:o,selectors:[["quantityInputBox"]],inputs:{trnprod:"trnprod",col:"col",i:["index","i"]},decls:3,vars:19,consts:[["type","number","autocomplete","off",3,"id","ngStyle","ngModel","disabled","placeholder","OnlyWholeNumber","decimalPlacesRestriction","ngClass","ngModelChange","keydown.enter","keydown.tab","keypress","keydown.arrowup","keydown.arrowdown","change","focusout"]],template:function(t,n){1&t&&(e.TgZ(0,"input",0),e.NdJ("ngModelChange",function(r){return n.trnprod[n.col.field]=r})("keydown.enter",function(r){return n.onKeyDown(r,n.col,n.i,n.trnprod)})("keydown.tab",function(r){return n.onKeyDown(r,n.col,n.i,n.trnprod)})("keypress",function(r){return n.okKeyPress(r,n.col,n.i,n.trnprod)})("keydown.arrowup",function(){return 1!==(null==n.trnprod?null:n.trnprod.NATURETYPE)})("keydown.arrowdown",function(){return 1!==(null==n.trnprod?null:n.trnprod.NATURETYPE)})("change",function(r){return n.onChange(r,n.col,n.i,n.trnprod)})("focusout",function(r){return n.onFocusOut(r,n.col,n.i,n.trnprod)}),e.ALo(1,"twoDigitNumber"),e.ALo(2,"disable"),e.qZA()),2&t&&e.Q6J("id",n.col.field+n.i)("ngStyle",n.col.columnNgStyle)("ngModel",n.col.applyTwoDigitPipe?e.lcZ(1,8,n.trnprod[n.col.field]):n.trnprod[n.col.field])("disabled",e.Dn7(2,10,n.disablePipe(n.col,n.i),n.i,n._trnMainService.callPipe))("placeholder",n.col.placeholder||"")("OnlyWholeNumber",1==n.trnprod.StopDecimal)("decimalPlacesRestriction",n.col.decimalPlacesRestriction?n.col.decimalPlacesRestriction:null)("ngClass",e.l5B(14,de,"green"==n.class(n.col,n.i,n.trnprod),"red"==n.class(n.col,n.i,n.trnprod),"yellow"==n.class(n.col,n.i,n.trnprod),"brown"==n.class(n.col,n.i,n.trnprod)))},dependencies:[S.mk,S.PC,h.Fj,h.wV,h.JJ,h.On,le.r,k.F,D.g,M.e],styles:[".dynamicStyle[_ngcontent-%COMP%]{background-color:#cef8ff}.green[_ngcontent-%COMP%]{background-color:#26ef01}.red[_ngcontent-%COMP%]{background-color:#ff4141}.yellow[_ngcontent-%COMP%]{background-color:#ff0}.brown[_ngcontent-%COMP%]{background-color:#9602c7;color:#fff}"]}),o})();function _e(o,c){if(1&o&&(e.ynx(0),e.TgZ(1,"option",2),e._uU(2),e.qZA(),e.BQk()),2&o){const t=c.$implicit;e.xp6(1),e.s9C("value",t.LocID),e.xp6(1),e.Oqu(t.Name)}}let he=(()=>{class o{constructor(t,n,i,r,a){this.alertService=t,this.genericProductService=n,this.responseMsgService=i,this.arouter=r,this.dialog=a,this.showGenericGrid=new e.vpe,this.dialogueOpen=new e.vpe,this._trnMainService=n._trnMainService,this.prodlist=this._trnMainService.TrnMainObj.ProdList,this.prod=this.prodlist[this.i],this._trnMainService.activeurlpath=this.genericProductService.activeurlpath}onFocus(){}disablePipe(t,n){var i="";return t.disablePipe&&(i=t.disablePipe(t,n)),i}onKeyDown(t,n,i,r){if("Enter"===t.key)this.genericProductService.focusByElementId(n.focusTo+i),n.onEnter&&n.onEnter(r,i,n,t);else if("Tab"==t.key){if(1==t.shiftKey)return;this.genericProductService.focusByElementId(n.focusTo+i)}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(E.c),e.Y36(v.w),e.Y36(C.T),e.Y36(f.gz),e.Y36(b.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["locationSelectionInputBox"]],inputs:{trnprod:"trnprod",col:"col",i:["index","i"]},outputs:{showGenericGrid:"showGenericGrid",dialogueOpen:"dialogueOpen"},decls:4,vars:8,consts:[["type","text",2,"width","100%",3,"id","ngModel","disabled","ngModelChange","keydown.enter"],[4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"select",0),e.NdJ("ngModelChange",function(r){return n.trnprod[n.col.field]=r})("keydown.enter",function(r){return n.onKeyDown(r,n.col,n.i,n.trnprod)}),e.ALo(1,"disable"),e._UZ(2,"option"),e.YNc(3,_e,3,2,"ng-container",1),e.qZA()),2&t&&(e.Q6J("id",n.col.field+n.i)("ngModel",n.trnprod[n.col.field])("disabled",e.Dn7(1,4,n.disablePipe(n.col,n.i),n.i,n._trnMainService.callPipe)),e.xp6(3),e.Q6J("ngForOf",n._trnMainService.TrnMainObj.LOCATIONLIST))},dependencies:[S.sg,h.YN,h.Kr,h.EJ,h.JJ,h.On,M.e],encapsulation:2}),o})();var pe=_(84260),ge=_(63688);let Se=(()=>{class o{transform(t,n){return"red"==t?{backgroundColor:"#FF4141 !important",color:"white !important"}:"green"==t?{backgroundColor:"#26EF01 !important",color:"white !important"}:"yellow"==t?{backgroundColor:"#ECEC10 !important",color:"white !important"}:"purple"==t?{backgroundColor:"#9602C7 !important",color:"white !important"}:void 0}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"color",type:o,pure:!0}),o})(),Te=(()=>{class o{transform(t,n){return this.getTemplate(t,n)}getTemplate(t,n){if(!n)return;let i=n.toArray().find(r=>r.name.toLowerCase()==t?.toLowerCase())?.template;return i||(i=n.toArray().find(r=>"default"==r.name.toLowerCase()).template),i}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"inputColumnType",type:o,pure:!0}),o})();const ve=["table1"],Me=["table2"],me=["genericGrid"],Pe=["rateValidatoin"],fe=["genericGridPopupComponent"],Ee=["barCodeGridPopup"],be=["genericGridMulitplePricePopup"],Ce=["matrixitemgrid"],ye=["authenticationPopup"],Oe=["itemDesc"];function Ie(o,c){if(1&o&&(e.TgZ(0,"th",52),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("ngStyle",t.headerNgStyle),e.uIk("colspan",t.colspan)("rowspan",t.rowspan),e.xp6(1),e.hij(" ",t.header," ")}}function xe(o,c){if(1&o&&(e.ynx(0),e.YNc(1,Ie,2,4,"th",51),e.BQk()),2&o){const t=c.$implicit;e.xp6(1),e.Q6J("ngIf",!t.hidden)}}function Ae(o,c){if(1&o&&(e.TgZ(0,"th",52),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("ngStyle",t.headerNgStyle),e.uIk("colspan",t.colspan)("rowspan",t.rowspan),e.xp6(1),e.hij(" ",t.header," ")}}function we(o,c){if(1&o&&(e.ynx(0),e.YNc(1,Ae,2,4,"th",51),e.BQk()),2&o){const t=c.$implicit;e.xp6(1),e.Q6J("ngIf",!t.hidden)}}function Re(o,c){if(1&o&&(e.ynx(0),e.TgZ(1,"th",54),e._uU(2),e.qZA(),e.BQk()),2&o){const t=c.$implicit;e.xp6(1),e.Q6J("ngStyle",t.headerNgStyle),e.xp6(1),e.Oqu(t.header)}}function Le(o,c){if(1&o&&(e.ynx(0),e.YNc(1,Re,3,2,"ng-container",5),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.subHeader)}}function Ne(o,c){if(1&o&&(e.ynx(0),e.YNc(1,Le,2,1,"ng-container",9),e.BQk()),2&o){const t=c.$implicit;e.xp6(1),e.Q6J("ngIf",t.showSubHeading)}}function Be(o,c){if(1&o&&(e.TgZ(0,"tr",53),e.YNc(1,Ne,2,1,"ng-container",5),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.genericProductEntrySetting.columns)}}const m=function(o,c,t){return{index:o,col:c,trnprod:t}};function je(o,c){if(1&o&&(e.TgZ(0,"td",57),e.GkF(1,58),e.ALo(2,"inputColumnType"),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw(),i=n.index,r=n.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",e.xi3(2,2,t.inputType,a.templateRefs))("ngTemplateOutletContext",e.kEZ(5,m,i,t,r))}}function ke(o,c){if(1&o&&(e.ynx(0),e.YNc(1,je,3,9,"td",56),e.BQk()),2&o){const t=c.$implicit;e.xp6(1),e.Q6J("ngIf",!t.hidden&&!t.showSubHeading)}}const G=function(){return{"background-color":"#cef8ff"}};function De(o,c){if(1&o&&(e.ynx(0),e.TgZ(1,"td",59),e.GkF(2,58),e.ALo(3,"inputColumnType"),e.qZA(),e.BQk()),2&o){const t=e.oxw().$implicit,n=e.oxw().$implicit,i=e.oxw().index,r=e.oxw();e.xp6(1),e.Q6J("ngStyle",n.Request>0&&"VIEW"!=r._trnMainService.TrnMainObj.Mode?e.DdM(6,G):null),e.xp6(1),e.Q6J("ngTemplateOutlet",e.xi3(3,3,t.inputType,r.templateRefs))("ngTemplateOutletContext",e.kEZ(7,m,i,t,n))}}function Ge(o,c){if(1&o&&(e.ynx(0),e.YNc(1,De,4,11,"ng-container",9),e.BQk()),2&o){const t=c.$implicit;e.xp6(1),e.Q6J("ngIf",t.showSubHeading)}}function Ve(o,c){if(1&o&&(e.ynx(0),e.YNc(1,Ge,2,1,"ng-container",5),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",null==t.genericProductService.subHeader[0]?null:t.genericProductService.subHeader[0].subHeader)}}function Ke(o,c){if(1&o&&(e.TgZ(0,"td",57),e.GkF(1,58),e.ALo(2,"inputColumnType"),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw(),i=n.index,r=n.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",e.xi3(2,2,t.inputType,a.templateRefs))("ngTemplateOutletContext",e.kEZ(5,m,i,t,r))}}function Ue(o,c){if(1&o&&(e.ynx(0),e.YNc(1,Ke,3,9,"td",60),e.BQk()),2&o){const t=c.$implicit;e.xp6(1),e.Q6J("ngIf",!t.hidden&&!t.showSubHeading)}}function Ze(o,c){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr",55),e.NdJ("click",function(){const r=e.CHM(t).index,a=e.oxw();return e.KtG(a.RowClick(r))})("keydown.Shift.delete",function(){const r=e.CHM(t).index,a=e.oxw();return e.KtG(a.deleteRow(r))}),e.YNc(2,ke,2,1,"ng-container",5),e.YNc(3,Ve,2,1,"ng-container",5),e.YNc(4,Ue,2,1,"ng-container",5),e.qZA(),e.BQk()}if(2&o){const t=c.$implicit,n=c.index,i=e.oxw();e.xp6(1),e.ekj("selected",i.isTableRowSelected(n))("highlighted",n+1==i.highlightBarCodeWiseRow())("bgforlessstockitem",i.highlightLessStockItem(n))("less-quantity",null==t?null:t.showRed),e.MGl("id","productEntrySetting.tableId_",n,""),e.xp6(1),e.Q6J("ngForOf",i.genericProductEntrySetting.columns),e.xp6(1),e.Q6J("ngForOf",t.BranchWiseDistributionList1),e.xp6(1),e.Q6J("ngForOf",null==i.genericProductService?null:i.genericProductService.headerAfterSubHeader)}}function Qe(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"span",61),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addRowInsert())}),e.TgZ(1,"p"),e._uU(2,"+"),e.qZA()()}}function He(o,c){if(1&o&&(e.TgZ(0,"th",52),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("ngStyle",t.headerNgStyle),e.uIk("colspan",t.colspan)("rowspan",t.rowspan),e.xp6(1),e.hij(" ",t.header," ")}}function Fe(o,c){if(1&o&&(e.ynx(0),e.YNc(1,He,2,4,"th",51),e.BQk()),2&o){const t=c.$implicit;e.xp6(1),e.Q6J("ngIf",!t.hidden)}}function Je(o,c){if(1&o&&(e.TgZ(0,"th",52),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("ngStyle",t.headerNgStyle),e.uIk("colspan",t.colspan)("rowspan",t.rowspan),e.xp6(1),e.hij(" ",t.header," ")}}function We(o,c){if(1&o&&(e.ynx(0),e.YNc(1,Je,2,4,"th",51),e.BQk()),2&o){const t=c.$implicit;e.xp6(1),e.Q6J("ngIf",!t.hidden)}}function Ye(o,c){if(1&o&&(e.ynx(0),e.TgZ(1,"th",54),e._uU(2),e.qZA(),e.BQk()),2&o){const t=c.$implicit;e.xp6(1),e.Q6J("ngStyle",t.headerNgStyle),e.xp6(1),e.Oqu(t.header)}}function qe(o,c){if(1&o&&(e.ynx(0),e.YNc(1,Ye,3,2,"ng-container",5),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.subHeader)}}function $e(o,c){if(1&o&&(e.ynx(0),e.YNc(1,qe,2,1,"ng-container",9),e.BQk()),2&o){const t=c.$implicit;e.xp6(1),e.Q6J("ngIf",t.showSubHeading)}}function Xe(o,c){if(1&o&&(e.TgZ(0,"tr",53),e.YNc(1,$e,2,1,"ng-container",5),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",null==t.genericProductEntrySetting2?null:t.genericProductEntrySetting2.columns)}}function ze(o,c){if(1&o&&(e.TgZ(0,"td",57),e.GkF(1,58),e.ALo(2,"inputColumnType"),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw(),i=n.index,r=n.$implicit,a=e.oxw(2);e.xp6(1),e.Q6J("ngTemplateOutlet",e.xi3(2,2,t.inputType,a.templateRefs))("ngTemplateOutletContext",e.kEZ(5,m,i,t,r))}}function et(o,c){if(1&o&&(e.ynx(0),e.YNc(1,ze,3,9,"td",56),e.BQk()),2&o){const t=c.$implicit;e.xp6(1),e.Q6J("ngIf",!t.hidden&&!t.showSubHeading)}}function tt(o,c){if(1&o&&(e.ynx(0),e.TgZ(1,"td",59),e.GkF(2,58),e.ALo(3,"inputColumnType"),e.qZA(),e.BQk()),2&o){const t=e.oxw().$implicit,n=e.oxw().$implicit,i=e.oxw().index,r=e.oxw(2);e.xp6(1),e.Q6J("ngStyle",n.Request>0&&"VIEW"!=r._trnMainService.TrnMainObj.Mode?e.DdM(6,G):null),e.xp6(1),e.Q6J("ngTemplateOutlet",e.xi3(3,3,t.inputType,r.templateRefs))("ngTemplateOutletContext",e.kEZ(7,m,i,t,n))}}function nt(o,c){if(1&o&&(e.ynx(0),e.YNc(1,tt,4,11,"ng-container",9),e.BQk()),2&o){const t=c.$implicit;e.xp6(1),e.Q6J("ngIf",t.showSubHeading)}}function it(o,c){if(1&o&&(e.ynx(0),e.YNc(1,nt,2,1,"ng-container",5),e.BQk()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",null==t.genericProductService.subHeader2[0]?null:t.genericProductService.subHeader2[0].subHeader)}}function rt(o,c){if(1&o&&(e.TgZ(0,"td",57),e.GkF(1,58),e.ALo(2,"inputColumnType"),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw(),i=n.index,r=n.$implicit,a=e.oxw(2);e.xp6(1),e.Q6J("ngTemplateOutlet",e.xi3(2,2,t.inputType,a.templateRefs))("ngTemplateOutletContext",e.kEZ(5,m,i,t,r))}}function ot(o,c){if(1&o&&(e.ynx(0),e.YNc(1,rt,3,9,"td",60),e.BQk()),2&o){const t=c.$implicit;e.xp6(1),e.Q6J("ngIf",!t.hidden&&!t.showSubHeading)}}function ct(o,c){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr",55),e.NdJ("click",function(){const r=e.CHM(t).index,a=e.oxw(2);return e.KtG(a.RowClick(r))})("keydown.Shift.delete",function(){const r=e.CHM(t).index,a=e.oxw(2);return e.KtG(a.deleteRow(r))}),e.YNc(2,et,2,1,"ng-container",5),e.YNc(3,it,2,1,"ng-container",5),e.YNc(4,ot,2,1,"ng-container",5),e.qZA(),e.BQk()}if(2&o){const t=c.$implicit,n=c.index,i=e.oxw(2);e.xp6(1),e.ekj("selected",i.isTableRowSelected(n))("highlighted",n+1==i.highlightBarCodeWiseRow())("bgforlessstockitem",i.highlightLessStockItem(n)),e.MGl("id","productEntrySetting.tableId_",n,""),e.xp6(1),e.Q6J("ngForOf",null==i.genericProductEntrySetting2?null:i.genericProductEntrySetting2.columns),e.xp6(1),e.Q6J("ngForOf",t.BranchWiseDistributionList2),e.xp6(1),e.Q6J("ngForOf",null==i.genericProductService?null:i.genericProductService.headerAfterSubHeader2)}}function at(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"span",61),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.addRowInsert())}),e.TgZ(1,"p"),e._uU(2,"+"),e.qZA()()}}const V=function(o){return{scrollable:o}};function st(o,c){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",62,63),e.NdJ("scroll",function(i){e.CHM(t),e.oxw();const r=e.MAs(2);return e.KtG(r.nativeElement.scrollTop=i.target.scrollTop)}),e.TgZ(3,"table",3)(4,"tr",4),e.YNc(5,Fe,2,1,"ng-container",5),e.YNc(6,We,2,1,"ng-container",5),e.qZA(),e.YNc(7,Xe,2,1,"tr",64),e.TgZ(8,"tbody",7),e.YNc(9,ct,5,10,"ng-container",5),e.qZA()(),e.YNc(10,at,3,0,"span",8),e.ALo(11,"hide"),e.qZA(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(1),e.Udp("height",null==t.genericProductEntrySetting2?null:t.genericProductEntrySetting2.height),e.xp6(2),e.Q6J("ngClass",e.VKq(11,V,t.scrollable())),e.xp6(2),e.Q6J("ngForOf",null==t.genericProductEntrySetting2?null:t.genericProductEntrySetting2.columns),e.xp6(1),e.Q6J("ngForOf",null==t.genericProductService?null:t.genericProductService.headerAfterSubHeader2),e.xp6(1),e.Q6J("ngIf",null==t.genericProductEntrySetting2?null:t.genericProductEntrySetting2.showSubHeading),e.xp6(2),e.Q6J("ngForOf",null==t._trnMainService||null==t._trnMainService.TrnMainObj?null:t._trnMainService.TrnMainObj.ProdList),e.xp6(1),e.Q6J("ngIf",e.xi3(11,8,"hideAddButton",t._trnMainService.callPipe)&&"VIEW"!=t._trnMainService.TrnMainObj.Mode&&(null==t.genericProductEntrySetting2?null:t.genericProductEntrySetting2.columns))}}function lt(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"barcodeBox",65),e.NdJ("ItemKeyEvent",function(i){const a=e.CHM(t).index,l=e.oxw();return e.KtG(l.ItemKeyEvent(a,i))})("dblClickPopupItem",function(i){const a=e.CHM(t).index,l=e.oxw();return e.KtG(l.dblClickPopupItem(a,i))}),e.qZA()}if(2&o){const t=c.index,n=c.trnprod,i=c.col;e.Q6J("i",i.field+t)("index",t)("col",i)("trnprod",n)}}function dt(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"barcodeInputBox",66),e.NdJ("ItemKeyEvent",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.ItemKeyEvent(r.i,i))})("dblClickPopupItem",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.dblClickPopupItem(r.i,i))}),e.qZA(),e.TgZ(1,"input",67),e.NdJ("keydown.Tab",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.ItemBarCodeClick(r.i,i))})("change",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.ItemBarCodeClick(r.i,i))})("keydown.enter",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.ItemBarCodeClick(r.i,i))})("focusout",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.ItemBarCodeFoucusOut(r.i,i))}),e.ALo(2,"disable"),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("i",t.col.field+t.i),e.xp6(1),e.Q6J("i",t.col.field+t.i)("disabled",e.Dn7(2,3,t.disablePipe(t.col,t.i),t.i,t._trnMainService.callPipe))}}function ut(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"input",72),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.trnprod[r.col.checkboxField]=i)})("change",function(i){e.CHM(t);const r=e.oxw(2),a=r.col,l=r.index,d=r.trnprod,u=e.oxw();return e.KtG(u.onCheckBoxChange(i,a,l,d))}),e.qZA()}if(2&o){const t=e.oxw(2),n=t.trnprod,i=t.col,r=e.oxw();e.Q6J("ngModel",n[i.checkboxField])("disabled","VIEW"==r._trnMainService.TrnMainObj.Mode)}}const _t=function(o){return{"position-static":o}};function ht(o,c){if(1&o&&(e.ynx(0,46),e.TgZ(1,"span",69),e._uU(2),e.qZA(),e.TgZ(3,"span",70),e.YNc(4,ut,1,2,"input",71),e.qZA(),e.BQk()),2&o){const t=e.oxw(),n=t.index,i=t.col,r=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(3,_t,!r.userSetting.IsBBSM)),e.xp6(1),e.Oqu(n+1),e.xp6(2),e.Q6J("ngIf",i.checkbox)}}const I=function(o){return{tooltipChild:o}};function pt(o,c){if(1&o&&(e.ynx(0),e._UZ(1,"span",74),e.BQk()),2&o){const t=e.oxw(2).index,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(2,I,n.genericProductService.hoverId==t))("innerHTML",n.genericProductService.stringValue,e.oJD)}}function gt(o,c){if(1&o&&(e.ynx(0),e._UZ(1,"span",74),e.BQk()),2&o){const t=e.oxw(2).index,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(2,I,n.genericProductService.codeHoverId==t))("innerHTML",n.genericProductService.stringValue,e.oJD)}}function St(o,c){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",73),e.NdJ("mouseover",function(i){e.CHM(t);const r=e.oxw(),a=r.col,l=r.index,d=r.trnprod,u=e.oxw();return e.KtG(u.hoverDiscount(i,a,l,d)||u.hoverDescription(i,a,l,d))})("mouseleave",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.hoverLeaveDiscount()||i.hoverLeaveDescription())}),e._uU(2),e.ALo(3,"twoDigitNumber"),e.YNc(4,pt,2,4,"ng-container",9),e.YNc(5,gt,2,4,"ng-container",9),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(),n=t.col,i=t.index,r=t.trnprod;e.xp6(1),e.Q6J("ngStyle",n.columnNgStyle)("id",n.field+i),e.xp6(1),e.hij(" ",n.applyTwoDigitPipe?e.lcZ(3,5,r[n.field]):r[n.field]," "),e.xp6(2),e.Q6J("ngIf",r[n.field]>0&&n.displayOnHover),e.xp6(1),e.Q6J("ngIf",r[n.field]>0&&n.displayOnHoverCode)}}function Tt(o,c){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",77),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).index,r=e.oxw();return e.KtG(r.deleteRow(i))}),e.ALo(2,"disable"),e._UZ(3,"img",78),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2),n=t.col,i=t.index,r=e.oxw();e.xp6(1),e.Q6J("disabled",e.Dn7(2,1,r.disablePipe(n,i),i,r._trnMainService.callPipe)||"VIEW"==r._trnMainService.TrnMainObj.Mode&&("asset-purchase-invoice"!==r._trnMainService.activeurlpath||"assets-openingstockentry"!==r._trnMainService.activeurlpath)||21==r._trnMainService.TrnMainObj.VoucherType&&1==r._trnMainService.TrnMainObj.DOFULLRETURN||null!=r._trnMainService.TrnMainObj.FLATDCAMNT&&0!=r._trnMainService.TrnMainObj.FLATDCAMNT||null!=r._trnMainService.TrnMainObj.DCRATE&&0!=r._trnMainService.TrnMainObj.DCRATE)}}function vt(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"button",79),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).trnprod,r=e.oxw();return e.KtG(r.onViewClick(i))}),e._UZ(1,"i",80),e.qZA()}}function Mt(o,c){if(1&o&&(e.ynx(0),e.TgZ(1,"div",54),e.YNc(2,Tt,4,5,"ng-container",75),e.YNc(3,vt,2,0,"ng-template",null,76,e.W1O),e.qZA(),e.BQk()),2&o){const t=e.MAs(4),n=e.oxw().col,i=e.oxw();e.xp6(1),e.Q6J("ngStyle",n.columnNgStyle),e.xp6(1),e.Q6J("ngIf",i.showDeleteButton())("ngIfElse",t)}}function mt(o,c){if(1&o&&(e.YNc(0,ht,5,5,"ng-container",68),e.YNc(1,St,6,7,"ng-container",9),e.YNc(2,Mt,5,3,"ng-container",9)),2&o){const t=c.col;e.Q6J("ngIf",t.isSno),e.xp6(1),e.Q6J("ngIf",!t.isSno),e.xp6(1),e.Q6J("ngIf",t.removeButton)}}function Pt(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"itemDescInputBox",81),e.NdJ("showGenericGrid",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.showGenericGrid(i))}),e.qZA(),e.ynx(1),e._UZ(2,"br")(3,"span",82),e.BQk()}if(2&o){const t=c.index,n=c.col,i=c.trnprod;e.Q6J("trnprod",i)("index",t)("col",n),e.xp6(3),e.Q6J("innerHtml",i.VARIANTDESCA,e.oJD)}}function ft(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"input",83),e.NdJ("ngModelChange",function(i){const r=e.CHM(t);return e.KtG(r.trnprod[r.col.field]=i)})("keydown.enter",function(i){const r=e.CHM(t),a=r.col,l=r.index,d=r.trnprod,u=e.oxw();return e.KtG(u.onEnter(i,a,l,d))})("keydown.Tab",function(i){const r=e.CHM(t),a=r.col,l=r.index,d=r.trnprod,u=e.oxw();return e.KtG(u.onEnter(i,a,l,d))}),e.ALo(1,"disable"),e.qZA()}if(2&o){const t=c.index,n=c.col,i=c.trnprod,r=e.oxw();e.Q6J("id",n.field+t)("ngModel",i[n.field])("disabled",e.Dn7(1,4,r.disablePipe(n,t),t,r._trnMainService.callPipe))("readonly",!0)}}function Et(o,c){if(1&o&&e._UZ(0,"unitSelectionInputBox",84),2&o){const t=c.index,n=c.col,i=c.trnprod;e.Q6J("i",n.field+t)("index",t)("col",n)("trnprod",i)}}function bt(o,c){if(1&o&&e._UZ(0,"locationSelectionInputBox",84),2&o){const t=c.index,n=c.col,i=c.trnprod;e.Q6J("i",n.field+t)("index",t)("col",n)("trnprod",i)}}function Ct(o,c){if(1&o&&e._UZ(0,"defaultSelectionInputBox",84),2&o){const t=c.index,n=c.col,i=c.trnprod;e.Q6J("i",n.field+t)("index",t)("col",n)("trnprod",i)}}function yt(o,c){if(1&o&&e._UZ(0,"quantityInputBox",84),2&o){const t=c.index,n=c.col,i=c.trnprod;e.Q6J("i",n.field+t)("index",t)("col",n)("trnprod",i)}}function Ot(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"input",85),e.NdJ("ngModelChange",function(i){const r=e.CHM(t);return e.KtG(r.trnprod[r.col.field]=i)})("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onClicked())})("keydown.enter",function(i){const r=e.CHM(t),a=r.col,l=r.index,d=r.trnprod,u=e.oxw();return e.KtG(u.onKeyDown(i,a,l,d))})("keydown.tab",function(i){const r=e.CHM(t),a=r.col,l=r.index,d=r.trnprod,u=e.oxw();return e.KtG(u.onKeyDown(i,a,l,d))})("change",function(i){const r=e.CHM(t),a=r.col,l=r.index,d=e.oxw();return e.KtG(d.onChange(i,a,l))}),e.ALo(1,"twoDigitNumber"),e.ALo(2,"disable"),e.qZA()}if(2&o){const t=c.index,n=c.col,i=c.trnprod,r=e.oxw();e.Q6J("id",n.field+t)("ngStyle",n.columnNgStyle)("ngModel",n.applyTwoDigitPipe?e.lcZ(1,5,i[n.field]):i[n.field])("placeholder",n.placeholder||"")("disabled",e.Dn7(2,7,r.disablePipe(n,t),t,r._trnMainService.callPipe)||"VIEW"==i.rowMode)}}function It(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"input",86),e.NdJ("keydown.enter",function(i){const r=e.CHM(t),a=r.col,l=r.index,d=r.trnprod,u=e.oxw();return e.KtG(u.onItemSelection(i,a,l,d))}),e.ALo(1,"disable"),e.qZA()}if(2&o){const t=c.index,n=c.col,i=c.trnprod,r=e.oxw();e.Q6J("id",n.field+t)("ngModel",i[n.field])("placeholder",n.placeholder||"")("disabled",e.Dn7(1,4,r.disablePipe(n,t),t,r._trnMainService.callPipe)||"VIEW"==i.rowMode)}}function xt(o,c){if(1&o&&(e.ynx(0),e.TgZ(1,"option",88),e._uU(2),e.qZA(),e.BQk()),2&o){const t=c.$implicit;e.xp6(1),e.s9C("value",t.name),e.xp6(1),e.hij(" ",t.name,"")}}function At(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"select",87),e.NdJ("ngModelChange",function(i){const r=e.CHM(t);return e.KtG(r.trnprod[r.col.field]=i)})("change",function(){const r=e.CHM(t).index,a=e.oxw();return e.KtG(a.SelectUnit(r))})("keydown.enter",function(i){const r=e.CHM(t),a=r.col,l=r.index,d=r.trnprod,u=e.oxw();return e.KtG(u.onKeyDown(i,a,l,d))})("keydown.tab",function(i){const r=e.CHM(t),a=r.col,l=r.index,d=r.trnprod,u=e.oxw();return e.KtG(u.onKeyDown(i,a,l,d))}),e.ALo(1,"disable"),e.YNc(2,xt,3,2,"ng-container",5),e.qZA()}if(2&o){const t=c.index,n=c.col,i=c.trnprod,r=e.oxw();e.Q6J("id",n.field+t)("ngModel",i[n.field])("disabled",e.Dn7(1,4,r.disablePipe(n,t),t,r._trnMainService.callPipe)),e.xp6(2),e.Q6J("ngForOf",r.selectComments)}}function wt(o,c){if(1&o&&(e.ynx(0),e._UZ(1,"span",74),e.BQk()),2&o){const t=e.oxw().index,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(2,I,n.genericProductService.rateHoverId==t))("innerHTML",n.genericProductService.stringValue,e.oJD)}}function Rt(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"input",89),e.NdJ("change",function(i){const r=e.CHM(t),a=r.col,l=r.index,d=r.trnprod,u=e.oxw();return e.KtG(u.onChange(i,a,l,d))})("keydown.enter",function(i){const r=e.CHM(t),a=r.col,l=r.index,d=r.trnprod,u=e.oxw();return e.KtG(u.onKeyDown(i,a,l,d))})("keydown.tab",function(i){const r=e.CHM(t),a=r.col,l=r.index,d=r.trnprod,u=e.oxw();return e.KtG(u.onKeyDown(i,a,l,d))})("ngModelChange",function(i){const r=e.CHM(t),a=r.trnprod,l=r.col,d=r.index,u=e.oxw();return a[l.field]=i,e.KtG(u.onModelChange(i,l,d,a))})("keyup",function(i){const a=e.CHM(t).col,l=e.oxw();return e.KtG(l.rateChange(i,a))})("focusout",function(i){const a=e.CHM(t).col,l=e.oxw();return e.KtG(l.rateFocusOut(i,a))})("mouseover",function(i){const r=e.CHM(t),a=r.col,l=r.index,d=r.trnprod,u=e.oxw();return e.KtG(u.hoverRate(i,a,l,d))})("mouseleave",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.hoverLeaveRate())}),e.ALo(1,"color"),e.ALo(2,"color"),e.ALo(3,"threeDigitNumber"),e.ALo(4,"twoDigitNumber"),e.ALo(5,"disable"),e.qZA(),e.YNc(6,wt,2,4,"ng-container",9)}if(2&o){const t=c.index,n=c.col,i=c.trnprod,r=e.oxw();let a,l;e.Udp("background-color",null==(a=e.lcZ(1,11,r.colorPipe(n,i,t)))?null:a.backgroundColor)("color",null==(l=e.lcZ(2,13,r.colorPipe(n,i,t)))?null:l.color),e.Q6J("id",n.field+t)("ngStyle",n.columnNgStyle)("ngModel",n.applyTwoDigitPipe||n.applyThreeDigitPipe?n.applyThreeDigitPipe?e.lcZ(3,15,i[n.field]):e.lcZ(4,17,i[n.field]):i[n.field])("disabled",e.Dn7(5,19,r.disablePipe(n,t),t,r._trnMainService.callPipe))("decimalPlacesRestriction",n.decimalPlacesRestriction?n.decimalPlacesRestriction:null)("readonly",r.isReadOnly(n,t,i)),e.xp6(6),e.Q6J("ngIf",i[n.field]>0&&n.displayOnHoverRate)}}function Lt(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"input",90),e.NdJ("ngModelChange",function(i){const r=e.CHM(t);return e.KtG(r.trnprod[r.col.field]=i)})("ngModelChange",function(i){const r=e.CHM(t),a=r.trnprod,l=r.col,d=r.index,u=e.oxw();return a[l.field]=i,e.KtG(u.onModelChange(i,l,d,a))})("keydown.enter",function(i){const r=e.CHM(t),a=r.col,l=r.index,d=r.trnprod,u=e.oxw();return e.KtG(u.onKeyDown(i,a,l,d))})("keydown.tab",function(i){const r=e.CHM(t),a=r.col,l=r.index,d=r.trnprod,u=e.oxw();return e.KtG(u.onKeyDown(i,a,l,d))}),e.ALo(1,"disable"),e.qZA()}if(2&o){const t=c.index,n=c.col,i=c.trnprod,r=e.oxw();e.s9C("type",r.mfgExpDateType),e.Q6J("id",n.field+t)("ngStyle",n.columnNgStyle)("ngModel",i[n.field])("disabled",e.Dn7(1,6,r.disablePipe(n,t),t,r._trnMainService.callPipe))("min","EXPDATE"==n.field?r.currDate:null)}}function Nt(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"input",91),e.NdJ("ngModelChange",function(i){const r=e.CHM(t);return e.KtG(r.trnprod[r.col.field]=i)})("click",function(i){const r=e.CHM(t),a=r.col,l=r.index,d=r.trnprod,u=e.oxw();return e.KtG(u.onClicked(i,a,l,d))})("change",function(i){const r=e.CHM(t);return e.KtG(r.trnprod[r.col.field]=i.target.checked?1:0)}),e.ALo(1,"twoDigitNumber"),e.ALo(2,"disable"),e.qZA()}if(2&o){const t=c.index,n=c.col,i=c.trnprod,r=e.oxw();e.Q6J("id",n.field+t)("ngStyle",n.columnNgStyle)("ngModel",n.applyTwoDigitPipe?e.lcZ(1,4,i[n.field]):i[n.field])("disabled",e.Dn7(2,6,r.disablePipe(n,t),t,r._trnMainService.callPipe)||"VIEW"==i.rowMode)}}function Bt(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"create-manual-batch-popup",92),e.NdJ("closeBatchPopupEvent",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleCreateBatch())})("emitCreatedBatchEvent",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.emittedBatch(i))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("activeIndex",t.activerowIndex)}}function jt(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"div",93)(1,"PBatchList",94),e.NdJ("dbClickEvent",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.dblClickPopupBatch(i))})("BatchClosedClick",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.model1Closed())})("returnBatchValue",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.returnBatch(i))})("showCreateBatchEvent",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showCreateBatchFromPopup())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("AlternateUnits",t.genericProductService.AlternateUnits)("activerowIndex",t.genericProductService.activerowIndex)("title",t.masterService.PlistTitle)("BList",t.genericProductService.batchlist)("voucherType",t._trnMainService.TrnMainObj.VoucherType)("activeurlpath",t.genericProductService.activeurlpath)}}function kt(o,c){1&o&&(e.TgZ(0,"th",119),e._uU(1," CURRENT WS-PRICE "),e.qZA())}function Dt(o,c){1&o&&(e.TgZ(0,"th",120),e._uU(1,"NEW S-PRICE INCLUDING VAT"),e.qZA())}function Gt(o,c){1&o&&(e.TgZ(0,"th",120),e._uU(1,"NEW S-PRICE EXCLUDING VAT"),e.qZA())}function Vt(o,c){1&o&&(e.TgZ(0,"th",120),e._uU(1," NEW WS-PRICE EXCLUDING VAT "),e.qZA())}function Kt(o,c){1&o&&(e.TgZ(0,"th",120),e._uU(1," NEW WS-PRICE INCLUDING VAT "),e.qZA())}function Ut(o,c){if(1&o&&(e.TgZ(0,"td",57),e._uU(1),e.ALo(2,"twoDigitNumber"),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.WSRATE_A)," ")}}function Zt(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"td",57)(1,"input",123),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw().index,a=e.oxw(3);return e.KtG(a.onChangePurchasePrice(r,i))})("ngModelChange",function(i){e.CHM(t);const r=e.oxw().$implicit;return e.KtG(r.NRATE_A=i)})("keyup",function(i){e.CHM(t);const r=e.oxw().index,a=e.oxw(3);return e.KtG(a.actualMarginCalculation(r,i))})("keydown.enter",function(i){e.CHM(t);const r=e.oxw().index,a=e.oxw(3);return e.KtG(a.onChangePurchasePrice(r,i))})("keydown.Tab",function(i){e.CHM(t);const r=e.oxw().index,a=e.oxw(3);return e.KtG(a.onChangePurchasePrice(r,i))}),e.qZA()()}if(2&o){const t=e.oxw(),n=t.index,i=t.$implicit,r=e.oxw(3);e.xp6(1),e.MGl("id","newSellingPrice",n,""),e.Q6J("ngModel",i.NRATE_A)("disabled","VIEW"==i.rowMode||i.isPurchaseOrderItem||r._trnMainService.TrnMainObj.ProdList[r.genericProductService.activerowIndex].BASEUNIT!=i.UNIT)}}function Qt(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"td",57)(1,"input",123),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw().index,a=e.oxw(3);return e.KtG(a.onChangePurchasePrice(r,i))})("ngModelChange",function(i){e.CHM(t);const r=e.oxw().$implicit;return e.KtG(r.EX_NRATE_A=i)})("keyup",function(i){e.CHM(t);const r=e.oxw().index,a=e.oxw(3);return e.KtG(a.actualMarginCalculation(r,i))})("keydown.enter",function(i){e.CHM(t);const r=e.oxw().index,a=e.oxw(3);return e.KtG(a.onChangePurchasePrice(r,i))})("keydown.Tab",function(i){e.CHM(t);const r=e.oxw().index,a=e.oxw(3);return e.KtG(a.onChangePurchasePrice(r,i))}),e.qZA()()}if(2&o){const t=e.oxw(),n=t.index,i=t.$implicit,r=e.oxw(3);e.xp6(1),e.MGl("id","newSellingPrice",n,""),e.Q6J("ngModel",i.EX_NRATE_A)("disabled","VIEW"==i.rowMode||i.isPurchaseOrderItem||r._trnMainService.TrnMainObj.ProdList[r.genericProductService.activerowIndex].BASEUNIT!=i.UNIT)}}function Ht(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"td",57)(1,"input",123),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw().index,a=e.oxw(3);return e.KtG(a.onChangePurchasePrice(r,i))})("ngModelChange",function(i){e.CHM(t);const r=e.oxw().$implicit;return e.KtG(r.WNRATE_A=i)})("keyup",function(i){e.CHM(t);const r=e.oxw().index,a=e.oxw(3);return e.KtG(a.actualMarginCalculation(r,i))})("keydown.enter",function(i){e.CHM(t);const r=e.oxw().index,a=e.oxw(3);return e.KtG(a.onChangePurchasePrice(r,i))})("keydown.Tab",function(i){e.CHM(t);const r=e.oxw().index,a=e.oxw(3);return e.KtG(a.onChangePurchasePrice(r,i))}),e.qZA()()}if(2&o){const t=e.oxw(),n=t.index,i=t.$implicit,r=e.oxw(3);e.xp6(1),e.MGl("id","newWholeSellingPrice",n,""),e.Q6J("ngModel",i.WNRATE_A)("disabled","VIEW"==i.rowMode||i.isPurchaseOrderItem||r._trnMainService.TrnMainObj.ProdList[r.genericProductService.activerowIndex].BASEUNIT!=i.UNIT)}}function Ft(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"td",124)(1,"input",123),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw().index,a=e.oxw(3);return e.KtG(a.onChangePurchasePrice(r,i))})("ngModelChange",function(i){e.CHM(t);const r=e.oxw().$implicit;return e.KtG(r.EX_WNRATE_A=i)})("keyup",function(i){e.CHM(t);const r=e.oxw().index,a=e.oxw(3);return e.KtG(a.actualMarginCalculation(r,i))})("keydown.enter",function(i){e.CHM(t);const r=e.oxw().index,a=e.oxw(3);return e.KtG(a.onChangePurchasePrice(r,i))})("keydown.Tab",function(i){e.CHM(t);const r=e.oxw().index,a=e.oxw(3);return e.KtG(a.onChangePurchasePrice(r,i))}),e.qZA()()}if(2&o){const t=e.oxw(),n=t.index,i=t.$implicit,r=e.oxw(3);e.xp6(1),e.MGl("id","newWholeSellingPrice",n,""),e.Q6J("ngModel",i.EX_WNRATE_A)("disabled","VIEW"==i.rowMode||i.isPurchaseOrderItem||r._trnMainService.TrnMainObj.ProdList[r.genericProductService.activerowIndex].BASEUNIT!=i.UNIT)}}function Jt(o,c){if(1&o&&(e.TgZ(0,"tbody")(1,"tr",121)(2,"td",57),e._uU(3),e.qZA(),e.TgZ(4,"td",57),e._uU(5),e.ALo(6,"twoDigitNumber"),e.qZA(),e.YNc(7,Ut,3,3,"td",60),e.YNc(8,Zt,2,3,"td",60),e.YNc(9,Qt,2,3,"td",60),e.YNc(10,Ht,2,3,"td",60),e.YNc(11,Ft,2,3,"td",122),e.qZA()()),2&o){const t=c.$implicit,n=e.oxw(3);e.xp6(3),e.Oqu(t.UNIT),e.xp6(2),e.hij(" ",e.lcZ(6,7,t.CRATE_A)," "),e.xp6(2),e.Q6J("ngIf",1==n.userSetting.ENABLEWSALESRATEBILLING),e.xp6(1),e.Q6J("ngIf",0===(null==n.userSetting?null:n.userSetting.VatExcludingRate)),e.xp6(1),e.Q6J("ngIf",1===(null==n.userSetting?null:n.userSetting.VatExcludingRate)),e.xp6(1),e.Q6J("ngIf",1==n.userSetting.ENABLEWSALESRATEBILLING&&0==(null==n.userSetting?null:n.userSetting.VatExcludingRate)),e.xp6(1),e.Q6J("ngIf",1==n.userSetting.ENABLEWSALESRATEBILLING&&1==(null==n.userSetting?null:n.userSetting.VatExcludingRate))}}function Wt(o,c){if(1&o&&(e.TgZ(0,"h6",125),e._uU(1),e.ALo(2,"twoDigitNumber"),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.hij(" Actual Margin (RETAIL): ",e.lcZ(2,1,t._trnMainService.TrnMainObj.ProdList[t.genericProductService.activerowIndex].ActualmarginRetial),"% ")}}function Yt(o,c){if(1&o&&(e.TgZ(0,"div",126)(1,"h6"),e._uU(2),e.ALo(3,"twoDigitNumber"),e.qZA(),e.TgZ(4,"h6"),e._uU(5),e.ALo(6,"twoDigitNumber"),e.qZA()()),2&o){const t=e.oxw(3);e.xp6(2),e.hij("Actual Margin (RETAIL): ",e.lcZ(3,2,t._trnMainService.TrnMainObj.ProdList[t.genericProductService.activerowIndex].ActualmarginRetial),"%"),e.xp6(3),e.hij("Actual Margin (Wholesale): ",e.lcZ(6,4,t._trnMainService.TrnMainObj.ProdList[t.genericProductService.activerowIndex].ActualmarginWholeSale),"%")}}function qt(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"div",97)(1,"div",98)(2,"div",99)(3,"h4",100),e._uU(4," Selling Price Setting "),e.qZA()(),e.TgZ(5,"div",101)(6,"div")(7,"h5",100),e._uU(8," Cost Price has been changed.Please reset you new Selling Price "),e.qZA(),e._UZ(9,"hr",102),e.qZA(),e.TgZ(10,"div",46)(11,"label"),e._uU(12,"Label MRP:"),e.qZA(),e.TgZ(13,"input",103),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r._trnMainService.TrnMainObj.ProdList[r.genericProductService.activerowIndex].LABELMRP=i)}),e.qZA()(),e.TgZ(14,"fieldset")(15,"legend",104),e._uU(16," New Selling Price Setting "),e.qZA(),e.TgZ(17,"table",105)(18,"thead")(19,"tr",106)(20,"th",107),e._uU(21,"UOM"),e.qZA(),e.TgZ(22,"th",108),e._uU(23,"CURRENT S-PRICE"),e.qZA(),e.YNc(24,kt,2,0,"th",109),e.YNc(25,Dt,2,0,"th",110),e.YNc(26,Gt,2,0,"th",110),e.YNc(27,Vt,2,0,"th",111),e.YNc(28,Kt,2,0,"th",111),e.qZA()(),e.YNc(29,Jt,12,9,"tbody",5),e.qZA(),e.TgZ(30,"div",46)(31,"div",112)(32,"div",113)(33,"h6"),e._uU(34),e.qZA()(),e.TgZ(35,"div",114),e.YNc(36,Wt,3,3,"h6",115),e.YNc(37,Yt,7,6,"div",116),e.qZA()()()(),e.TgZ(38,"button",117),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.onApplyClickNewPrice())})("keydown.enter",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.onApplyClickNewPrice())}),e._uU(39," APPLY "),e.qZA(),e.TgZ(40,"button",118),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.onApplyOldPriceClick())})("keydown.enter",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.onApplyOldPriceClick())}),e._uU(41," APPLY OLD S-PRICE "),e.qZA()()()()}if(2&o){const t=e.oxw(2);e.xp6(13),e.Q6J("ngModel",t._trnMainService.TrnMainObj.ProdList[t.genericProductService.activerowIndex].LABELMRP),e.xp6(11),e.Q6J("ngIf",1==t.userSetting.ENABLEWSALESRATEBILLING),e.xp6(1),e.Q6J("ngIf",0==(null==t.userSetting?null:t.userSetting.VatExcludingRate)),e.xp6(1),e.Q6J("ngIf",1==(null==t.userSetting?null:t.userSetting.VatExcludingRate)),e.xp6(1),e.Q6J("ngIf",1==t.userSetting.ENABLEWSALESRATEBILLING&&1==(null==t.userSetting?null:t.userSetting.VatExcludingRate)),e.xp6(1),e.Q6J("ngIf",1==t.userSetting.ENABLEWSALESRATEBILLING&&0==(null==t.userSetting?null:t.userSetting.VatExcludingRate)),e.xp6(1),e.Q6J("ngForOf",t._trnMainService.priceChangeList),e.xp6(5),e.hij(" Recommended Margin: ",t._trnMainService.selectedProdcutRecMargin,"% "),e.xp6(2),e.Q6J("ngIf",!t.userSetting.ENABLEWSALESRATEBILLING),e.xp6(1),e.Q6J("ngIf",1==t.userSetting.ENABLEWSALESRATEBILLING)}}function $t(o,c){if(1&o&&(e.TgZ(0,"div",95),e.YNc(1,qt,42,10,"div",96),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==t._trnMainService.TrnMainObj.ProdList[t.genericProductService.activerowIndex]?null:t._trnMainService.TrnMainObj.ProdList[t.genericProductService.activerowIndex].showPriceChangePopup)&&2==t.userSetting.EnableBatch||1==t.userSetting.EnableBatch)}}function Xt(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"div",127)(2,"div",128)(3,"div",129)(4,"h6",130),e._uU(5," Authorization for Negative Stock Entry "),e.qZA(),e.TgZ(6,"button",43),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.closeModal())}),e.TgZ(7,"span",44),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",45)(10,"div",131)(11,"label",132),e._uU(12,"User Name:"),e.qZA(),e.TgZ(13,"div",133)(14,"input",134),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r._trnMainService.disAuthObj.username=i)}),e.qZA()()(),e.TgZ(15,"div",131)(16,"label",132),e._uU(17,"Password:"),e.qZA(),e.TgZ(18,"div",133)(19,"input",135),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r._trnMainService.disAuthObj.password=i)}),e.qZA()()()(),e.TgZ(20,"div",136)(21,"button",137),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.confirmAuthorization())}),e._uU(22," Confirm "),e.qZA(),e.TgZ(23,"button",138),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.closeModal())}),e._uU(24," Cancel "),e.qZA()()()()()}if(2&o){const t=e.oxw();e.xp6(14),e.Q6J("ngModel",t._trnMainService.disAuthObj.username),e.xp6(5),e.Q6J("ngModel",t._trnMainService.disAuthObj.password)}}function zt(o,c){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA()()),2&o){const t=c.$implicit;e.xp6(2),e.Oqu(t.AssetID)}}function en(o,c){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",127)(2,"div",128)(3,"div",129)(4,"h6",130),e._uU(5),e.qZA(),e.TgZ(6,"button",43),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.closeAssetId())}),e.TgZ(7,"span",44),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",45)(10,"div",131)(11,"table")(12,"thead")(13,"th"),e._uU(14,"Asset ID"),e.qZA()(),e.TgZ(15,"tbody"),e.YNc(16,zt,3,1,"tr",5),e.qZA()()()()()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(5),e.hij(" ITEM NAME: ",t.showAssetProductDetail.ITEMNAME," "),e.xp6(11),e.Q6J("ngForOf",t.showAssetProductDetail.LIST)}}const tn=function(o){return{fixedHeight:o}},nn=function(o){return{overflow:o}},rn=function(o){return{height:o}},on=function(){return{backdrop:"static"}};let cn=(()=>{class o{constructor(t,n,i,r,a,l,d,u,T,y,an,sn,ln,dn){this.masterService=t,this._trnMainService=n,this.arouter=i,this.dialog=r,this.spinnerService=a,this.authservice=l,this.userRightAuthService=d,this.validationService=u,this.alertService=T,this.genericProductService=y,this.entryValidationService=an,this.responseMsgService=sn,this.productHelperService=ln,this.focusService=dn,this.showNonItemGenericGrid=new e.vpe,this.GenericPopUpSettings=new w.im,this.gridPopupSettingsForMultiplePrice=new R.JP,this.ShowGenericGridEvent=new e.vpe,this.onChangeProductionItem=new e.vpe,this.activerowIndex=0,this.showDiscountAuth=!1,this.mfgExpDateType="month",this.showStockedQuantityOnly=0,this.barcodeDetailActiverowIndex=0,this.barCodeAdded=0,this.barcodeWiseProductIndex=0,this.stringValue="",this.hover=!1,this.applyTwoDigitPipe=!0,this.applyThreeDigitPipe=!0,this.currDate="",this.maxDate="",this.showAssetProductDetail={},this.showCreateBatch=!1,this.selectComments=[{name:"Nil"},{name:"Bulk Order"},{name:"Customer Order"}],this.batchList=[],this.setVariantData=_n=>{let p=Object.assign({},this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex]),K=[];for(var g of _n)if(p.VaraintDetailS=[],this.masterService.nullToZeroConverter(g.QTY)>0){let A="";p.VARIANTDESCA="";var U={};for(var P in g)-1==["QTY","PRATE","MRP","SRATE","BARCODE"].indexOf(P)&&(A+=g[P].VARIANTBARCODE,p.VARIANTDESCA=p.VARIANTDESCA+`<b>${this._trnMainService.getVariantNameFromId(P)}</b>:${g[P].NAME} &nbsp;`,U[g[P].VARIANTNAME]=g[P].NAME);p.VaraintDetailS.push(U),p.VARIANTLIST=g,p.BC=g.BARCODE?g.BARCODE:p.MCODE+A,p.Quantity=g.QTY,p.MRP=g.MRP,p.ALTMRP=g.MRP,p.REALQTY_IN=g.QTY,p.ALTERNATEQUANTIY=g.QTY,p.AltQty=g.QTY,p.PRATE=g.PRATE,p.RATE=g.PRATE,p.REALRATE=g.PRATE,p.ALTRATE=g.PRATE,"purchase-import"==this._trnMainService.activeurlpath&&(p.INVRATE=g.PRATE,p.ALTRATE=p.INVRATE*this._trnMainService.TrnMainObj.EXRATE,p.RATE=p.ALTRATE),p.SPRICE=g.SRATE,p.SellingPrice=g.SRATE,p.ALTRATE2=g.SRATE,this._trnMainService.TrnMainObj.VoucherType==s.Km.ProductionEntry&&(p.SELLRATEBEFORETAX=g.SRATE),K.push(Object.assign({},p))}let x=this._trnMainService.TrnMainObj.ProdList.slice(0,this.genericProductService.activerowIndex),pn=this._trnMainService.TrnMainObj.ProdList.slice(this.genericProductService.activerowIndex+1);for(var gn of(this._trnMainService.TrnMainObj.ProdList.splice(this.genericProductService.activerowIndex),K))x.push(gn);for(var Sn of pn)x.push(Sn);this._trnMainService.TrnMainObj.ProdList=x,this.checkDeuplicateCodeAndRate(),this._trnMainService.ReCalculateBillWithNormal(),setTimeout(()=>{document.getElementById("ALTRATE"+this.genericProductService.activerowIndex).focus()},500)},this.Snos=0,console.log("checkkkk",this.selectComments),console.log({gridsetting:this.genericProductEntrySetting}),this.genericProductService.activeurlpath=i.snapshot.url[0]?.path,this.appType=this.masterService.appType,this.userSetting=this.authservice.getSetting(),this.userProfile=this.authservice.getUserProfile(),1==this.userSetting.enableDayWiseMfgEXPDate&&(this.mfgExpDateType="date");const un=new Date;this.currDate=(0,S.p6)(un,"yyyy-MM-dd","en-US"),this.maxDate="2999-12-31"}ngAfterViewInit(){this.genericProductService.genericGrid=this.genericGrid,this.genericProductService.matrixitemgrid=this.matrixitemgrid,this.genericProductService.onChangeProductionItem=this.onChangeProductionItem}ngOnInit(){this.hideUnhideColumn()}isTableRowSelected(){}highlightBarCodeWiseRow(){}highlightLessStockItem(t){}RowClick(t){this.genericProductService.activerowIndex=t,this.activerowIndex=t,this.masterService.ShowMore=!1,this.genericProductService.showPOQtyRate(t);const n=new Date;0==this.userSetting.EnablePreviousDateInExpiry&&(this.currDate=(0,S.p6)(n,"yyyy-MM-dd","en-US"),this.maxDate="2999-12-31",0==this.userSetting.enableDayWiseMfgEXPDate&&(this.currDate=(0,S.p6)(n,"yyyy-MM","en-US"),this.maxDate="2999-12"))}addRowInsert(){"asset-purchase-invoice"==this._trnMainService.activeurlpath||"assets-openingstockentry"==this._trnMainService.activeurlpath?this._trnMainService.initializeAssetProdlist():this._trnMainService.addRow()}deleteRow(t){if(!this._trnMainService.TrnMainObj.REFORDBILL||2!=this._trnMainService.userSetting.PODELIVERYMODE||1!=this._trnMainService.userSetting.ENABLE_GRN_IN_PI||this._trnMainService.TrnMainObj.VoucherType!==s.Km.Purchase||!("GR"==this._trnMainService.TrnMainObj.VoucherAbbName||this._trnMainService.TrnMainObj.CHALANNO&&this._trnMainService.TrnMainObj.CHALANNO.startsWith("GR"))){if(this._trnMainService.TrnMainObj.VoucherType===s.Km.DebitNote&&1==this._trnMainService.TrnMainObj.DOFULLRETURN&&this._trnMainService.TrnMainObj.REFBILL&&this._trnMainService.TrnMainObj.REFBILL?.startsWith("PI")||(this._trnMainService.TrnMainObj.VoucherType===s.Km.GoodsReceived||this._trnMainService.TrnMainObj.VoucherType===s.Km.Purchase)&&1==this._trnMainService.userSetting.PODELIVERYMODE&&this._trnMainService.TrnMainObj.REFORDBILL&&this._trnMainService.TrnMainObj.REFORDBILL?.startsWith("PO"))return!1;if("asset-purchase-invoice"===this._trnMainService.activeurlpath||"assets-openingstockentry"===this._trnMainService.activeurlpath)return void(confirm("Are you sure u you want to delete the Row?")&&(this.genericProductService.activerowIndex=this.rowIndex=t,this._trnMainService.TrnMainObj.AssetsProdList.splice(this.genericProductService.activerowIndex,null==this._trnMainService.TrnMainObj.AssetsProdList[this.genericProductService.activerowIndex]?.MCODE&&1==this._trnMainService.TrnMainObj.AssetsProdList.length?0:1),0===this._trnMainService.TrnMainObj.AssetsProdList.length&&this._trnMainService.initializeAssetProdlist(),this._trnMainService.ReCalculateBillForAsset(this._trnMainService.TrnMainObj)));if("EDIT"==this._trnMainService.TrnMainObj?.Mode?.toUpperCase()&&(this._trnMainService.TrnMainObj.VoucherType==s.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType==s.Km.OpeningStockBalance||this._trnMainService.TrnMainObj.VoucherType==s.Km.BranchTransferOut)){if(this.userRightAuthService.checkuserrightfordelete(this.genericProductService.activerowIndex,this._trnMainService.TrnMainObj.VoucherType))return;if((this._trnMainService.TrnMainObj.VoucherType==s.Km.Purchase&&2==this.userSetting.ALLOWMINUSTOCK_PURCHASE||this._trnMainService.TrnMainObj.VoucherType==s.Km.OpeningStockBalance&&2==this.userSetting.ALLOWMINUSTOCK_OPENING)&&"EDIT"===this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].rowMode?.toUpperCase()&&this._trnMainService.nullToZeroConverter(this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].TOTALOUTWARDSTOCK)>0&&this.alertService.info(`Edited Quantity Exceed the transaction stock  for the item::${this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ITEMDESC}`),(this._trnMainService.TrnMainObj.VoucherType==s.Km.OpeningStockBalance||this._trnMainService.TrnMainObj.VoucherType==s.Km.Purchase)&&0==this.userSetting.ENABLESINGLEBATCHMODE&&this._trnMainService.nullToZeroConverter(this._trnMainService.TrnMainObj.ProdList[t].TOTALOUTWARDSTOCK)>0&&"EDIT"===this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].rowMode?.toUpperCase())return void this.alertService.info(`Transaction has been completed for this item::${this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ITEMDESC}, cannot delete.`)}this._trnMainService.TrnMainObj.VoucherType!=s.Km.BranchTransferIn&&(3!=this._trnMainService.TrnMainObj.VoucherType||"IMPORT_PURCHASE"!=this._trnMainService.TrnMainObj.AdditionalObj.tag||1!=this._trnMainService.userSetting.ENABLE_GRN_IN_IMPORTPI)&&confirm("Are you sure u you want to delete the Row?")&&(this.genericProductService.activerowIndex=this.rowIndex=t,this._trnMainService.TrnMainObj.ProdList.splice(this.genericProductService.activerowIndex,null==this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex]?.MCODE&&1==this._trnMainService.TrnMainObj.ProdList.length?0:1),0===this._trnMainService.TrnMainObj.ProdList.length&&this._trnMainService.addRow(),this._trnMainService.ReCalculateBillWithNormal(),this._trnMainService.quantityExceedCheck="")}}onGenericGridPopup(){}dblClickbarcodePopUP(t){}dblClickPricePopUP(t){}checkDeuplicateCodeAndRate(){let t=[],n=this._trnMainService.TrnMainObj.ProdList.filter(i=>i.MCODE==this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].MCODE);if(null!=n&&n.length>1){let i=0;for(let r of this._trnMainService.TrnMainObj.ProdList)r.MCODE==this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].MCODE&&t.push(i),i++}}setBatchWiseEditData(t){}onUserRightReceived(t){}onKeyDown(t,n,i,r){if("Enter"===t.key||"Tab"==t.key)t.stopImmediatePropagation(),this.genericProductService.focusByElementId(n.focusTo+i),n.onEnter&&n.onEnter(r,i,n,t);else if("Tab"==t.key){if(1==t.shiftKey)return;this.genericProductService.focusByElementId(n.focusTo+i)}}emittedBatch(t){t&&(this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].BATCH=t.batchName,this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].MFGDATE=t.mfgDate,this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].EXPDATE=t.expDate,setTimeout(()=>{this.masterService.focusAnyControl("ALTERNATEQUANTIY"+this.genericProductService.activerowIndex)},301))}toggleCreateBatch(){this.showCreateBatch=!this.showCreateBatch,setTimeout(()=>{this.masterService.focusAnyControl("BATCH"+this.genericProductService.activerowIndex)},300)}showCreateBatchFromPopup(){this.showCreateBatch=!0,this.model1Closed()}onEnter(t,n,i,r){this.RowClick(i),2==this.userSetting.EnableBatch&&this._trnMainService.TrnMainObj.VoucherType==s.Km.DebitNote?document.getElementById("ALTUNIT"+this.genericProductService.activerowIndex).focus():this.genericProductService.getPreviousBatchList()}isReadOnly(t,n,i){if(t.isReadOnly&&t.isReadOnly(n,i))return!0}onChange(t,n,i,r){n.onChange&&n.onChange(t,n,i,r)}onModelChange(t,n,i,r){n.onModelChange&&n.onModelChange(t,n,i,r)}onKeyPress(t,n,i){n.onKeyPress&&n.onKeyPress(t,n)}disablePipe(t,n){var i="";return t.disablePipe&&(i=t.disablePipe(t,n)),i}colorPipe(t,n,i){if(t.colorPipe)return t.colorPipe(t,n,i)}onClicked(t,n,i,r){n.onClicked&&n.onClicked(t,n,i,r)}rateChange(t,n){n.applyTwoDigitPipe&&(n.applyTwoDigitPipe=!1),n.applyThreeDigitPipe&&(n.applyThreeDigitPipe=!1)}rateFocusOut(t,n){n.applyTwoDigitPipe=!0,n.applyThreeDigitPipe=!0}hoverDiscount(t,n,i,r){"mouseover"==t.type&&n.onHover&&(this.hover=!0,n.onHover(i))}hoverDescription(t,n,i,r){console.log("mouseover"==t.type),"mouseover"==t.type&&n.onHover&&(this.hover=!0,n.onHover(i))}hoverRate(t,n,i,r){"mouseover"==t.type&&n.onHover&&(this.hover=!0,n.onHover(i))}hoverLeaveDiscount(){this.hover=!1,this.genericProductService.hoverId=null}hoverLeaveDescription(){this.hover=!1,this.genericProductService.codeHoverId=null}hoverLeaveRate(){this.hover=!1,this.genericProductService.rateHoverId=null}showGenericGrid(t){console.log({keyevent:t}),this.ShowGenericGridEvent.emit({event:t.event,genericGrid:this.genericGrid,index:t.index})}hideUnhideColumn(){this.genericProductEntrySetting.columns.forEach(t=>{t.hidden=this.hideColumn(t)})}hideColumn(t){if(!t)return!1;if(1==t?.hidden)return!0;if(this.genericProductEntrySetting.hideColumn){if(1==this.genericProductEntrySetting.hideColumn(t))return!0}else{var i=this._trnMainService.checkRightForOptional(s.Km[this._trnMainService.TrnMainObj.VoucherType],"HideColumn",t.header);if(i&&("true"==i||"1"==i))return!0}return!1}getTemplate(t){if(console.log({templaterefs:this.templateRefs}),this.templateRefs){var n=this.templateRefs.toArray().find(i=>i.name.toLowerCase()==t?.toLowerCase())?.template;return n||(n=this.templateRefs.toArray().find(i=>"default"==i.name.toLowerCase()).template),console.log({gettemplate:n}),n}}updown(t){"F2"===t.code&&this.genericProductEntrySetting.barcodeDisplay&&this.getBarodePagedList(),"F7"==t.code&&(t.preventDefault(),this.genericProductEntrySetting.voucherType==s.Km.DebitNote&&(this.gridPopupSettingsForMultiplePrice=this.masterService.getGridSetttingForMultiplePrice("multiplePrice",this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].MCODE,this._trnMainService.TrnMainObj.VoucherPrefix),this.genericGridMulitplePricePopup.show())),"F9"===t.code&&(t.preventDefault(),this._trnMainService.inputCode&&this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ProductDetails.length>0&&this.dialougeOpen()),"F11"==t.code&&t.ctrlKey&&(t.preventDefault(),this._trnMainService.barCodes.BC||null!=this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].MCODE&&this.genericProductService.checkBatchWiseRate()),"Escape"==t.code&&(t.preventDefault(),1==this._trnMainService.showNegativeBilling&&this.closeModal())}getBarodePagedList(){this.barcodeGridSettings=this.masterService.getGenericGridPopUpSettings("barcodeList"),this.barCodeGridPopup.show()}dialougeOpen(){console.log("dialouge open ProductDetails",this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ProductDetails),this._trnMainService.currentIndexProductDetails=this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ProductDetails,this.dialog.open(L.H,{hasBackdrop:!0,autoFocus:!1,data:{type:this._trnMainService.TrnMainObj.VoucherPrefix,mode:this._trnMainService.TrnMainObj.Mode,warehouse:this._trnMainService.TrnMainObj.MWAREHOUSE,message:this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex],curretnIndexPrevDetials:this._trnMainService.currentIndexProductDetails,productList:this._trnMainService.TrnMainObj.ProdList}})}closeModal(){this.showDiscountAuth=!1,this._trnMainService.showNegativeBilling=!1,1==this.userSetting.ENABLESINGLEBATCHMODE&&(this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ALTERNATEQUANTIY=0),this.userRightAuthService.showAuthPopup=!1}emitReferenceQuantity(){}dblClickForAssetPurchase(t){if(t.hasOwnProperty("ACID")&&t.hasOwnProperty("ACNAME")&&t.hasOwnProperty("HASSUBLEDGER"))return this._trnMainService.TrnMainObj.AssetsProdList[this.genericProductService.activerowIndex].ACID=t.ACID,this._trnMainService.TrnMainObj.AssetsProdList[this.genericProductService.activerowIndex].ACNAME=t.ACNAME,this._trnMainService.TrnMainObj.AssetsProdList[this.genericProductService.activerowIndex].HASSUBLEDGER=t.HASSUBLEDGER,this._trnMainService.callPipe=!this._trnMainService.callPipe,void setTimeout(()=>{document.getElementById("SL_ACNAME"+this.genericProductService.activerowIndex).disabled?document.getElementById("ALTQTY_IN"+this.genericProductService.activerowIndex).focus():document.getElementById("SL_ACNAME"+this.genericProductService.activerowIndex).focus()});if(t.hasOwnProperty("SL_ACID")&&t.hasOwnProperty("SL_ACNAME"))return this._trnMainService.TrnMainObj.AssetsProdList[this.genericProductService.activerowIndex].SL_ACID=t.SL_ACID,this._trnMainService.TrnMainObj.AssetsProdList[this.genericProductService.activerowIndex].SL_ACNAME=t.SL_ACNAME,this._trnMainService.callPipe=!this._trnMainService.callPipe,void setTimeout(()=>{document.getElementById("ALTQTY_IN"+this.genericProductService.activerowIndex)&&document.getElementById("ALTQTY_IN"+this.genericProductService.activerowIndex).focus()});let n=this._trnMainService.TrnMainObj.AssetsProdList[this.genericProductService.activerowIndex];n.ITEMDESC=t.DESCA,n.ALTRATE=t.PRATE,n.PRATE=t.PRATE,n.Rate=t.PRATE,n.ALTUNIT=t.BASEUNIT,n.UNIT=t.BASEUNIT,n.MCODE=t.MCODE,n.MENUCODE=t.MENUCODE,n.ISVAT=t.VAT,setTimeout(()=>{document.getElementById("REMARKS"+this.genericProductService.activerowIndex)?document.getElementById("REMARKS"+this.genericProductService.activerowIndex).focus():document.getElementById("ACNAME"+this.genericProductService.activerowIndex)&&document.getElementById("ACNAME"+this.genericProductService.activerowIndex).focus()})}dblClickPopupItem(t){if("asset-purchase-invoice"==this._trnMainService.activeurlpath||"assets-openingstockentry"==this._trnMainService.activeurlpath)return void this.dblClickForAssetPurchase(t);console.log("value",t);let n=this._trnMainService.TrnMainObj.VoucherType;if(this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex]={},(this._trnMainService.TrnMainObj.VoucherType===s.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType===s.Km.TaxInvoice||this._trnMainService.TrnMainObj.VoucherType===s.Km.Sales)&&this.userSetting.CompulsoryHSCodeInput){if(t&&!t.HSNCode)return void this.alertService.warning("HS Code is not registered!");this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].HS_Code=t.HSNCode}if(!1===this.validationService.validateDuplicateItemEntry(this._trnMainService.TrnMainObj,t))return this.alertService.info("Cannot enter duplicate item with same batch and same net rate!"),void this.alertService.emitShowHideSubject.subscribe(l=>{setTimeout(()=>{document.getElementById("itemDesc"+this.genericProductService.activerowIndex).focus()},0)});!1!==this.genericProductService.ValidateDuplicateItemEntry(t)?(this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].HASBATCH=t.HASBATCH,"add-sales-invoice-wholesale"===this.genericProductService.activeurlpath?(this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].RATE=t.WRATE,this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ALTRATE=t.WRATE):this._trnMainService.TrnMainObj.VoucherType!=s.Km.BranchTransferOut&&(this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].RATE=t.RATE,this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].BASERATE=t.RATE,this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ALTRATE=t.RATE),"add-purchase-invoice"===this.genericProductService.activeurlpath&&1===this.userSetting.EnableServiceCharge&&(this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ISVAT=t.ISVAT),this.genericProductEntrySetting.setRowItemFromSelectedItem(t),this._trnMainService.NeedToTakePriceFromMenuItem()&&(n in s.qK&&this._trnMainService.assignProductMasterRate(this.genericProductService.activerowIndex,t.RATE),"add-sales-invoice-wholesale"===this.genericProductService.activeurlpath&&this._trnMainService.assignProductMasterRate(this.genericProductService.activerowIndex,t.WRATE),n in s.N7&&this._trnMainService.assignProductMasterRate(this.genericProductService.activerowIndex,t.PRATE,t.CONFACTOR)),this._trnMainService.TrnMainObj.VoucherType===s.Km.SalesOrder&&(this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ALTRATE2=t.ALTRATE2),this.genericProductService.focusByElementId(this.genericProductEntrySetting.getIdToSetFocus),this.masterService.PlistTitle="",this._trnMainService.TrnMainObj.VoucherType==s.Km.ManualstockEntry&&(this.focusAfterItemSelect(),1===t.HASVARIANT&&0===this.userSetting.EnableBatchWisePrice&&this.genericProductService.checkBatchWiseRateSettingZero()),null!=this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex]&&(this.genericProductService.batchlist=[],this.genericProductEntrySetting.setAllUnitsOfItem(),this._trnMainService.TrnMainObj.VoucherType==s.Km.BatchAdjustment&&this.FocusForBatchAdjustment(t.HASVARIANT),this.genericProductEntrySetting.setRowItemRate(t,l=>this.CheckVariant(l))),6===t.PTYPE&&this._trnMainService.TrnMainObj.VoucherType===s.Km.TaxInvoice&&(this.genericProductService.getProductColorMcodeWise(),!0===this._trnMainService.hideProductDescriptionPopUp&&(this.genericProductService.showBarCodeDetail=!0),0===this.genericProductService.activerowIndex?this.loadBarCodeRow(this.genericProductService.activerowIndex):6===this.userSetting.EnableTelcomDevices&&this.addNewBarCodeDetailRow(this.genericProductService.activerowIndex)),1===this.userSetting.EnableWSRateGroup&&this._trnMainService.TrnMainObj.VoucherType===s.Km.SalesOrder&&(this._trnMainService.nullToZeroConverter(this.userProfile.RateGroupId)>0||this._trnMainService.nullToZeroConverter(this.userProfile.WRateGroupId)>0)&&this._trnMainService.getItemGroupWiseRate(this.genericProductService.activerowIndex),1===this.userSetting.ENABLERATEGROUP&&("abbreviated-sales-invoice"===this.genericProductService.activeurlpath||"add-sales-invoice"===this.genericProductService.activeurlpath||"add-sales-invoice-wholesale"===this.genericProductService.activeurlpath)&&(this._trnMainService.nullToZeroConverter(this.userProfile.RateGroupId)>0||this._trnMainService.nullToZeroConverter(this.userProfile.WRateGroupId)>0)&&this._trnMainService.getItemGroupWiseRate(this.genericProductService.activerowIndex),this._trnMainService.NeedToTakePriceFromMenuItem()||(this._trnMainService.TrnMainObj.VoucherType===s.Km.TaxInvoice||this._trnMainService.TrnMainObj.VoucherType===s.Km.StockSettlement||this._trnMainService.TrnMainObj.VoucherType===s.Km.Sales||this._trnMainService.TrnMainObj.VoucherType===s.Km.PerformaSalesInvoice||this._trnMainService.TrnMainObj.VoucherType===s.Km.DeliveryChalan)&&1===this.userSetting.EnableItemWiseBatch&&1===t.HASBATCH&&this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].PTYPE<10&&this.genericProductService.checkBatchWiseRate(),(this._trnMainService.TrnMainObj.VoucherType===s.Km.TaxInvoice||this._trnMainService.TrnMainObj.VoucherType===s.Km.Sales||this._trnMainService.TrnMainObj.VoucherType===s.Km.PerformaSalesInvoice||this._trnMainService.TrnMainObj.VoucherType===s.Km.DeliveryChalan)&&0===this.userSetting.EnableItemWiseBatch&&1===this.userSetting.EnableBatchWisePrice&&this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].PTYPE<10&&this.genericProductService.checkBatchWiseRate(),this._trnMainService.NeedToTakePriceFromMenuItem()||(this._trnMainService.TrnMainObj.VoucherType===s.Km.StockIssueReturn||this._trnMainService.TrnMainObj.VoucherType===s.Km.StockIssue||this._trnMainService.TrnMainObj.VoucherType===s.Km.BranchTransferIn||this._trnMainService.TrnMainObj.VoucherType===s.Km.BranchTransferOut||this._trnMainService.TrnMainObj.VoucherType===s.Km.ProductionEntry||"consumption"===this._trnMainService.TrnMainObj.AdditionalObj.RETURNTYPE||this._trnMainService.TrnMainObj.VoucherType===s.Km.Repack||this._trnMainService.TrnMainObj.VoucherType===s.Km.DebitNote&&0===this.userSetting.REFBILLCOMPULSORINDNOTE||this._trnMainService.TrnMainObj.VoucherType===s.Km.StockSettlement||"self-billing"===this.genericProductService.activeurlpath)&&(this._trnMainService.getAllUnitsOfItem(this.genericProductService.activerowIndex),(1===this.userSetting.EnableBatch||2===this.userSetting.EnableBatch)&&t.PTYPE<10&&9!==t.PTYPE&&(this._trnMainService.TrnMainObj.VoucherType===s.Km.PerformaSalesInvoice&&this._trnMainService.TrnMainObj.REFORDBILL||!1===this.genericProductService.itemFromBC(t.HASVARIANT)&&1!=t.NATURETYPE&&this.genericProductService.checkBatchWiseRate())),(this._trnMainService.TrnMainObj.VoucherType===s.Km.SalesOrder||this._trnMainService.TrnMainObj.VoucherType===s.Km.TaxInvoice||this._trnMainService.TrnMainObj.VoucherType===s.Km.DebitNote&&1===this.userSetting.ENABLESINGLEBATCHMODE&&0===this.userSetting.EnableBatchWisePrice)&&0===this.userSetting.EnableBatchWisePrice&&1===t.HASVARIANT&&this.genericProductService.checkBatchWiseRateSettingZero(),(this._trnMainService.TrnMainObj.VoucherType==s.Km.TaxInvoice||this._trnMainService.TrnMainObj.VoucherType==s.Km.PerformaSalesInvoice||this._trnMainService.TrnMainObj.VoucherType==s.Km.SalesOrder)&&1==this.userSetting.EnableContractPrice&&this.genericProductService.getContractPriceandOtherDiscount(),1!=this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].NATURETYPE&&this._trnMainService.TrnMainObj.VoucherType===s.Km.DebitNote&&0==this.userSetting.REFBILLCOMPULSORINDNOTE&&1==this.userSetting.EnableBatchWisePrice&&0==this._trnMainService.userSetting.ENABLESINGLEBATCHMODE&&this.genericProductService.checkBatchWiseRate(),(this._trnMainService.TrnMainObj.VoucherType===s.Km.CreditNote&&0==this.userSetting.ENABLEMANUALSALESRETURN||this._trnMainService.TrnMainObj.VoucherType===s.Km.DebitNote&&1==this.userSetting.REFBILLCOMPULSORINDNOTE)&&this.genericProductService.assignValueForReturnModeInProd(t),this._trnMainService.TrnMainObj.VoucherType===s.Km.SalesOrder&&this._trnMainService.TrnMainObj.REFORDBILL&&(this.genericProductService.assignRateandQtyLoadFromSO(t),this.genericProductService.assignOrderedDiscount(t)),this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].BC||1===this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].HASVARIANT&&(this._trnMainService.TrnMainObj.VoucherType==s.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType===s.Km.GoodsReceived||this._trnMainService.TrnMainObj.VoucherType==s.Km.OpeningStockBalance||this._trnMainService.TrnMainObj.VoucherType==s.Km.ProductionEntry||this._trnMainService.TrnMainObj.VoucherType==s.Km.RequisitionEntry||this._trnMainService.TrnMainObj.VoucherType==s.Km.Quotation||this._trnMainService.TrnMainObj.VoucherType==s.Km.PurchaseOrder||this._trnMainService.TrnMainObj.VoucherType==s.Km.SalesOrder)&&this.masterService.masterGetmethod(`/getItemWiseVariantAttributes?mcat=${this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].Mcat}&mcode=${this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].MCODE}`).subscribe(l=>{"ok"==l.status&&l.result&&l.result.length&&(this.genericProductService.matrixItemAtrribute=l.result,this.matrixitemgrid.show())}),this.focusAfterItemSelect(),console.log("PRODDDLSIT",this._trnMainService.TrnMainObj.ProdList)):this.alertService.warning("Cannot enter duplicate item!")}CheckVariant(t){this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].BC||1===this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].HASVARIANT&&(this._trnMainService.TrnMainObj.VoucherType==s.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType===s.Km.GoodsReceived||this._trnMainService.TrnMainObj.VoucherType==s.Km.OpeningStockBalance||this._trnMainService.TrnMainObj.VoucherType==s.Km.ProductionEntry||this._trnMainService.TrnMainObj.VoucherType==s.Km.RequisitionEntry||this._trnMainService.TrnMainObj.VoucherType==s.Km.Quotation||this._trnMainService.TrnMainObj.VoucherType==s.Km.PurchaseOrder||this._trnMainService.TrnMainObj.VoucherType==s.Km.SalesOrder)&&this.masterService.masterGetmethod(`/getItemWiseVariantAttributes?mcat=${this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].Mcat}&mcode=${this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].MCODE}`).subscribe(n=>{"ok"==n.status&&n.result&&n.result.length&&(this.genericProductService.matrixItemAtrribute=n.result,this.matrixitemgrid.show())})}GetParentStock(){this._trnMainService.getParentItemStock(this.genericProductService.activerowIndex)}loadBarCodeRow(t){let i={IEMI1:"",IEMI2:""};i.MCODE=0===this.genericProductService.activerowIndex?"":this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].MCODE,i.Color="",0===this.genericProductService.activerowIndex?(this._trnMainService.TrnMainObj.ProdList[0].ProductDetails=[],this._trnMainService.TrnMainObj.ProdList[0].ProductDetails.push(i)):this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ProductDetails.push(i),setTimeout(()=>{null!=document.getElementById(`Color${this.barCodeAdded}${this.barcodeWiseProductIndex}`)&&document.getElementById(`Color${this.barCodeAdded}${this.barcodeWiseProductIndex}`).focus()},20)}addNewBarCodeDetailRow(t){let r={IEMI1:"",IEMI2:""};r.MCODE=this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].MCODE,r.Color="",this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ProductDetails.push(r),setTimeout(()=>{null!=document.getElementById(`Color${this.barCodeAdded}${this.barcodeWiseProductIndex}`)&&document.getElementById(`Color${this.barCodeAdded}${this.barcodeWiseProductIndex}`).focus()},20)}focusQuantityAfterDblClickOnManualStock(){this._trnMainService.TrnMainObj.VoucherType===s.Km.ManualstockEntry&&null!=document.getElementById("ALTERNATEQUANTIY"+this.genericProductService.activerowIndex)&&setTimeout(()=>{document.getElementById("ALTERNATEQUANTIY"+this.genericProductService.activerowIndex).focus()},20)}focusAfterItemSelect(){2==this.userSetting.EnableBatch?(this.focusQuantityAfterDblClickOnManualStock(),null!=document.getElementById("BATCH"+this.genericProductService.activerowIndex)&&setTimeout(()=>{this.focusService.autoFocus(this.genericProductService.activerowIndex,document.getElementById("ITEMDESC"+this.genericProductService.activerowIndex),{},"productEntrySetting.tableId")},20)):this._trnMainService.TrnMainObj.VoucherType==s.Km.BatchAdjustment?null!=document.getElementById("BATCH"+this.genericProductService.activerowIndex)&&setTimeout(()=>{document.getElementById("BATCH"+this.genericProductService.activerowIndex).focus()},20):(null!=document.getElementById("ALTERNATEUNIT"+this.genericProductService.activerowIndex)?(console.log("FOCUS HERE"),setTimeout(()=>{document.getElementById("ALTERNATEUNIT"+this.genericProductService.activerowIndex).focus()},20)):null!=document.getElementById("ALTUNIT"+this.genericProductService.activerowIndex)&&setTimeout(()=>{document.getElementById("ALTUNIT"+this.genericProductService.activerowIndex).focus()},20),83===this._trnMainService.TrnMainObj.VoucherType&&2==this.userSetting.EnablePartialSalesFromDeliveryChalan&&null!=document.getElementById("ALTERNATEQUANTIY"+this.genericProductService.activerowIndex)&&setTimeout(()=>{document.getElementById("ALTERNATEQUANTIY"+this.genericProductService.activerowIndex).focus()},20),74===this._trnMainService.TrnMainObj.VoucherType&&null!=document.getElementById("ALTERNATEUNIT"+this.genericProductService.activerowIndex)&&setTimeout(()=>{document.getElementById("ALTERNATEUNIT"+this.genericProductService.activerowIndex).focus()},20),this._trnMainService.TrnMainObj.VoucherType===s.Km.RequisitionEntry&&null!=document.getElementById("ALTERNATEQUANTIY"+this.genericProductService.activerowIndex)&&setTimeout(()=>{document.getElementById("ALTERNATEQUANTIY"+this.genericProductService.activerowIndex).focus()},20),this._trnMainService.TrnMainObj.VoucherType===s.Km.ProductionEntry&&setTimeout(()=>{document.getElementById("ALTERNATEQUANTIY"+this.genericProductService.activerowIndex).focus()},20),this.focusQuantityAfterDblClickOnManualStock()),this.focusQuantityAfterDblClickOnDeliveryChalanReturn()}FocusForBatchAdjustment(t){1==t?setTimeout(()=>{document.getElementById("sourcebc"+this.genericProductService.activerowIndex).focus()},200):0==t&&setTimeout(()=>{document.getElementById("sourcebatch"+this.genericProductService.activerowIndex).focus()},200)}onFocus(){console.log("Focus Is gained for this Element")}model1Closed(){this.masterService.PlistTitle="",1==this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].REQEXPDATE?setTimeout(()=>{document.getElementById("BATCH"+this.genericProductService.activerowIndex).focus()},300):setTimeout(()=>{document.getElementById("ALTERNATEUNIT"+this.genericProductService.activerowIndex)?.focus()},300)}returnBatch(t){if("self-billing"==this.genericProductService.activeurlpath||this._trnMainService.TrnMainObj.VoucherType===s.Km.DebitNote||this._trnMainService.TrnMainObj.VoucherType===s.Km.ProductionEntry)if(this._trnMainService.ReCalculateBillWithNormal(),t.BATCH||0!=this.userSetting.REFBILLCOMPULSORINDNOTE||1!=this.userSetting.EnableBatch||1!=this.userSetting.EnableBatchWisePrice){let i=[];if(i=this._trnMainService.TrnMainObj.ProdList.filter(2==this.userSetting.EnableBatch?r=>r.BATCH==t.BATCH&&r.MCODE==t.MCODE&&r.CRATE==t.RATE:r=>r.BATCH==t.BATCH&&r.MCODE==t.MCODE),i.length>0)return void this.alertService.warning("Cannot add same item with same batch")}else if(this._trnMainService.TrnMainObj.ProdList.filter(r=>r.CRATE==t.costprice&&r.MCODE==t.MCODE).length>0)return void this.alertService.warning("Cannot add same item with same rate");if(this._trnMainService.assignBatchToActiveProdRow(t,this.genericProductService.activerowIndex),this.masterService.PlistTitle="",this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].PriceSelected=!0,1===this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].HASVARIANT)for(var n in this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].VARIANTLIST=t.VARIANTDETAIL,this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].VARIANTDESCA="",this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].BC=t.BCODE,this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].VARIANTLIST)console.log("Var attribute",n,this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].VARIANTLIST[n]),this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].VARIANTDESCA+=`<b>${n}</b>:${this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].VARIANTLIST[n]} &nbsp;`;(this._trnMainService.TrnMainObj.VoucherType===s.Km.TaxInvoice||this._trnMainService.TrnMainObj.VoucherType===s.Km.DebitNote||this._trnMainService.TrnMainObj.VoucherType===s.Km.StockIssue||this._trnMainService.TrnMainObj.VoucherType===s.Km.BranchTransferOut||this._trnMainService.TrnMainObj.VoucherType===s.Km.ProductionEntry||this._trnMainService.TrnMainObj.VoucherType===s.Km.Repack||this._trnMainService.TrnMainObj.VoucherType===s.Km.StockSettlement||this._trnMainService.TrnMainObj.VoucherType===s.Km.Purchase)&&this.masterService.focusAnyControl("ALTERNATEQUANTIY"+this.genericProductService.activerowIndex),this._trnMainService.TrnMainObj.VoucherType===s.Km.ManualstockEntry&&(this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].WAREHOUSE=this._trnMainService.TrnMainObj.MWAREHOUSE,this.masterService.focusAnyControl("ALTERNATEQUANTIY"+this.genericProductService.activerowIndex))}dblClickPopupBatch(t){this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].showPriceChangePopup=!1,this._trnMainService.showPriceChangeDetail=!1,this.returnBatch(t)}onApplyClickNewPrice(){if(this.validateNewSellingRate(!1)){for(let t of this._trnMainService.priceChangeList){if(1!=this.masterService.is_PurchaseOrder){const n=this.userSetting.VatExcludingRate?"EX_NRATE_A":"NRATE_A";this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].Product.AltSellingPrices.find(i=>i.UNIT==t.UNIT)[n]=t[n]}setTimeout(()=>{this.masterService.focusAnyControl("barcodeField")},0)}this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ActualmarginRetial=0,this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ActualmarginWholeSale=0,this._trnMainService.showPriceChangeDetail=!1}}validateNewSellingRate(t){const n=this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex],i=this.getProductRate(n.NETRATE,n.RATE),r=this.calculatePurchaseRate(i,n.ISVAT);return t?this.validateOldPrice(r):this.validateNewPrice(r)}getProductRate(t,n){const i=this._trnMainService.nullToZeroConverter(t);return 0===i?n:i}calculatePurchaseRate(t,n){return 0===this.userSetting.VatExcludingRate&&1===n?t+t*this.userSetting.VATRate:t}validateOldPrice(t){const n=this._trnMainService.priceChangeList[0];if(1===this.userSetting.EnableBatchWisePrice){const i=this._trnMainService.priceChangeList.find(r=>0===this._trnMainService.nullToZeroConverter(r.CRATE_A));if(i)return this.alertService.warning(`Selling price for this item with UOM: ${i.UNIT} cannot be 0, Please enter valid selling rate`),!1}return!this.checkPriceAboveCost(t,n)&&(this.updatePriceConversionRates(n),this.markSellingPriceChangedIfNeeded(),!0)}checkPriceAboveCost(t,n){return t>n.CRATE_A?(this.alertService.warning("Cost price for this item cannot be more than Sales price"),!0):1===this.userSetting.ENABLEWSALESRATEBILLING&&t>n.WSRATE_A&&(this.alertService.warning("New Cost price for this item cannot be more than Old Wholesale Sales price"),!0)}updatePriceConversionRates(t){t.CRATE_A&&(t.NRATE_A=t.CRATE_A,t.EX_NRATE_A=this.convertToExclusiveRate(t.CRATE_A)),t.WSRATE_A&&(t.WNRATE_A=t.WSRATE_A,t.EX_WNRATE_A=this.convertToExclusiveRate(t.WSRATE_A))}convertToExclusiveRate(t){return 0==this.userSetting.VatExcludingRate&&1==this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ISVAT?this._trnMainService.nullToZeroConverter(t/(this.userSetting.VatConRate||1)):t}validateNewPrice(t){const n=this._trnMainService.priceChangeList[0],i=this.getExclusiveOrRegularRate(n.NRATE_A,n.EX_NRATE_A),r=this.getExclusiveOrRegularRate(n.WNRATE_A,n.EX_WNRATE_A);return!(this.checkNewSaleRateBelowCost(i,t,"NEW SELLING PRICE")||this.userSetting.ENABLEWSALESRATEBILLING&&this.checkNewSaleRateBelowCost(r,t,"NEW WHOLESALE PRICE")||!this.validateSellingRates(n)||(this.markSellingPriceChangedIfNeeded(),0))}getExclusiveOrRegularRate(t,n){return this._trnMainService.nullToZeroConverter(this.userSetting.VatExcludingRate?n:t)}checkNewSaleRateBelowCost(t,n,i){return t<=n&&(this.alertService.error(`${i} ${t} IS BELOW OR EQUAL TO NEW PURCHASE PRICE ${n}`),!0)}validateSellingRates(t){if(this.userSetting.VatExcludingRate){if(!t.EX_NRATE_A)return this.alertService.warning("Invalid selling rate"),!1;if(this.userSetting.ENABLEWSALESRATEBILLING&&!t.EX_WNRATE_A)return this.alertService.warning("Invalid Wholesale selling rate"),!1}else{const n=this.findInvalidUOM();if(n)return this.alertService.warning(`Invalid new selling price for this item with UOM: ${n.UNIT}, Please enter valid selling rate`),!1}return!0}findInvalidUOM(){return this._trnMainService.priceChangeList.find(1===this.userSetting.EnableBatchWisePrice?t=>0===this._trnMainService.nullToZeroConverter(t.NRATE_A):t=>!t.NRATE_A)}markSellingPriceChangedIfNeeded(){2===this.userSetting.PODELIVERYMODE&&0===this._trnMainService.TrnMainObj.DOFULLRETURN&&"add-purchase-invoice"===this._trnMainService.activeurlpath&&(this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].HasSellingPriceChange=!0)}onApplyOldPriceClick(){!this.validateNewSellingRate(!0)||(this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ActualmarginRetial=0,this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ActualmarginWholeSale=0,this._trnMainService.showPriceChangeDetail=!1)}onChangePurchasePrice(t,n){const i=this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex],r=this._trnMainService.priceChangeList[t],a=0===this.userSetting.VatExcludingRate?r.NRATE_A:r.EX_NRATE_A,l=0===this.userSetting.VatExcludingRate?r.WNRATE_A:r.EX_WNRATE_A;if(!r)return;const T=this.calculateRecommendedMarginRate(i,i.NETRATE?i.NETRATE:i.RATE);a<=T&&(this.entryValidationService.rateValidationDisplayMessage="NEW SELLING PRICE IS BELOW RECOMMENDED MARGIN. PROCEED OR NOT",this.rateValidation.show()),this.userSetting.ENABLEWSALESRATEBILLING&&l<=T&&(console.log("margin1",r,T),this.entryValidationService.rateValidationDisplayMessage="NEW WHOLESALE SELLING PRICE IS BELOW RECOMMENDED MARGIN. PROCEED OR NOT",this.rateValidation.show()),this.focusOnNextInput(),this.updateSellingPrices(t),this.actualMarginCalculation(t),this.updateProdListWithUserInput(t,i,r),this.masterService.is_PurchaseOrder&&this.updatePODetailList(t)}calculateRecommendedMarginRate(t,n){let i=n*(t.RECRATE/100);return 0==this.userSetting.VatExcludingRate?i=(i+n)*this.userSetting.VatConRate:i+=n,t.RECRATE?i:n}applyVAT(t,n){return 0===this.userSetting.VatExcludingRate&&1===n.ISVAT?t*(1+this.userSetting.VATRate):t}focusOnNextInput(){setTimeout(()=>{(document.getElementById("newWholeSellingPrice0")||document.getElementById("apply"))?.focus()},0)}updateSellingPrices(t){this.changeSellingPrice(t),this.actualMarginCalculation(t)}updateProdListWithUserInput(t,n,i){const r=this.getUserInputRate(i),a=this.getUserInputRate(i,!0),l=this.userSetting.VatConRate||1;n.SELLRATEBEFORETAX=1==n.ISVAT&&0==this.userSetting.VatExcludingRate?r/l:r,n.W_SELLRATEBEFORETAX=1==n.ISVAT&&0==this.userSetting.VatExcludingRate?a/l:a,n.MRP=0===this.userSetting.VatExcludingRate?r:r*l,n.W_MRP=0===this.userSetting.VatExcludingRate?a:a*l}getUserInputRate(t,n=!1){return this.userSetting.VatExcludingRate?n?t.EX_WNRATE_A:t.EX_NRATE_A:n?t.WNRATE_A:t.NRATE_A}updatePODetailList(t){this._trnMainService.TrnMainObj.PODetailList[t].SELLRATEBEFORETAX=this._trnMainService.priceChangeList[t].NRATE_A,this._trnMainService.TrnMainObj.PODetailList[t].W_SELLRATEBEFORETAX=this._trnMainService.priceChangeList[t].WNRATE_A}actualMarginCalculation(t){const n=this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex],a=(0,this._trnMainService.nullToZeroConverter)(n.NETRATE)||n.RATE,l=this._trnMainService.priceChangeList[0],d=this.getUserRate(l,"NRATE_A"),u=this.getUserRate(l,"WNRATE_A"),T=this.userSetting.VatConRate||1;n.ActualmarginRetial=this.calculateMargin(d,a,T,n.ISVAT),this.userSetting.ENABLEWSALESRATEBILLING&&(n.ActualmarginWholeSale=this.calculateMargin(u,a,T,n.ISVAT)),n.ActualmarginRetial=this.isInvalidMargin(n.ActualmarginRetial,d)?0:n.ActualmarginRetial,n.ActualmarginWholeSale=this.isInvalidMargin(n.ActualmarginWholeSale,u)?0:n.ActualmarginWholeSale}getUserRate(t,n){return this._trnMainService.nullToZeroConverter(t[this.userSetting.VatExcludingRate?`EX_${n}`:n])}calculateMargin(t,n,i,r){return 100*((this.userSetting.VatExcludingRate||0===r?t:t/i)-n)/n}isInvalidMargin(t,n){return-100===t||0===n}changeSellingPrice(t){const n=1===this.userSetting.VatExcludingRate?"EX_NRATE_A":"NRATE_A",i=1===this.userSetting.VatExcludingRate?"EX_WNRATE_A":"WNRATE_A";for(const r of this._trnMainService.priceChangeList)r.SNO>1&&(r[n]=r.CONFACTOR*this._trnMainService.priceChangeList[t][n],r[i]=r.CONFACTOR*this._trnMainService.priceChangeList[t][i])}onClickYes(){this.rateValidation.hide(),setTimeout(()=>{document.getElementById("newSellingPrice0").focus()},500)}onClickNo(){this.rateValidation.hide(),setTimeout(()=>{document.getElementById("newSellingPrice0").focus()},500)}onItemSelection(t,n,i,r){let a={event:t,col:n,i,trnprod:r};this.showNonItemGenericGrid.emit(a),("asset-purchase-invoice"===this._trnMainService.activeurlpath||"assets-openingstockentry"===this._trnMainService.activeurlpath)&&(a.trnprod.SL_ACNAME=null,a.trnprod.SL_ACID=null)}getFilteredList(){return"asset-purchase-invoice"===this._trnMainService.activeurlpath||"assets-openingstockentry"===this._trnMainService.activeurlpath?this._trnMainService.TrnMainObj.AssetsProdList:this._trnMainService.TrnMainObj.ProdList}confirmAuthorization(){1==this._trnMainService.showNegativeBilling&&this._trnMainService.NegativeBillAuthConfirm(this.genericProductService.activerowIndex),1==this.userRightAuthService.showAuthPopup&&this.DeleteAuthConfirm()}DeleteAuthConfirm(){this.spinnerService.show("Authorizing Please wait"),this.masterService.NegativeBillingAuth(this._trnMainService.disAuthObj).subscribe(t=>{this._trnMainService.disAuthObj={username:"",password:"",discount:0,discountType:"0",remarks:""},this.spinnerService.hide(),"ok"==t.status?"ALLOW"==t.result?(this.alertService.success("User Right Granted !"),this._trnMainService.showNegativeBilling=!1,this.userRightAuthService.showAuthPopup=!1,(this._trnMainService.TrnMainObj.VoucherType==s.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType==s.Km.OpeningStockBalance)&&"EDIT"===this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].rowMode?.toUpperCase()&&this._trnMainService.nullToZeroConverter(this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].TOTALOUTWARDSTOCK)>0&&this.alertService.info(`Edited Quantity Exceed the transaction stock  for the item:${this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ITEMDESC}.`),confirm(`Are you sure u you want to delete item ${this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].ITEMDESC} (${this._trnMainService.TrnMainObj.ProdList[this.genericProductService.activerowIndex].MENUCODE}) ?`)&&(this._trnMainService.TrnMainObj.ProdList.splice(this.genericProductService.activerowIndex,1),0===this._trnMainService.TrnMainObj.ProdList.length&&this._trnMainService.addRow(),this._trnMainService.ReCalculateBillWithNormal(),this._trnMainService.quantityExceedCheck="")):(this.alertService.warning("this user has no rights to do delete in  negative stock billing !"),this._trnMainService.showNegativeBilling=!1,this.userRightAuthService.showAuthPopup=!1):(this.alertService.warning("Authorization Failed, cannot delete."),this._trnMainService.showNegativeBilling=!1,this.userRightAuthService.showAuthPopup=!1)},t=>{this.spinnerService.hide(),this.alertService.info(t)})}showDeleteButton(){return!!("asset-purchase-invoice"!=this._trnMainService.activeurlpath&&"assets-openingstockentry"!=this._trnMainService.activeurlpath||"VIEW"!=this._trnMainService.TrnMainObj.Mode&&"EDIT"!=this._trnMainService.TrnMainObj.Mode)}onViewClick(t){this.masterService.getAssetIDListByPurchaseVoucher(this._trnMainService.TrnMainObj.VCHRNO,t.MCODE,t.BATCH).subscribe(n=>{n?.length>0?(this.showAssetProductDetail.ITEMNAME=t.ITEMDESC,this.showAssetProductDetail.LIST=n):this.alertService.info("No data found!")})}closeAssetId(){this.showAssetProductDetail={}}scrollable(){return 82==this._trnMainService.TrnMainObj.VoucherType&&this._trnMainService.TrnMainObj.ProdList?.length>0&&this.genericProductService.headerAfterSubHeader?.length>0&&this._trnMainService.TrnMainObj.ProdList[0].BranchWiseDistributionList1.length>6}onCheckBoxChange(t,n,i,r){n.onCheckBoxChange&&n.onCheckBoxChange(t,i,n,r)}showSecondTable(){if(this._trnMainService.TrnMainObj.VoucherType==s.Km.RequisitionApproval&&this._trnMainService.TrnMainObj.ProdList.some(t=>t.BranchWiseDistributionList2?.length>0)||82==this._trnMainService.TrnMainObj.VoucherType)return!0}onMultiItemSelected(t){this._trnMainService.TrnMainObj.ProdList.length>1&&this.removeInvalidRowsFromprod(),t.forEach(n=>{this.checkDublicateonItemEnter(n)||this.addRow(n,0)})}removeInvalidRowsFromprod(){this._trnMainService.TrnMainObj.ProdList=this._trnMainService.TrnMainObj.ProdList.filter(t=>null!=t.MCODE&&""!=t.MCODE)}checkDublicateonItemEnter(t){return this._trnMainService.TrnMainObj.ProdList.filter(i=>i.ITEMDESC==t.DESCA)?.length>0&&(this._trnMainService.TrnMainObj.ProdList.forEach(i=>{i.ITEMDESC==t.DESCA&&(i.ALTERNATEQUANTIY+=1)}),this._trnMainService.ReCalculateBillWithNormal(),!0)}addRow(t,n,i=!1){this._trnMainService.barCodes.Quantity=1;let r={};r.Sn=this.Snos+=1,r.inputMode=!0,r.MENUCODE=t.MENUCODE,r.ITEMDESC=t.DESCA,r.ALTRATE=t.PRATE,r.RATE=t.PRATE,r.SELLRATEBEFORETAX=i?n?.SELLRATEBEFORETAX:t.RATE,r.MCODE=t.MCODE,r.ISVAT=t.ISVAT,r.UNIT=t.BASEUNIT,r.BASEUNIT=t.BASEUNIT,r.ALTUNIT=t.BASEUNIT,r.MRP=t.MRP,r.BATCH=i?n.BATCH:"",r.NCRATE=null,r.AMOUNT=null,r.INDDISCOUNTRATE=null,r.INDDISCOUNT=null,r.DISCOUNT=null,r.VAT=null,r.NETAMOUNT=null,r.ITEMTYPE=null,r.RECEIVEDTYPE=null,r.WAREHOUSE=null,r.BC=t.BARCODE,r.ALTERNATEQUANTIY=this._trnMainService.barCodes.Quantity,r.PRATE=i?n.costprice:t.costprice,r.STOCK=i?n.STOCK:t.STOCK,r.FulfillBatchQty=!1,r.HASVARIANT=t.HASVARIANT,r.HasMulitplePrice=i?1:0,r.REQEXPDATE=t.REQEXPDATE,r.PTYPE=t.PTYPE,r.NATURETYPE=t.NATURETYPE,r.IsAuthorizeForNegative=!1,r.DISMODE=t.DISMODE,r.ISUNKNOWN=t.ISUNKNOWN,r.SUPPNAME=t.SUPPNAME,1==this.userSetting.ENABLEBARCODEWISEBATCH&&t?.BATCH&&(r.BATCH=t.BATCH),i&&(r.PriceSelected=!0),this._trnMainService.TrnMainObj.ProdList[0].BC||this._trnMainService.TrnMainObj.ProdList[0].MCODE?this._trnMainService.TrnMainObj.ProdList.push(r):this._trnMainService.TrnMainObj.ProdList[0]=r;let a=0;a=this._trnMainService.TrnMainObj.ProdList.length-1,this._trnMainService.getAllUnitsOfItem(a),this._trnMainService.ReCalculateBillWithNormal(),console.log("prodlist",this._trnMainService.TrnMainObj.ProdList)}trackByFn(t){return t}focusQuantityAfterDblClickOnDeliveryChalanReturn(){this._trnMainService.TrnMainObj.VoucherType===s.Km.DeliveryReturn&&(document.getElementById("ALTUNIT"+this.genericProductService.activerowIndex).disabled?null!=document.getElementById("ALTERNATEQUANTIY"+this.genericProductService.activerowIndex)&&setTimeout(()=>{document.getElementById("ALTERNATEQUANTIY"+this.genericProductService.activerowIndex).focus()},20):setTimeout(()=>{document.getElementById("ALTUNIT"+this.genericProductService.activerowIndex).focus()},20))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(O.P),e.Y36(B.p),e.Y36(f.gz),e.Y36(b.uw),e.Y36(Q.V),e.Y36(H.e),e.Y36(F.y),e.Y36(J.R),e.Y36(E.c),e.Y36(v.w),e.Y36(W.C),e.Y36(C.T),e.Y36(j.h),e.Y36(Y.i))},o.\u0275cmp=e.Xpm({type:o,selectors:[["generic-product-entry"]],viewQuery:function(t,n){if(1&t&&(e.Gf(ve,5),e.Gf(Me,5),e.Gf(me,5),e.Gf(Pe,5),e.Gf(fe,5),e.Gf(Ee,5),e.Gf(be,5),e.Gf(Ce,5),e.Gf(ye,5),e.Gf(N,5),e.Gf(Oe,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.table1=i.first),e.iGM(i=e.CRH())&&(n.table2=i.first),e.iGM(i=e.CRH())&&(n.genericGrid=i.first),e.iGM(i=e.CRH())&&(n.rateValidation=i.first),e.iGM(i=e.CRH())&&(n.genericGridPopupComponent=i.first),e.iGM(i=e.CRH())&&(n.barCodeGridPopup=i.first),e.iGM(i=e.CRH())&&(n.genericGridMulitplePricePopup=i.first),e.iGM(i=e.CRH())&&(n.matrixitemgrid=i.first),e.iGM(i=e.CRH())&&(n.authenticationPopup=i.first),e.iGM(i=e.CRH())&&(n.templateRefs=i),e.iGM(i=e.CRH())&&(n.itemDesc=i)}},hostBindings:function(t,n){1&t&&e.NdJ("keydown",function(r){return n.updown(r)},!1,e.evT)},inputs:{genericProductEntrySetting:["GenericProductEntrySetting","genericProductEntrySetting"],genericProductEntrySetting2:["GenericProductEntrySetting2","genericProductEntrySetting2"]},outputs:{showNonItemGenericGrid:"showNonItemGenericGrid",ShowGenericGridEvent:"ShowGenericGridEvent",onChangeProductionItem:"onChangeProductionItem"},decls:79,vars:49,consts:[[2,"margin-right","15px",3,"ngClass"],[1,"wrapper","height-wrapper",3,"ngClass","ngStyle","scroll"],["table1",""],["id","productEntrySetting.tableId",3,"ngClass"],["id","prodlistTableheader",2,"background","silver","color","black","border-width","1px 1px 0 1px","border-color","#b4b4b4","border-style","solid"],[4,"ngFor","ngForOf"],["style","background: silver; color: black; border-width: 0px 1px 0 1px; border-color: #b4b4b4; border-style: solid; position: sticky; top: 36px; ",4,"ngIf"],[2,"border","1px"],["class","add",3,"click",4,"ngIf"],[4,"ngIf"],[3,"appCtrlTemplate"],["barcodeInputText",""],["barcodeInputText1",""],["default",""],["itemDesc",""],["batch",""],["unitsOption",""],["locationOption",""],["quantity",""],["inputText",""],["popup",""],["CommentsSelect",""],["number",""],["date",""],["checkBox",""],[3,"popupsettings","onItemDoubleClick","onItemsSelected"],["genericGrid",""],[3,"popupsettings","onItemDoubleClick"],["genericGridPopupComponent",""],["barCodeGridPopup",""],["genericGridMulitplePricePopup",""],[3,"activeIndex","closeBatchPopupEvent","emitCreatedBatchEvent",4,"ngIf"],["class","PList",4,"ngIf"],[3,"activerowIndex","matrixItemAtrribute","onApplyClicked"],["matrixitemgrid",""],[3,"onUserRightReceived"],["authenticationPopup",""],["class","modal-sticky","style","width:100%",4,"ngIf"],["bsModal","","tabindex","0","role","dialog","aria-labelledby","mySmallModalLabel","aria-hidden","true",1,"modal","fade",2,"height","460px","z-index","9999999",3,"config"],["rateValidatoin","bs-modal"],[1,"modal-dialog","modal-sm"],[1,"modal-content",2,"width","420px"],[1,"modal-header"],["aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"col-md-12",2,"margin-top","-10px","margin-bottom","12px"],[1,"col-md-12"],[1,"btn","btn-danger",2,"margin-right","4px",3,"click"],["type","button ",1,"btn","btn-warning",3,"click"],["style","position: sticky; top: 0;",3,"ngStyle",4,"ngIf"],[2,"position","sticky","top","0",3,"ngStyle"],[2,"background","silver","color","black","border-width","0px 1px 0 1px","border-color","#b4b4b4","border-style","solid","position","sticky","top","36px"],[3,"ngStyle"],[2,"border","1px solid #b4b4b4","max-height","25px",3,"id","click","keydown.Shift.delete"],["style","border: 1px solid #b4b4b4;",4,"ngIf"],[2,"border","1px solid #b4b4b4"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[2,"border","1px solid #b4b4b4",3,"ngStyle"],["style","border: 1px solid #b4b4b4",4,"ngIf"],[1,"add",3,"click"],[1,"wrapper","height-wrapper","mt-4",3,"scroll"],["table2",""],["style","background: silver; color: black; border-width: 0px 1px 0 1px; border-color: #b4b4b4; border-style: solid; position: sticky; top: 36px;",4,"ngIf"],[3,"i","index","col","trnprod","ItemKeyEvent","dblClickPopupItem"],[3,"i","ItemKeyEvent","dblClickPopupItem"],["type","text",2,"width","100%",3,"i","disabled","keydown.Tab","change","keydown.enter","focusout"],["class","row",4,"ngIf"],[1,"col-md-6",2,"width","100%",3,"ngClass"],[1,"col-md-6",2,"float","right"],["type","checkbox","style","width: 21px;",3,"ngModel","disabled","ngModelChange","change",4,"ngIf"],["type","checkbox",2,"width","21px",3,"ngModel","disabled","ngModelChange","change"],[3,"ngStyle","id","mouseover","mouseleave"],[2,"display","none",3,"ngClass","innerHTML"],[4,"ngIf","ngIfElse"],["view",""],[1,"closeTooltip",3,"disabled","click"],["src","../../../assets/icons/close-icon.png","alt","",2,"width","20px","padding","2.5px"],[1,"closeTooltip",3,"click"],[1,"fa-solid","fa-eye"],[3,"trnprod","index","col","showGenericGrid"],[3,"innerHtml"],["type","text","placeholder","Press ENTER to Select",2,"width","100%",3,"id","ngModel","disabled","readonly","ngModelChange","keydown.enter","keydown.Tab"],[3,"i","index","col","trnprod"],["type","text","autocomplete","off",3,"id","ngStyle","ngModel","placeholder","disabled","ngModelChange","click","keydown.enter","keydown.tab","change"],["type","text","autocomplete","off","readonly","",2,"width","100%",3,"id","ngModel","placeholder","disabled","keydown.enter"],["type","text",2,"width","100%",3,"id","ngModel","disabled","ngModelChange","change","keydown.enter","keydown.tab"],[3,"value"],["type","number",3,"id","ngStyle","ngModel","disabled","decimalPlacesRestriction","readonly","change","keydown.enter","keydown.tab","ngModelChange","keyup","focusout","mouseover","mouseleave"],[3,"id","type","ngStyle","ngModel","disabled","min","ngModelChange","keydown.enter","keydown.tab"],["type","checkbox","autocomplete","off",3,"id","ngStyle","ngModel","disabled","ngModelChange","click","change"],[3,"activeIndex","closeBatchPopupEvent","emitCreatedBatchEvent"],[1,"PList"],[3,"AlternateUnits","activerowIndex","title","BList","voucherType","activeurlpath","dbClickEvent","BatchClosedClick","returnBatchValue","showCreateBatchEvent"],[1,"modal-sticky",2,"width","100%"],["class","extraDom","style","\n    display: block;\n    padding: 0px;\n    margin-bottom: 25px;\n    height: 390px;\n    position: absolute;\n    right: 25%;\n    top: 5px;\n    width: 51%;\n    z-index: 9999999;\n  ",4,"ngIf"],[1,"extraDom",2,"display","block","padding","0px","margin-bottom","25px","height","390px","position","absolute","right","25%","top","5px","width","51%","z-index","9999999"],[1,"modal-content","modal-content-main-area",2,"overflow","unset"],[1,"modal-header",2,"height","40px"],["id","myModalLabel",1,"modal-title",2,"font-size","15px"],[1,"col-md-12",2,"height","300px","margin-top","10px"],[2,"margin-top","4px","margin-bottom","2px"],["type","number",3,"ngModel","ngModelChange"],[2,"font-size","13px","width","32%"],[1,"table"],[2,"border-bottom","2px solid #b4b4b4","border-top","2px solid #b4b4b4","height","30px","background","silver","color","black"],["scope","col",2,"width","15%"],["scope","col",2,"width","17%"],["scope","col","style","width: 18%",4,"ngIf"],["scope","col","style","width: 23%;line-height: 1.2 !important",4,"ngIf"],["scope","col","style","width: 23%;line-height: 1.2 !important;",4,"ngIf"],[1,"col-md-12","row",2,"padding","0px"],[1,"col-md-4"],[1,"col-md-8","row","justify-content-end",2,"text-align","right"],["style","margin-right: 0;",4,"ngIf"],["class","d-flex justify-content-end","style","gap: 10px;",4,"ngIf"],["id","apply",1,"btn","btn-info","pull-right",2,"margin","0px 4px",3,"click","keydown.enter"],[1,"btn","btn-info","pull-right",2,"margin","0px 4px",3,"click","keydown.enter"],["scope","col",2,"width","18%"],["scope","col",2,"width","23%","line-height","1.2 !important"],[2,"border","1px solid #b4b4b4","max-height","25px"],["style","border: 1px solid #b4b4b4 ;width: 98%",4,"ngIf"],["appSalesRateDisableFromUserProfile","","type","number",2,"height","33px","width","98%","border","1px solid #b4b4b4",3,"id","ngModel","disabled","change","ngModelChange","keyup","keydown.enter","keydown.Tab"],[2,"border","1px solid #b4b4b4","width","98%"],[2,"margin-right","0"],[1,"d-flex","justify-content-end",2,"gap","10px"],[1,"modal-sticky",2,"display","block","padding","0px","margin-bottom","-4rem","margin-right","27rem","bottom","85px"],[1,"modal-content","modal-content-main-area",2,"width","70%","height","auto"],[1,"modal-header",2,"padding","0px","background","#c0c0c0"],[1,"modal-title",2,"padding-left","5px"],[1,"form-group","row",2,"margin","0.5rem"],[1,"col-sm-4","form-control-label",2,"font-size","13px"],[1,"col-sm-7",2,"padding","0px"],["type","text","id","AuthUserName","autocomplete","off",1,"form-control",2,"height","4vh","font-size","13px",3,"ngModel","ngModelChange"],["type","password","id","Parent","autocomplete","off",1,"form-control",2,"height","4vh","font-size","13px",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-sm","btn-info",2,"font-size","12px",3,"click"],["type","button",1,"btn","btn-sm","btn-info",2,"font-size","12px",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1,2),e.NdJ("scroll",function(r){return(null==n.table2?null:n.table2.nativeElement).scrollTop=r.target.scrollTop}),e.TgZ(3,"table",3)(4,"tr",4),e.YNc(5,xe,2,1,"ng-container",5),e.YNc(6,we,2,1,"ng-container",5),e.qZA(),e.YNc(7,Be,2,1,"tr",6),e.TgZ(8,"tbody",7),e.YNc(9,Ze,5,12,"ng-container",5),e.qZA()(),e.YNc(10,Qe,3,0,"span",8),e.ALo(11,"hide"),e.qZA(),e.YNc(12,st,12,13,"ng-container",9),e.qZA(),e.YNc(13,lt,1,4,"ng-template",10,11,e.W1O),e.YNc(15,dt,3,7,"ng-template",null,12,e.W1O),e.YNc(17,mt,3,3,"ng-template",10,13,e.W1O),e.YNc(19,Pt,4,4,"ng-template",10,14,e.W1O),e.YNc(21,ft,2,8,"ng-template",10,15,e.W1O),e.YNc(23,Et,1,4,"ng-template",10,16,e.W1O),e.YNc(25,bt,1,4,"ng-template",10,17,e.W1O),e.YNc(27,Ct,1,4,"ng-template",10,16,e.W1O),e.YNc(29,yt,1,4,"ng-template",10,18,e.W1O),e.YNc(31,Ot,3,11,"ng-template",10,19,e.W1O),e.YNc(33,It,2,8,"ng-template",10,20,e.W1O),e.YNc(35,At,3,8,"ng-template",10,21,e.W1O),e.YNc(37,Rt,7,23,"ng-template",10,22,e.W1O),e.YNc(39,Lt,2,10,"ng-template",10,23,e.W1O),e.YNc(41,Nt,3,10,"ng-template",10,24,e.W1O),e.TgZ(43,"generic-popup-grid",25,26),e.NdJ("onItemDoubleClick",function(r){return n.dblClickPopupItem(r)})("onItemsSelected",function(r){return n.onMultiItemSelected(r)}),e._uU(45," >\n"),e.qZA(),e.TgZ(46,"generic-popup-grid",27,28),e.NdJ("onItemDoubleClick",function(r){return n.dblClickPopupItem(r)}),e.qZA(),e.TgZ(48,"barcode-popup-grid",27,29),e.NdJ("onItemDoubleClick",function(r){return n.dblClickbarcodePopUP(r)}),e.qZA(),e.TgZ(50,"multiple-price-popup-grid",27,30),e.NdJ("onItemDoubleClick",function(r){return n.dblClickPricePopUP(r)}),e.qZA(),e.YNc(52,Bt,1,1,"create-manual-batch-popup",31),e.YNc(53,jt,2,6,"div",32),e.TgZ(54,"matrix-item-grid",33,34),e.NdJ("onApplyClicked",function(r){return n.setVariantData(r)}),e.qZA(),e.TgZ(56,"authentication-entry",35,36),e.NdJ("onUserRightReceived",function(r){return n.onUserRightReceived(r)}),e.qZA(),e.YNc(58,$t,2,1,"div",37),e.TgZ(59,"div")(60,"div",38,39)(62,"div",40)(63,"div",41)(64,"div",42)(65,"button",43),e.NdJ("click",function(){return n.onClickNo()}),e.TgZ(66,"span",44),e._uU(67,"\xd7"),e.qZA()()(),e.TgZ(68,"div",45)(69,"div",46)(70,"div",47),e._uU(71),e.qZA(),e.TgZ(72,"div",48)(73,"button",49),e.NdJ("click",function(){return n.onClickYes()}),e._uU(74," Yes "),e.qZA(),e.TgZ(75,"button",50),e.NdJ("click",function(){return n.onClickNo()}),e._uU(76," No "),e.qZA()()()()()()()(),e.YNc(77,Xt,25,2,"div",9),e.YNc(78,en,17,2,"ng-container",9)),2&t&&(e.Q6J("ngClass",e.VKq(40,tn,"inventory-allocation"==n.genericProductService.activeurlpath)),e.xp6(1),e.Q6J("ngClass",e.VKq(42,nn,n.userSetting.IsBBSM))("ngStyle",e.VKq(44,rn,n.userSetting.IsBBSM?"goods-received-note"===n.genericProductService.activeurlpath&&n.masterService.ShowMore?n.genericProductEntrySetting.height:"510px":"auto")),e.xp6(2),e.Q6J("ngClass",e.VKq(46,V,n.scrollable())),e.xp6(2),e.Q6J("ngForOf",n.genericProductEntrySetting.columns),e.xp6(1),e.Q6J("ngForOf",null==n.genericProductService?null:n.genericProductService.headerAfterSubHeader),e.xp6(1),e.Q6J("ngIf",n.genericProductEntrySetting.showSubHeading),e.xp6(2),e.Q6J("ngForOf",n.getFilteredList()),e.xp6(1),e.Q6J("ngIf",e.xi3(11,37,"hideAddButton",n._trnMainService.callPipe)&&"VIEW"!=n._trnMainService.TrnMainObj.Mode),e.xp6(2),e.Q6J("ngIf",n.showSecondTable()),e.xp6(1),e.Q6J("appCtrlTemplate","barcodeInputText"),e.xp6(4),e.Q6J("appCtrlTemplate","default"),e.xp6(2),e.Q6J("appCtrlTemplate","itemDesc"),e.xp6(2),e.Q6J("appCtrlTemplate","batch"),e.xp6(2),e.Q6J("appCtrlTemplate","unitsOption"),e.xp6(2),e.Q6J("appCtrlTemplate","locationOption"),e.xp6(2),e.Q6J("appCtrlTemplate","defaultOption"),e.xp6(2),e.Q6J("appCtrlTemplate","quantity"),e.xp6(2),e.Q6J("appCtrlTemplate","inputText"),e.xp6(2),e.Q6J("appCtrlTemplate","popup"),e.xp6(2),e.Q6J("appCtrlTemplate","CommentsSelect"),e.xp6(2),e.Q6J("appCtrlTemplate","number"),e.xp6(2),e.Q6J("appCtrlTemplate","date"),e.xp6(2),e.Q6J("appCtrlTemplate","checkBox"),e.xp6(2),e.Q6J("popupsettings",n.genericProductService.gridPopupSettings),e.xp6(3),e.Q6J("popupsettings",n.GenericPopUpSettings),e.xp6(2),e.Q6J("popupsettings",n.barcodeGridSettings),e.xp6(2),e.Q6J("popupsettings",n.gridPopupSettingsForMultiplePrice),e.xp6(2),e.Q6J("ngIf",n.showCreateBatch),e.xp6(1),e.Q6J("ngIf","Batch Price Selection"==n.masterService.PlistTitle||"Item Variant Selection"==n.masterService.PlistTitle||"Batch Selection"==n.masterService.PlistTitle||"Consumption Batch Selection"==n.masterService.PlistTitle),e.xp6(1),e.Q6J("activerowIndex",n.genericProductService.activerowIndex)("matrixItemAtrribute",n.genericProductService.matrixItemAtrribute),e.xp6(4),e.Q6J("ngIf",n._trnMainService.showPriceChangeDetail&&1==n.userSetting.ShowPriceChangePopup),e.xp6(2),e.Q6J("config",e.DdM(48,on)),e.xp6(11),e.hij(" ",n.entryValidationService.rateValidationDisplayMessage," "),e.xp6(6),e.Q6J("ngIf",1==n._trnMainService.showNegativeBilling||1==n.userRightAuthService.showAuthPopup),e.xp6(1),e.Q6J("ngIf",(null==n.showAssetProductDetail.LIST?null:n.showAssetProductDetail.LIST.length)>0))},dependencies:[q.n,$.Zl,w.ed,X.m,R._v,z.t,ee.B,S.mk,S.sg,S.O5,S.tP,S.PC,h.YN,h.Kr,h.Fj,h.wV,h.Wl,h.EJ,h.JJ,h.On,te.K,k.F,ne.oB,N,ie,oe,ae,ue,he,D.g,M.e,pe.R,ge.v,Se,Te],styles:["table[_ngcontent-%COMP%] {\n    width: 100%;\n    border-collapse: collapse;\n  }\n\n  .position-static[_ngcontent-%COMP%]{\n    position:static;\n  }\n  \n  th[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\n    padding: 8px;\n  }\n\n  th[_ngcontent-%COMP%] {\n    text-align: left;\n    background: #eee;\n     \n    \n  }\n\n  .wrapper[_ngcontent-%COMP%] {\n    \n    width: 100%;\n  }\n\n  .overflow[_ngcontent-%COMP%]{\n    overflow-x: auto;\n    overflow-y: auto;\n  }\n\n  .color[_ngcontent-%COMP%]{\n    background: #ff4141;\n  }\n  \n  .col1[_ngcontent-%COMP%] {\n    position: absolute;\n    width: 10em;\n    left: 0em;\n    top: auto;\n  }\n\n  .col2[_ngcontent-%COMP%] {\n    position: absolute;\n    width: 5em;\n    left: 10em;\n    top: auto;\n  }\n\n  .modal-footer[_ngcontent-%COMP%] {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%] {\n    cursor: pointer;\n    position: absolute;\n    top: 10px;\n    right: 10px;\n  }\n\n  .modal-backdrop[_ngcontent-%COMP%] {\n    display: none;\n  }\n\n  .tooltipChild[_ngcontent-%COMP%] {\n    display: block !important;\n    background: seagreen;\n    position: absolute;\n    border-radius: 17px;\n    text-align: center;\n    color: white;\n    width: 13%;\n\n  }",'.modal-content[_ngcontent-%COMP%] {\n    padding: 1px;\n    margin: 0px;\n    float: right;\n    width: 122%;\n\n  }\n\n  tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:hover {\n    background-color: #f3f5f4;\n    cursor: pointer;\n  }\n\n  tr[_ngcontent-%COMP%] {\n    font-size: 13px;\n  }\n\n  .selected-row[_ngcontent-%COMP%] {\n    background-color: #7ed0ff;\n  }\n\n  tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] {\n    line-height: 30px !important;\n    padding: 3px;\n  }\n\n  thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%] {\n    line-height: 11px !important;\n  }\n\n  tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]:first-child {\n    text-align: left !important;\n    padding: 0px 0px 0px 11px !important;\n  }\n\n  .modal-content[_ngcontent-%COMP%] {\n    box-shadow: -10px 0px 10px 1px #aaaaaa;\n  }\n\n  .modal-content-main-area[_ngcontent-%COMP%] {\n    max-height: 100%;\n    height: 94%;\n    overflow: auto;\n    overflow-x: hidden;\n  }\n\n  .modal-content-summary-area[_ngcontent-%COMP%] {\n    max-height: 20%;\n    height: 20%;\n    overflow: auto;\n    overflow-x: hidden;\n  }\n\n  .ellipsis[_ngcontent-%COMP%] {\n    white-space: nowrap;\n  }\n\n  .close[_ngcontent-%COMP%] {\n    margin: -9px 0px -9px 0px;\n  }\n\n  .highlighted[_ngcontent-%COMP%] {\n    background-color: #7ed0ff;\n  }\n\n  .bgforlessstockitem[_ngcontent-%COMP%] {\n    background-color: #ffc107d2;\n  }\n\n  .less-quantity[_ngcontent-%COMP%]{\n    background-color: #ff4141;\n  }\n\n  .add[_ngcontent-%COMP%] {\n    color: #04AA6D;\n    border: 2px solid #04AA6D;\n    margin-top: 5px;\n  }\n\n  span.add[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n\n  }\n\n  span.add[_ngcontent-%COMP%] {\n    display: inline-block;\n    width: 22px;\n    height: 22px;\n    text-align: center;\n    font-size: 20px;\n    font-family: "Roboto";\n    border-radius: 50%;\n    background: #FFF;\n    position: relative;\n    cursor: pointer;\n  }\n\n  .closeTooltip[_ngcontent-%COMP%] {\n    \n    display: inline-block;\n    transition: 0.3s ease;\n    border: none;\n    background: none;\n\n  }\n\n  .closeTooltip[_ngcontent-%COMP%]:focus {\n    outline: none;\n\n  }\n\n  .tooltiptext[_ngcontent-%COMP%] {\n    visibility: hidden;\n    opacity: 0;\n    width: 49px;\n    background-color: black;\n    color: #fff;\n    text-align: center;\n    border-radius: 3px;\n    padding: 0px 0;\n    position: absolute;\n    right: 0;\n    font-size: 10px;\n    height: 20px;\n    top: -14px;\n    align-items: center;\n    line-height: 2;\n    z-index: 99;\n  }\n\n\n.scrollable[_ngcontent-%COMP%]{\n  width: max-content;\n  overflow-x: auto;\n  table-layout: fixed;\n}\n\n.close-wrapper[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%] {\n    visibility: visible;\n    opacity: 1;\n  }\n\n  @media screen and (max-width:1366px) {\n    .fixedHeight[_ngcontent-%COMP%]{\n    height: 380px;  \n  }\n}']}),o})()}}]);