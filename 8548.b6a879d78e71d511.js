"use strict";(self.webpackChunkimserp=self.webpackChunkimserp||[]).push([[8548],{98692:(Z,T,s)=>{s.d(T,{n:()=>t});var n=s(66274);let t=(()=>{class p{constructor(d){this.el=d}onKeyDown(d){let e=d;if(this.OnlyNumber){if(-1!==[46,8,9,27,13,110].indexOf(e.keyCode)||190==e.keyCode&&!1===e.shiftKey||65==e.keyCode&&!0===e.ctrlKey||67==e.keyCode&&!0===e.ctrlKey||88==e.keyCode&&!0===e.ctrlKey||e.keyCode>=35&&e.keyCode<=39)return;(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()}}}return p.\u0275fac=function(d){return new(d||p)(n.Y36(n.SBq))},p.\u0275dir=n.lG2({type:p,selectors:[["","OnlyNumber",""]],hostBindings:function(d,e){1&d&&n.NdJ("keydown",function(b){return e.onKeyDown(b)})},inputs:{OnlyNumber:"OnlyNumber"}}),p})()},62106:(Z,T,s)=>{s.d(T,{A:()=>p});var n=s(89953),t=s(66274);let p=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[n.m]}),a})()},49137:(Z,T,s)=>{s.d(T,{C:()=>t});var n=s(66274);let t=(()=>{class p{transform(d,e,M){if(d)return e?d.filter(b=>{let P=b[M];const I=e.replace(/[^A-Z0-9]/gi,"").toLowerCase();if(-1!==(P?P.replace(/[^A-Z0-9]/gi,"").toLowerCase():"").indexOf(I))return b}):d}}return p.\u0275fac=function(d){return new(d||p)},p.\u0275pipe=n.Yjl({name:"searchData",type:p,pure:!1}),p})()},73965:(Z,T,s)=>{s.d(T,{_:()=>I});var n=s(66274),t=s(48083),p=s(76165),a=s(71180);let d=(()=>{class g{constructor(u,y,S){this.router=u,this.http=y,this.state=S;const N=this.state.getGlobalSetting("apiUrl");N&&N.length>0&&(this.apiUrl=N)}authenticateOTP(u){return this.http.get(this.apiUrl+`/authenticateOTP?OTP=${u}`)}}return g.\u0275fac=function(u){return new(u||g)(n.LFG(t.F0),n.LFG(p.eN),n.LFG(a.q))},g.\u0275prov=n.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();var e=s(67311),M=s(92752),b=s(7587);function P(g,E){if(1&g){const u=n.EpF();n.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h6",5),n._uU(5,"OTP Authentication"),n.qZA()()(),n.TgZ(6,"div",6)(7,"div",7)(8,"p",8),n._uU(9," OTP Authorization is required to perform selected Action. Please enter OTP Pin to continue. "),n.qZA(),n.TgZ(10,"label"),n._uU(11,"OTP Pin:"),n.qZA(),n.TgZ(12,"input",9),n.NdJ("ngModelChange",function(S){n.CHM(u);const N=n.oxw();return n.KtG(N.otpPin=S)}),n.qZA()()(),n.TgZ(13,"div",10)(14,"div",11)(15,"button",12),n.NdJ("click",function(){n.CHM(u);const S=n.oxw();return n.KtG(S.submit())}),n._uU(16,"SUBMIT"),n.qZA(),n.TgZ(17,"button",13),n.NdJ("click",function(){n.CHM(u);const S=n.oxw();return n.KtG(S.closeDialog())}),n._uU(18,"CANCEL"),n.qZA()()()()()}if(2&g){const u=n.oxw();n.xp6(12),n.Q6J("ngModel",u.otpPin)}}let I=(()=>{class g{constructor(u,y){this.otpService=u,this.alertService=y,this.okClicked=new n.vpe,this.isActive=!1}ngOnInit(){}show(){this.isActive=!0}closeDialog(){this.isActive=!1,this.otpPin=null}submit(){this.otpService.authenticateOTP(this.otpPin).subscribe(u=>{"ok"==u.status?(this.alertService.success(u.result),setTimeout(()=>{this.okClicked.emit(!0)},2e3),this.closeDialog(),this.otpPin=null):(this.alertService.info(u),this.okClicked.emit(!1))})}}return g.\u0275fac=function(u){return new(u||g)(n.Y36(d),n.Y36(e.c))},g.\u0275cmp=n.Xpm({type:g,selectors:[["app-otp"]],outputs:{okClicked:"okClicked"},features:[n._Bn([d])],decls:1,vars:1,consts:[["class","confirmation-container",4,"ngIf"],[1,"confirmation-container"],[1,"card"],[1,"card-header",2,"background-color","lightsteelblue","padding","0.5rem 1.25rem"],[1,"row"],[2,"font-size","1.1rem"],[1,"row",2,"margin-top","1rem"],[1,"mx-4"],[2,"font-size","15px","font-weight","500"],["type","number","name","otpPin","id","otpPin",3,"ngModel","ngModelChange"],[2,"display","flex","justify-content","center"],[1,"button-group","my-4"],["type","button",1,"btn","btn-info",2,"margin-right","2px","width","75px","font-size","12px",3,"click"],["type","button","title","Cancel",1,"btn","btn-info",2,"margin-right","2px","width","75px","font-size","12px",3,"click"]],template:function(u,y){1&u&&n.YNc(0,P,19,1,"div",0),2&u&&n.Q6J("ngIf",y.isActive)},dependencies:[M.O5,b.Fj,b.wV,b.JJ,b.On],styles:[".confirmation-container[_ngcontent-%COMP%]{position:fixed!important;transform:translate(-50px,-50px);background:#ffffff;z-index:99999;width:33%;top:33%;left:37%}label[_ngcontent-%COMP%]{font-size:14px;font-weight:550}input[_ngcontent-%COMP%]{width:70%}.button-group[_ngcontent-%COMP%]{position:absolute}.card[_ngcontent-%COMP%]{height:15rem;border:2px solid slategray}"]}),g})()},77879:(Z,T,s)=>{s.d(T,{H:()=>p});var n=s(66274),t=s(53074);let p=(()=>{class a{constructor(e){this.masterRepo=e}ngOnInit(){}isOldFYearDB(){return 1===this.masterRepo.userSetting.IsOldFyearDB}}return a.\u0275fac=function(e){return new(e||a)(n.Y36(t.P))},a.\u0275dir=n.lG2({type:a,selectors:[["","appOldFYearDB",""]],exportAs:["appOldFYearDB"]}),a})()},28548:(Z,T,s)=>{s.r(T),s.d(T,{WarehouseModule:()=>R});var n=s(48083),t=s(47985),p=s(67297),a=s(7587),d=s(28698),e=s(66274),M=s(248),b=s(67311),P=s(14970),I=s(53074),g=s(92752),E=s(98692),u=s(73965);const y=["genericGrid"],S=["name"],N=["OtpPopup"];function w(c,A){if(1&c){const r=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(r);const h=e.oxw();return e.KtG(h.onSave())}),e._uU(1," Save "),e.qZA()}if(2&c){const r=e.oxw();e.Q6J("disabled",!r.form.valid)}}function f(c,A){1&c&&(e.TgZ(0,"small",45),e._uU(1," Name is required ! "),e.qZA())}function O(c,A){1&c&&(e.TgZ(0,"small",45),e._uU(1," Short name is required ! "),e.qZA())}function i(c,A){if(1&c&&(e.TgZ(0,"option",46),e._uU(1),e.qZA()),2&c){const r=A.$implicit;e.Q6J("ngValue",r.INITIAL),e.xp6(1),e.hij(" ",r.NAME," ")}}function l(c,A){1&c&&(e.TgZ(0,"small",45),e._uU(1," Address is required ! "),e.qZA())}function m(c,A){1&c&&(e.TgZ(0,"small",45),e._uU(1," Warehouse type is required ! "),e.qZA())}function v(c,A){if(1&c&&(e.TgZ(0,"option",46),e._uU(1),e.qZA()),2&c){const r=A.$implicit;e.Q6J("ngValue",r.INITIAL),e.xp6(1),e.hij(" ",r.NAME," ")}}function x(c,A){if(1&c){const r=e.EpF();e.TgZ(0,"div",16)(1,"label",26),e._uU(2,"Transit Warehouse: "),e.qZA(),e.TgZ(3,"input",47),e.NdJ("change",function(h){e.CHM(r);const _=e.oxw();return e.KtG(_.form.value.ISTRANSITWAREHOUSE=h.target.checked?1:0)}),e.qZA()()}}const W=[{path:"",component:t.N},{path:"add-warehouse",component:(()=>{class c{constructor(r,o,h,_,C,B,F,J){this.preventNavigationService=r,this.alertService=o,this.loadingService=h,this.masterService=_,this.authservice=C,this.router=B,this._activatedRoute=F,this.fb=J,this.viewMode=!1,this.mode="add",this.modeTitle="",this.warehouse={},this.initialTextReadOnly=!1,this.subcriptions=[],this.gridPopupSettings=new d.im,this.userSetting=this.authservice.getSetting()}updown(r){if("Escape"===r.code&&(r.preventDefault(),this.cancel()),"F6"===r.code){if(r.preventDefault(),!this.form.valid)return;this.onSave()}}ngOnInit(){this.gridPopupSettings=Object.assign(new d.im,{title:"STATE",apiEndpoints:"/getStatesPagedList",defaultFilterIndex:0,columns:[{key:"StateCode",title:"State Code",hidden:!1,noSearch:!1},{key:"StateName",title:"State Name",hidden:!1,noSearch:!1}]});try{if(this.form=this.fb.group({NAME:["",[a.kI.required]],WNAME:["",[a.kI.required]],ADDRESS:["",a.kI.required],PHONE:[""],REMARKS:[""],DIVISION:["",[a.kI.required]],WarehouseType:["",[a.kI.required]],STATUS:[1],COMPANYID:[""],REFDIVISION:["",[a.kI.required]],ISTRANSITWAREHOUSE:[0]}),this.onFormChanges(),this._activatedRoute.snapshot.params.mode&&"view"==this._activatedRoute.snapshot.params.mode&&(this.viewMode=!0,this.form.get("NAME").disable(),this.form.get("ADDRESS").disable(),this.form.get("PHONE").disable(),this.form.get("REMARKS").disable(),this.form.get("DIVISION").disable(),this.form.get("REFDIVISION").disable(),this.form.get("WNAME").disable(),this.form.get("STATUS").disable(),this.form.get("WarehouseType").disable(),this.form.get("ISTRANSITWAREHOUSE").disable()),this._activatedRoute.snapshot.params.returnUrl&&(this.returnUrl=this._activatedRoute.snapshot.params.returnUrl),this._activatedRoute.snapshot.params.name){let r="";r=this._activatedRoute.snapshot.params.name,this.loadingService.show("Getting data, Please wait..."),this.masterService.masterPostmethod("/getWarehouse",{mode:"query",data:{NAME:r}}).subscribe(o=>{this.loadingService.hide(),"ok"==o.status?(this.form.patchValue({NAME:o.result.NAME,WNAME:o.result.WNAME,ADDRESS:o.result.ADDRESS,PHONE:o.result.PHONE,REMARKS:o.result.REMARKS,DIVISION:o.result.DIVISION,REFDIVISION:o.result.REFDIVISION,WarehouseType:o.result.WarehouseType,STATUS:o.result.STATUS,COMPANYID:o.result.COMPANYID,ISTRANSITWAREHOUSE:o.result.ISTRANSITWAREHOUSE}),null==this._activatedRoute.snapshot.params.mode?this.modeTitle="Edit Warehouse":"view"==this._activatedRoute.snapshot.params.mode&&(this.modeTitle="View Warehouse"),this.mode="edit",this.initialTextReadOnly=!0):this.alertService.error(o.result)},o=>{this.loadingService.hide(),this.alertService.error(o._body)})}else this.mode="add",this.modeTitle="Add Warehouse"}catch(r){this.alertService.error(r)}this.getDivisionList()}onFormChanges(){this.form.valueChanges.subscribe(()=>{this.form.dirty&&this.preventNavigationService.preventNavigation(!0)})}cancel(){try{this.router.navigate([this.returnUrl])}catch(r){this.alertService.error(r)}}ngOnDestroy(){try{this.subcriptions.forEach(r=>{r.unsubscribe()})}catch(r){this.alertService.error(r)}}disabled(){try{return 1==this.viewMode?"#EBEBE4":""}catch(r){this.alertService.error(r)}}editDisabled(){try{return"edit"==this.mode?"#EBEBE4":""}catch(r){this.alertService.error(r)}}getDivisionList(){this.divisonList=[],this.masterService.getAllDivisionList().subscribe(r=>{if(this.divisonList=r,!this._activatedRoute.snapshot.params.name){const o=this.divisonList.find(h=>1==h.MAIN);this.form.patchValue({DIVISION:o.INITIAL,REFDIVISION:o.INITIAL})}})}onSave(){try{if(!this.form.valid)return void this.alertService.info("Invalid Request, Please enter all required fields.");this.onsubmit()}catch(r){this.alertService.error(r)}}onsubmit(){console.log("onsubmit inside"),this.form.controls.ADDRESS.value.length>200?this.alertService.error("Address cannot be more than 200 character"):this.form.controls.PHONE.value?.length>10?this.alertService.error("Mobile Number cannot be more than 10 digit"):1==confirm("Save Warehouse?")&&this.OtpPopup.show()}confirmationOkClicked(r){if(1==r)try{let o=Object.assign({},this.form.value);this.loadingService.show("Saving data, please wait...");let h=this.masterService.masterPostmethod("/saveWarehouse",{mode:this.mode,data:o}).subscribe(_=>{if(this.loadingService.hide(),"ok"==_.status)this.alertService.success("Data Saved Successfully"),this.preventNavigationService.preventNavigation(!1),setTimeout(()=>{this.router.navigate([this.returnUrl])},1e3);else{if("The ConnectionString property has not been initialized."==_.result._body)return void this.router.navigate(["/login",this.router.url]);this.alertService.error(`Error in Saving Data: ${_.result.error}`)}},_=>{this.loadingService.hide(),this.alertService.error(_)});this.subcriptions.push(h)}catch(o){console.log("caught error"),this.alertService.error(o)}}onSateClicked(){this.genericGrid.show()}dblClickPopupItem(r){this.form.patchValue({STATE:r.StateCode,STATENAME:r.StateName}),null!=document.getElementById("Type")&&document.getElementById("Type").focus()}preventInput(r){return r.preventDefault(),!1}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(M.d),e.Y36(b.c),e.Y36(P.V),e.Y36(I.P),e.Y36(p.e),e.Y36(n.F0),e.Y36(n.gz),e.Y36(a.qu))},c.\u0275cmp=e.Xpm({type:c,selectors:[["warehouse"]],viewQuery:function(r,o){if(1&r&&(e.Gf(y,5),e.Gf(S,5),e.Gf(N,5)),2&r){let h;e.iGM(h=e.CRH())&&(o.genericGrid=h.first),e.iGM(h=e.CRH())&&(o.nameEl=h.first),e.iGM(h=e.CRH())&&(o.OtpPopup=h.first)}},hostBindings:function(r,o){1&r&&e.NdJ("keydown",function(_){return o.updown(_)},!1,e.evT)},features:[e._Bn([p.e])],decls:80,vars:23,consts:[[1,"row","sticky-top"],[1,"col-md-6"],[1,"page-title"],["type","button ",1,"btn","btn-info","pull-right",2,"font-size","12px",3,"click"],["style","font-size: 12px;","class","btn btn-info pull-right",3,"disabled","click",4,"ngIf"],[1,"row"],[1,"col-md-12","no-padding"],["id","warehouse-tabs",1,"tabbable"],[1,"nav","nav-tabs"],[1,"nav-item"],["href","#general-info","data-toggle","tab",1,"nav-link","active"],[1,"tab-content","mr5"],["id","general-info",1,"tab-pane","active"],[1,"form-horizontal",3,"formGroup"],[1,"col-md-12","row","no-padding"],[1,"col-md-6","no-padding"],[1,"form-inline"],[1,"col-md-3"],["type","text","id","warehouseName","name","warehouseName","formControlName","NAME","autocomplete","off",1,"form-control","col-md-8",2,"color","black","height","4vh",3,"readOnly","keydown.enter"],["name",""],["class","form-text text-danger text-center",4,"ngIf"],["type","text","id","shortName","name","shortName","formControlName","WNAME","autocomplete","off",1,"form-control","col-md-8",2,"color","black","height","4vh",3,"keydown.enter"],["sname",""],["id","division","name","division","formControlName","DIVISION",1,"form-control","col-md-8",2,"height","4vh","padding","1px 12px",3,"keydown.enter"],["division",""],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-sm-3"],["type","text","id","Address","name","Address","formControlName","ADDRESS","autocomplete","off",1,"form-control","col-md-8",2,"color","black","height","4vh",3,"keydown.enter"],["address",""],["type","text","maxlength","10","OnlyNumber","true","id","phone","name","phone","formControlName","PHONE","autocomplete","off",1,"form-control","col-md-8",2,"color","black","height","4vh",3,"keydown.enter"],["phone",""],["name","Type","id","Type","formControlName","WarehouseType",1,"form-control","col-md-8",2,"height","4vh","padding","1px 12px",3,"keydown.enter"],["type",""],["value","sellable"],["value","nonsellable"],["id","division","name","division","formControlName","REFDIVISION",1,"form-control","col-md-8",2,"height","4vh","padding","1px 12px",3,"keydown.enter"],["refDivision",""],["formControlName","STATUS",1,"form-control","col-md-8",2,"height","4vh","padding","1px 12px"],["status",""],["value","0"],["value","1"],["class","form-inline",4,"ngIf"],[3,"okClicked"],["OtpPopup",""],[1,"btn","btn-info","pull-right",2,"font-size","12px",3,"disabled","click"],[1,"form-text","text-danger","text-center"],[3,"ngValue"],["type","checkbox","formControlName","ISTRANSITWAREHOUSE",2,"width","2.5%",3,"change"]],template:function(r,o){if(1&r){const h=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),e._uU(3),e.qZA()(),e.TgZ(4,"div",1)(5,"button",3),e.NdJ("click",function(){return o.cancel()}),e._uU(6,"Back"),e.qZA(),e.YNc(7,w,2,1,"button",4),e.qZA()(),e.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"ul",8)(12,"li",9)(13,"a",10),e._uU(14,"General Info"),e.qZA()()(),e.TgZ(15,"div",11)(16,"div",12)(17,"form",13)(18,"div",14)(19,"div",15)(20,"div",16)(21,"label",17),e._uU(22,"Name :"),e.qZA(),e.TgZ(23,"input",18,19),e.NdJ("keydown.enter",function(){e.CHM(h);const C=e.MAs(30);return e.KtG(C.focus())}),e.qZA()(),e.YNc(25,f,2,0,"small",20),e.TgZ(26,"div",16)(27,"label",17),e._uU(28,"Short Name :"),e.qZA(),e.TgZ(29,"input",21,22),e.NdJ("keydown.enter",function(){e.CHM(h);const C=e.MAs(36);return e.KtG(C.focus())}),e.qZA()(),e.YNc(31,O,2,0,"small",20),e.TgZ(32,"div",16)(33,"label",17),e._uU(34,"Division :"),e.qZA(),e.TgZ(35,"select",23,24),e.NdJ("keydown.enter",function(){e.CHM(h);const C=e.MAs(43);return e.KtG(C.focus())}),e.YNc(37,i,2,2,"option",25),e._UZ(38,"option"),e.qZA()(),e.TgZ(39,"div",16)(40,"label",26),e._uU(41,"Address :"),e.qZA(),e.TgZ(42,"input",27,28),e.NdJ("keydown.enter",function(){e.CHM(h);const C=e.MAs(49);return e.KtG(C.focus())}),e.qZA()(),e.YNc(44,l,2,0,"small",20),e.TgZ(45,"div",16)(46,"label",26),e._uU(47,"Mobile No :"),e.qZA(),e.TgZ(48,"input",29,30),e.NdJ("keydown.enter",function(){e.CHM(h);const C=e.MAs(55);return e.KtG(C.focus())}),e.qZA()()(),e.TgZ(50,"div",15)(51,"div",16)(52,"label",26),e._uU(53,"Type:"),e.qZA(),e.TgZ(54,"select",31,32),e.NdJ("keydown.enter",function(){e.CHM(h);const C=e.MAs(65);return e.KtG(C.focus())}),e.TgZ(56,"option",33),e._uU(57,"Sellable"),e.qZA(),e.TgZ(58,"option",34),e._uU(59,"Non-Sellable"),e.qZA()()(),e.YNc(60,m,2,0,"small",20),e.TgZ(61,"div",16)(62,"label",17),e._uU(63,"Reference Division :"),e.qZA(),e.TgZ(64,"select",35,36),e.NdJ("keydown.enter",function(){e.CHM(h);const C=e.MAs(72);return e.KtG(C.focus())}),e.YNc(66,v,2,2,"option",25),e._UZ(67,"option"),e.qZA()(),e.TgZ(68,"div",16)(69,"label",26),e._uU(70,"Status: "),e.qZA(),e.TgZ(71,"select",37,38)(73,"option",39),e._uU(74,"Inactive"),e.qZA(),e.TgZ(75,"option",40),e._uU(76,"Active"),e.qZA()()(),e.YNc(77,x,4,0,"div",41),e.qZA()()()()()()()(),e.TgZ(78,"app-otp",42,43),e.NdJ("okClicked",function(C){return o.confirmationOkClicked(C)}),e.qZA()}2&r&&(e.xp6(3),e.Oqu(o.modeTitle),e.xp6(4),e.Q6J("ngIf",0==o.viewMode),e.xp6(10),e.Q6J("formGroup",o.form),e.xp6(6),e.Udp("background-color",o.disabled())("background-color",o.editDisabled()),e.Q6J("readOnly","edit"==o.mode),e.xp6(2),e.Q6J("ngIf",o.form.controls.NAME.touched&&(null==o.form.controls.NAME.errors?null:o.form.controls.NAME.errors.required)),e.xp6(4),e.Udp("background-color",o.disabled()),e.xp6(2),e.Q6J("ngIf",o.form.controls.WNAME.touched&&(null==o.form.controls.WNAME.errors?null:o.form.controls.WNAME.errors.required)),e.xp6(6),e.Q6J("ngForOf",o.divisonList),e.xp6(5),e.Udp("background-color",o.disabled()),e.xp6(2),e.Q6J("ngIf",o.form.controls.ADDRESS.touched&&(null==o.form.controls.ADDRESS.errors?null:o.form.controls.ADDRESS.errors.required)),e.xp6(4),e.Udp("background-color",o.disabled()),e.xp6(6),e.Udp("background-color",o.disabled()),e.xp6(6),e.Q6J("ngIf",o.form.controls.WarehouseType.touched&&(null==o.form.controls.WarehouseType.errors?null:o.form.controls.WarehouseType.errors.required)),e.xp6(6),e.Q6J("ngForOf",o.divisonList),e.xp6(11),e.Q6J("ngIf",1==o.userSetting.EnableTransitWiseTransferIn))},dependencies:[g.sg,g.O5,a._Y,a.YN,a.Kr,a.Fj,a.Wl,a.EJ,a.JJ,a.JL,a.nD,a.sg,a.u,E.n,u._],styles:["input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{border:1px solid #cbcbcb;border-radius:3px;height:4vh;color:#000;font-size:14px}label[_ngcontent-%COMP%]{height:25px;font-size:14px}"]}),c})()}];let k=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[n.Bz.forChild(W),n.Bz]}),c})();var U=s(89953),L=s(62106);let R=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[k,U.m,L.A]}),c})()},47985:(Z,T,s)=>{s.d(T,{N:()=>w}),s(64298);var t=s(66274),p=s(48083),a=s(67311),d=s(53074),e=s(92752),M=s(7587),b=s(72533),P=s(77879),I=s(49137);const g=["genericGrid"];function E(f,O){if(1&f){const i=t.EpF();t.TgZ(0,"tr")(1,"td",21),t._uU(2),t.qZA(),t.TgZ(3,"td",22),t._uU(4),t.qZA(),t.TgZ(5,"td",22),t._uU(6),t.qZA(),t.TgZ(7,"td",22),t._uU(8),t.qZA(),t.TgZ(9,"td",22),t._uU(10),t.qZA(),t.TgZ(11,"td",23)(12,"button",24),t.NdJ("click",function(){const v=t.CHM(i).$implicit,x=t.oxw(2);return t.KtG(x.onViewClicked(v))}),t._uU(13,"View"),t.qZA(),t.TgZ(14,"button",25,5),t.NdJ("click",function(){const v=t.CHM(i).$implicit,x=t.oxw(2);return t.KtG(x.onEditClick(v))}),t._uU(16,"Edit"),t.qZA(),t.TgZ(17,"button",26,5),t.NdJ("click",function(){const v=t.CHM(i).$implicit,x=t.oxw(2);return t.KtG(x.deleteWarehouse(v))}),t._uU(19,"Delete"),t.qZA()()()}if(2&f){const i=O.$implicit,l=O.index,m=t.MAs(15),v=t.oxw(2);t.xp6(2),t.Oqu(l+1+(v.currentPage-1)*v.itemsPerPage),t.xp6(2),t.Oqu(null==i?null:i.NAME),t.xp6(2),t.Oqu(null==i?null:i.DIVISIONNAME),t.xp6(2),t.Oqu(null==i?null:i.DIVISION),t.xp6(2),t.Oqu(null==i?null:i.WarehouseType),t.xp6(4),t.Q6J("disabled",m.isOldFYearDB()),t.xp6(3),t.Q6J("disabled",m.isOldFYearDB())}}const u=function(f,O,i){return{itemsPerPage:f,currentPage:O,totalItems:i}};function y(f,O){if(1&f&&(t.ynx(0),t.YNc(1,E,20,7,"tr",20),t.ALo(2,"paginate"),t.ALo(3,"searchData"),t.BQk()),2&f){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,t.Dn7(3,4,i.warehouseList,i.filter,"NAME"),t.kEZ(8,u,i.itemsPerPage,i.currentPage,i.totalCount)))}}function S(f,O){1&f&&(t.ynx(0),t.TgZ(1,"tr")(2,"td",27)(3,"div",28),t._uU(4,"Warehouse List are unavailable."),t.qZA()()(),t.BQk())}function N(f,O){if(1&f){const i=t.EpF();t.TgZ(0,"div",29)(1,"div",30)(2,"div",31)(3,"pagination-controls",32),t.NdJ("pageChange",function(m){t.CHM(i);const v=t.oxw();return t.KtG(v.warehousePagination(m))}),t.qZA()()()()}if(2&f){const i=t.oxw();t.xp6(3),t.Q6J("directionLinks",i.directionLinks)}}let w=(()=>{class f{constructor(i,l,m){this.router=i,this.alertService=l,this.masterService=m,this.warehouseList=[],this.isLoader=!0,this.directionLinks=!0,this.currentPage=1,this.itemsPerPage=20,this.masterService.getAllWarehouseList().subscribe(v=>{this.warehouseList=v})}updown(i){"Escape"===i.code&&(i.preventDefault(),this.router.navigate(["./pages/dashboard"]))}ngOnInit(){}addNewWarehouse(){if(this.masterService.checkUserRights("add","warehouse"))try{this.router.navigate(["./pages/masters/warehouse/add-warehouse",{mode:"add",returnUrl:this.router.url}])}catch(i){this.alertService.error(i)}}onEditClick(i){if("T"!=i.ISDEFAULT){if(this.masterService.checkUserRights("edit","warehouse"))try{this.router.navigate(["./pages/masters/warehouse/add-warehouse",{name:i.NAME,mode:"edit",returnUrl:this.router.url}])}catch(l){this.alertService.error(l)}}else this.alertService.warning("Main Warehouse is not editable.")}onViewClicked(i){try{this.router.navigate(["pages/masters/warehouse/add-warehouse",{name:i.NAME,mode:"view",returnUrl:this.router.url}])}catch(l){this.alertService.error(l)}}deleteWarehouse(i){this.masterService.checkUserRights("delete","warehouse")&&confirm("Are you sure you want to delete "+i.NAME+" ?")&&this.masterService.deleteWarehouse(i.NAME).subscribe(l=>{"ok"==l.status?(this.alertService.info(l.result),this.masterService.getAllWarehouseList().subscribe(m=>{this.warehouseList=m&&m||[]})):this.alertService.error(l.result.error)},l=>{this.alertService.error(l.error)})}warehousePagination(i){this.isLoader=!0,this.currentPage=i;const l=this;window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{l.isLoader=!1},500)}}return f.\u0275fac=function(i){return new(i||f)(t.Y36(p.F0),t.Y36(a.c),t.Y36(d.P))},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-warehouselist"]],viewQuery:function(i,l){if(1&i&&t.Gf(g,5),2&i){let m;t.iGM(m=t.CRH())&&(l.genericGrid=m.first)}},hostBindings:function(i,l){1&i&&t.NdJ("keydown",function(v){return l.updown(v)},!1,t.evT)},decls:40,vars:13,consts:[[1,"row","col-md-12"],[1,"col-md-4"],[1,"col-md-8"],["routerLink","/pages/dashboard",1,"btn","btn-info","pull-right",2,"font-size","12px"],["appOldFYearDB","",1,"btn","btn-info","pull-right",2,"font-size","12px",3,"disabled","click"],["isOldFYearDB","appOldFYearDB"],[1,"row",2,"align-items","center"],[1,"col-sm-8","col-md-12",2,"margin-top","0.5rem"],[1,"card",2,"margin","auto","width","63rem","height","31rem"],[1,"card-header"],[2,"width","25%"],["type","search","placeholder","Search...","name","filter","autocomplete","off",1,"form-control",2,"height","1.5rem",3,"ngModel","ngModelChange"],[1,"card-body"],[1,"table","table-striped"],[2,"position","sticky","top","0","line-height","1.5rem"],["scope","col",2,"width","3%"],["scope","col",2,"width","15%"],["scope","col",2,"width","20%","text-align","center"],[4,"ngIf"],["class","card-footer","style","padding:5px",4,"ngIf"],[4,"ngFor","ngForOf"],[2,"width","3%"],[2,"width","15%"],[2,"width","20%","text-align","center"],["type","button","data-toggle","modal",1,"btn","btn-sm","btn-info","mr-1","btn-sm",2,"width","60px",3,"click"],["appOldFYearDB","",1,"btn","btn-sm","btn-info","mr-1","btn-sm",2,"width","60px","color","white",3,"disabled","click"],["type","button","data-toggle","modal","appOldFYearDB","",1,"btn","btn-sm","btn-info","btn-sm",2,"width","60px",3,"disabled","click"],["colspan","3"],[1,"font-weight-bold"],[1,"card-footer",2,"padding","5px"],[1,"pagination"],[2,"margin","auto"],[1,"my-pagination",3,"directionLinks","pageChange"]],template:function(i,l){if(1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5"),t._uU(3,"Warehouse"),t.qZA()(),t.TgZ(4,"div",2)(5,"button",3),t._uU(6,"Back"),t.qZA(),t.TgZ(7,"button",4,5),t.NdJ("click",function(){return l.addNewWarehouse()}),t._uU(9,"Add Warehouse"),t.qZA()()(),t.TgZ(10,"div",6)(11,"div",7)(12,"div",8)(13,"div",9)(14,"span"),t._uU(15,"Warehouse List"),t.qZA(),t.TgZ(16,"div",10)(17,"input",11),t.NdJ("ngModelChange",function(v){return l.filter=v}),t.qZA()()(),t.TgZ(18,"div",12)(19,"table",13)(20,"thead")(21,"tr",14)(22,"th",15),t._uU(23,"S.N."),t.qZA(),t.TgZ(24,"th",16),t._uU(25,"Warehouse"),t.qZA(),t.TgZ(26,"th",16),t._uU(27,"Division Name"),t.qZA(),t.TgZ(28,"th",16),t._uU(29,"Division"),t.qZA(),t.TgZ(30,"th",16),t._uU(31,"Warehouse Type"),t.qZA(),t.TgZ(32,"th",17),t._uU(33,"Action"),t.qZA()()(),t.TgZ(34,"tbody"),t.YNc(35,y,4,12,"ng-container",18),t.YNc(36,S,5,0,"ng-container",18),t.ALo(37,"searchData"),t.qZA()()(),t.YNc(38,N,4,1,"div",19),t.ALo(39,"searchData"),t.qZA()()()),2&i){const m=t.MAs(8);t.xp6(7),t.Q6J("disabled",m.isOldFYearDB()),t.xp6(10),t.Q6J("ngModel",l.filter),t.xp6(18),t.Q6J("ngIf",l.warehouseList&&l.warehouseList.length>0),t.xp6(1),t.Q6J("ngIf",l.warehouseList&&0===t.Dn7(37,5,l.warehouseList,l.filter,"NAME").length),t.xp6(2),t.Q6J("ngIf",l.warehouseList&&t.Dn7(39,9,l.warehouseList,l.filter,"NAME").length>l.itemsPerPage)}},dependencies:[p.rH,e.sg,e.O5,M.Fj,M.JJ,M.On,b.LS,P.H,b._s,I.C],styles:[".no-data-available[_ngcontent-%COMP%]{text-align:center}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.card-header[_ngcontent-%COMP%]:after{display:none}.card-body[_ngcontent-%COMP%]{padding:5px!important;max-height:675px!important}.card-footer[_ngcontent-%COMP%]{height:6vh}.main-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:60px 0}.scroll-touch[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch!important}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.1rem!important}.sticky-top[_ngcontent-%COMP%]{margin-top:60px;height:100vh}tbody[_ngcontent-%COMP%]{display:block;height:59vh;overflow:auto}thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}th[_ngcontent-%COMP%]{font-size:15px}td[_ngcontent-%COMP%]{font-size:13px}.btn-sm[_ngcontent-%COMP%]{line-height:3px}.card-header[_ngcontent-%COMP%]{padding:10px 20px}",".my-pagination[_ngcontent-%COMP%]     .ngx-pagination .current {\n        background: #17a2b8 !important;\n        border: transparent !important;\n        border-radius: 20px !important;\n    }\n    \n    .my-pagination[_ngcontent-%COMP%]     .ngx-pagination .current:hover {\n        background: #74d4e2 !important;\n        border-radius: 20px !important;\n        border: transparent !important;\n    }\n    \n    .my-pagination[_ngcontent-%COMP%]     .ngx-pagination a:hover, .ngx-pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\n        background: #c2c2c2;\n        border-radius: 20px !important;\n    }"]}),f})()}}]);