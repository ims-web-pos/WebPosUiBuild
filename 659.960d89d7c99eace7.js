"use strict";(self.webpackChunkimserp=self.webpackChunkimserp||[]).push([[659],{2847:(Se,G,T)=>{T.d(G,{v:()=>_i});var i=T(28698),D=T(19102),B=T(23815),g=T.n(B),d=T(42326),b=T(88692),j=T(92340),E=T(40216),y=T(64762),e=T(64537),S=T(68277),w=T(28049),k=T(54395),N=T(54536),x=T(67311),v=T(20092),Z=T(72533);const J=["inputBox"];function H(c,s){if(1&c&&(e.TgZ(0,"option",28),e._uU(1),e.qZA()),2&c){const n=e.oxw().$implicit;e.Q6J("value",n.key),e.xp6(1),e.hij(" ",n.title," ")}}function K(c,s){if(1&c&&(e.ynx(0),e.YNc(1,H,2,2,"option",27),e.BQk()),2&c){const n=s.$implicit;e.xp6(1),e.Q6J("ngIf",!n.noSearch)}}const F=function(c){return{"text-align":c}};function q(c,s){if(1&c&&(e.TgZ(0,"th",30),e._uU(1),e.qZA()),2&c){const n=e.oxw().$implicit;e.Q6J("ngStyle",e.VKq(2,F,n.alignment)),e.xp6(1),e.hij(" ",n.title," ")}}function Q(c,s){if(1&c&&(e.ynx(0),e.YNc(1,q,2,4,"th",29),e.BQk()),2&c){const n=s.$implicit;e.xp6(1),e.Q6J("ngIf",!n.hidden)}}function Y(c,s){1&c&&(e.TgZ(0,"th"),e._uU(1," Action "),e.qZA())}function W(c,s){if(1&c&&(e.TgZ(0,"div",35),e._uU(1),e.qZA()),2&c){const n=e.oxw(2).$implicit,t=e.oxw().$implicit;e.s9C("title",t[n.key]),e.xp6(1),e.hij(" ",t[n.key]," ")}}function X(c,s){if(1&c&&(e.TgZ(0,"div",35),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&c){const n=e.oxw(2).$implicit,t=e.oxw().$implicit;e.s9C("title",t[n.key]),e.xp6(1),e.hij(" ",e.Dn7(2,2,t[n.key],"INR","Rs. ")," ")}}function z(c,s){if(1&c&&(e.TgZ(0,"div",35),e._uU(1),e.ALo(2,"date"),e.qZA()),2&c){const n=e.oxw(2).$implicit,t=e.oxw().$implicit;e.s9C("title",t[n.key]),e.xp6(1),e.hij(" ",e.xi3(2,2,t[n.key],"yyyy-MM-dd")," ")}}function $(c,s){if(1&c&&(e.TgZ(0,"td",30),e.YNc(1,W,2,2,"div",34),e.YNc(2,X,3,6,"div",34),e.YNc(3,z,3,5,"div",34),e.qZA()),2&c){const n=e.oxw().$implicit;e.Q6J("ngStyle",e.VKq(4,F,n.alignment)),e.xp6(1),e.Q6J("ngIf",!n.pipe&&!n.format),e.xp6(1),e.Q6J("ngIf",n.pipe),e.xp6(1),e.Q6J("ngIf",n.format)}}function ee(c,s){if(1&c&&(e.ynx(0),e.YNc(1,$,4,6,"td",29),e.BQk()),2&c){const n=s.$implicit;e.xp6(1),e.Q6J("ngIf",!n.hidden)}}function ne(c,s){if(1&c){const n=e.EpF();e.ynx(0),e.TgZ(1,"span")(2,"i",36),e.NdJ("click",function(){const a=e.CHM(n).$implicit,h=e.oxw(2).index,m=e.oxw(3);return e.KtG(m.onActionClicked(a.text,h))}),e.qZA()(),e.BQk()}if(2&c){const n=s.$implicit;e.xp6(2),e.Tol(n.icon),e.s9C("title",n.title)}}function ie(c,s){if(1&c&&(e.ynx(0),e.TgZ(1,"td"),e.YNc(2,ne,3,4,"ng-container",12),e.qZA(),e.BQk()),2&c){const n=e.oxw(4);e.xp6(2),e.Q6J("ngForOf",n.popupsettings.actionKeys)}}function te(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"tr",32),e.NdJ("dblclick",function(){const a=e.CHM(n).$implicit,h=e.oxw(3);return e.KtG(h.doubleClick(a))})("click",function(){const a=e.CHM(n).index,h=e.oxw(3);return e.KtG(h.singleClick(a))}),e.TgZ(1,"td")(2,"input",33),e.NdJ("ngModelChange",function(r){const h=e.CHM(n).$implicit;return e.KtG(h.selected=r)})("click",function(r){const h=e.CHM(n).$implicit,m=e.oxw(3);return e.KtG(m.onSelectVchr(r,h))}),e.qZA()(),e.YNc(3,ee,2,1,"ng-container",12),e.YNc(4,ie,3,1,"ng-container",2),e.qZA()}if(2&c){const n=s.$implicit,t=s.index,r=e.oxw(3);e.ekj("selected-row",r.selectedRowIndex==t),e.xp6(2),e.Q6J("ngModel",n.selected),e.xp6(1),e.Q6J("ngForOf",r.popupsettings.columns),e.xp6(1),e.Q6J("ngIf",r.popupsettings.showActionButton&&r.popupsettings.actionKeys.length)}}const re=function(c,s,n,t){return{id:c,itemsPerPage:s,currentPage:n,totalItems:t}};function ae(c,s){if(1&c&&(e.TgZ(0,"tbody"),e.YNc(1,te,5,5,"tr",31),e.ALo(2,"paginate"),e.qZA()),2&c){const n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,n.itemList,e.l5B(4,re,n.tabindex,n.pageSize,n.pageNumber,n.totalItems)))}}function oe(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",37)(1,"pagination-controls",38),e.NdJ("pageChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.onPageChange(r))}),e.qZA()()}if(2&c){const n=e.oxw(2);e.xp6(1),e.Q6J("id",n.tabindex)}}function ce(c,s){if(1&c&&e._UZ(0,"div",39),2&c){const n=e.oxw(2);e.Q6J("innerHTML",n.summary,e.oJD)}}function se(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div")(1,"div")(2,"div",3)(3,"h4",4),e._uU(4),e.qZA(),e.TgZ(5,"button",5),e.NdJ("click",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.hide())}),e.TgZ(6,"span",6),e._uU(7,"\xd7"),e.qZA()()(),e.TgZ(8,"div",7)(9,"div",8)(10,"div",9)(11,"select",10),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.filterOption=r)})("change",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.triggerSearch(r))}),e.TgZ(12,"option",11),e._uU(13,"Select Filter Option"),e.qZA(),e.YNc(14,K,2,1,"ng-container",12),e.qZA()(),e.TgZ(15,"div",13),e._UZ(16,"input",14,15),e.qZA()()(),e.TgZ(18,"div",16)(19,"div",17)(20,"div",18)(21,"input",19),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.selectAll=r)})("click",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.onSelectAll(r))}),e.qZA(),e.TgZ(22,"label",20),e._uU(23," Select All "),e.qZA()(),e.TgZ(24,"button",21),e.NdJ("click",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.onImportChalan())}),e._uU(25,"Import Delivery Chalan"),e.qZA()(),e.TgZ(26,"table",22)(27,"thead")(28,"tr",23)(29,"th"),e._uU(30,"Select"),e.qZA(),e.YNc(31,Q,2,1,"ng-container",12),e.YNc(32,Y,2,0,"th",2),e.qZA()(),e.YNc(33,ae,3,9,"tbody",2),e.qZA(),e.TgZ(34,"div",24),e.YNc(35,oe,2,1,"div",25),e.qZA()()(),e.YNc(36,ce,1,1,"div",26),e.qZA()}if(2&c){const n=e.oxw();e.xp6(4),e.hij(" ",n.popupsettings.title," "),e.xp6(7),e.Q6J("ngModel",n.filterOption),e.xp6(3),e.Q6J("ngForOf",n.popupsettings.columns),e.xp6(2),e.Q6J("formControl",n.filterValue),e.xp6(5),e.Q6J("ngModel",n.selectAll),e.xp6(10),e.Q6J("ngForOf",n.popupsettings.columns),e.xp6(1),e.Q6J("ngIf",n.popupsettings.showActionButton&&n.popupsettings.actionKeys.length),e.xp6(1),e.Q6J("ngIf",n.itemList.length),e.xp6(2),e.Q6J("ngIf",n.itemList.length),e.xp6(1),e.Q6J("ngIf",n.summary)}}class f extends S.nd{constructor(s,n,t){super(s),this.injector=s,this.dialog=n,this.alertservice=t,this.requestUrl="",this.isActive=!1,this.itemList=[],this.selectedRowIndex=0,this.tabindex="list",this.hideGridOnDoubleClick=!0,this.vchrList=[],this.billTo="",this.tag="",this.isForCancelOrder=!1,this.onPopUpClose=new e.vpe,this.onItemDoubleClick=new e.vpe,this.onImportChalanClick=new e.vpe,this.onDeleteClicked=new e.vpe,this.onEmptyList=new e.vpe}ngAfterViewInit(){this.filterValue.valueChanges.pipe((0,k.b)(500)).subscribe(s=>{this.refreshPage(),this.refresh()})}show(s="",n=!1,t="",r=!0){this.hideGridOnDoubleClick=r,setTimeout(()=>{this.inputBox.nativeElement.focus()},10),this.summary=null,this.billTo=s,this.isForCancelOrder=n,this.itemList=[],this.isActive=!0,this.selectedRowIndex=0,this.tag=t,this.filterOption="",setTimeout(()=>{this.setFilterOption()},100)}setFilterOption(){if(this.popupsettings&&this.popupsettings.columns.length){const s=this.popupsettings.defaultFilterIndex?this.popupsettings.defaultFilterIndex:0;if(this.popupsettings.columns.length<=s)return;this.filterValue.setValue(this.popupsettings.userDefinefilterValue),this.filterOption=this.popupsettings.columns[s].key}}onSelectVchr(s,n){if(s.target.checked)n.selected=1,this.vchrList.push(n.VCHRNO);else{n.selected=0,this.selectAll=!1;const t=this.vchrList.indexOf(n.VCHRNO);t>-1&&this.vchrList.splice(t,1)}}onSelectAll(s){s.target.checked?this.popupsettings.selectAllApiEndpoint&&this._http.get(j.N.apiUrl+this.popupsettings.selectAllApiEndpoint).pipe((0,w.P)()).subscribe(n=>{n&&(this.vchrList=n,this.itemList.forEach(t=>t.selected=1))}):(this.vchrList=[],this.itemList.forEach(n=>n.selected=0))}getData(){this.summary=null,this.selectedRowIndex=0;let t=`${j.N.apiUrl}${this.popupsettings.apiEndpoints}?currentPage=${this.pageNumber}&maxResultCount=${this.pageSize}`;return this.billTo&&""!==this.billTo&&null!=this.billTo&&void 0!==this.billTo&&(t+=`&billTo=${this.billTo}`),this.tag&&""!==this.tag&&null!=this.tag&&void 0!==this.isTableLoading&&(t+=`&tag=${this.tag}`),this.isForCancelOrder&&(t+=`&isForCancelOrder=${this.isForCancelOrder}`),this.requestUrl=this.getFilterOption(t),this._http.get(this.requestUrl).pipe((0,w.P)()).subscribe(r=>{this.totalItems=r?r.totalCount:0,this.itemList=r?r.data:[],this.itemList.forEach(function(a){null!=a.TRNDATE&&void 0!==a.TRNDATE&&(a.TRNDATE=a.TRNDATE.toString().substring(0,10)),null!=a.DATE&&void 0!==a.DATE&&(a.DATE=a.DATE.toString().substring(0,10))}),this.itemList.length>0&&0===this.selectedRowIndex&&this.itemList[this.selectedRowIndex].itemSummary&&(this.summary=this.itemList[this.selectedRowIndex].itemSummary)})}hide(){this.itemList=[],this.pageNumber=1,this.totalItems=0,this.isActive=!1}triggerSearch(){null==this.filterOption||void 0===this.filterOption||""===this.filterOption||this.filterValue.setValue("")}singleClick(s){this.selectedRowIndex=s,this.summary=this.itemList[s].itemSummary}doubleClick(s){this.onItemDoubleClick.emit(s),this.hideGridOnDoubleClick&&this.hide()}onImportChalan(){console.log("vchrlist",this.vchrList),0!=this.vchrList?.length?this.onImportChalanClick.emit(this.vchrList):this.alertservice.info("Please select voucher first!")}updown(s){if(!this.isActive)return!0;if("ArrowDown"===s.code)s.preventDefault(),this.selectedRowIndex++,null!=this.itemList[this.selectedRowIndex]&&(this.summary=this.itemList[this.selectedRowIndex].itemSummary),this.calculateTotalPages(),this.selectedRowIndex===this.itemList.length&&this.pageNumber<this.totalPages?(this.pageNumber=this.pageNumber+1,this.refresh(),this.selectedRowIndex=0,this.itemListClosed()):this.selectedRowIndex===this.itemList.length&&this.pageNumber===this.totalPages&&(this.selectedRowIndex=this.itemList.length-1);else if("ArrowUp"===s.code)s.preventDefault(),this.selectedRowIndex--,null!=this.itemList[this.selectedRowIndex]&&(this.summary=this.itemList[this.selectedRowIndex].itemSummary),-1===this.selectedRowIndex&&this.pageNumber>1?(this.pageNumber=this.pageNumber-1,this.refresh(),this.selectedRowIndex=this.itemList.length-1,this.itemListClosed()):-1===this.selectedRowIndex&&1===this.pageNumber&&(this.selectedRowIndex=0);else if(("Enter"===s.code||"NumpadEnter"===s.code)&&this.selectedRowIndex>=0&&this.selectedRowIndex<this.itemList.length)s.preventDefault(),"BARCODE"===this.filterOption||(this.onItemDoubleClick.emit(this.itemList[this.selectedRowIndex]),this.hide(),this.itemListClosed());else if("Escape"===s.code)s.preventDefault(),this.hide(),this.itemListClosed();else if("ArrowRight"===s.code){if(s.preventDefault(),this.calculateTotalPages(),this.pageNumber>=this.totalPages)return void(this.pageNumber=this.totalPages);this.selectedRowIndex=0,this.pageNumber=this.pageNumber+1,this.refresh()}else if("ArrowLeft"===s.code){if(s.preventDefault(),this.pageNumber<=1)return void(this.pageNumber=1);this.selectedRowIndex=0,this.pageNumber=this.pageNumber-1,this.refresh()}}itemListClosed(){this.onPopUpClose.emit()}ngOnChanges(s){this.popupsettings=s.popupsettings.currentValue}onActionClicked(s,n){if(""!==s&&null!=s&&void 0!==s){const t=s.toLowerCase();switch(t){case"delete":case"cancel":confirm(`Are you sure to ${t} this row ?.`)&&this.onDeleteClicked.emit(this.itemList[n])}}}}f.\u0275fac=function(s){return new(s||f)(e.Y36(e.zs3),e.Y36(N.uw),e.Y36(x.c))},f.\u0275cmp=e.Xpm({type:f,selectors:[["generic-multiSelectpopup-grid"]],viewQuery:function(s,n){if(1&s&&e.Gf(J,5),2&s){let t;e.iGM(t=e.CRH())&&(n.inputBox=t.first)}},hostBindings:function(s,n){1&s&&e.NdJ("keydown",function(r){return n.updown(r)},!1,e.evT)},inputs:{popupsettings:"popupsettings",summary:"summary"},outputs:{onPopUpClose:"onPopUpClose",onItemDoubleClick:"onItemDoubleClick",onImportChalanClick:"onImportChalanClick",onDeleteClicked:"onDeleteClicked",onEmptyList:"onEmptyList"},features:[e.qOj,e.TTD],decls:3,vars:3,consts:[[1,"modal-sticky",2,"display","block","padding","0px","margin-bottom","25px"],[1,"modal-content","modal-content-main-area"],[4,"ngIf"],[1,"modal-header",2,"padding","0px","background","#7ed0ff"],[1,"modal-title",2,"padding-left","5px","font-size","1.2rem"],["aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"row"],[1,"col-md-12","row"],[1,"col-md-6",2,"margin","2px 0px","display","flex","padding","0px"],[2,"width","100%",3,"ngModel","ngModelChange","change"],["value","","selected",""],[4,"ngFor","ngForOf"],[1,"col-md-6",2,"margin","2px 0px","display","flex","padding-right","0px"],["type","text","placeholder","Enter keyword to search",2,"width","100%",3,"formControl"],["inputBox",""],[1,"col-md-12","table-scroll"],[1,"popupBtn","d-flex","justify-content-between"],[1,"form-check"],["type","checkbox","value","","id","flexCheckChecked",1,"form-check-input",3,"ngModel","ngModelChange","click"],["for","flexCheckChecked",1,"form-check-label",2,"margin-bottom","-10px"],[1,"btn","btn-success","btn-sm","mt-1","mb-1",3,"click"],[1,"table"],[2,"background","#7ed0ff"],[1,"row",2,"float","center","margin","4px 0px"],["class","col-md-12","style","width: 100%; margin-top: -1.8rem",4,"ngIf"],["style","margin-left: 25px; margin-top: -25px; font-size: 12px",3,"innerHTML",4,"ngIf"],[3,"value",4,"ngIf"],[3,"value"],[3,"ngStyle",4,"ngIf"],[3,"ngStyle"],["class","highlight","title","double click for detail view",3,"selected-row","dblclick","click",4,"ngFor","ngForOf"],["title","double click for detail view",1,"highlight",3,"dblclick","click"],["type","checkbox","value","","id","flexCheckChecked",1,"form-check-input",2,"margin-top","-10px","margin-left","13px",3,"ngModel","ngModelChange","click"],[3,"title",4,"ngIf"],[3,"title"],[3,"title","click"],[1,"col-md-12",2,"width","100%","margin-top","-1.8rem"],["maxSize","9","directionLinks","true","autoHide","true","responsive","true","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",2,"margin-left","6rem","margin-bottom","0","font-size","0.8rem",3,"id","pageChange"],[2,"margin-left","25px","margin-top","-25px","font-size","12px",3,"innerHTML"]],template:function(s,n){1&s&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,se,37,10,"div",2),e.qZA()()),2&s&&(e.ekj("modal-sticky-hide",!n.isActive),e.xp6(2),e.Q6J("ngIf",n.popupsettings))},dependencies:[b.sg,b.O5,b.PC,v.YN,v.Kr,v.Fj,v.Wl,v.EJ,v.JJ,v.On,v.oH,Z.LS,b.H9,b.uU,Z._s],styles:[".modal-content[_ngcontent-%COMP%] {\n    padding: 1px;\n    margin: 0px;\n    float: right;\n    width: auto;\n  }\n\n  tbody[_ngcontent-%COMP%]    > tr[_ngcontent-%COMP%]:hover {\n    background-color: #f3f5f4;\n    cursor: pointer;\n  }\n\n  tr[_ngcontent-%COMP%] {\n    font-size: 11px;\n  }\n\n  .selected-row[_ngcontent-%COMP%] {\n    background-color: #ced6d3 !important;\n  }\n\n  .table[_ngcontent-%COMP%]    > tbody[_ngcontent-%COMP%]    > tr[_ngcontent-%COMP%]    > td[_ngcontent-%COMP%] {\n    line-height: 24px !important;\n    padding: 5px 10px;\n    vertical-align: middle;\n  }\n\n  .table[_ngcontent-%COMP%]    > thead[_ngcontent-%COMP%]    > tr[_ngcontent-%COMP%]    > th[_ngcontent-%COMP%] {\n    line-height: 5px !important;\n  }\n\n  .table[_ngcontent-%COMP%]    > tbody[_ngcontent-%COMP%]    > tr[_ngcontent-%COMP%]    > td[_ngcontent-%COMP%]:first-child {\n    text-align: left !important;\n    padding: 0px 0px 0px 11px !important;\n  }\n\n  .modal-content[_ngcontent-%COMP%] {\n    box-shadow: -10px 0px 10px 1px #aaaaaa;\n  }\n\n  .modal-content-main-area[_ngcontent-%COMP%] {\n    max-height: 100%;\n    height: 100%;\n    overflow: auto;\n    overflow-x: hidden;\n  }\n\n  .modal-content-summary-area[_ngcontent-%COMP%] {\n    max-height: 20%;\n    height: 20%;\n    overflow: auto;\n    overflow-x: hidden;\n  }\n\n  .ellipsis[_ngcontent-%COMP%] {\n    \n    white-space: nowrap;\n  }"]}),(0,y.gn)([function _e(c){return function(s,n,t){const r=t.value,a=`__timeout__${n}`;return t.value=function(...h){clearTimeout(this[a]),this[a]=setTimeout(()=>r.apply(this,h),c)},t}}(10)],f.prototype,"updown",null);var R=T(53074),P=T(14970),U=T(7976);const le=["fileInput"];let de=(()=>{class c{constructor(n,t,r,a,h,m,C){this.dialogRef=n,this.fb=t,this.masterService=r,this.spinnerService=a,this.alertService=h,this.router=m,this.data=C,this.shippingLocationObj={},this.onsubmit=new e.vpe,this.mode="add",this.custId=C?.CUSTID,C?.shippingLocation&&(this.shippingLocationObj=C.shippingLocation),this.mode=C?.mode||"add"}ngOnInit(){this.router.events.subscribe(n=>{"/salesorder"!==this.router.url&&this.dialogRef.close()}),this.shippingForm=this.fb.group({ADDRESS:[this.shippingLocationObj.ADDRESS||"",[v.kI.required]],CONTACT_PERSON:[this.shippingLocationObj.CONTACT_PERSON||"",[v.kI.required]],CONTACT_NO:[this.shippingLocationObj.CONTACT_NO||"",[v.kI.required]]})}onSave(){let n=Object.assign(this.shippingForm.value);console.log("custid",this.custId),this.custId?(n.CUSTID=this.custId,this.SaveShippingLocation({mode:this.mode,data:n})):this.alertService.info("Customer is not selected")}cancelPopup(){this.dialogRef.close(null),this.onReset()}onReset(){this.shippingForm.reset()}onFileChange(){this.fileInput.nativeElement.click()}SaveShippingLocation(n){this.spinnerService.show("Data is Saving ..."),this.masterService.postShippingLocation(n).subscribe(t=>{"ok"==t.status?(this.dialogRef.close(t.result2),this.spinnerService.hide()):(this.alertService.info(t.result),this.spinnerService.hide())},t=>{this.spinnerService.hide()})}}return c.\u0275fac=function(n){return new(n||c)(e.Y36(N.so),e.Y36(v.qu),e.Y36(R.P),e.Y36(P.V),e.Y36(x.c),e.Y36(U.F0),e.Y36(N.WI))},c.\u0275cmp=e.Xpm({type:c,selectors:[["create-shipping-location"]],viewQuery:function(n,t){if(1&n&&e.Gf(le,5),2&n){let r;e.iGM(r=e.CRH())&&(t.fileInput=r.first)}},outputs:{onsubmit:"onsubmit"},decls:33,vars:7,consts:[[1,"backdrop"],["role","document",1,"shipping_container",2,"max-width","100%","max-height","500px","overflow","hidden"],[1,"card"],[1,"card-header","row"],[1,"page-title","col-md-6",2,"font-size","large","padding-top","2px","padding-left","0px"],[1,"button-group","col-md-6",2,"padding-left","0px","padding-right","0px"],[3,"formGroup","ngSubmit"],["title","Cancel","type","reset",1,"btn","btn-info",2,"width","80px","float","right",3,"click"],["title","Reset","type","reset",1,"btn","btn-info",2,"margin-right","2px","width","80px","float","right",3,"disabled","click"],["title","Save","type","submit",1,"btn","btn-info",2,"margin-right","2px","width","80px","float","right",3,"disabled"],[1,"card-body"],[1,"form-horizontal",3,"formGroup"],[1,"form-group","row"],[1,"row","col-sm-12",2,"padding-right","0px","padding-left","0px"],[1,"col-sm-4","form-control-label"],[1,"col-sm-7",2,"padding-left","1px"],["type","text","formControlName","ADDRESS","autocomplete","off",1,"form-control",3,"readonly"],["type","text","formControlName","CONTACT_PERSON","autocomplete","off",1,"form-control",3,"readonly"],["type","number","formControlName","CONTACT_NO","autocomplete","off",1,"form-control",3,"readonly"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5"),e._uU(6,"SHIPPING INFORMATION"),e.qZA()(),e.TgZ(7,"div",5)(8,"form",6),e.NdJ("ngSubmit",function(){return t.onSave()}),e.TgZ(9,"button",7),e.NdJ("click",function(){return t.cancelPopup()}),e._uU(10,"CANCEL"),e.qZA(),e.TgZ(11,"button",8),e.NdJ("click",function(){return t.onReset()}),e._uU(12,"RESET"),e.qZA(),e.TgZ(13,"button",9),e._uU(14,"SAVE"),e.qZA()()()(),e.TgZ(15,"div",10)(16,"form",11)(17,"div",12)(18,"div",13)(19,"label",14),e._uU(20,"Shipping Address"),e.qZA(),e.TgZ(21,"div",15),e._UZ(22,"input",16),e.qZA()(),e.TgZ(23,"div",13)(24,"label",14),e._uU(25,"Contact Person"),e.qZA(),e.TgZ(26,"div",15),e._UZ(27,"input",17),e.qZA()(),e.TgZ(28,"div",13)(29,"label",14),e._uU(30,"Contact Number"),e.qZA(),e.TgZ(31,"div",15),e._UZ(32,"input",18),e.qZA()()()()()()()()),2&n&&(e.xp6(8),e.Q6J("formGroup",t.shippingForm),e.xp6(3),e.Q6J("disabled","VIEW"===t.mode),e.xp6(2),e.Q6J("disabled","VIEW"===t.mode),e.xp6(3),e.Q6J("formGroup",t.shippingForm),e.xp6(6),e.Q6J("readonly","VIEW"===t.mode),e.xp6(5),e.Q6J("readonly","VIEW"===t.mode),e.xp6(5),e.Q6J("readonly","VIEW"===t.mode))},dependencies:[v._Y,v.Fj,v.wV,v.JJ,v.JL,v.sg,v.u],styles:["td[_ngcontent-%COMP%]{border:1px solid #e6e6e6}input[_ngcontent-%COMP%]{padding:8px;margin-top:6px;height:30px}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.shipping_container[_ngcontent-%COMP%]{position:fixed!important;transform:translateY(-35px);background:#ffffff;z-index:99999;width:40%;top:22.5%;left:55%}label[_ngcontent-%COMP%]{font-size:14px;margin-left:1rem;margin-top:7px}.backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#3d3c3c80;z-index:9999}"]}),c})();var Me=T(65705),ue=T(87584),l=T(67297),p=T(471),o=T(90253),M=T(9267),_=T(23470),u=T(63213);const A=["genericGridSupplier"],V=["genericGridShipName"],ge=["genericGridRefBill"],be=["genericGridWarehouse"],Oe=["fileUploadPopup"],me=["genericGridAccount"],Ce=["genericGridImportPurchaseOrder"],fe=["CreateQuickParty"],Ae=["LoadPurchaseOrder"],Ee=["importAdvanceAcGrid"],Ne=["genericGridCustomer"],De=["focusInputFormat"],je=["genericGridGRN"],xe=["genericGridImportGRN"],Re=["genericGridSalesMan"],Pe=["CreateCustomerProfile"],Ie=["CreateShippingLocation"],Le=["genericGridPurchaseOrder"];function ye(c,s){if(1&c&&(e.TgZ(0,"option",48),e._uU(1),e.qZA()),2&c){const n=s.$implicit;e.s9C("value",null==n?null:n.series),e.xp6(1),e.Oqu(null==n?null:n.series)}}function we(c,s){if(1&c&&(e.ynx(0),e.YNc(1,ye,2,2,"option",47),e.BQk()),2&c){const n=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",n.chalanSeries)}}function Ze(c,s){1&c&&(e.TgZ(0,"option",49),e._uU(1,"Chalan series not found!"),e.qZA())}function Fe(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Refno."),e.qZA(),e.TgZ(3,"td",8)(4,"select",44),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.CHALANNOPREFIX=r)}),e.YNc(5,we,2,1,"ng-container",11),e.YNc(6,Ze,2,0,"option",45),e.qZA(),e.TgZ(7,"input",46),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.CHALANNO=r)}),e.qZA()()()}if(2&c){const n=e.oxw(2);e.xp6(4),e.Q6J("ngModel",n._trnMainService.TrnMainObj.CHALANNOPREFIX)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||1==n._trnMainService.disableAllFieldinPurchase),e.xp6(1),e.Q6J("ngIf",n.chalanSeries&&n.chalanSeries.length>0),e.xp6(1),e.Q6J("ngIf",n.chalanSeries&&0===n.chalanSeries.length),e.xp6(1),e.Q6J("ngModel",n._trnMainService.TrnMainObj.CHALANNO)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode)}}function Ue(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Entry Date"),e.qZA(),e.TgZ(3,"td",50)(4,"input",51),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.TRNDATE=r)})("change",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.changeEntryDate(r.target.value,"AD"))}),e.qZA()(),e.TgZ(5,"td",52)(6,"nepali-date-picker",53),e.NdJ("change",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.changeEntryDate(r.detail.value,"BS"))})("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.BSDATE=r)}),e.qZA()()()}if(2&c){const n=e.oxw(2);e.xp6(4),e.s9C("max",n.currDate),e.Q6J("ngModel",n._trnMainService.TrnMainObj.TRNDATE)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode),e.xp6(2),e.Q6J("id","EntrynepaliDateFromPur")("label","From")("disable",n._trnMainService.disableNepaliDate||"VIEW"==n._trnMainService.TrnMainObj.Mode)("ngModel",n._trnMainService.TrnMainObj.BSDATE)}}function Ve(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div")(1,"input",56),e.NdJ("change",function(r){e.CHM(n);const a=e.oxw(3);return a._trnMainService.TrnMainObj.DOFULLRETURN=r.target.checked?1:0,e.KtG(a._trnMainService.callPipe=!a._trnMainService.callPipe)})("ngModelChange",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.DOFULLRETURN=r)}),e.qZA(),e.TgZ(2,"label",57),e._uU(3,"Load Full PO Details"),e.qZA()()}if(2&c){const n=e.oxw(3);e.xp6(1),e.Q6J("ngModel",n._trnMainService.TrnMainObj.DOFULLRETURN)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode)}}function Ge(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div")(1,"input",56),e.NdJ("change",function(r){e.CHM(n);const a=e.oxw(3);return a._trnMainService.TrnMainObj.DOFULLRETURN=r.target.checked?1:0,e.KtG(a._trnMainService.callPipe=!a._trnMainService.callPipe)})("ngModelChange",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.DOFULLRETURN=r)}),e.qZA(),e.TgZ(2,"label",57),e._uU(3,"Load Full Q.T Details"),e.qZA()()}if(2&c){const n=e.oxw(3);e.xp6(1),e.Q6J("ngModel",n._trnMainService.TrnMainObj.DOFULLRETURN)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||n._trnMainService.TrnMainObj.REFORDBILL)}}const I=function(c){return{width:c}};function Be(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2),e.qZA(),e.TgZ(3,"td",54)(4,"input",55),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.REFORDBILL=r)})("keydown.enter",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.PurchaseOrderEnter(r))})("keydown.delete",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.PurchaseOrderDelete(r))}),e.qZA()(),e.TgZ(5,"td"),e.YNc(6,Ve,4,2,"div",11),e.YNc(7,Ge,4,2,"div",11),e.qZA()()}if(2&c){const n=e.oxw(2);e.xp6(2),e.Oqu(n.poNOLabel),e.xp6(2),e.Q6J("ngStyle",e.VKq(6,I,20==n._trnMainService.TrnMainObj.VoucherType?"85%":"96%"))("ngModel",n._trnMainService.TrnMainObj.REFORDBILL)("disabled","NEW"!=n._trnMainService.TrnMainObj.Mode),e.xp6(2),e.Q6J("ngIf",3===n._trnMainService.TrnMainObj.VoucherType&&1!==n.userSetting.ENABLE_GRN_IN_PI||31===n._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",20===n._trnMainService.TrnMainObj.VoucherType)}}function ke(c,s){if(1&c&&(e.TgZ(0,"option",48),e._uU(1),e.qZA()),2&c){const n=s.$implicit;e.s9C("value",n.NAME),e.xp6(1),e.hij(" ",n.NAME," ")}}function Je(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",60)(1,"div",4)(2,"label",61),e._uU(3,"Warehouse :"),e.qZA(),e.TgZ(4,"select",62),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a._trnMainService.deliveryWarehouse=r)})("change",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a.PurchaseOrderDelete(r))}),e.YNc(5,ke,2,2,"option",47),e.qZA()()()}if(2&c){const n=e.oxw(3);e.xp6(4),e.Q6J("ngModel",n._trnMainService.deliveryWarehouse)("disabled","NEW"!=n._trnMainService.TrnMainObj.Mode),e.xp6(1),e.Q6J("ngForOf",n.warehouseList)}}function He(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",63)(1,"input",64),e.NdJ("change",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.AdditionalObj.LoadWholeSaleRate=r.target.checked?1:0)})("ngModelChange",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.AdditionalObj.LoadWholeSaleRate=r)}),e.qZA(),e.TgZ(2,"label",65),e._uU(3,"Load Wholesale Rate"),e.qZA()()}if(2&c){const n=e.oxw(3);e.xp6(1),e.Q6J("ngModel",n._trnMainService.TrnMainObj.AdditionalObj.LoadWholeSaleRate)("disabled",n.disableWholesaleRate())}}function Ke(c,s){if(1&c&&(e.TgZ(0,"div",4),e.YNc(1,Je,6,3,"div",58),e.YNc(2,He,4,2,"div",59),e.qZA()),2&c){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",1==n.userSetting.EnableDeliveryWarehouseSelectionInSO),e.xp6(1),e.Q6J("ngIf",2==n.userSetting.ENABLE_WSRATE_INSORDER)}}function qe(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Supplier's Bill No"),e.qZA(),e.TgZ(3,"td",8)(4,"input",66),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.REFORDBILL=r)})("keydown.enter",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.RefBillEnterCommand(r))}),e.qZA()()()}if(2&c){const n=e.oxw(2);e.xp6(4),e.Q6J("ngModel",n._trnMainService.TrnMainObj.REFORDBILL)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode)("placeholder",1==n.userSetting.REFBILLCOMPULSORINDNOTE?"Press Enter to select Supplier bill":"")}}function Qe(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2),e.qZA(),e.TgZ(3,"td",50)(4,"input",67),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.TRN_DATE=r)})("change",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.changeInvDate(r.target.value,"AD"))}),e.qZA()(),e.TgZ(5,"td",52)(6,"nepali-date-picker",53),e.NdJ("change",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.changeInvDate(r.detail.value,"BS"))})("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.BS_DATE=r)}),e.qZA()()()}if(2&c){const n=e.oxw(2);e.xp6(2),e.Oqu(n.invDateLabel),e.xp6(2),e.s9C("max",n.currDate),e.Q6J("ngModel",n._trnMainService.TrnMainObj.TRN_DATE)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode),e.xp6(2),e.Q6J("id","InvnepaliDateFromPur")("label","From")("disable",n._trnMainService.disableNepaliDate||"VIEW"==n._trnMainService.TrnMainObj.Mode)("ngModel",n._trnMainService.TrnMainObj.BS_DATE)}}function Ye(c,s){1&c&&(e.TgZ(0,"option",72),e._uU(1,"NonTrading"),e.qZA())}function We(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Purchase Type"),e.qZA(),e.TgZ(3,"select",68),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.INVOICETYPE=r)})("change",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.onChangeOnMixedPurchaseType(r))}),e.TgZ(4,"option",69),e._uU(5,"Trading"),e.qZA(),e.YNc(6,Ye,2,0,"option",70),e.TgZ(7,"option",71),e._uU(8,"Mixed"),e.qZA()()()}if(2&c){const n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.INVOICETYPE)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||1==n._trnMainService.disableAllFieldinPurchase||16==n._trnMainService.TrnMainObj.VoucherType&&1==n._trnMainService.userSetting.REFBILLCOMPULSORINDNOTE),e.xp6(3),e.Q6J("ngIf","GR"!=(null==n._trnMainService.TrnMainObj.REFORDBILL?null:n._trnMainService.TrnMainObj.REFORDBILL.substring(0,2)))}}function Xe(c,s){1&c&&e._UZ(0,"label",5)}function ze(c,s){if(1&c){const n=e.EpF();e.ynx(0),e.TgZ(1,"input",73),e.NdJ("change",function(r){e.CHM(n);const a=e.oxw(2);return a._trnMainService.TrnMainObj.DOFULLRETURN=r.target.checked?1:0,e.KtG(a.DoFullReturn(a._trnMainService.TrnMainObj.DOFULLRETURN))})("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.DOFULLRETURN=r)}),e.qZA(),e.TgZ(2,"label",74),e._uU(3,"Do Full Return"),e.qZA(),e.BQk()}if(2&c){const n=e.oxw(2);e.xp6(1),e.Q6J("ngModel",n._trnMainService.TrnMainObj.DOFULLRETURN)("disabled","VIEW"===n._trnMainService.TrnMainObj.Mode||0==n._trnMainService.TrnMainObj.DOFULLRETURN)}}function $e(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Ref Bill No."),e.qZA(),e.TgZ(3,"input",75),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.REFBILL=r)})("keydown.enter",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.RefBillEnterCommand(r))})("keydown.tab",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.RefBillEnterCommand(r))}),e.qZA()()}if(2&c){const n=e.oxw(2);e.xp6(3),e.Q6J("disabled",n.showRefBill||"VIEW"==n._trnMainService.TrnMainObj.Mode)("ngModel",n._trnMainService.TrnMainObj.REFBILL)}}function en(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Return Mode"),e.qZA(),e.TgZ(3,"select",76),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.TRNMODE=r)}),e.TgZ(4,"option",77),e._uU(5,"Credit"),e.qZA(),e.TgZ(6,"option",78),e._uU(7,"Cash"),e.qZA()()()}if(2&c){const n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.TRNMODE)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode)}}function nn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div")(1,"input",81),e.NdJ("change",function(r){e.CHM(n);const a=e.oxw(3);return a._trnMainService.TrnMainObj.DOFULLRETURN=r.target.checked?1:0,e.KtG(a.DoFullReturn(a._trnMainService.TrnMainObj.DOFULLRETURN))})("ngModelChange",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.DOFULLRETURN=r)})("keydown.delete",function(){e.CHM(n);const r=e.oxw(3);return e.KtG(r.removeReferenceNumber())}),e.qZA(),e.TgZ(2,"label",57),e._uU(3,"Load Full PO Details"),e.qZA()()}if(2&c){const n=e.oxw(3);e.xp6(1),e.Q6J("ngModel",n._trnMainService.TrnMainObj.DOFULLRETURN)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||0==n._trnMainService.TrnMainObj.DOFULLRETURN||("goods-received-note"==n.activeurlpath||"add-purchase-invoice"==n.activeurlpath)&&2!=n.userSetting.PODELIVERYMODE)}}function tn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div")(1,"input",56),e.NdJ("change",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.DOFULLRETURN=r.target.checked?1:0)})("ngModelChange",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.DOFULLRETURN=r)}),e.qZA(),e.TgZ(2,"label",57),e._uU(3,"Load Full Q.T Details"),e.qZA()()}if(2&c){const n=e.oxw(3);e.xp6(1),e.Q6J("ngModel",n._trnMainService.TrnMainObj.DOFULLRETURN)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode)}}function rn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2),e.qZA(),e.TgZ(3,"td",79)(4,"input",80),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.REFORDBILL=r)})("keydown.enter",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.PurchaseOrderEnter(r))})("keydown.delete",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.PurchaseOrderDelete(r))}),e.qZA()(),e.TgZ(5,"td"),e.YNc(6,nn,4,2,"div",11),e.YNc(7,tn,4,2,"div",11),e.qZA()()}if(2&c){const n=e.oxw(2);e.xp6(2),e.Oqu(n.poNOLabel),e.xp6(2),e.Q6J("ngStyle",e.VKq(6,I,20==n._trnMainService.TrnMainObj.VoucherType?"95%":"96%"))("ngModel",n._trnMainService.TrnMainObj.REFORDBILL)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode),e.xp6(2),e.Q6J("ngIf",3===n._trnMainService.TrnMainObj.VoucherType&&1!==n.userSetting.ENABLE_GRN_IN_PI||31===n._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",20===n._trnMainService.TrnMainObj.VoucherType)}}function an(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Import PO No."),e.qZA(),e.TgZ(3,"td",79)(4,"input",82),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.REFORDBILL=r)})("keydown.enter",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.ImportPurchaseOrderEnter(r))})("keydown.delete",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.ImportPOdelete(r))}),e.qZA()(),e.TgZ(5,"td")(6,"input",56),e.NdJ("change",function(r){e.CHM(n);const a=e.oxw(2);return a._trnMainService.TrnMainObj.DOFULLRETURN=r.target.checked?1:0,e.KtG(a._trnMainService.callPipe=!a._trnMainService.callPipe)})("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.DOFULLRETURN=r)}),e.qZA(),e.TgZ(7,"label",57),e._uU(8,"Load Full PO Details"),e.qZA()()()}if(2&c){const n=e.oxw(2);e.xp6(4),e.Q6J("ngStyle",e.VKq(5,I,20==n._trnMainService.TrnMainObj.VoucherType?"86%":"96%"))("ngModel",n._trnMainService.TrnMainObj.REFORDBILL)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode),e.xp6(2),e.Q6J("ngModel",n._trnMainService.TrnMainObj.DOFULLRETURN)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||("goods-received-note-import"==n.activeurlpath||"purchase-import"==n.activeurlpath)&&2!=n.userSetting.IMPORTPOBILLMODE)}}function on(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Import GRN No."),e.qZA(),e.TgZ(3,"td",8)(4,"input",83),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG((null==a._trnMainService?null:a._trnMainService.TrnMainObj).REFORDBILL=r)})("keydown.enter",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.ImportGRNEnter())}),e.qZA()()()}if(2&c){const n=e.oxw(2);e.xp6(4),e.Q6J("ngStyle",e.VKq(3,I,20==n._trnMainService.TrnMainObj.VoucherType?"86%":"96%"))("ngModel",null==n._trnMainService?null:n._trnMainService.TrnMainObj.REFORDBILL)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode)}}function cn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"GRN No"),e.qZA(),e.TgZ(3,"td",8)(4,"input",84),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.REFORDBILL=r)})("keydown.enter",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.GrnNoEnter())}),e.qZA()()()}if(2&c){const n=e.oxw(2);e.xp6(4),e.Q6J("ngStyle",e.VKq(3,I,20==n._trnMainService.TrnMainObj.VoucherType?"86%":"96%"))("ngModel",n._trnMainService.TrnMainObj.REFORDBILL)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode)}}function sn(c,s){1&c&&(e.TgZ(0,"option",77),e._uU(1,"Credit"),e.qZA())}function _n(c,s){1&c&&(e.TgZ(0,"option",78),e._uU(1,"Cash"),e.qZA())}function ln(c,s){1&c&&(e.TgZ(0,"option",89),e._uU(1,"Cheque"),e.qZA())}function dn(c,s){if(1&c&&(e.TgZ(0,"option",91),e._uU(1),e.qZA()),2&c){const n=s.$implicit;e.Q6J("ngValue",n.PAYMODE),e.xp6(1),e.hij("",n.PAYMODE," ")}}function Mn(c,s){if(1&c&&(e.ynx(0),e.YNc(1,dn,2,2,"option",90),e.BQk()),2&c){const n=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",n.paymentTermList)}}function un(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2),e.qZA(),e.TgZ(3,"select",85),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.TRNMODE=r)})("change",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.paymentTermsChange())}),e.YNc(4,sn,2,0,"option",86),e.YNc(5,_n,2,0,"option",87),e.YNc(6,ln,2,0,"option",88),e.YNc(7,Mn,2,1,"ng-container",11),e.qZA()()}if(2&c){const n=e.oxw(2);e.xp6(2),e.Oqu(n.paymentTermLabel),e.xp6(1),e.Q6J("ngModel",n._trnMainService.TrnMainObj.TRNMODE)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||1==n._trnMainService.disableAllFieldinPurchase||n._trnMainService.disablePaymentTerms||n.disableReturnModeInPartialDN||1===n.userSetting.REFBILLCOMPULSORINDNOTE&&1==n._trnMainService.TrnMainObj.DOFULLRETURN&&16===n._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",3==n._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE"!=(null==n._trnMainService.TrnMainObj||null==n._trnMainService.TrnMainObj.AdditionalObj?null:n._trnMainService.TrnMainObj.AdditionalObj.tag)||16==n._trnMainService.TrnMainObj.VoucherType||37==n._trnMainService.TrnMainObj.VoucherType||31==n._trnMainService.TrnMainObj.VoucherType||40==n._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",3==n._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE"!=(null==n._trnMainService.TrnMainObj||null==n._trnMainService.TrnMainObj.AdditionalObj?null:n._trnMainService.TrnMainObj.AdditionalObj.tag)||16==n._trnMainService.TrnMainObj.VoucherType||37==n._trnMainService.TrnMainObj.VoucherType||31==n._trnMainService.TrnMainObj.VoucherType||40==n._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",3==n._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE"!=(null==n._trnMainService.TrnMainObj||null==n._trnMainService.TrnMainObj.AdditionalObj?null:n._trnMainService.TrnMainObj.AdditionalObj.tag)||16==n._trnMainService.TrnMainObj.VoucherType||37==n._trnMainService.TrnMainObj.VoucherType||31==n._trnMainService.TrnMainObj.VoucherType||40==n._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",(3==n._trnMainService.TrnMainObj.VoucherType||37==n._trnMainService.TrnMainObj.VoucherType)&&"IMPORT_PURCHASE"==n._trnMainService.TrnMainObj.AdditionalObj.tag)}}function hn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Account"),e.qZA(),e.TgZ(3,"input",92),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.TRNACName=r)})("keydown.enter",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.AccountEnterCommand(r))})("keydown.tab",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.focusToWarehouse())})("keydown",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.preventInput(r))}),e.qZA()()}if(2&c){const n=e.oxw(2);e.xp6(3),e.Q6J("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||1==n._trnMainService.disableAllFieldinPurchase||n._trnMainService.disableAccountInputField||1==n._trnMainService.disableOnCreditSelect||1===n.userSetting.REFBILLCOMPULSORINDNOTE&&1==n._trnMainService.TrnMainObj.DOFULLRETURN&&16===n._trnMainService.TrnMainObj.VoucherType)("ngModel",n._trnMainService.TrnMainObj.TRNACName)}}function Tn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Account"),e.qZA(),e.TgZ(3,"input",93),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.TRNACName=r)})("keydown.Enter",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.onImportAdvanceEnterClicked())})("keydown.tab",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.focusToWarehouse())})("keydown",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.preventInput(r))}),e.qZA()()}if(2&c){const n=e.oxw(2);e.xp6(3),e.Q6J("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||1==n._trnMainService.disableAllFieldinPurchase||1==n._trnMainService.disableAccountInputField||1==n._trnMainService.disableOnCreditSelect)("ngModel",n._trnMainService.TrnMainObj.TRNACName)}}function pn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Cheque No:"),e.qZA(),e.TgZ(3,"td",8)(4,"input",94),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.CHEQUENO=r)}),e.qZA(),e.TgZ(5,"input",95),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.CHEQUEDATE=r)})("change",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.getEnglishDate())}),e.qZA()()()}if(2&c){const n=e.oxw(2);e.xp6(4),e.Q6J("ngModel",n._trnMainService.TrnMainObj.CHEQUENO)("disabled","cheque"!=n._trnMainService.TrnMainObj.TRNMODE||1==n._trnMainService.disableAllFieldinPurchase),e.xp6(1),e.Q6J("ngModel",n._trnMainService.TrnMainObj.CHEQUEDATE)("disabled","cheque"!=n._trnMainService.TrnMainObj.TRNMODE)}}function vn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"input",98),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.MWAREHOUSE=r)})("keydown.enter",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a.WarehouseEnterCommand(r))}),e.ALo(1,"disableField"),e.qZA()}if(2&c){const n=e.oxw(3);e.Q6J("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode)("ngModel",n._trnMainService.TrnMainObj.MWAREHOUSE)("disabled",e.lcZ(1,3,"disableWareHouse")||1===n.userSetting.REFBILLCOMPULSORINDNOTE&&1==n._trnMainService.TrnMainObj.DOFULLRETURN&&16===n._trnMainService.TrnMainObj.VoucherType||n.disableForLite)}}function Sn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"input",99),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.MWAREHOUSE=r)})("keydown.enter",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a.WarehouseEnterCommand(r))}),e.qZA()}if(2&c){const n=e.oxw(3);e.Q6J("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode)("ngModel",n._trnMainService.TrnMainObj.MWAREHOUSE)}}function gn(c,s){if(1&c&&(e.TgZ(0,"div",4)(1,"label",5),e._uU(2),e.qZA(),e.YNc(3,vn,2,5,"input",96),e.YNc(4,Sn,1,2,"input",97),e.qZA()),2&c){const n=e.oxw(2);e.xp6(2),e.Oqu(2==n.appType?"Godown":"Warehouse"),e.xp6(1),e.Q6J("ngIf","self-billing"!=n.activeurlpath),e.xp6(1),e.Q6J("ngIf","self-billing"==n.activeurlpath)}}function bn(c,s){if(1&c&&(e.ynx(0),e.TgZ(1,"option",48),e._uU(2),e.qZA(),e.BQk()),2&c){const n=s.$implicit;e.xp6(1),e.s9C("value",n.LocIDString),e.xp6(1),e.Oqu(n.Name)}}function On(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Location"),e.qZA(),e.TgZ(3,"select",100),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.MWAREHOUSE=r)}),e.YNc(4,bn,3,2,"ng-container",101),e.qZA()()}if(2&c){const n=e.oxw(2);e.xp6(3),e.Q6J("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode)("ngModel",n._trnMainService.TrnMainObj.MWAREHOUSE),e.xp6(1),e.Q6J("ngForOf",n.locationList)}}function mn(c,s){if(1&c&&(e.TgZ(0,"option",48),e._uU(1),e.qZA()),2&c){const n=s.$implicit;e.s9C("value",n.CURNAME),e.xp6(1),e.hij(" ",n.CURNAME," ")}}function Cn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"span",106),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(3);return e.KtG(r.onClickAddFC())}),e.TgZ(1,"p"),e._uU(2,"+"),e.qZA(),e.TgZ(3,"span",107),e._uU(4,"Add Currency"),e.qZA()()}}function fn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",102)(1,"label",103),e._uU(2,"Currency :"),e.qZA(),e.TgZ(3,"select",104),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.FCurrency=r)})("change",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.onCurrenyChange(r.target.value))})("keydown.Tab",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.focusToExcRate(r))})("keydown.Enter",function(r){e.CHM(n);const a=e.oxw(2);return r.preventDefault(),e.KtG(a.focusToExcRate(r))}),e.YNc(4,mn,2,2,"option",47),e.qZA(),e.YNc(5,Cn,5,0,"span",105),e.qZA()}if(2&c){const n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.FCurrency)("disabled",n._trnMainService.itemselectevent||"VIEW"==n._trnMainService.TrnMainObj.Mode||"IMPORT_PURCHASE"==n._trnMainService.TrnMainObj.AdditionalObj.tag&&n._trnMainService.TrnMainObj.REFORDBILL||"GOODS_RECEIVED_NOTE_IMPORT"==n._trnMainService.TrnMainObj.AdditionalObj.tag&&n._trnMainService.TrnMainObj.REFORDBILL),e.xp6(1),e.Q6J("ngForOf",n.masterService.Currencies),e.xp6(1),e.Q6J("ngIf","purchase-import"==n._trnMainService.activeurlpath&&"VIEW"!=n._trnMainService.TrnMainObj.Mode&&!n._trnMainService.TrnMainObj.REFORDBILL)}}function An(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",102)(1,"label",103),e._uU(2,"EX Rate :"),e.qZA(),e.TgZ(3,"input",108),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.EXRATE=r)})("change",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.onEnterExrate())})("keydown.enter",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.onEnterExrate())}),e.qZA()()}if(2&c){const n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.EXRATE)("disabled",n._trnMainService.itemselectevent||1==n._trnMainService.userSetting.ENABLE_GRN_IN_IMPORTPI&&"purchase-import"==n._trnMainService.activeurlpath&&n._trnMainService.TrnMainObj.REFORDBILL||"VIEW"==n._trnMainService.TrnMainObj.Mode)}}function En(c,s){if(1&c&&(e.TgZ(0,"option",48),e._uU(1),e.qZA()),2&c){const n=s.$implicit;e.s9C("value",n.CCID),e.xp6(1),e.hij(" ",n.COSTCENTERNAME,"")}}function Nn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Cost Center"),e.qZA(),e.TgZ(3,"select",111),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.COSTCENTER=r)}),e.YNc(4,En,2,2,"option",47),e.qZA()()}if(2&c){const n=e.oxw(3);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.COSTCENTER)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode),e.xp6(1),e.Q6J("ngForOf",n.costlists)}}function Dn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",112)(1,"div",113)(2,"div",4)(3,"div",114)(4,"label"),e._uU(5,"Delivery Date:"),e.qZA()(),e.TgZ(6,"div",115)(7,"input",116),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.DeliveryDate=r)})("change",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a.changeDeliveryDate(r.target.value,"AD",r))})("focusout",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a.dateValidation(r.target.value,"DeliveryDate"))}),e.qZA()(),e.TgZ(8,"div",117)(9,"nepali-date-picker",118),e.NdJ("change",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a.changeDeliveryDate(r.detail.value,"BS",r))})("ngModelChange",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.DeliveryMiti=r)})("focusout",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a.dateValidationBS(r.target.value,"DeliveryDate"))}),e.qZA()()()(),e.TgZ(10,"div",119)(11,"div",4)(12,"div",120)(13,"label"),e._uU(14,"Time:"),e.qZA()(),e.TgZ(15,"div",121)(16,"input",122),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.DeliveryTime=r)}),e.qZA()()()()()}if(2&c){const n=e.oxw(3);e.xp6(7),e.s9C("min",n.currDate),e.Q6J("ngModel",n._trnMainService.TrnMainObj.DeliveryDate)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode),e.xp6(2),e.Q6J("id","DeliveryDate")("label","Delivery Date")("ngModel",n._trnMainService.TrnMainObj.DeliveryMiti)("max",!1)("disable",n._trnMainService.disableNepaliDate||"VIEW"==n._trnMainService.TrnMainObj.Mode),e.xp6(7),e.Q6J("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode)("ngModel",n._trnMainService.TrnMainObj.DeliveryTime)}}function jn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Order Expiry Date: "),e.qZA(),e.TgZ(3,"td",123)(4,"input",124),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.ORDEXPDATE=r)})("change",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a.changeExpiryDate(r.target.value,"AD"))})("focusout",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a.dateValidation(r.target.value,"OrderExpiryDate"))}),e.qZA()(),e.TgZ(5,"td",52)(6,"nepali-date-picker",125),e.NdJ("change",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a.changeExpiryDate(r.detail.value,"BS"))})("ngModelChange",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.ORDEXPMITI=r)})("focusout",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a.dateValidationBS(r.target.value,"OrderExpiryDate"))}),e.qZA()()()}if(2&c){const n=e.oxw(3);e.xp6(4),e.s9C("min",n.currDate),e.Q6J("ngModel",n._trnMainService.TrnMainObj.ORDEXPDATE)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||20==n._trnMainService.TrnMainObj.VoucherType&&1===n.userSetting.EnableAutoSOExpiry),e.xp6(2),e.Q6J("id","OrderExpiryDate")("label","Expiry Date")("disable","VIEW"==n._trnMainService.TrnMainObj.Mode||20==n._trnMainService.TrnMainObj.VoucherType&&1===n.userSetting.EnableAutoSOExpiry)("ngModel",n._trnMainService.TrnMainObj.ORDEXPMITI)("max",!1)}}function xn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Salesman"),e.qZA(),e.TgZ(3,"input",126),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.SALESMAN=r)})("keydown.enter",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a.salesManEnterCommand(r))})("keydown.delete",function(){e.CHM(n);const r=e.oxw(3);return e.KtG(r.salesmanDelete())}),e.qZA()()}if(2&c){const n=e.oxw(3);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.SALESMAN)}}function Rn(c,s){if(1&c&&(e.TgZ(0,"option",91),e._uU(1),e.qZA()),2&c){const n=s.$implicit;e.Q6J("ngValue",n.MODEVALUE),e.xp6(1),e.hij("",n.PAYMENTMODENAME," ")}}function Pn(c,s){if(1&c){const n=e.EpF();e.ynx(0,4),e.TgZ(1,"fieldset",127)(2,"legend",128),e._uU(3,"Advance Payment"),e.qZA(),e.TgZ(4,"div",129)(5,"label",130),e._uU(6,"Amount"),e.qZA(),e.TgZ(7,"input",131),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.ADVANCE=r)}),e.qZA()(),e.TgZ(8,"div",132)(9,"label",130),e._uU(10,"Payment Mode"),e.qZA(),e.TgZ(11,"select",133),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.TRNMODE=r)})("change",function(){e.CHM(n);const r=e.oxw(3);return e.KtG(r.onChangePaymentMode())}),e.YNc(12,Rn,2,2,"option",90),e.qZA()(),e.TgZ(13,"div",132)(14,"label",134),e._uU(15,"Account"),e.qZA(),e.TgZ(16,"input",135),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.TRNACName=r)})("keydown.enter",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a.AccountEnterCommand(r))}),e.qZA()()(),e.BQk()}if(2&c){const n=e.oxw(3);e.xp6(7),e.Q6J("ngModel",n._trnMainService.TrnMainObj.ADVANCE)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||"EDIT"==n._trnMainService.TrnMainObj.Mode),e.xp6(4),e.Q6J("ngModel",n._trnMainService.TrnMainObj.TRNMODE)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||"EDIT"==n._trnMainService.TrnMainObj.Mode&&!n._trnMainService.TrnMainObj.ADVANCE),e.xp6(1),e.Q6J("ngForOf",n.paymentModeList),e.xp6(4),e.Q6J("disabled",n._trnMainService.disableAccountInputField||"VIEW"==n._trnMainService.TrnMainObj.Mode||"EDIT"==n._trnMainService.TrnMainObj.Mode&&!n._trnMainService.TrnMainObj.ADVANCE)("ngModel",n._trnMainService.TrnMainObj.TRNACName)}}function In(c,s){if(1&c&&(e.TgZ(0,"option",48),e._uU(1),e.qZA()),2&c){const n=s.$implicit;e.s9C("value",n.CURNAME),e.xp6(1),e.hij(" ",n.CURNAME," ")}}function Ln(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",102)(1,"label",102),e._uU(2,"Currency :"),e.qZA(),e.TgZ(3,"select",136),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.FCurrency=r)})("change",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a.onCurrenyChange(r.target.value))})("keydown.Tab",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a.focusToExcRate(r))})("keydown.Enter",function(r){e.CHM(n);const a=e.oxw(3);return r.preventDefault(),e.KtG(a.focusToExcRate(r))}),e.YNc(4,In,2,2,"option",47),e.qZA()()}if(2&c){const n=e.oxw(3);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.FCurrency)("disabled",n._trnMainService.itemselectevent||"VIEW"==n._trnMainService.TrnMainObj.Mode),e.xp6(1),e.Q6J("ngForOf",n.masterService.Currencies)}}function yn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",137)(1,"label",103),e._uU(2,"EX Rate :"),e.qZA(),e.TgZ(3,"input",108),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.EXRATE=r)})("change",function(){e.CHM(n);const r=e.oxw(3);return e.KtG(r.onEnterExrate())})("keydown.enter",function(){e.CHM(n);const r=e.oxw(3);return e.KtG(r.onEnterExrate())}),e.qZA()()}if(2&c){const n=e.oxw(3);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.EXRATE)("disabled",n._trnMainService.itemselectevent||"VIEW"==n._trnMainService.TrnMainObj.Mode)}}function wn(c,s){if(1&c&&(e.TgZ(0,"div"),e.YNc(1,Nn,5,3,"div",7),e.YNc(2,Dn,17,10,"div",109),e.YNc(3,jn,7,8,"div",7),e.YNc(4,xn,4,1,"div",7),e.YNc(5,Pn,17,7,"ng-container",7),e.TgZ(6,"div",4),e.YNc(7,Ln,5,3,"div",13),e.YNc(8,yn,4,2,"div",110),e.qZA()()),2&c){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",1==n.userSetting.enabledistributedpurchase),e.xp6(1),e.Q6J("ngIf",(19==n._trnMainService.TrnMainObj.VoucherType||20==n._trnMainService.TrnMainObj.VoucherType)&&1===n.userSetting.EnableDeliveryDateInSOrder),e.xp6(1),e.Q6J("ngIf",19==n._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE_ORDER"!=n._trnMainService.TrnMainObj.AdditionalObj.tag||20==n._trnMainService.TrnMainObj.VoucherType&&0!=n.userSetting.EnableAutoSOExpiry),e.xp6(1),e.Q6J("ngIf","salesorder"===n.activeurlpath&&n.hideSalesman()),e.xp6(1),e.Q6J("ngIf",20==n._trnMainService.TrnMainObj.VoucherType&&1===n.userSetting.EnableAdvPaymentInSOrder),e.xp6(2),e.Q6J("ngIf",19==n._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE_ORDER"==n._trnMainService.TrnMainObj.AdditionalObj.tag),e.xp6(1),e.Q6J("ngIf",3==n._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE"==n._trnMainService.TrnMainObj.AdditionalObj.tag||19==n._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE_ORDER"==n._trnMainService.TrnMainObj.AdditionalObj.tag)}}function Zn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"span",138),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.onAddNewSupplier())}),e.TgZ(1,"p"),e._uU(2,"+"),e.qZA()()}}function Fn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Salesman"),e.qZA(),e.TgZ(3,"input",126),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.SALESMAN=r)})("keydown.enter",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.salesManEnterCommand(r))})("keydown.delete",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.salesmanDelete())}),e.qZA()()}if(2&c){const n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.SALESMAN)}}function Un(c,s){if(1&c&&(e.TgZ(0,"option",48),e._uU(1),e.qZA()),2&c){const n=s.$implicit;e.s9C("value",n.SHIPPING_ID),e.xp6(1),e.hij(" ",n.ADDRESS," ")}}function Vn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"span",138),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(3);return e.KtG(r.onAddNewShippingLocation())}),e.TgZ(1,"p"),e._uU(2,"+"),e.qZA()()}}function Gn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Shipping Location"),e.qZA(),e.TgZ(3,"select",139),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.ShippingLocation=r)})("change",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.shippinglocationVoucher(r))}),e.YNc(4,Un,2,2,"option",47),e.qZA(),e.YNc(5,Vn,3,0,"span",17),e.qZA()}if(2&c){const n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.ShippingLocation)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode),e.xp6(1),e.Q6J("ngForOf",n._trnMainService.shippingAddress),e.xp6(1),e.Q6J("ngIf","salesorder"===n.activeurlpath&&1===n.userSetting.EnableShippingAddress)}}function Bn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"span",106),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(3);return e.KtG(r.onClickAddDiscounts())}),e.TgZ(1,"p"),e._uU(2,"+"),e.qZA(),e.TgZ(3,"span",107),e._uU(4,"Add Additional Discount"),e.qZA()()}}function kn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"div",140)(2,"label",102),e._uU(3,"Flat Dis(%)"),e.qZA(),e.TgZ(4,"input",141),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.DCRATE=r)})("keydown.Enter",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.applyFlatDiscount(r))})("keydown.Tab",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.applyFlatDiscount(r))})("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return a._trnMainService.callPipe=!a._trnMainService.callPipe,e.KtG(a.validateFlatDiscount(r))})("focusout",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.applyFlatDiscount(r))}),e.qZA()(),e.TgZ(5,"div",140)(6,"label",103),e._uU(7,"Flat Dis(Rs)"),e.qZA(),e.TgZ(8,"input",142),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.FLATDCAMNT=r)})("focusout",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.applyFlatDiscount(r))})("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return a._trnMainService.callPipe=!a._trnMainService.callPipe,e.KtG(a.validateFlatDiscountAmount(r))})("keydown.Enter",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.applyFlatDiscount(r))})("change",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.applyFlatDiscount(r))}),e.qZA(),e.YNc(9,Bn,5,0,"span",105),e.qZA()()}if(2&c){const n=e.oxw(2);e.xp6(4),e.Q6J("ngModel",n._trnMainService.TrnMainObj.DCRATE)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||n.showDiscountAddButton()||1==(null==n._trnMainService.disableMaster?null:n._trnMainService.disableMaster.FlatDisPer)||n._trnMainService.nullToZeroConverter(n._trnMainService.TrnMainObj.FLATDCAMNT)>0||0==n.userSetting.ENABLEMANUALSALESRETURN&&15==n._trnMainService.TrnMainObj.VoucherType||null==n._trnMainService.TrnMainObj.ProdList[0].MCODE||(null==n._trnMainService.TrnMainObj.REFORDBILL?null:n._trnMainService.TrnMainObj.REFORDBILL.startsWith("QT"))||n._trnMainService.disableOnPerFormaSelect),e.xp6(4),e.Q6J("ngModel",n._trnMainService.TrnMainObj.FLATDCAMNT)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||n.showDiscountAddButton()||1==(null==n._trnMainService.disableMaster?null:n._trnMainService.disableMaster.FlatDisRs)||n._trnMainService.nullToZeroConverter(n._trnMainService.TrnMainObj.DCRATE)>0||0==n.userSetting.ENABLEMANUALSALESRETURN&&15==n._trnMainService.TrnMainObj.VoucherType||null==n._trnMainService.TrnMainObj.ProdList[0].MCODE||(null==n._trnMainService.TrnMainObj.REFORDBILL?null:n._trnMainService.TrnMainObj.REFORDBILL.startsWith("QT"))||n._trnMainService.disableOnPerFormaSelect),e.xp6(1),e.Q6J("ngIf",n.showDiscountAddButton())}}function Jn(c,s){if(1&c&&(e.TgZ(0,"option",48),e._uU(1),e.qZA()),2&c){const n=s.$implicit;e.s9C("value",n.CCID),e.xp6(1),e.hij(" ",n.COSTCENTERNAME,"")}}const Hn=function(c){return{"faded-option":c}};function Kn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Cost Center"),e.qZA(),e.TgZ(3,"select",143),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.COSTCENTER=r)})("keydown.delete",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.costCenterDelete())}),e.TgZ(4,"option",144),e._uU(5,"Select Cost Center"),e.qZA(),e.YNc(6,Jn,2,2,"option",47),e.qZA()()}if(2&c){const n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.COSTCENTER)("disabled",n.disableCostCenter())("ngClass",e.VKq(4,Hn,!n._trnMainService.TrnMainObj.COSTCENTER)),e.xp6(3),e.Q6J("ngForOf",n.costlists)}}function qn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Consignment NO :"),e.qZA(),e.TgZ(3,"input",145),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.DISPENSEBY=r)}),e.qZA()()}if(2&c){const n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.DISPENSEBY)}}function Qn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Receive Loc :"),e.qZA(),e.TgZ(3,"input",146),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.RECEIVEBY=r)}),e.qZA()()}if(2&c){const n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n._trnMainService.TrnMainObj.RECEIVEBY)}}function Yn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div")(1,"div",147)(2,"div",148)(3,"div",149)(4,"h6",150),e._uU(5,"Authorization for Negative Stock Entry"),e.qZA(),e.TgZ(6,"button",151),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.closeModal())}),e.TgZ(7,"span",152),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",153)(10,"div",154)(11,"label",155),e._uU(12,"User Name:"),e.qZA(),e.TgZ(13,"div",156)(14,"input",157),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.NegativeBillAuthObj.username=r)}),e.qZA()()(),e.TgZ(15,"div",154)(16,"label",155),e._uU(17,"Password:"),e.qZA(),e.TgZ(18,"div",156)(19,"input",158),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.NegativeBillAuthObj.password=r)}),e.qZA()()()(),e.TgZ(20,"div",159)(21,"button",160),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.NegativeBillAuthConfirm())}),e._uU(22,"Confirm"),e.qZA(),e.TgZ(23,"button",161),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.closeModal())}),e._uU(24,"Cancel"),e.qZA()()()()()}if(2&c){const n=e.oxw(2);e.xp6(14),e.Q6J("ngModel",n.NegativeBillAuthObj.username),e.xp6(5),e.Q6J("ngModel",n.NegativeBillAuthObj.password)}}function Wn(c,s){1&c&&(e.TgZ(0,"p",168),e._uU(1,"Do you want to apply flat discount before or after the individual discount ?"),e.qZA())}function Xn(c,s){1&c&&(e.TgZ(0,"p",168),e._uU(1,"How do you want to apply flat discount?"),e.qZA())}function zn(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"button",167),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(3);return r._trnMainService.beforeDiscFlat(),e.KtG(r._trnMainService.showFlatDiscOption=!1)}),e._uU(1,"BEFORE "),e.qZA()}}function $n(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"button",167),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(3);return r._trnMainService.onApplyClicked(),e.KtG(r._trnMainService.showFlatDiscOption=!1)}),e._uU(1,"OVERWRITE"),e.qZA()}}function ei(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",162)(1,"div",163)(2,"div",164)(3,"div",149)(4,"h6",150),e._uU(5,"Confirmation"),e.qZA(),e.TgZ(6,"button",151),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.closeAdditionalFlatDiscOption())}),e.TgZ(7,"span",152),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",153),e.YNc(10,Wn,2,0,"p",165),e.YNc(11,Xn,2,0,"p",165),e.qZA(),e.TgZ(12,"div",159),e.YNc(13,zn,2,0,"button",166),e.TgZ(14,"button",167),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return r._trnMainService.afterDiscFlat(),e.KtG(r._trnMainService.showFlatDiscOption=!1)}),e._uU(15,"AFTER"),e.qZA(),e.YNc(16,$n,2,0,"button",166),e.TgZ(17,"button",167),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return r._trnMainService.onRevertClicked(),e.KtG(r._trnMainService.showFlatDiscOption=!1)}),e._uU(18,"REVERT"),e.qZA()()()()()}if(2&c){const n=e.oxw(2);e.xp6(10),e.Q6J("ngIf",1==n.userSetting.EnableFDiscountBeforeIDiscount&&n.showBeforeOverwrite()),e.xp6(1),e.Q6J("ngIf",1!=n.userSetting.EnableFDiscountBeforeIDiscount||!n.showBeforeOverwrite()),e.xp6(2),e.Q6J("ngIf",1==n.userSetting.EnableFDiscountBeforeIDiscount&&n.showBeforeOverwrite()),e.xp6(3),e.Q6J("ngIf",n.showBeforeOverwrite())}}function ni(c,s){1&c&&(e.TgZ(0,"p",168),e._uU(1,"Do you want to apply flat discount before or after the individual discount ?"),e.qZA())}function ii(c,s){1&c&&(e.TgZ(0,"p",168),e._uU(1,"How do you want to apply flat discount?"),e.qZA())}function ti(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"button",167),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(3);return r.flatDiscountType="before",e.KtG(r.onAddNewDiscounts())}),e._uU(1,"BEFORE "),e.qZA()}}function ri(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"button",167),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(3);return r.flatDiscountType="overwrite",e.KtG(r.onAddNewDiscounts())}),e._uU(1,"OVERWRITE"),e.qZA()}}function ai(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",162)(1,"div",163)(2,"div",164)(3,"div",149)(4,"h6",150),e._uU(5,"Confirmation"),e.qZA(),e.TgZ(6,"button",151),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.closeAdditionalFlatDiscOption())}),e.TgZ(7,"span",152),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",153),e.YNc(10,ni,2,0,"p",165),e.YNc(11,ii,2,0,"p",165),e.qZA(),e.TgZ(12,"div",159),e.YNc(13,ti,2,0,"button",166),e.TgZ(14,"button",167),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return r.flatDiscountType="after",e.KtG(r.onAddNewDiscounts())}),e._uU(15,"AFTER"),e.qZA(),e.YNc(16,ri,2,0,"button",166),e.qZA()()()()}if(2&c){const n=e.oxw(2);e.xp6(10),e.Q6J("ngIf",1==n.userSetting.EnableFDiscountBeforeIDiscount),e.xp6(1),e.Q6J("ngIf",0==n.userSetting.EnableFDiscountBeforeIDiscount),e.xp6(2),e.Q6J("ngIf",1==n.userSetting.EnableFDiscountBeforeIDiscount&&n.showBeforeOverwrite()),e.xp6(3),e.Q6J("ngIf",n.showBeforeOverwrite())}}function oi(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",162)(1,"div",169)(2,"div",170)(3,"div",149)(4,"h5",150),e._uU(5,"Discount authorization"),e.qZA(),e.TgZ(6,"button",151),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.closeDisAuthPopup())}),e.TgZ(7,"span",152),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",153)(10,"div",171)(11,"div",172)(12,"div",4)(13,"label",173),e._uU(14,"User Name:"),e.qZA(),e.TgZ(15,"div",174)(16,"input",157),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.disLimitAuthObj.username=r)}),e.qZA()()()(),e.TgZ(17,"div",172)(18,"div",4)(19,"label",173),e._uU(20,"Password:"),e.qZA(),e.TgZ(21,"div",174)(22,"input",158),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.disLimitAuthObj.password=r)}),e.qZA()()()()(),e.TgZ(23,"div",171)(24,"div",172)(25,"div",4)(26,"label",173),e._uU(27,"Discount Percent:"),e.qZA(),e.TgZ(28,"input",175),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.disLimitAuthObj.discountRate=r)}),e.qZA()()(),e.TgZ(29,"div",172)(30,"div",4)(31,"label",173),e._uU(32,"Discount Amount:"),e.qZA(),e.TgZ(33,"input",175),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.disLimitAuthObj.discountAmt=r)}),e.qZA()()()(),e.TgZ(34,"div",176)(35,"fieldset",177)(36,"legend",178),e._uU(37,"Discount authorization remarks:"),e.qZA(),e.TgZ(38,"textarea",179),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.disLimitAuthObj.remarks=r)}),e.qZA()()()(),e.TgZ(39,"div",159)(40,"button",160),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.discountAuthConfirm())}),e._uU(41,"Confirm"),e.qZA()()()()()}if(2&c){const n=e.oxw(2);e.xp6(16),e.Q6J("ngModel",n._trnMainService.disLimitAuthObj.username),e.xp6(6),e.Q6J("ngModel",n._trnMainService.disLimitAuthObj.password),e.xp6(6),e.Q6J("disabled",n._trnMainService.nullToZeroConverter(n._trnMainService.disLimitAuthObj.discountAmt)>0||1==n.userSetting.enableAdditionalFlatDiscountsInSales)("ngModel",n._trnMainService.disLimitAuthObj.discountRate),e.xp6(5),e.Q6J("disabled",n._trnMainService.nullToZeroConverter(n._trnMainService.disLimitAuthObj.discountRate)>0||1==n.userSetting.enableAdditionalFlatDiscountsInSales)("ngModel",n._trnMainService.disLimitAuthObj.discountAmt),e.xp6(5),e.Q6J("ngModel",n._trnMainService.disLimitAuthObj.remarks)}}function ci(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",162)(1,"div",180)(2,"div",181)(3,"div",149)(4,"h6",150),e._uU(5,"Add Foreign Currency"),e.qZA(),e.TgZ(6,"button",151),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.closeFCPopup())}),e.TgZ(7,"span",152),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",153)(10,"div",171)(11,"div",182)(12,"div",4)(13,"label",173),e._uU(14,"Country Name:"),e.qZA(),e.TgZ(15,"div",174)(16,"input",183),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.currency.CountryName=r)}),e.qZA()()()(),e.TgZ(17,"div",182)(18,"div",4)(19,"label",173),e._uU(20,"Currency Name:"),e.qZA(),e.TgZ(21,"div",174)(22,"input",184),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.currency.CurrencyName=r)}),e.qZA()()()(),e.TgZ(23,"div",182)(24,"div",4)(25,"label",173),e._uU(26,"Currency Code:"),e.qZA(),e.TgZ(27,"div",174)(28,"input",185),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.currency.CURNAME=r)}),e.qZA()()()(),e.TgZ(29,"div",182)(30,"div",4)(31,"label",173),e._uU(32,"Currency Symbol:"),e.qZA(),e.TgZ(33,"div",174)(34,"input",186),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.currency.CurrencySymbol=r)}),e.qZA()()()(),e.TgZ(35,"div",182)(36,"div",4)(37,"label",173),e._uU(38,"Exchange Rate:"),e.qZA(),e.TgZ(39,"div",174)(40,"input",187),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a._trnMainService.currency.EXRATE=r)}),e.qZA()()()()(),e.TgZ(41,"div",159)(42,"button",188),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.saveFC())}),e._uU(43,"Save Currency "),e.qZA()()()()()()}if(2&c){const n=e.oxw(2);e.xp6(16),e.Q6J("ngModel",n._trnMainService.currency.CountryName),e.xp6(6),e.Q6J("ngModel",n._trnMainService.currency.CurrencyName),e.xp6(6),e.Q6J("ngModel",n._trnMainService.currency.CURNAME),e.xp6(6),e.Q6J("ngModel",n._trnMainService.currency.CurrencySymbol),e.xp6(6),e.Q6J("ngModel",n._trnMainService.currency.EXRATE)}}function si(c,s){if(1&c){const n=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"label",5),e._uU(5),e.qZA(),e.TgZ(6,"td",6),e._uU(7),e.qZA()(),e.YNc(8,Fe,8,6,"div",7),e.YNc(9,Ue,7,7,"div",7),e.TgZ(10,"div",4)(11,"label",5),e._uU(12),e.qZA(),e.TgZ(13,"td",8)(14,"input",9),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a._trnMainService.TrnMainObj.REFBILL=r)})("keydown.enter",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.RefBillEnterCommand(r))}),e.qZA()()(),e.YNc(15,Be,8,8,"div",7),e.YNc(16,Ke,3,2,"div",7),e.YNc(17,qe,5,3,"div",7),e.ynx(18),e.YNc(19,Qe,7,8,"div",7),e.BQk(),e.YNc(20,We,9,3,"div",7),e.TgZ(21,"div",4),e.YNc(22,Xe,1,0,"label",10),e.YNc(23,ze,4,2,"ng-container",11),e.qZA()(),e.TgZ(24,"div",12),e.YNc(25,$e,4,2,"div",7),e.YNc(26,en,8,2,"div",7),e.YNc(27,rn,8,8,"div",7),e.YNc(28,an,9,7,"div",7),e.YNc(29,on,5,5,"div",7),e.YNc(30,cn,5,5,"div",7),e.YNc(31,un,8,7,"div",7),e.YNc(32,hn,4,2,"div",7),e.YNc(33,Tn,4,2,"div",7),e.YNc(34,pn,6,4,"div",7),e.YNc(35,gn,5,3,"div",7),e.YNc(36,On,5,3,"div",7),e.TgZ(37,"div",4),e.YNc(38,fn,6,4,"div",13),e.YNc(39,An,4,2,"div",13),e.qZA(),e.YNc(40,wn,9,7,"div",11),e.qZA(),e.TgZ(41,"div",14)(42,"div",15)(43,"label",5),e._uU(44),e.qZA(),e.TgZ(45,"input",16),e.NdJ("change",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.supplierFieldChange())})("ngModelChange",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a._trnMainService.TrnMainObj.BILLTO=r)})("keydown.enter",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.SupplierEnterCommand(r))})("keydown.tab",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.focusToRemarks())})("keyup",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.SupplierEnterCommand(r))}),e.qZA(),e.YNc(46,Zn,3,0,"span",17),e.qZA(),e.TgZ(47,"div",4)(48,"label",5),e._uU(49,"Address"),e.qZA(),e.TgZ(50,"input",18),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a._trnMainService.TrnMainObj.BILLTOADD=r)}),e.qZA()(),e.TgZ(51,"div",4)(52,"label",5),e._uU(53,"Vat No "),e.qZA(),e.TgZ(54,"input",19),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a._trnMainService.TrnMainObj.BILLTOTEL=r)}),e.qZA()(),e.TgZ(55,"div",4)(56,"label",5),e._uU(57,"Remarks"),e.qZA(),e.TgZ(58,"textarea",20),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a._trnMainService.TrnMainObj.REMARKS=r)}),e.qZA()(),e.YNc(59,Fn,4,1,"div",7),e.YNc(60,Gn,6,4,"div",7),e.YNc(61,kn,10,5,"div",7),e.YNc(62,Kn,7,6,"div",7),e.YNc(63,qn,4,1,"div",7),e.YNc(64,Qn,4,1,"div",7),e.TgZ(65,"generic-popup-grid",21,22),e.NdJ("onItemDoubleClick",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.onSupplierSelected(r))}),e.qZA(),e.TgZ(67,"generic-popup-grid",21,23),e.NdJ("onItemDoubleClick",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.onShipNameSelected(r))}),e.qZA(),e.TgZ(69,"generic-popup-grid",21,24),e.NdJ("onItemDoubleClick",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.onRefBillSelected(r))}),e.qZA(),e.TgZ(71,"generic-popup-grid",21,25),e.NdJ("onItemDoubleClick",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.onWarehouseSelected(r))}),e.qZA(),e.TgZ(73,"generic-popup-grid",21,26),e.NdJ("onItemDoubleClick",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.onAccountSelect(r))}),e.qZA(),e.TgZ(75,"generic-popup-grid",21,27),e.NdJ("onItemDoubleClick",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.onPurchaseOrderSelect(r))}),e.qZA(),e.TgZ(77,"generic-multiSelectpopup-grid",28,27),e.NdJ("onImportChalanClick",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.onImportChalanClick(r))}),e.qZA(),e.TgZ(79,"generic-popup-grid",21,29),e.NdJ("onItemDoubleClick",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.onImportPurchaseOrderSelect(r))}),e.qZA(),e.TgZ(81,"file-uploader-popup",30,31),e.NdJ("onUploaded",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.onfileUpload(r))}),e.qZA(),e.TgZ(83,"generic-popup-grid",21,32),e.NdJ("onItemDoubleClick",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.onGRNSelect(r))}),e.qZA(),e.TgZ(85,"generic-popup-grid",21,33),e.NdJ("onItemDoubleClick",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.onImportGRNSelect(r))}),e.qZA(),e.TgZ(87,"generic-popup-grid",21,34),e.NdJ("onItemDoubleClick",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.onCustomerSelected(r))}),e.qZA(),e.TgZ(89,"load-purchase-order",35,36),e.NdJ("onLoadPO",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.OKLoadPurchaseOrder(r))}),e.qZA(),e.TgZ(91,"generic-popup-grid",21,37),e.NdJ("onItemDoubleClick",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.onImportAdvanceItemClick(r))}),e.qZA(),e.TgZ(93,"quick-party-master",38,39),e.NdJ("onSaveParty",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.onSavePartyMaster(r))}),e.qZA(),e.TgZ(95,"generic-popup-grid",21,40),e.NdJ("onItemDoubleClick",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.onSalesManSelect(r))}),e.qZA(),e.TgZ(97,"create-customer-dialog",41,42),e.NdJ("onSave",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.onSaveCustomerProfile(r))}),e.qZA(),e.YNc(99,Yn,25,2,"div",11),e.YNc(100,ei,19,4,"div",43),e.YNc(101,ai,17,4,"div",43),e.YNc(102,oi,42,7,"div",43),e.YNc(103,ci,44,5,"div",43),e.qZA()()()}if(2&c){const n=e.oxw();e.xp6(5),e.Oqu(n.billLabel),e.xp6(2),e.hij(" ",n._trnMainService.TrnMainObj.VCHRNO," "),e.xp6(1),e.Q6J("ngIf",1==n.userSetting.enableCostCenter&&15==n._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",16==n._trnMainService.TrnMainObj.VoucherType||3==n._trnMainService.TrnMainObj.VoucherType||37==n._trnMainService.TrnMainObj.VoucherType||19==n._trnMainService.TrnMainObj.VoucherType||20==n._trnMainService.TrnMainObj.VoucherType||31==n._trnMainService.TrnMainObj.VoucherType||40==n._trnMainService.TrnMainObj.VoucherType),e.xp6(3),e.Oqu(n.invNoLabel),e.xp6(2),e.Q6J("ngModel",n._trnMainService.TrnMainObj.REFBILL)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||1==n._trnMainService.disableAllFieldinPurchase||1==n._trnMainService.disableOnGRNload)("readonly",16==n._trnMainService.TrnMainObj.VoucherType&&1==n.userSetting.REFBILLCOMPULSORINDNOTE)("placeholder",16==n._trnMainService.TrnMainObj.VoucherType&&1==n.userSetting.REFBILLCOMPULSORINDNOTE?"Press Enter to select PI bill":""),e.xp6(1),e.Q6J("ngIf","salesorder"===n.activeurlpath&&0!=n.userSetting.ENABLE_QUOTATTION_INSO),e.xp6(1),e.Q6J("ngIf",20==n._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",16==n._trnMainService.TrnMainObj.VoucherType||40==n._trnMainService.TrnMainObj.VoucherType),e.xp6(2),e.Q6J("ngIf",3==n._trnMainService.TrnMainObj.VoucherType||37==n._trnMainService.TrnMainObj.VoucherType||15==n._trnMainService.TrnMainObj.VoucherType||31==n._trnMainService.TrnMainObj.VoucherType||19==n._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",n.showPurchaseType()),e.xp6(2),e.Q6J("ngIf",(3==n._trnMainService.TrnMainObj.VoucherType||37==n._trnMainService.TrnMainObj.VoucherType||31==n._trnMainService.TrnMainObj.VoucherType||16==n._trnMainService.TrnMainObj.VoucherType||40==n._trnMainService.TrnMainObj.VoucherType)&&"purchase-import"!=n.activeurlpath),e.xp6(1),e.Q6J("ngIf",1==n.userSetting.REFBILLCOMPULSORINDNOTE&&16==n._trnMainService.TrnMainObj.VoucherType),e.xp6(2),e.Q6J("ngIf",4==n._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",4==n._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",n.showReferenceBill()&&"asset-purchase-invoice"!==n.activeurlpath&&"salesorder"!==n.activeurlpath),e.xp6(1),e.Q6J("ngIf",(3==n._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE"==(null==n._trnMainService||null==n._trnMainService.TrnMainObj||null==n._trnMainService.TrnMainObj.AdditionalObj?null:n._trnMainService.TrnMainObj.AdditionalObj.tag)&&0==n._trnMainService.userSetting.ENABLE_GRN_IN_IMPORTPI||31==n._trnMainService.TrnMainObj.VoucherType&&"GOODS_RECEIVED_NOTE_IMPORT"==(null==n._trnMainService||null==n._trnMainService.TrnMainObj||null==n._trnMainService.TrnMainObj.AdditionalObj?null:n._trnMainService.TrnMainObj.AdditionalObj.tag)&&1==n._trnMainService.userSetting.ENABLE_GRN_IN_IMPORTPI)&&"asset-purchase-invoice"!=n.activeurlpath&&0!=n.userSetting.IMPORTPOBILLMODE),e.xp6(1),e.Q6J("ngIf",3==n._trnMainService.TrnMainObj.VoucherType&&1==n.userSetting.ENABLE_GRN_IN_IMPORTPI&&"purchase-import"==n.activeurlpath),e.xp6(1),e.Q6J("ngIf",3==n._trnMainService.TrnMainObj.VoucherType&&"asset-purchase-invoice"!==n.activeurlpath&&(1==n.userSetting.ENABLE_GRN_IN_PI||1==n.userSetting.ENABLE_GRN_IN_PI&&1==n.userSetting.EnableGRNInPIForCargo)&&"purchase-import"!=n.activeurlpath),e.xp6(1),e.Q6J("ngIf",3==n._trnMainService.TrnMainObj.VoucherType||37==n._trnMainService.TrnMainObj.VoucherType||16==n._trnMainService.TrnMainObj.VoucherType||31==n._trnMainService.TrnMainObj.VoucherType&&"goods-received-note-import"!=n._trnMainService.activeurlpath||40==n._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",3==n._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE"!=(null==n._trnMainService||null==n._trnMainService.TrnMainObj||null==n._trnMainService.TrnMainObj.AdditionalObj?null:n._trnMainService.TrnMainObj.AdditionalObj.tag)||16==n._trnMainService.TrnMainObj.VoucherType||37==n._trnMainService.TrnMainObj.VoucherType||31==n._trnMainService.TrnMainObj.VoucherType&&"goods-received-note-import"!=n._trnMainService.activeurlpath||40==n._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",3==n._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE"==n._trnMainService.TrnMainObj.AdditionalObj.tag),e.xp6(1),e.Q6J("ngIf",19!=n._trnMainService.TrnMainObj.VoucherType&&20!=n._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE"!=(null==n._trnMainService||null==n._trnMainService.TrnMainObj||null==n._trnMainService.TrnMainObj.AdditionalObj?null:n._trnMainService.TrnMainObj.AdditionalObj.tag)&&"goods-received-note-import"!=n._trnMainService.activeurlpath),e.xp6(1),e.Q6J("ngIf",(3==n._trnMainService.TrnMainObj.VoucherType||16==n._trnMainService.TrnMainObj.VoucherType||37==n._trnMainService.TrnMainObj.VoucherType||31==n._trnMainService.TrnMainObj.VoucherType||40==n._trnMainService.TrnMainObj.VoucherType||20===n._trnMainService.TrnMainObj.VoucherType&&1==n.userSetting.CheckSaleableQtyInSO)&&"lite"!=n.AppMode&&"asset-purchase-invoice"!=n.activeurlpath),e.xp6(1),e.Q6J("ngIf","asset-purchase-invoice"===n.activeurlpath),e.xp6(2),e.Q6J("ngIf",(3==n._trnMainService.TrnMainObj.VoucherType||37==n._trnMainService.TrnMainObj.VoucherType)&&"IMPORT_PURCHASE"==n._trnMainService.TrnMainObj.AdditionalObj.tag||31==n._trnMainService.TrnMainObj.VoucherType&&"GOODS_RECEIVED_NOTE_IMPORT"==n._trnMainService.TrnMainObj.AdditionalObj.tag),e.xp6(1),e.Q6J("ngIf",(3==n._trnMainService.TrnMainObj.VoucherType||37==n._trnMainService.TrnMainObj.VoucherType)&&"IMPORT_PURCHASE"==n._trnMainService.TrnMainObj.AdditionalObj.tag||31==n._trnMainService.TrnMainObj.VoucherType&&"GOODS_RECEIVED_NOTE_IMPORT"==n._trnMainService.TrnMainObj.AdditionalObj.tag),e.xp6(1),e.Q6J("ngIf",19==n._trnMainService.TrnMainObj.VoucherType||20==n._trnMainService.TrnMainObj.VoucherType),e.xp6(4),e.Oqu(n.custsupp),e.xp6(1),e.MGl("placeholder","Press ENTER or TAB to select ",n.custsupp,""),e.Q6J("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||"credit"==n._trnMainService.TrnMainObj.TRNMODE&&"goods-received-note-import"!=n._trnMainService.activeurlpath||1==n._trnMainService.disableAllFieldinPurchase||n._trnMainService.disableSupplierInfo||n._trnMainService.disableCustomerInfo||1===n.userSetting.REFBILLCOMPULSORINDNOTE&&1==n._trnMainService.TrnMainObj.DOFULLRETURN&&16===n._trnMainService.TrnMainObj.VoucherType)("ngModel",n._trnMainService.TrnMainObj.BILLTO),e.xp6(1),e.Q6J("ngIf",n.showAddButton()),e.xp6(4),e.Q6J("ngModel",n._trnMainService.TrnMainObj.BILLTOADD)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||1==n._trnMainService.disableAllFieldinPurchase||n._trnMainService.disableSupplierInfo||n._trnMainService.disableCustomerInfo||1===n.userSetting.REFBILLCOMPULSORINDNOTE&&1==n._trnMainService.TrnMainObj.DOFULLRETURN&&16===n._trnMainService.TrnMainObj.VoucherType),e.xp6(4),e.Q6J("ngModel",n._trnMainService.TrnMainObj.BILLTOTEL)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||1==n._trnMainService.disableAllFieldinPurchase||n._trnMainService.disableSupplierInfo||n._trnMainService.disableCustomerInfo||1===n.userSetting.REFBILLCOMPULSORINDNOTE&&1==n._trnMainService.TrnMainObj.DOFULLRETURN&&16===n._trnMainService.TrnMainObj.VoucherType),e.xp6(4),e.Q6J("ngModel",n._trnMainService.TrnMainObj.REMARKS)("disabled","VIEW"==n._trnMainService.TrnMainObj.Mode||1==n._trnMainService.disableAllFieldinPurchase),e.xp6(1),e.Q6J("ngIf",20==n._trnMainService.TrnMainObj.VoucherType&&"salesorder"!==n.activeurlpath&&n.hideSalesman()),e.xp6(1),e.Q6J("ngIf","salesorder"===n.activeurlpath&&1===n.userSetting.EnableShippingAddress),e.xp6(1),e.Q6J("ngIf",20==n._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",0!=n.userSetting.enableCostCenter&&19!=n._trnMainService.TrnMainObj.VoucherType&&20!=n._trnMainService.TrnMainObj.VoucherType&&(3==n._trnMainService.TrnMainObj.VoucherType||16==n._trnMainService.TrnMainObj.VoucherType||31==n._trnMainService.TrnMainObj.VoucherType&&"goods-received-note-import"!=n._trnMainService.activeurlpath)&&"pro"==n.AppMode&&0==n.userSetting.EnableItemWiseCostCenter),e.xp6(1),e.Q6J("ngIf",3==n._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE"==n._trnMainService.TrnMainObj.AdditionalObj.tag),e.xp6(1),e.Q6J("ngIf",3==n._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE"==n._trnMainService.TrnMainObj.AdditionalObj.tag),e.xp6(1),e.Q6J("popupsettings",n.gridPopupSettingsForSupplier),e.xp6(2),e.Q6J("popupsettings",n.gridPopupSettingsForShipName),e.xp6(2),e.Q6J("popupsettings",n.gridPopupSettingsForRefBill),e.xp6(2),e.Q6J("popupsettings",n.gridPopupSettingsForWarehouse),e.xp6(2),e.Q6J("popupsettings",n.genericGridAccountSetting),e.xp6(2),e.Q6J("popupsettings",n.genericGridPurchaseOrderSetting),e.xp6(2),e.Q6J("popupsettings",n.genericGridPurchaseOrderSetting),e.xp6(2),e.Q6J("popupsettings",n.genericGridImportPurchaseOrderSetting),e.xp6(2),e.Q6J("popupsettings",n.fileUploadPopupSettings),e.xp6(2),e.Q6J("popupsettings",n.genericGridGRNSetting),e.xp6(2),e.Q6J("popupsettings",n.genericGridImportGRNSetting),e.xp6(2),e.Q6J("popupsettings",n.gridPopupSettingsForCustomer),e.xp6(4),e.Q6J("popupsettings",n.gridPopupSettingsForimportAdvanceAc),e.xp6(4),e.Q6J("popupsettings",n.gridPopupSettingsForSalesMan),e.xp6(4),e.Q6J("ngIf",1==n._trnMainService.showNegativeBillingAuthForMain),e.xp6(1),e.Q6J("ngIf",n._trnMainService.showFlatDiscOption),e.xp6(1),e.Q6J("ngIf",n.showAdditionalFlatDiscountPopUp),e.xp6(1),e.Q6J("ngIf",n._trnMainService.showDiscountAuth),e.xp6(1),e.Q6J("ngIf",n._trnMainService.showForeignCurrencyPopup)}}let _i=(()=>{class c{constructor(n,t,r,a,h,m,C){this.masterService=n,this._trnMainService=t,this._authService=r,this.dialog=a,this._alertService=h,this._loadingService=m,this.arouter=C,this.viewDisable=!1,this.gridPopupSettingsForRefBill=new i.im,this.gridPopupSettingsForSupplier=new D.sG,this.gridPopupSettingsForShipName=new i.im,this.gridPopupSettingsForWarehouse=new i.im,this.fileUploadPopupSettings=new E.s,this.genericGridAccountSetting=new i.im,this.genericGridPurchaseOrderSetting=new i.im,this.genericGridImportPurchaseOrderSetting=new i.im,this.gridPopupSettingsForimportAdvanceAc=new i.im,this.genericGridGRNSetting=new i.im,this.genericGridImportGRNSetting=new i.im,this.gridPopupSettingsForCustomer=new i.im,this.gridPopupSettingsForSalesMan=new i.im,this.billLabel="Bill No",this.invNoLabel="Invoice No:",this.invDateLabel="Invoice Date:",this.poNOLabel="PO NO",this.paymentTermLabel="Payment Terms",this.custsupp="Supplier",this.chalanSeries=[],this.isAddressReadOnly=!1,this.isVatNoReadOnly=!1,this.paymentTermList=[],this.paymentModeList=[],this.disableReturnModeInPartialDN=!1,this.showAdditionalFlatDiscountPopUp=!1,this.flatDiscountType="",this.grossAmount=this._trnMainService.TrnMainObj.GROSSAMNT,this.showDiscountPopup=!1,this.totalIndividualDiscount=0,this.NegativeBillAuthObj={username:"",password:"",remarks:""},this.ReffBillObj={},this.tenderMode="",this.appType=this.masterService.appType,this.userProfile=this._authService.getUserProfile(),this.orgType=this.userProfile.CompanyInfo.ORG_TYPE,this.userSetting=this._authService.getSetting(),this.AppMode=j.N.appMode,"lite"==this.AppMode&&(this.disableForLite=!0),20!=this._trnMainService.TrnMainObj.VoucherType&&(this._trnMainService.TrnMainObj.DOFULLRETURN=1==this.userSetting.REFBILLCOMPULSORINDNOTE?1:0),20==this._trnMainService.TrnMainObj.VoucherType&&(0==this._trnMainService.TrnMainObj.DOFULLRETURN&&0!=this.userSetting.ENABLE_QUOTATTION_INSO?this._trnMainService.TrnMainObj.DOFULLRETURN=0:0!=this.userSetting.ENABLE_QUOTATTION_INSO&&(this._trnMainService.TrnMainObj.DOFULLRETURN=1));var L=this.masterService.PhiscalObj.BeginDate;L=L.substring(0,10),this.date2=L,this.gridPopupSettingsForShipName={title:"Customer",apiEndpoints:"/getAccountPagedListByPType/PA/C/0",defaultFilterIndex:0,columns:[{key:"ACNAME",title:"NAME",hidden:!1,noSearch:!1},{key:"ACCODE",title:"CODE",hidden:!1,noSearch:!1},{key:"ADDRESS",title:"ADDRESS",hidden:!1,noSearch:!1},{key:"EMAIL",title:"EMAIL",hidden:!1,noSearch:!1}]},this.gridPopupSettingsForWarehouse={title:2==this.appType?"Godown":"Warehouse",apiEndpoints:"/getDivisionWiseWarehousePagedList",defaultFilterIndex:0,columns:[{key:"NAME",title:"NAME",hidden:!1,noSearch:!1}]},"distributor"==this._trnMainService.userProfile.CompanyInfo.ORG_TYPE&&(this.showRefBill=!0),this._trnMainService.TrnMainObj.CHALANNO="",this.loadCompanyInfo(),this.activeurlpath=C.snapshot.url[0].path,("purchase-import"==this.activeurlpath||"purchase-import-order"==this.activeurlpath)&&this.masterService.getPaymentTermList().subscribe(O=>{this.paymentTermList=O.result}),this._trnMainService.TrnMainObj.VoucherType==d.Km.SalesOrder&&1===this.userSetting.EnableAdvPaymentInSOrder&&this.masterService.getPaymentModeList("WITHOUTEPAYMENTANDCREDIT").subscribe(O=>{this.paymentModeList=O.result}),"asset-purchase-invoice"===this.activeurlpath&&(this.masterService.GetAssetLocation().subscribe(O=>{"ok"==O.status&&(this.locationList=O.result,this._trnMainService.TrnMainObj.MWAREHOUSE=this.locationList.find(he=>he.IsDefault).LocIDString)}),this.masterService.getMinimumDepValue().subscribe(O=>{this._trnMainService.TrnMainObj.MinDepValue=O})),this.masterService.getDivisionWiseWarehouseList(this._trnMainService.userProfile.userDivision,this.userSetting.EnableDeliveryWarehouseSelectionInSO).subscribe(O=>{this.warehouseList=O})}ngAfterViewInit(){16==this._trnMainService.TrnMainObj.VoucherType||(20==this._trnMainService.TrnMainObj.VoucherType?setTimeout(()=>{console.log("focus on entry"),document.getElementById("entryDateAD").focus()},1e3):document.getElementById("invoiceNO").focus())}ngOnInit(){this._trnMainService.TrnMainObj.CHALANNO="",this.getDateMiti();const n=new Date;if(this.currDate=(0,b.p6)(n,"yyyy-MM-dd","en-US"),this.currDateBS=this.convertTOBS(this.currDate),this.masterService.getAllChalanSeries(this._trnMainService.TrnMainObj.VoucherPrefix?this._trnMainService.TrnMainObj.VoucherPrefix:"").subscribe(r=>{r&&"ok"===r.status&&r.result?(this.chalanSeries=r.result?r.result:[],this._trnMainService.TrnMainObj.CHALANNOPREFIX=""):this.chalanSeries=[]},r=>{this.chalanSeries=[]}),this.masterService.getAllCostCenter().subscribe(r=>{r&&(this.costlists=r,(this._trnMainService.TrnMainObj.VoucherType===d.Km.GoodsReceived||this._trnMainService.TrnMainObj.VoucherType===d.Km.DebitNote)&&1==this.userSetting.enabledistributedpurchase&&(this._trnMainService.TrnMainObj.COSTCENTER=this.userProfile.costCenter))},r=>{this.costlists=[]}),this._trnMainService.TrnMainObj.VoucherType===d.Km.GoodsReceived&&(this._trnMainService.TrnMainObj.DOFULLRETURN=1,this._trnMainService.TrnMainObj.VATBILL=0),19===this._trnMainService.TrnMainObj.VoucherType?(this.billLabel="PO NO.",this.invNoLabel="Ref No:",this.invDateLabel="Ref Date:"):3==this._trnMainService.TrnMainObj.VoucherType?(this.billLabel="PI No.",this.invNoLabel="Invoice No:",this.invDateLabel="Invoice Date:",this.poNOLabel="PO NO",this.paymentTermLabel="Payment Terms",(0!=this.userSetting.IMPORTPOBILLMODE&&"IMPORT_PURCHASE"==this._trnMainService.TrnMainObj.AdditionalObj.tag||0!=this.userSetting.PODELIVERYMODE&&"IMPORT_PURCHASE"!==this._trnMainService.TrnMainObj.AdditionalObj.tag)&&(this._trnMainService.TrnMainObj.DOFULLRETURN=1),this._trnMainService.TrnMainObj.VATBILL=0):16==this._trnMainService.TrnMainObj.VoucherType?(this.billLabel="RETURN NO.",this.invNoLabel="Ref PI No:",this.invDateLabel="Ref PI Date:",this.poNOLabel="Ref Sup Inv NO",this.paymentTermLabel="Return Mode"):20==this._trnMainService.TrnMainObj.VoucherType?(this.billLabel="SO NO.",this.invNoLabel="Ref No:",this.custsupp="Customer",this.poNOLabel="Quotation Ref no.",this._trnMainService.TrnMainObj.DOFULLRETURN=0===this._trnMainService.TrnMainObj.DOFULLRETURN?0:1):this.billLabel="BILL NO.","asset-purchase-invoice"==this.activeurlpath&&(this._trnMainService.TrnMainObj.INVOICETYPE="NONTRADING"),20==this._trnMainService.TrnMainObj.VoucherType&&1==this.userSetting.EnableAutoSOExpiry){const r=Number(this.userSetting.SalesOrderExpiryPeriod),a=new Date;a.setDate(n.getDate()+r),this._trnMainService.TrnMainObj.ORDEXPDATE=(0,b.p6)(a,"yyyy-MM-dd","en-US"),this._trnMainService.TrnMainObj.ORDEXPMITI=this.masterService.toBSDate(this._trnMainService.TrnMainObj.ORDEXPDATE)}}getDateMiti(){this.masterService.getDateMiti(this.userProfile.PhiscalYearInfo.PhiscalID).subscribe(n=>{this.dateMiti=n&&"ok"===n.status&&n.result&&n.result?n.result:[]},n=>{this.dateMiti=[]})}onChangePanBill(){if(this._trnMainService.TrnMainObj.VoucherType!=d.Km.Purchase&&this._trnMainService.TrnMainObj.VoucherType!=d.Km.DebitNote||"MIXED"!=this._trnMainService.TrnMainObj.INVOICETYPE&&"NONTRADING"!=this._trnMainService.TrnMainObj.INVOICETYPE)this._trnMainService.ReCalculateBillWithNormal();else{for(let n=0;n<this._trnMainService.TrnMainObj?.AdditionProdList?.length;n++)this._trnMainService.TrnMainObj.AdditionProdList[n].RATE=this._trnMainService.TrnMainObj.AdditionProdList[n].ALTRATE,this._trnMainService.TrnMainObj.AdditionProdList[n].VAT=this._trnMainService.calculateVATforNonTrading(n);this._trnMainService.ReCalculateBillForNonTradingPurchase(),this._trnMainService.calculateTradingNontradingTotalinDebitNote()}}OnChangePurchaseReturnType(n){("StockIssueApproved"==this._trnMainService.TrnMainObj.AdditionalObj.RETURNTYPE||"DamageSalesReturnApproved"==this._trnMainService.TrnMainObj.AdditionalObj.RETURNTYPE)&&(this.showRefBill=!1),"StockIssueApproved"==this._trnMainService.TrnMainObj.AdditionalObj.RETURNTYPE?this.gridPopupSettingsForRefBill=this.masterService.getGenericGridPopUpSettings("StockTransferForPurchaseReturn"):"DamageSalesReturnApproved"==this._trnMainService.TrnMainObj.AdditionalObj.RETURNTYPE&&(this.gridPopupSettingsForRefBill=this.masterService.getGenericGridPopUpSettings("DamageIssueForPurchaseReturn"))}undo(){this._trnMainService.TrnMainObj.TRNMODE="credit"}showReferenceBill(){return this._trnMainService.TrnMainObj.VoucherType===d.Km.SalesOrder&&(1===this.userSetting.ENABLE_QUOTATTION_INSO||2===this.userSetting.ENABLE_QUOTATTION_INSO)||this._trnMainService.TrnMainObj.VoucherType===d.Km.Purchase&&(1===this.userSetting.PODELIVERYMODE||2===this.userSetting.PODELIVERYMODE)&&"IMPORT_PURCHASE"!==this._trnMainService.TrnMainObj.AdditionalObj.tag&&1!==this.userSetting.ENABLE_GRN_IN_PI||this._trnMainService.TrnMainObj.VoucherType===d.Km.GoodsReceived&&(1===this.userSetting.PODELIVERYMODE||2===this.userSetting.PODELIVERYMODE)&&"GOODS_RECEIVED_NOTE_IMPORT"!==this._trnMainService.TrnMainObj.AdditionalObj.tag&&0!=this.userSetting.ENABLE_GRN_IN_PI}ngOnDestroy(){}getNepaliDate(){if(""!==this._trnMainService.TrnMainObj.TRNDATE&&null!==this._trnMainService.TrnMainObj.TRNDATE){const n=`${this._trnMainService.TrnMainObj.TRNDATE}`,t=g().find(this.dateMiti,["AD",n]);console.log("BSDATE",t),this._trnMainService.TrnMainObj.BSDATE=t&&t.MITI}if(""!==this._trnMainService.TrnMainObj.TRN_DATE&&null!==this._trnMainService.TrnMainObj.TRN_DATE){const n=`${this._trnMainService.TrnMainObj.TRN_DATE}`,t=g().find(this.dateMiti,["AD",n]);this._trnMainService.TrnMainObj.BS_DATE=t&&t.MITI}if(""!==this._trnMainService.TrnMainObj.DeliveryDate&&null!==this._trnMainService.TrnMainObj.DeliveryDate){const n=`${this._trnMainService.TrnMainObj.DeliveryDate}`,t=g().find(this.dateMiti,["AD",n]);this._trnMainService.TrnMainObj.DeliveryMiti=t&&t.MITI}if(""!==this._trnMainService.TrnMainObj.ORDEXPDATE&&null!==this._trnMainService.TrnMainObj.ORDEXPDATE){const n=`${this._trnMainService.TrnMainObj.ORDEXPDATE}`,t=g().find(this.dateMiti,["AD",n]);this._trnMainService.TrnMainObj.ORDEXPMITI=t&&t.MITI}}getEnglishDate(){if(""!==this._trnMainService.TrnMainObj.BSDATE&&null!==this._trnMainService.TrnMainObj.BSDATE){const n=`${this._trnMainService.TrnMainObj.BSDATE}`,t=g().find(this.dateMiti,["MITI",n]);this._trnMainService.TrnMainObj.TRNDATE=t&&t.AD}if(""!==this._trnMainService.TrnMainObj.BS_DATE&&null!==this._trnMainService.TrnMainObj.BS_DATE){const n=`${this._trnMainService.TrnMainObj.BS_DATE}`,t=g().find(this.dateMiti,["MITI",n]);this._trnMainService.TrnMainObj.TRN_DATE=t&&t.AD}if(""!==this._trnMainService.TrnMainObj.DeliveryMiti&&null!==this._trnMainService.TrnMainObj.DeliveryMiti){const n=`${this._trnMainService.TrnMainObj.DeliveryMiti}`,t=g().find(this.dateMiti,["MITI",n]);this._trnMainService.TrnMainObj.DeliveryDate=t&&t.AD}if(""!==this._trnMainService.TrnMainObj.ORDEXPMITI&&null!==this._trnMainService.TrnMainObj.ORDEXPMITI){const n=`${this._trnMainService.TrnMainObj.ORDEXPMITI}`,t=g().find(this.dateMiti,["MITI",n]);this._trnMainService.TrnMainObj.ORDEXPDATE=t&&t.AD}}convertTOBS(n){return this.masterService.toBSDate(n)}formatDate(n){return n.replace(/(\d{2})\/(\d{2})\/(\d{4})/,"$3-$2-$1")}changeEntryDate(n,t){"AD"==t?(n>this.currDate&&(n=this.currDate,this._trnMainService.TrnMainObj.TRNDATE=this.currDate),this._trnMainService.TrnMainObj.BSDATE=this.masterService.toBSDate(n)):"BS"==t&&(this.formatDate(n)>this.formatDate(this.currDateBS)&&(this._trnMainService.TrnMainObj.BS_DATE=this.currDateBS,n=this.currDateBS),this._trnMainService.TrnMainObj.TRNDATE=this.masterService.toADDate(n)),"asset-purchase-invoice"===this.activeurlpath&&this.masterService.getAssetDepreciationDoneMonths().subscribe(r=>{const a=this._trnMainService.TrnMainObj.BSDATE.split("/")[1];for(const h of r.result)if(h.MONTHNO===a){this._trnMainService.TrnMainObj.TRNDATE=this.currDate,this._trnMainService.TrnMainObj.BSDATE=this.currDateBS,this._alertService.info(`Depreciation cancellation is required to enter purchase invoice for this month(${h.MONTHNAME.toLowerCase()})`);break}})}changeInvDate(n,t){n>this.currDate&&"AD"==t&&(this._trnMainService.TrnMainObj.TRN_DATE=this.currDate,n=this.currDate),this.formatDate(n)>this.formatDate(this.currDateBS)&&"BS"==t&&(this._trnMainService.TrnMainObj.BS_DATE=this.currDateBS,n=this.currDateBS),"AD"==t?this._trnMainService.TrnMainObj.BS_DATE=this.masterService.toBSDate(n):"BS"==t&&(this._trnMainService.TrnMainObj.TRN_DATE=this.masterService.toADDate(n))}changeExpiryDate(n,t){"AD"==t?this._trnMainService.TrnMainObj.ORDEXPMITI=this.masterService.toBSDate(n):"BS"==t&&(this._trnMainService.TrnMainObj.ORDEXPDATE=this.masterService.toADDate(n))}removeReferenceNumber(){this._trnMainService.TrnMainObj.REFORDBILL=null}dateValidation(n,t){if(n<this.currDate){if("DeliveryDate"==t)return this._alertService.warning("Delivery date shouldnot be entered in back date"),this._trnMainService.TrnMainObj.DeliveryDate=this.currDate,void this.changeDeliveryDate(this._trnMainService.TrnMainObj.DeliveryDate,"AD");if("OrderExpiryDate"==t)return this._alertService.warning("Expiry date shouldnot be entered in back date"),this._trnMainService.TrnMainObj.ORDEXPDATE=this.currDate,void this.changeExpiryDate(this._trnMainService.TrnMainObj.ORDEXPDATE,"AD")}}dateValidationBS(n,t){if(n<this.currDateBS){if("DeliveryDate"==t)return this._alertService.warning("Delivery date shouldnot be entered in back date"),this._trnMainService.TrnMainObj.DeliveryMiti=this.currDateBS,void this.changeDeliveryDate(this._trnMainService.TrnMainObj.DeliveryMiti,"BS");if("OrderExpiryDate"==t)return this._alertService.warning("Expiry date shouldnot be entered in back date"),this._trnMainService.TrnMainObj.ORDEXPMITI=this.currDateBS,void this.changeExpiryDate(this._trnMainService.TrnMainObj.ORDEXPMITI,"BS")}}changeDeliveryDate(n,t,r){"AD"==t?this._trnMainService.TrnMainObj.DeliveryMiti=this.masterService.toBSDate(n):"BS"==t&&(this._trnMainService.TrnMainObj.DeliveryDate=this.masterService.toADDate(n))}SupplierEnterCommand(n){this._trnMainService.customerEvent=!0,this.showPartyMasterPopup=!1,this.showInSupplierPopup=!0,this.showCustomerProfilePopup=!0,"salesorder"==this.activeurlpath?this.getCustomersList("2"):(this.getSupplierList(),this.genericGridSupplier.show())}supplierFieldChange(){this._trnMainService.TrnMainObj.PARAC=null,this._trnMainService.TrnMainObj.TRNAC=null,this._trnMainService.TrnMainObj.BILLTOADD=null,this._trnMainService.TrnMainObj.AdditionalObj.TRNTYPE=null,this._trnMainService.TrnMainObj.TRNMODE=null,this._trnMainService.TrnMainObj.PARTY_ORG_TYPE=null,this._trnMainService.TrnMainObj.CREDITDAYS=0}onSupplierSelected(n){this._trnMainService.TrnMainObj.BILLTO=n.ACNAME,this._trnMainService.TrnMainObj.PARAC=n.ACID,this._trnMainService.TrnMainObj.VoucherType==d.Km.PurchaseOrder&&(this._trnMainService.TrnMainObj.TRNAC=n.ACID),this._trnMainService.TrnMainObj.BILLTOADD=n.ADDRESS,this._trnMainService.TrnMainObj.AdditionalObj.TRNTYPE=null==n.PSTYPE?null:n.PSTYPE.toLowerCase(),this._trnMainService.TrnMainObj.PARTY_ORG_TYPE=n.ORG_TYPE,this._trnMainService.TrnMainObj.CREDITDAYS=n.CRPERIOD,this._trnMainService.TrnMainObj.BILLTOTEL=n.VATNO,this._trnMainService.TrnMainObj.BILLTOMOB=n.MOBILE&&this._trnMainService.TrnMainObj.VoucherType===d.Km.Purchase?n.MOBILE:n.PHONE,(this._trnMainService.TrnMainObj.VoucherType===d.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType===d.Km.GoodsReceived||this._trnMainService.TrnMainObj.VoucherType===d.Km.PurchaseOrder||this._trnMainService.TrnMainObj.VoucherType===d.Km.DebitNote)&&(this._trnMainService.TrnMainObj.VATBILL=n.SUPTYPE,null!=this._trnMainService.TrnMainObj.ProdList[0].MENUCODE&&this.onChangePanBill()),this._trnMainService.TrnMainObj.AdditionalObj.SelectedTermsAndCondition=n.TERMSANDCONDITIONS?JSON.parse(n.TERMSANDCONDITIONS):"","add-purchase-order"==this.activeurlpath&&this._trnMainService.TrnMainObj.AdditionalObj.SelectedTermsAndCondition&&(this._trnMainService.TrnMainObj.AdditionalObj.TermsAndConditionID=this._trnMainService.TrnMainObj.AdditionalObj?.SelectedTermsAndCondition?.find(t=>1==t.isDefault).ID),("purchase-import"==this.activeurlpath||"purchase-import-order"==this.activeurlpath)&&"CREDIT"==this._trnMainService.TrnMainObj.TRNMODE&&(this._trnMainService.TrnMainObj.TRNAC=n.ACID,this._trnMainService.TrnMainObj.TRNACName=n.ACNAME),this.masterService.masterGetmethod("/getPartyBalanceAmount?acid="+n.ACID).subscribe(t=>{"ok"==t.status&&(this._trnMainService.TrnMainObj.BALANCE=this._trnMainService.nullToZeroConverter(t.result))},t=>{}),document.getElementById("remarksid").focus()}shipNameEnterCommand(n){n.preventDefault(),document.getElementById("shipname").blur(),this.genericGridShipName.show()}supplierFieldDisabled(){return null!=this._trnMainService.TrnMainObj.ProdList&&this._trnMainService.TrnMainObj.ProdList.filter(n=>null!=n.MCODE).length>0&&("VIEW"==this._trnMainService.TrnMainObj.Mode||"credit"==this._trnMainService.TrnMainObj.TRNMODE)}onShipNameSelected(n){this._trnMainService.TrnMainObj.AdditionalObj.SHIPNAME=n.ACID,this._trnMainService.TrnMainObj.AdditionalObj.SHIPNAMEVIEW=n.ACNAME,this._trnMainService.TrnMainObj.DeliveryAddress=n.ADDRESS}changeinvalues(){console.log("change in value")}paymentTermsChange(){if(console.log("payment terms change",this._trnMainService.TrnMainObj.TRNMODE),this.flushCreditSelectedData(),this._trnMainService.disableOnCreditSelect=!1,"cash"==this._trnMainService.TrnMainObj.TRNMODE?(this.masterService.focusAnyControl("customerselectid"),this.masterService.userSetting.CASHINHAND_AC?(this._trnMainService.TrnMainObj.TRNAC=this.masterService.userSetting.CASHINHAND_AC,this._trnMainService.TrnMainObj.TRNACName="CASH IN HAND A/C"):(alert("'Default Cash' on database not found. Please Contact to Administrator for this!"),this._trnMainService.TrnMainObj.TRNACName="error...")):this._trnMainService.TrnMainObj.VoucherType===d.Km.Purchase&&"IMPORT_PURCHASE"==this._trnMainService.TrnMainObj.AdditionalObj.tag&&this._trnMainService.TrnMainObj.REFORDBILL&&"CREDIT"==this._trnMainService.TrnMainObj.TRNMODE||this._trnMainService.TrnMainObj.VoucherType===d.Km.Purchase&&"IMPORT_PURCHASE"!=this._trnMainService.TrnMainObj.AdditionalObj.tag&&this._trnMainService.TrnMainObj.REFORDBILL&&"credit"==this._trnMainService.TrnMainObj.TRNMODE&&1!=this.userSetting.ENABLE_GRN_IN_PI?(this._trnMainService.TrnMainObj.TRNAC=this._trnMainService.TrnMainObj.PARAC,this._trnMainService.TrnMainObj.TRNACName=this._trnMainService.TrnMainObj.BILLTO,this._trnMainService.disableOnCreditSelect=!0):(this._trnMainService.TrnMainObj.TRNAC="",this._trnMainService.TrnMainObj.TRNACName=""),this._trnMainService.TrnMainObj.VoucherType===d.Km.Purchase&&"IMPORT_PURCHASE"==this._trnMainService.TrnMainObj.AdditionalObj.tag||this._trnMainService.TrnMainObj.VoucherType===d.Km.PurchaseOrder&&"IMPORT_PURCHASE_ORDER"==this._trnMainService.TrnMainObj.AdditionalObj.tag){let n;n=this.paymentTermList.filter(t=>t.PAYMODE==this._trnMainService.TrnMainObj.TRNMODE),this.paymentTermAcid=n&&n[0].ACID}}flushCreditSelectedData(){0!=this.userSetting.IMPORTPOBILLMODE&&"purchase-import"==this.activeurlpath||0!=this.userSetting.ENABLE_GRN_IN_IMPORTPI&&"purchase-import"==this.activeurlpath||0!=this.userSetting.PODELIVERYMODE&&this._trnMainService.TrnMainObj.VoucherType==d.Km.Purchase&&"purchase-import"!=this.activeurlpath||0!=this.userSetting.PODELIVERYMODE&&this._trnMainService.TrnMainObj.VoucherType==d.Km.GoodsReceived||(this._trnMainService.TrnMainObj.PARAC="",this._trnMainService.TrnMainObj.BILLTO="",this._trnMainService.TrnMainObj.BILLTOADD="",this._trnMainService.TrnMainObj.BILLTOTEL="",this._trnMainService.TrnMainObj.MEMBERNO="",this._trnMainService.TrnMainObj.RECEIVEBY="",this._trnMainService.TrnMainObj.TRNAC="",this._trnMainService.TrnMainObj.TRNACName="",this._trnMainService.TrnMainObj.MEMBERNAME="",this._trnMainService.TrnMainObj.SCHEMENAME="")}RefBillEnterCommand(n){this._trnMainService.customerEvent=!0,this._trnMainService.TrnMainObj.VoucherType===d.Km.DebitNote&&(n.preventDefault(),1==this.userSetting.REFBILLCOMPULSORINDNOTE&&(this.genericGridRefBill.show(),"invoiceNO"==n.target.id?this.gridPopupSettingsForRefBill=this.masterService.getGenericGridPopUpSettings("REFBILLOFPURCHASERETURN","",0):"suppBillNo"==n.target.id&&(this.gridPopupSettingsForRefBill=this.masterService.getGenericGridPopUpSettings("REFBILLOFPURCHASERETURN","",2))))}onRefBillSelected(n){this._trnMainService.TrnMainObj.VoucherType!=d.Km.DebitNote||0==n.POST?(console.log("ref bill selectedd in purchase",n),this.ReffBillObj=n,this._trnMainService.TrnMainObj.REFBILL=n.VCHRNO,this._trnMainService.TrnMainObj.PARAC=n.PARAC,this._trnMainService.TrnMainObj.BILLTO=n.BILLTO,this._trnMainService.TrnMainObj.TRNAC=n.TRNAC,this._trnMainService.TrnMainObj.BILLTOADD=n.BILLTOADD,this._trnMainService.TrnMainObj.TRNMODE=n.TRNMODE,this._trnMainService.TrnMainObj.DCRATE=n.DCRATE,this._trnMainService.TrnMainObj.TOTALFLATDISCOUNT=n.TOTALFLATDISCOUNT,this._trnMainService.TrnMainObj.BILLTOTEL=n.BILLTOTEL,this._trnMainService.TrnMainObj.REFORDBILL=n.REFBILL,this._trnMainService.TrnMainObj.COSTCENTER=n.COSTCENTER,this._trnMainService.TrnMainObj.MWAREHOUSE=n.MWAREHOUSE,this._trnMainService.TrnMainObj.INVOICETYPE=null!=n.INVOICETYPE?n.INVOICETYPE:"TRADING",this._trnMainService.TrnMainObj.VoucherType==d.Km.DebitNote&&(this._trnMainService.TrnMainObj.ProdList=[],this._trnMainService.TrnMainObj.AdditionProdList=[],console.log("invoicetype",this._trnMainService.TrnMainObj.INVOICETYPE),"TRADING"==this._trnMainService.TrnMainObj.INVOICETYPE?this._trnMainService.addRow():this._trnMainService.addRowForAdditionalProdList(),this._trnMainService.TrnMainObj.CHEQUENO=n.CHEQUENO,this._trnMainService.TrnMainObj.CHEQUEDATE=n.CHEQUEDATE,this._trnMainService.TrnMainObj.VATBILL=n.VATBILL,this._trnMainService.TrnMainObj.AdditionalObj.AFTERFLATDISCRATE=n.AFTERFLATDISCRATE,this._trnMainService.TrnMainObj.AdditionalObj.BEFOREFLATDISCRATE=n.BEFOREFLATDISCRATE,(n.AFTERFLATDISCRATE>0||n.BEFOREFLATDISCRATE>0)&&(this._trnMainService.TrnMainObj.DCRATE=n.AFTERFLATDISCRATE>0?n.AFTERFLATDISCRATE:n.BEFOREFLATDISCRATE)),this.masterService.getAccountNameForMaster(this._trnMainService.TrnMainObj.TRNAC).subscribe(t=>{let r=[];t&&"ok"===t.status&&t.result&&(r=t.result,this._trnMainService.TrnMainObj.TRNACName=r[0].ACNAME)}),16==this._trnMainService.TrnMainObj.VoucherType&&1==this.userSetting.REFBILLCOMPULSORINDNOTE&&(1==this._trnMainService.TrnMainObj.DOFULLRETURN?this._trnMainService.loadDataForPurchaseReturn(n.VCHRNO,n.DIVISION,n.PhiscalID):this.disableReturnModeInPartialDN=!0),"StockIssueApproved"==this.purchaseReturnType?(this._trnMainService.TrnMainObj.REFBILL=n.REFBILL,document.getElementById("poNoId").focus()):null!=document.getElementById("poNoId")&&(this._trnMainService.TrnMainObj.REFBILL=n.VCHRNO,document.getElementById("poNoId").focus())):this._alertService.info(`Voucher Approval for ${n.VCHRNO} is already done!. You are not authorized to reverse this voucher.`)}RefBillFieldDisabled(){return null!=this._trnMainService.TrnMainObj.ProdList&&this._trnMainService.TrnMainObj.ProdList.filter(n=>null!=n.MCODE).length>0}preventInput(n){return n.preventDefault(),!1}WarehouseEnterCommand(n){this.genericGridWarehouse.show()}onWarehouseSelected(n){this._trnMainService.TrnMainObj.MWAREHOUSE=n.NAME}onChangePaymentMode(){this._trnMainService.TrnMainObj.TRNACName=null,this._trnMainService.TrnMainObj.TRNAC=null,this._trnMainService.disableAccountInputField=!1;let n=this.paymentModeList.filter(t=>t.MODEVALUE==this._trnMainService.TrnMainObj.TRNMODE)[0];n&&(n.MODE&&"FIXED"!=n.MODE?.toUpperCase()?(this.tenderMode=n.MODE,this.tenderMode.toUpperCase()):(!n.MODE||"FIXED"==n.MODE?.toUpperCase())&&(this._trnMainService.TrnMainObj.TRNAC=n.ACID,this._trnMainService.TrnMainObj.TRNACName=n.ACNAME,this._trnMainService.disableAccountInputField=!0),"cash"==this._trnMainService.TrnMainObj.TRNMODE&&this._trnMainService.setCashProperty(),this._trnMainService.disableAccountInputField=!!this._trnMainService.TrnMainObj.TRNAC)}getSupplierList(){this.gridPopupSettingsForSupplier={title:"Supplier",apiEndpoints:"/getAccountPagedListByPType/PA/V/0",defaultFilterIndex:0,useDefinefilterValue:this._trnMainService.TrnMainObj.BILLTO,columns:[{key:"ACNAME",title:"NAME",hidden:!1,noSearch:!1},{key:"ACCODE",title:"CODE",hidden:!1,noSearch:!1},{key:"ADDRESS",title:"ADDRESS",hidden:!1,noSearch:!1},{key:"VATNO",title:"VATNO",hidden:!1,noSearch:!1}]}}showAccountInSO(){return!("OTHERS"!=this.tenderMode&&"CREDITCARD"!=this.tenderMode&&!this._trnMainService.TrnMainObj.TRNACName)}AccountEnterCommand(){this.showPartyMasterPopup=!1,this.showInSupplierPopup=!1;var n="";let t="";(this._trnMainService.TrnMainObj.VoucherType==d.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType==d.Km.DebitNote||this._trnMainService.TrnMainObj.VoucherType==d.Km.GoodsReceived)&&("cash"==this._trnMainService.TrnMainObj.TRNMODE?n="Bank Deposit Voucher":"credit"==this._trnMainService.TrnMainObj.TRNMODE?(n="Supplier",this.showPartyMasterPopup=!0):n="BankList",t=`/getAccountPagedListByMapId/Master/${n}/`),this._trnMainService.TrnMainObj.VoucherType==d.Km.SalesOrder&&(t="/getpaymentmodepagedlist"),this.genericGridAccountSetting={title:"Accounts",apiEndpoints:t,defaultFilterIndex:1,columns:[{key:"ACCODE",title:"AC CODE",hidden:!1,noSearch:!1},{key:"ACNAME",title:"A/C NAME",hidden:!1,noSearch:!1}]},this.genericGridAccount.show()}onAccountSelect(n){try{this._trnMainService.TrnMainObj.VoucherType==d.Km.SalesOrder&&1==this.userSetting.EnableAdvPaymentInSOrder||this.flushCreditSelectedData(),this._trnMainService.TrnMainObj.TRNAC=n.ACID,this._trnMainService.TrnMainObj.TRNACName=n.ACNAME,"credit"==this._trnMainService.TrnMainObj.TRNMODE&&(this.isAddressReadOnly=!0,this.isVatNoReadOnly=!0,this._trnMainService.TrnMainObj.BILLTO=n.ACNAME,this._trnMainService.TrnMainObj.BILLTOTEL=n.VATNO,this._trnMainService.TrnMainObj.BILLTOADD=n.ADDRESS,this._trnMainService.TrnMainObj.PARAC=n.ACID,this._trnMainService.TrnMainObj.BILLTOMOB=this._trnMainService.TrnMainObj.VoucherType===d.Km.Purchase&&n.MOBILE?n.MOBILE:n.PHONE),(this._trnMainService.TrnMainObj.VoucherType===d.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType===d.Km.GoodsReceived||this._trnMainService.TrnMainObj.VoucherType===d.Km.PurchaseOrder||this._trnMainService.TrnMainObj.VoucherType===d.Km.DebitNote)&&(this._trnMainService.TrnMainObj.VATBILL=n.SUPTYPE,null!=this._trnMainService.TrnMainObj.ProdList[0]?.MENUCODE&&this.onChangePanBill())}catch(t){alert(t)}1==this.userSetting.ReceiptBasedGRN&&this._trnMainService.TrnMainObj.VoucherType==d.Km.GoodsReceived?document.getElementById("poNoId").focus():document.getElementById("warehouseId").focus()}focusToWarehouse(){(this._trnMainService.TrnMainObj.VoucherType==d.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType==d.Km.DebitNote)&&document.getElementById("warehouseId").focus()}focusToSupplier(){(this._trnMainService.TrnMainObj.VoucherType==d.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType==d.Km.DebitNote)&&("credit"!=this._trnMainService.TrnMainObj.TRNMODE?document.getElementById("supplierid").focus():document.getElementById("remarksid").focus())}disableWholesaleRate(){return!!(this._trnMainService.TrnMainObj.REFORDBILL&&2===this.userSetting.ENABLE_WSRATE_INSORDER||null!=this._trnMainService.TrnMainObj.ProdList[0].MCODE)}loadCompanyInfo(){1!=this._trnMainService.inputCode&&this.masterService.loadCompany().subscribe(n=>{this._trnMainService.TrnMainObj.AdditionalObj.BILLFORMATS=n.BILLFORMATS,this._trnMainService.TrnMainObj.AdditionalObj.BILLUNITS=n.BILLUNITS})}openQuickPartyMasterPopup(){"PI"==this._trnMainService.TrnMainObj.VoucherPrefix&&1==this.showPartyMasterPopup&&(this.masterService.isSalesPage=!1,this.CreateQuickParty.show(),this.genericGridAccount.hide())}openQuickPartyInSupplier(){"PI"==this._trnMainService.TrnMainObj.VoucherPrefix&&1==this.showInSupplierPopup&&(this.masterService.isSalesPage=!1,this.CreateQuickParty.show(),this.genericGridSupplier.hide())}openQuickCusProfilePopup(){20==this._trnMainService.TrnMainObj.VoucherType&&(this.CreateCustomerProfile.show(),this.genericGridCustomer.hide(),this.showCustomerProfilePopup=!1)}onSaveCustomerProfile(n){console.log("on save customer",n),this._trnMainService.TrnMainObj.BILLTO=n.name,this._trnMainService.TrnMainObj.BILLTOADD=n.address,this._trnMainService.TrnMainObj.BILLTOTEL=n.pan,this._trnMainService.TrnMainObj.BILLTOMOB=n.mobNo,document.getElementById("remarksid").focus(),this.masterService.getMemershipFromMemberNo(n.memID).subscribe(t=>{this._trnMainService.TrnMainObj.MEMBERNO=t[0].MEMID,this._trnMainService.TrnMainObj.MEMBERNAME=t[0].FNAME,this._trnMainService.TrnMainObj.SCHEMENAME=t[0].SCHEMEID,this._trnMainService.TrnMainObj.RECEIVEBY=t[0].MEMID,t[0].ACCOUNT&&(this._trnMainService.TrnMainObj.PARAC=t[0].ACCOUNT)})}onSavePartyMaster(n){(1==this.showPartyMasterPopup||"credit"==this._trnMainService.TrnMainObj.TRNMODE)&&(this._trnMainService.TrnMainObj.TRNACName=n.ACNAME,this._trnMainService.TrnMainObj.TRNAC=n.ACID,this._trnMainService.TrnMainObj.BILLTO=n.ACNAME,this._trnMainService.TrnMainObj.BILLTOADD=n.ADDRESS,this._trnMainService.TrnMainObj.BILLTOTEL=n.VATNO,1==n.SUPTYPE&&(this._trnMainService.TrnMainObj.VATBILL=1),setTimeout(()=>{this.masterService.focusAnyControl("warehouseId")},500)),1==this.showInSupplierPopup&&("purchase-import"==this.activeurlpath&&(this._trnMainService.TrnMainObj.PARAC=n.ACID),this._trnMainService.TrnMainObj.BILLTO=n.ACNAME,this._trnMainService.TrnMainObj.BILLTOADD=n.ADDRESS,this._trnMainService.TrnMainObj.BILLTOTEL=n.VATNO)}focusToRemarks(){this.masterService.focusAnyControl("remarksid")}ImportGRNEnter(){this.genericGridImportGRNSetting={title:"Good Received Note - Import",apiEndpoints:"/getImportGRNPagedList/GR",defaultFilterIndex:0,columns:[{key:"GRNNUMBER",title:"GRN Number",hidden:!1,noSearch:!1},{key:"DATE",title:"Date",hidden:!1,noSearch:!1},{key:"SUPPLIERNAME",title:"Supplier Name",hidden:!1,noSearch:!1}]},this.genericGridImportGRN.show()}GrnNoEnter(){1==this.userSetting.EnableGRNInPIForCargo?0!=this.userSetting.ENABLE_GRN_IN_PI&&3==this._trnMainService.TrnMainObj.VoucherType&&(this.genericGridGRNSetting={title:"Good Received Note",apiEndpoints:"/getGRNVoucherListFromCargo",defaultFilterIndex:0,columns:[{key:"VCHRNO",title:"GRN Number",hidden:!1,noSearch:!1},{key:"TRNDATE",title:"Date",hidden:!1,noSearch:!1},{key:"BOOKINGID",title:"Booking ID",hidden:!1,noSearch:!1},{key:"SUPPLIER_NAME",title:"Supplier",hidden:!1,noSearch:!1}]}):0!=this.userSetting.ENABLE_GRN_IN_PI&&3==this._trnMainService.TrnMainObj.VoucherType&&(this.genericGridGRNSetting={title:"Good Received Note",apiEndpoints:"/getGRNPagedList/GR",defaultFilterIndex:0,columns:[{key:"GRNNUMBER",title:"GRN Number",hidden:!1,noSearch:!1},{key:"DATE",title:"Date",hidden:!1,noSearch:!1},{key:"SUPPLIERNAME",title:"Supplier Name",hidden:!1,noSearch:!1}]}),this.genericGridGRN.show()}onEnterExrate(){this._trnMainService.TrnMainObj.ProdList.forEach(n=>{n.ALTRATE=this._trnMainService.nullToZeroConverter(n.INVRATE)*this._trnMainService.nullToZeroConverter(this._trnMainService.TrnMainObj.EXRATE),n.REALRATE=n.ALTRATE/n.ALTCONFACTOR,n.RATE=n.ALTRATE/n.ALTCONFACTOR}),this._trnMainService.ReCalculateBillWithNormal()}PurchaseOrderEnter(){if(console.log("usersetting",this.userSetting.PODELIVERYMODE,"vouchertype",this._trnMainService.TrnMainObj.VoucherType),1!=this.userSetting.ReceiptBasedGRN||this._trnMainService.TrnMainObj.TRNAC){if(0!=this.userSetting.PODELIVERYMODE||0!=this.userSetting.ENABLE_QUOTATTION_INSO){let n;if(this._trnMainService.TrnMainObj.VoucherType===d.Km.SalesOrder&&1===this.userSetting.ENABLE_WSRATE_INSORDER)return void this._alertService.warning("Since Whole Sales Price Is Enabled In Sales Order, Quotation Reference in Sales Order is not Supported!!!");this.genericGridPurchaseOrderSetting=20==this._trnMainService.TrnMainObj.VoucherType?{title:"Quotation",apiEndpoints:`/getPurchaseOrderPagedList/${n}/QT`,defaultFilterIndex:2,columns:[{key:"PONUMBER",title:"Quotation No.",hidden:!1,noSearch:!1},{key:"DATE",title:"Date",hidden:!1,noSearch:!1},{key:"SUPPLIERNAME",title:"Customer Name",hidden:!1,noSearch:!1}]}:{title:"Purchase Order",apiEndpoints:1==this.userSetting.ReceiptBasedGRN?`/getPOPagedListInGRN/${this._trnMainService.TrnMainObj.TRNAC}`:`/getPurchaseOrderPagedList/${n}/PO`,selectAllApiEndpoint:1==this.userSetting.ReceiptBasedGRN?`/getAllPOListInGRNSupplierWise?acid=${this._trnMainService.TrnMainObj.TRNAC}`:"",defaultFilterIndex:0,columns:[{key:1==this.userSetting.ReceiptBasedGRN?"VCHRNO":"PONUMBER",title:"PO Number",hidden:!1,noSearch:!1},{key:1==this.userSetting.ReceiptBasedGRN?"TRNDATE":"DATE",title:"Date",hidden:!1,noSearch:!1},{key:1==this.userSetting.ReceiptBasedGRN?"ACNAME":"SUPPLIERNAME",title:"Supplier Name",hidden:!1,noSearch:!1},{key:"NETAMNT",title:"Amount",hidden:!1,noSearch:!1}]},this.genericGridPurchaseOrder.map(t=>{(t instanceof i.Zl&&!this.userSetting.IsBBSM||t instanceof f&&this.userSetting.IsBBSM)&&t.show()})}}else this._alertService.info("Please select account first!")}onPurchaseOrderSelect(n){n&&(this._trnMainService.TrnMainObj.REFORDBILL=n.PONUMBER,this._trnMainService.TrnMainObj.AdditionalObj.INVOICETYPE="FROMPO",this._trnMainService.TrnMainObj.TRNACName=n.SUPPLIERNAME,this._trnMainService.TrnMainObj.BILLTO=n.SUPPLIERNAME,this._trnMainService.TrnMainObj.BILLTOADD=n.ADDRESS,this._trnMainService.TrnMainObj.BILLTOTEL=n.VATNO,this._trnMainService.TrnMainObj.VATBILL=n.VATBILL,this._trnMainService.TrnMainObj.TRNMODE="credit",this._trnMainService.disableSupplierInfo=!0,this._trnMainService.disableOnCreditSelect=!0,this._trnMainService.disablePaymentTerms=!0,this._trnMainService.disableCustomerInputField=!0,this._trnMainService.TrnMainObj.ProdList=[],this._trnMainService.addRow(),this._trnMainService.TrnMainObj.TOTALSQTY=0,this._trnMainService.TrnMainObj.GROSSAMNT=0,this._trnMainService.TrnMainObj.TAXABLE=0,this._trnMainService.TrnMainObj.NONTAXABLE=0,this._trnMainService.TrnMainObj.VATAMNT=0,this._trnMainService.TrnMainObj.NETWITHOUTROUNDOFF=0,this._trnMainService.TrnMainObj.INVOICETYPE="TRADING",((this._trnMainService.TrnMainObj.VoucherType===d.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType===d.Km.GoodsReceived)&&0!==this.userSetting.PODELIVERYMODE||this._trnMainService.TrnMainObj.VoucherType===d.Km.SalesOrder)&&(this._trnMainService.TrnMainObj.PARAC=n.ACID,this._trnMainService.TrnMainObj.TRNAC=n.ACID,this._trnMainService.TrnMainObj.AdditionalObj.AFTERFLATDISCRATE=n.AFTERFLATDISCRATE,this._trnMainService.TrnMainObj.AdditionalObj.BEFOREFLATDISCRATE=n.BEFOREFLATDISCRATE,this._trnMainService.isRatePartial=this._trnMainService.TrnMainObj.DCRATE>0,(n.AFTERFLATDISCRATE>0||n.BEFOREFLATDISCRATE>0)&&(this._trnMainService.TrnMainObj.DCRATE=n.AFTERFLATDISCRATE>0?n.AFTERFLATDISCRATE:n.BEFOREFLATDISCRATE)),this._trnMainService.TrnMainObj.VoucherType===d.Km.SalesOrder&&(2===this.userSetting.ENABLE_WSRATE_INSORDER&&(this._trnMainService.TrnMainObj.AdditionalObj.LoadWholeSaleRate=0),this._trnMainService.TrnMainObj.SALESMAN=n.SALESMAN,this._trnMainService.TrnMainObj.SALESMANID=n.SALESMANID,this._trnMainService.disableCustomerInfo=!0,0==this._trnMainService.TrnMainObj.DOFULLRETURN&&(this._trnMainService.disableAllFieldinPurchase=!1,this._trnMainService.TrnMainObj.RECEIVEBY=n.CUSTID,this._trnMainService.TrnMainObj.PARAC=n.ACID,this._trnMainService.TrnMainObj.AdditionalObj.AFTERFLATDISCRATE=n.AFTERFLATDISCRATE,this._trnMainService.TrnMainObj.AdditionalObj.BEFOREFLATDISCRATE=n.BEFOREFLATDISCRATE,this._trnMainService.isRatePartial=this._trnMainService.TrnMainObj.DCRATE>0,(n.AFTERFLATDISCRATE>0||n.BEFOREFLATDISCRATE>0)&&(this._trnMainService.TrnMainObj.DCRATE=n.AFTERFLATDISCRATE>0?n.AFTERFLATDISCRATE:n.BEFOREFLATDISCRATE))),this._trnMainService.TrnMainObj.VoucherType===d.Km.Purchase&&1===this._trnMainService.TrnMainObj.DOFULLRETURN&&this._trnMainService.loadDataForPurchaseFromPOORDER(n.PONUMBER,n.DIVISION,n.PHISCALID,"POINPI"),this._trnMainService.TrnMainObj.VoucherType===d.Km.GoodsReceived&&1===this._trnMainService.TrnMainObj.DOFULLRETURN&&this._trnMainService.loadDataForGRNFromPOORDER(n.PONUMBER,n.DIVISION,n.PHISCALID,"POINPI"),this._trnMainService.TrnMainObj.VoucherType===d.Km.SalesOrder&&1===this._trnMainService.TrnMainObj.DOFULLRETURN&&this._trnMainService.loadDataForSalesOrderFromQuotation(n.PONUMBER,n.DIVISION,n.PHISCALID,""),20!=this._trnMainService.TrnMainObj.VoucherType&&1==this._trnMainService.DOFULLRETURN&&(this._trnMainService.disableRateOnPOselect=!0,this._trnMainService.disableItemSelectOnPOselect=!0),(1==this._trnMainService.userSetting.ENABLE_GRN_IN_PI&&"goods-received-note"==this._trnMainService.activeurlpath||0==this._trnMainService.userSetting.ENABLE_GRN_IN_PI&&"add-purchase-invoice"==this._trnMainService.activeurlpath)&&1==this._trnMainService.userSetting.PODELIVERYMODE&&0==this._trnMainService.userSetting.RATECHANGE_IN_POBASEPI&&(this._trnMainService.disableRateOnGRNload=!0),this._trnMainService.TrnMainObj.VoucherType===d.Km.SalesOrder&&0!=this.userSetting.enableCostCenter?setTimeout(()=>{document.getElementById("CCenter")?.focus()}):setTimeout(()=>{document.getElementById("remarksid")?.focus()},500),null!=this._trnMainService.TrnMainObj.ProdList[0].MENUCODE&&this._trnMainService.ReCalculateBillWithNormal())}onImportChalanClick(n){let t="";n.forEach(r=>{t+=`${r},`}),t=t.substring(0,t.length-1),this.fileUploadPopupSettings=Object.assign(new E.s,{title:"GRN Upload",uploadEndpoints:`/importFileForGRN?voucherList=${t}`,sampleFileUrl:"/downloadSampleExcelforMasterMigration?importName=Goods Received Note",allowMultiple:!1,acceptFormat:".xlsx",vchrlist:n,voucherUpload:!0,filename:"GRN Upload Sample"}),this.fileUploadPopup.show()}onfileUpload(n){console.log("data",n),"ok"==n.status&&(this._trnMainService.TrnMainObj.ProdList=[],this._trnMainService.TrnMainObj.ProdList=n.result,this._trnMainService.TrnMainObj.ProdList.forEach(t=>{t.RATE=t.ALTRATE}),this._trnMainService.ReCalculateBillWithNormal())}PurchaseOrderDelete(n){console.log("this._trnMainService.TrnMainObj.REFORDBILL , this._trnMainService.TrnMainObj.VoucherType",null!=this._trnMainService.TrnMainObj.REFORDBILL,this._trnMainService.TrnMainObj.VoucherType==d.Km.SalesOrder),(null!=this._trnMainService.TrnMainObj.REFORDBILL||this._trnMainService.TrnMainObj.VoucherType==d.Km.SalesOrder)&&(this._trnMainService.TrnMainObj.REFORDBILL=null,this._trnMainService.TrnMainObj.AdditionalObj.INVOICETYPE=null,this._trnMainService.TrnMainObj.TRNACName=null,this._trnMainService.TrnMainObj.BILLTO=null,this._trnMainService.TrnMainObj.BILLTOADD=null,this._trnMainService.TrnMainObj.BILLTOTEL=null,this._trnMainService.TrnMainObj.FCurrency=null,this._trnMainService.TrnMainObj.EXRATE=null,this._trnMainService.TrnMainObj.TRNMODE="credit",this._trnMainService.TrnMainObj.TRNAC=null,this._trnMainService.TrnMainObj.PARAC=null,this._trnMainService.TrnMainObj.ProdList=[],this._trnMainService.addRow(),this._trnMainService.TrnMainObj.TOTALSQTY=0,this._trnMainService.TrnMainObj.GROSSAMNT=0,this._trnMainService.TrnMainObj.TAXABLE=0,this._trnMainService.TrnMainObj.NONTAXABLE=0,this._trnMainService.TrnMainObj.VATAMNT=0,this._trnMainService.TrnMainObj.NETWITHOUTROUNDOFF=0,this._trnMainService.disableSupplierInfo=!1,this._trnMainService.disableCustomerInfo=!1,this._trnMainService.disableOnCreditSelect=!1,this._trnMainService.TrnMainObj.VoucherType==d.Km.SalesOrder&&(this._trnMainService.TrnMainObj.TRNMODE=null,this._trnMainService.TrnMainObj.DeliveryDate=null,this._trnMainService.TrnMainObj.DeliveryMiti=null,this._trnMainService.TrnMainObj.ORDEXPDATE=null,this._trnMainService.TrnMainObj.ORDEXPMITI=null,this._trnMainService.onFlatDiscountClear()))}ImportPurchaseOrderEnter(n){if(0!==this.userSetting.IMPORTPOBILLMODE||1==this.userSetting.ENABLE_GRN_IN_IMPORTPI){let t;this.genericGridImportPurchaseOrderSetting={title:"Import Purchase Order",apiEndpoints:`/getImportPurchaseOrderPagedList/${t}/PO`,defaultFilterIndex:0,columns:[{key:"PONUMBER",title:"Import PO Number",hidden:!1,noSearch:!1},{key:"DATE",title:"Date",hidden:!1,noSearch:!1},{key:"SUPPLIERNAME",title:"Supplier Name",hidden:!1,noSearch:!1}]},this.genericGridImportPurchaseOrder.show()}}onImportPurchaseOrderSelect(n){n&&(this._trnMainService.TrnMainObj.REFORDBILL=n.PONUMBER,this._trnMainService.TrnMainObj.AdditionalObj.INVOICETYPE="FROMIMPORTPO",this._trnMainService.TrnMainObj.TRNACName="",this._trnMainService.TrnMainObj.BILLTO=n.SUPPLIERNAME,this._trnMainService.TrnMainObj.BILLTOADD=n.ADDRESS,this._trnMainService.TrnMainObj.BILLTOTEL=n.VATNO,this._trnMainService.TrnMainObj.FCurrency=n.FCurrency,this._trnMainService.TrnMainObj.EXRATE=n.EXRATE,this._trnMainService.TrnMainObj.TRNAC="",this._trnMainService.TrnMainObj.PARAC=n.ACID,this._trnMainService.TrnMainObj.ProdList=[],this._trnMainService.addRow(),this._trnMainService.disableSupplierInfo=!0,this._trnMainService.TrnMainObj.TOTALSQTY=0,this._trnMainService.TrnMainObj.GROSSAMNT=0,this._trnMainService.TrnMainObj.TAXABLE=0,this._trnMainService.TrnMainObj.NONTAXABLE=0,this._trnMainService.TrnMainObj.VATAMNT=0,this._trnMainService.TrnMainObj.NETWITHOUTROUNDOFF=0,this._trnMainService.purchaseOrderQty=null,this._trnMainService.produstWiseOrderUnit="",this._trnMainService.purchaseOrderRate=null,this._trnMainService.TrnMainObj.VoucherType===d.Km.Purchase&&"IMPORT_PURCHASE"===this._trnMainService.TrnMainObj.AdditionalObj.tag&&1===this._trnMainService.TrnMainObj.DOFULLRETURN&&(this._trnMainService.loadDataForImportPurchaseFromIMPORDER(n.PONUMBER,n.DIVISION,n.PhiscalID,"POINPI"),setTimeout(()=>{document.getElementById("paymentTerms").focus()},500)),this._trnMainService.TrnMainObj.VoucherType===d.Km.GoodsReceived&&"GOODS_RECEIVED_NOTE_IMPORT"===this._trnMainService.TrnMainObj.AdditionalObj.tag&&1===this._trnMainService.TrnMainObj.DOFULLRETURN&&(this._trnMainService.loadDataForImportGRNFromIMPORDER(n.PONUMBER,n.DIVISION,n.PhiscalID,"POINPI"),setTimeout(()=>{document.getElementById("paymentTerms").focus()},500)),setTimeout(()=>{document.getElementById("paymentTerms").focus()},100))}ImportPOdelete(n){if(null!=this._trnMainService.TrnMainObj.REFORDBILL)return this._trnMainService.TrnMainObj.REFORDBILL=null,this._trnMainService.TrnMainObj.AdditionalObj.INVOICETYPE=null,this._trnMainService.TrnMainObj.TRNACName=null,this._trnMainService.TrnMainObj.BILLTO=null,this._trnMainService.TrnMainObj.BILLTOADD=null,this._trnMainService.TrnMainObj.BILLTOTEL=null,this._trnMainService.TrnMainObj.FCurrency=null,this._trnMainService.TrnMainObj.EXRATE=null,this._trnMainService.TrnMainObj.TRNMODE=null,this._trnMainService.TrnMainObj.TRNAC=null,this._trnMainService.TrnMainObj.PARAC=null,this._trnMainService.TrnMainObj.ProdList=[],this._trnMainService.addRow(),this._trnMainService.TrnMainObj.TOTALSQTY=0,this._trnMainService.TrnMainObj.GROSSAMNT=0,this._trnMainService.TrnMainObj.TAXABLE=0,this._trnMainService.TrnMainObj.NONTAXABLE=0,this._trnMainService.TrnMainObj.VATAMNT=0,this._trnMainService.TrnMainObj.NETWITHOUTROUNDOFF=0,this._trnMainService.disableSupplierInfo=!1,void(this._trnMainService.disableCustomerInfo=!1)}onImportGRNSelect(n){this._loadingService.show("Loading details, please wait..."),this.masterService.LoadTransaction(n.GRNNUMBER,n.DIVISION,n.PhiscalID,"","","","","isFilterFiscalID").subscribe(t=>{if("ok"==t.status){this._loadingService.hide();const r=T(67816);this._trnMainService.TrnMainObj=t.result,this._trnMainService.TrnMainObj.Mode="NEW",this._trnMainService.TrnMainObj.guid=r(),this._trnMainService.TrnMainObj.REFORDBILL=n.GRNNUMBER,this._trnMainService.TrnMainObj.VoucherType=d.Km.Purchase,this._trnMainService.TrnMainObj.VoucherPrefix="PI",this._trnMainService.TrnMainObj.TRNMODE=t.result.TRNMODE,this._trnMainService.TrnMainObj.CNDN_MODE=10,this._trnMainService.TrnMainObj.AdditionalObj.tag="IMPORT_PURCHASE",this._trnMainService.TrnMainObj.INVOICETYPE="TRADING",this._trnMainService.TrnMainObj.TRNAC=null,this._trnMainService.TrnMainObj.TRNACName=null,this._trnMainService.TrnMainObj.TRN_DATE=null==t.result.TRN_DATE?"":t.result.TRN_DATE.toString().substring(0,10),this.masterService.getCurrentDate().subscribe(h=>{this._trnMainService.TrnMainObj.TRNDATE=h.Date.substring(0,10),this._trnMainService.TrnMainObj.BSDATE=this._trnMainService.getBsDate(this._trnMainService.TrnMainObj.TRNDATE)}),this._trnMainService.getVoucherNumber(),this._trnMainService.TrnMainObj.GROSSAMNT=this._trnMainService.TrnMainObj.VoucherType==d.Km.Purchase&&1==t.result.VATBILL?t.result.NONTAXABLE:t.result.TAXABLE,this._trnMainService.TrnMainObj.TOTALSQTY=0,this._trnMainService.TrnMainObj.ProdList.forEach(h=>{this._trnMainService.TrnMainObj.TOTALSQTY+=h.Quantity});for(let h in this._trnMainService.TrnMainObj.ProdList)this._trnMainService.TrnMainObj.ProdList[h].MFGDATE=null==this._trnMainService.TrnMainObj.ProdList[h].MFGDATE?"":0==this.userSetting.enableDayWiseMfgEXPDate?this._trnMainService.TrnMainObj.ProdList[h].MFGDATE.toString().substring(0,7):this._trnMainService.TrnMainObj.ProdList[h].MFGDATE.toString().substring(0,10),this._trnMainService.TrnMainObj.ProdList[h].EXPDATE=null==this._trnMainService.TrnMainObj.ProdList[h].EXPDATE?"":0==this.userSetting.enableDayWiseMfgEXPDate?this._trnMainService.TrnMainObj.ProdList[h].EXPDATE.toString().substring(0,7):this._trnMainService.TrnMainObj.ProdList[h].EXPDATE.toString().substring(0,10);this._trnMainService.ReCalculateBillWithNormal(),this._trnMainService.disableOnGRNload=!0,this._trnMainService.disableSupplierInfo=!0,""==this._trnMainService.activeurlpath&&(this._trnMainService.disableRateOnPOselect=!0,this._trnMainService.disableItemSelectOnPOselect=!0);let a=this.masterService.userProfile.roleRights.find(h=>"ALLOWRATECHANGEINPI"==h.right);(0==this.userSetting.RATECHANGE_IN_POBASEPI||1==this.userSetting.RATECHANGE_IN_POBASEPI&&0==a.value)&&(this._trnMainService.disableRateOnGRNload=!0),this._trnMainService.addRowForAdditionalProdList()}},t=>{this._loadingService.hide(),this._alertService.error(t._body)},()=>{this._loadingService.hide()})}onGRNSelect(n){this._loadingService.show("Loading details, please wait..."),1==this.userSetting.EnableGRNInPIForCargo&&1==this.userSetting.ENABLE_GRN_IN_PI?this.onGrnSelectForCargo(n):this.onGRNSelectForNonCargo(n)}onGrnSelectForCargo(n){this.masterService.LoadTransactionForCargo(n.VCHRNO).subscribe(t=>{if("ok"==t.status){this._loadingService.hide();const r=T(67816);this._trnMainService.TrnMainObj.Mode="NEW",this._trnMainService.TrnMainObj.guid=r(),this._trnMainService.TrnMainObj.REFORDBILL=t.result[0].VCHRNO,this._trnMainService.TrnMainObj.VoucherType=d.Km.Purchase,this._trnMainService.TrnMainObj.VoucherPrefix="PI",this._trnMainService.TrnMainObj.TRNMODE=t.result.TRNMODE,this._trnMainService.TrnMainObj.CNDN_MODE=0,this._trnMainService.TrnMainObj.ProdList=t.result,this._trnMainService.TrnMainObj.AdditionalObj.tag="LOCAL_PURCHASE",console.log("Trn Main",this._trnMainService.TrnMainObj.ProdList,this._trnMainService.TrnMainObj.REFORDBILL,t.result[0].BOOKINGID,this._trnMainService.TrnMainObj.REFBILL,this._trnMainService.TrnMainObj.COSTCENTER,this._trnMainService.nullToZeroConverter(n.BILLDATE)),this._trnMainService.getVoucherNumber(),this._trnMainService.TrnMainObj.TRN_DATE=0!=this._trnMainService.nullToZeroConverter(n.BILLDATE)?n.BILLDATE:n.TRNDATE,this.getNepaliDate(),this._trnMainService.TrnMainObj.REFBILL=0!=this._trnMainService.nullToZeroConverter(n.BILLNO)?n.BILLNO:"",this.masterService.getAllCostCenter().subscribe(h=>{if(h){this.costlists=h;let m=this.costlists.filter(C=>C.COSTCENTERNAME==t.result[0].BOOKINGID);m&&(this._trnMainService.TrnMainObj.COSTCENTER=m[0].CCID)}},h=>{this.costlists=[]}),this._trnMainService.TrnMainObj.GROSSAMNT=this._trnMainService.TrnMainObj.VoucherType==d.Km.Purchase&&1==t.result.VATBILL?t.result.NONTAXABLE:t.result.TAXABLE,this._trnMainService.TrnMainObj.TOTALSQTY=0,this._trnMainService.TrnMainObj.ProdList.forEach(h=>{this._trnMainService.TrnMainObj.TOTALSQTY+=h.Quantity});for(let h in this._trnMainService.TrnMainObj.ProdList)this._trnMainService.TrnMainObj.ProdList[h].MFGDATE=null==this._trnMainService.TrnMainObj.ProdList[h].MFGDATE?"":0==this.userSetting.enableDayWiseMfgEXPDate?this._trnMainService.TrnMainObj.ProdList[h].MFGDATE.toString().substring(0,7):this._trnMainService.TrnMainObj.ProdList[h].MFGDATE.toString().substring(0,10),this._trnMainService.TrnMainObj.ProdList[h].EXPDATE=null==this._trnMainService.TrnMainObj.ProdList[h].EXPDATE?"":0==this.userSetting.enableDayWiseMfgEXPDate?this._trnMainService.TrnMainObj.ProdList[h].EXPDATE.toString().substring(0,7):this._trnMainService.TrnMainObj.ProdList[h].EXPDATE.toString().substring(0,10);this._trnMainService.ReCalculateBillWithNormal(),this._trnMainService.disableSupplierInfo=!0,this._trnMainService.disableCostCenterForCargo=!0;let a=this.masterService.userProfile.roleRights.find(h=>"ALLOWRATECHANGEINPI"==h.right);(0==this.userSetting.RATECHANGE_IN_POBASEPI||1==this.userSetting.RATECHANGE_IN_POBASEPI&&0==a.value)&&(this._trnMainService.disableRateOnGRNload=!0)}},t=>{this._loadingService.hide(),this._alertService.error(t)},()=>{this._loadingService.hide()})}onGRNSelectForNonCargo(n){this.masterService.LoadTransaction(n.GRNNUMBER,n.DIVISION,n.PhiscalID,"","","","","isFilterFiscalID").subscribe(t=>{if("ok"==t.status){this._loadingService.hide();const r=T(67816);this._trnMainService.TrnMainObj=t.result,this._trnMainService.TrnMainObj.Mode="NEW",this._trnMainService.TrnMainObj.guid=r(),this._trnMainService.TrnMainObj.REFORDBILL=n.GRNNUMBER,this._trnMainService.TrnMainObj.VoucherType=d.Km.Purchase,this._trnMainService.TrnMainObj.VoucherPrefix="PI",this._trnMainService.TrnMainObj.TRNMODE=t.result.TRNMODE,this._trnMainService.TrnMainObj.CNDN_MODE=0,this._trnMainService.TrnMainObj.AdditionalObj.tag="LOCAL_PURCHASE",this._trnMainService.TrnMainObj.INVOICETYPE="TRADING",this._trnMainService.TrnMainObj.TRN_DATE=null==t.result.TRN_DATE?"":t.result.TRN_DATE.toString().substring(0,10),this.masterService.getCurrentDate().subscribe(h=>{this._trnMainService.TrnMainObj.TRNDATE=h.Date.substring(0,10),this._trnMainService.TrnMainObj.BSDATE=this._trnMainService.getBsDate(this._trnMainService.TrnMainObj.TRNDATE)}),this._trnMainService.getVoucherNumber(),this._trnMainService.TrnMainObj.GROSSAMNT=this._trnMainService.TrnMainObj.VoucherType==d.Km.Purchase&&1==t.result.VATBILL?t.result.NONTAXABLE:t.result.TAXABLE,this._trnMainService.TrnMainObj.TOTALSQTY=0,this._trnMainService.TrnMainObj.ProdList.forEach(h=>{this._trnMainService.TrnMainObj.TOTALSQTY+=h.Quantity});for(let h in this._trnMainService.TrnMainObj.ProdList)this._trnMainService.TrnMainObj.ProdList[h].MFGDATE=null==this._trnMainService.TrnMainObj.ProdList[h].MFGDATE?"":0==this.userSetting.enableDayWiseMfgEXPDate?this._trnMainService.TrnMainObj.ProdList[h].MFGDATE.toString().substring(0,7):this._trnMainService.TrnMainObj.ProdList[h].MFGDATE.toString().substring(0,10),this._trnMainService.TrnMainObj.ProdList[h].EXPDATE=null==this._trnMainService.TrnMainObj.ProdList[h].EXPDATE?"":0==this.userSetting.enableDayWiseMfgEXPDate?this._trnMainService.TrnMainObj.ProdList[h].EXPDATE.toString().substring(0,7):this._trnMainService.TrnMainObj.ProdList[h].EXPDATE.toString().substring(0,10);this._trnMainService.ReCalculateBillWithNormal(),this._trnMainService.disableOnGRNload=!0,this._trnMainService.disableSupplierInfo=!0;let a=this.masterService.userProfile.roleRights.find(h=>"ALLOWRATECHANGEINPI"==h.right);(0==this.userSetting.RATECHANGE_IN_POBASEPI||1==this.userSetting.RATECHANGE_IN_POBASEPI&&0==a.value)&&(this._trnMainService.disableRateOnGRNload=!0),this._trnMainService.addRowForAdditionalProdList(),this._trnMainService.disableAllFieldinPurchase=!0}},t=>{this._loadingService.hide(),this._alertService.error(t._body)},()=>{this._loadingService.hide()})}OKLoadPurchaseOrder(n){for(let t in n)this._trnMainService.TrnMainObj.ProdList[t].MENUCODE=this._trnMainService.TrnMainObj.PODetailList[t].MENUCODE,this._trnMainService.TrnMainObj.ProdList[t].MCODE=this._trnMainService.TrnMainObj.PODetailList[t].MCODE,this._trnMainService.TrnMainObj.ProdList[t].ITEMDESC=this._trnMainService.TrnMainObj.PODetailList[t].DESCA,this._trnMainService.TrnMainObj.ProdList[t].ALTUNIT=this._trnMainService.TrnMainObj.PODetailList[t].UNIT,this._trnMainService.TrnMainObj.ProdList[t].BASEUNIT=this._trnMainService.TrnMainObj.PODetailList[t].UNIT,this._trnMainService.TrnMainObj.ProdList[t].ALTERNATEQUANTIY=this._trnMainService.TrnMainObj.PODetailList[t].DELIVERQTY,this._trnMainService.TrnMainObj.ProdList[t].ALTRATE=this._trnMainService.TrnMainObj.PODetailList[t].DELIVERRATE,this._trnMainService.TrnMainObj.ProdList[t].RATE=this._trnMainService.TrnMainObj.PODetailList[t].DELIVERRATE,this._trnMainService.TrnMainObj.ProdList[t].AMOUNT=this._trnMainService.TrnMainObj.PODetailList[t].AMOUNT,this._trnMainService.TrnMainObj.ProdList[t].NETAMOUNT=this._trnMainService.TrnMainObj.PODetailList[t].AMOUNT,this._trnMainService.TrnMainObj.ProdList[t].NETAMNT=this._trnMainService.TrnMainObj.PODetailList[t].AMOUNT,this._trnMainService.TrnMainObj.ProdList[t].MFGDATE=this._trnMainService.TrnMainObj.PODetailList[t].MFGDATE,this._trnMainService.TrnMainObj.ProdList[t].EXPDATE=this._trnMainService.TrnMainObj.PODetailList[t].EXPIRYDATE,this._trnMainService.TrnMainObj.ProdList[t].INDDISCOUNTRATE=this._trnMainService.TrnMainObj.PODetailList[t].DISCOUNT_RATE,this._trnMainService.TrnMainObj.ProdList[t].INDDISCOUNT=this._trnMainService.TrnMainObj.PODetailList[t].DISCOUNT_AMOUNT,this._trnMainService.TrnMainObj.ProdList[t].CRATE=this._trnMainService.TrnMainObj.PODetailList[t].NET_RATE,this._trnMainService.TrnMainObj.ProdList[t].SELLRATEBEFORETAX=this._trnMainService.TrnMainObj.PODetailList[t].SELLRATEBEFORETAX,this._trnMainService.TrnMainObj.ProdList[t].W_SELLRATEBEFORETAX=this._trnMainService.TrnMainObj.PODetailList[t].W_SELLRATEBEFORETAX,this._trnMainService.TrnMainObj.ProdList[t].isPurchaseOrderItem=!0,this._trnMainService.getAllUnitsOfItem(t),this._trnMainService.calculateNetRATE(t),this._trnMainService.addRow();this._trnMainService.ReCalculateBillWithNormal(),this._trnMainService.TrnMainObj.ProdList.splice(-1),this.LoadPurchaseOrder.hide()}showPopup(){this._trnMainService.TrnMainObj.AdditionalObj.PONO&&this.LoadPurchaseOrder.show()}onCurrenyChange(n){let t=this.masterService.Currencies.filter(r=>r.CURNAME==n)[0];console.log("SELECTEDCURRENCY",t),this._trnMainService.TrnMainObj.EXRATE=t.EXRATE}onImportAdvanceEnterClicked(){null==this.paymentTermAcid||void 0===this.paymentTermAcid||""===this.paymentTermAcid?(this.getSupplierList(),this.genericGridSupplier.show()):(this.gridPopupSettingsForimportAdvanceAc={title:"Import Advance A/C",apiEndpoints:`/getImportAdvanceAcPagedList/${this.paymentTermAcid}`,defaultFilterIndex:0,columns:[{key:"ACNAME",title:"A/C Name",hidden:!1,noSearch:!1},{key:"ACID",title:"ACID",hidden:!0,noSearch:!0}]},this.importAdvanceAcGrid.show())}onImportAdvanceItemClick(n){console.log("r1",this._trnMainService.TrnMainObj.TRNACName),this._trnMainService.TrnMainObj.TRNAC=n.ACID,this._trnMainService.TrnMainObj.TRNACName=n.ACNAME,console.log("acname",this._trnMainService.TrnMainObj.TRNACName),this.masterService.focusAnyControl(""==this._trnMainService.TrnMainObj.REFORDBILL?"remarksid":"currency")}updown(n){"Insert"===n.code&&("NEW"==this._trnMainService.TrnMainObj.Mode||"EDIT"==this._trnMainService.TrnMainObj.Mode)&&(n.preventDefault(),this._trnMainService.TrnMainObj.VoucherType==d.Km.SalesOrder&&0==this.userSetting?.EnableCusProfileInSOrder||(1==this.showPartyMasterPopup&&this.openQuickPartyMasterPopup(),1==this.showInSupplierPopup&&this.openQuickPartyInSupplier(),1==this.showCustomerProfilePopup&&this.openQuickCusProfilePopup())),"Escape"==n.code&&(n.preventDefault(),1==this._trnMainService.showNegativeBillingAuthForMain&&this.closeModal())}getCustomersList(n="0"){this.gridPopupSettingsForCustomer={title:"Customers",apiEndpoints:`/getAccountPagedListByPType/PA/C/${n}`,defaultFilterIndex:this.userSetting.FilterIndexForCustomer,columns:[{key:"ACNAME",title:"NAME",hidden:!1,noSearch:!1},{key:"ACCODE",title:"CODE",hidden:!1,noSearch:!1},{key:"ADDRESS",title:"ADDRESS",hidden:!1,noSearch:!1},{key:"EMAIL",title:"EMAIL",hidden:!1,noSearch:!1}]},this.genericGridCustomer.show()}GetShippingAddress(n){this.masterService.getAllShippingList(n).subscribe(t=>{t&&(this._trnMainService.shippingAddress=t.result,this._trnMainService.TrnMainObj.ShippingLocation=this._trnMainService.shippingAddress.find(r=>1==r.ISDEFAULT)?.NAME)},t=>{this._trnMainService.shippingAddress=[]})}GetShippingLocation(n){this.masterService.getShippingLocationList(n).subscribe(t=>{t&&(this._trnMainService.shippingAddress=t.result)},t=>{this._trnMainService.shippingAddress=[]})}shippinglocationVoucher(n){console.log("event",n),this._trnMainService.TrnMainObj.ShippingLocation=n.target.value}onCustomerSelected(n){if(1==this.userSetting.EnableContractPrice&&(this._trnMainService.TrnMainObj.VoucherType==d.Km.TaxInvoice||this._trnMainService.TrnMainObj.VoucherType==d.Km.PerformaSalesInvoice||this._trnMainService.TrnMainObj.VoucherType==d.Km.SalesOrder)&&this._trnMainService.TrnMainObj.PARAC&&this._trnMainService.TrnMainObj.ProdList.find(t=>t.MCODE)&&n.ACID!=this._trnMainService.TrnMainObj.PARAC&&n.CUSTID!=this._trnMainService.TrnMainObj.PARAC){if(!confirm("Are you sure you want to change customer? This will empty product selection grid."))return;this._trnMainService.TrnMainObj.ProdList=[],this._trnMainService.addRow()}if(this._trnMainService.TrnMainObj.VoucherType==d.Km.SalesOrder&&1===this._trnMainService.userSetting.EnableShippingAddress&&this.GetShippingLocation(n.CUSTID),this._trnMainService.TrnMainObj.VoucherType==d.Km.SalesOrder&&!this._trnMainService.TrnMainObj.TRNMODE&&0==this._trnMainService.userSetting.EnableCusProfileInSOrder&&(this._trnMainService.TrnMainObj.TRNAC=n.ACID,this._trnMainService.TrnMainObj.TRNMODE="credit"),this._trnMainService.TrnMainObj.MEMBERNO=n.CUSTID,this._trnMainService.TrnMainObj.RECEIVEBY=n.CUSTID,this._trnMainService.TrnMainObj.PARAC=n.ACID,this._trnMainService.TrnMainObj.MEMBERNAME=n.CUSTNAME,this._trnMainService.TrnMainObj.SCHEMENAME=n.SCHEMEID,this._trnMainService.TrnMainObj.SALESMAN=n.SALESMAN,this._trnMainService.TrnMainObj.SALESMANID=n.SALESMANID,this._trnMainService.TrnMainObj.CREDITLIMIT=n.CRLIMIT,"B2C"==this.userSetting.CompanyType&&14==this._trnMainService.TrnMainObj.VoucherType&&"cash"==this._trnMainService.TrnMainObj.TRNMODE)return this._trnMainService.TrnMainObj.BILLTO=n.CUSTNAME,this._trnMainService.TrnMainObj.BILLTOADD=n.ADDRESS,this._trnMainService.TrnMainObj.BILLTOMOB=n.MOBILENO,this._trnMainService.TrnMainObj.BILLTOTEL=n.VATNO,this._trnMainService.vatFreeBill(),null!=this._trnMainService.TrnMainObj.ProdList[0].MENUCODE&&this._trnMainService.ReCalculateBillWithNormal(),void document.getElementById("remarksid").focus();this._trnMainService.TrnMainObj.PRICEMODE=n.PRICEMODE?n.PRICEMODE:1,this._trnMainService.TrnMainObj.BILLTO=n.ACNAME,this._trnMainService.TrnMainObj.BILLTOTEL=n.VATNO,this._trnMainService.TrnMainObj.BILLTOADD=n.ADDRESS,this._trnMainService.TrnMainObj.AdditionalObj.TRNTYPE=null==n.PSTYPE?null:n.PSTYPE.toLowerCase(),this._trnMainService.TrnMainObj.PARTY_ORG_TYPE=n.ORG_TYPE,this._trnMainService.TrnMainObj.CREDITDAYS=n.CRPERIOD,this._trnMainService.TrnMainObj.CUS_FIX_DISCOUNT_PER=n.CUS_FIX_DISCOUNT_PER,this._trnMainService.TrnMainObj.CUS_Remote_Discount=n.CUS_Remote_Discount,this._trnMainService.TrnMainObj.CUS_Remote_Discount=n.CUS_Remote_Discount,this._trnMainService.getCustomerwiseCreditLimit(this._trnMainService.TrnMainObj.PARAC,this._trnMainService.TrnMainObj.TRN_DATE),this._trnMainService.vatFreeBill(),null!=this._trnMainService.TrnMainObj.ProdList[0].MENUCODE&&this._trnMainService.ReCalculateBillWithNormal(),document.getElementById("remarksid").focus()}salesManEnterCommand(){this.getSalesManList(),this.genericGridSalesMan.show()}getSalesManList(){this.gridPopupSettingsForSalesMan=this.masterService.getGenericGridPopUpSettings("SalesManList")}onSalesManSelect(n){this._trnMainService.TrnMainObj.SALESMANID=n.SALESMANID,this._trnMainService.TrnMainObj.SALESMAN=n.NAME,console.log("trnmain on sales man slect",this._trnMainService.TrnMainObj.SALESMANID,this._trnMainService.TrnMainObj.SALESMAN),this._trnMainService.TrnMainObj.VoucherType==d.Km.TaxInvoice||this._trnMainService.TrnMainObj.VoucherType==d.Km.CreditNote?this.masterService.focusAnyControl("barcode0"):this._trnMainService.TrnMainObj.VoucherType==d.Km.SalesOrder&&this.masterService.focusAnyControl("itemDesc0")}salesmanDelete(){null!=this._trnMainService.TrnMainObj.SALESMAN&&(this._trnMainService.TrnMainObj.SALESMAN=null,this._trnMainService.TrnMainObj.SALESMANID=null)}focusToExcRate(n){n.preventDefault(),this.masterService.focusAnyControl("exchangerateid")}closeModal(){this._trnMainService.showNegativeBillingAuthForMain=!1,this._trnMainService.TrnMainObj.VoucherType==d.Km.DebitNote&&(this._trnMainService.TrnMainObj.ProdList=this._trnMainService.TrnMainObj.ProdList.filter(n=>n.Quantity<=n.STOCK))}NegativeBillAuthConfirm(){this._loadingService.show("Authorizing Please wait"),this.masterService.NegativeBillingAuth(this.NegativeBillAuthObj).subscribe(n=>{this.NegativeBillAuthObj={username:"",password:"",remarks:""},console.log("Negative stock responee",n),this._loadingService.hide(),"ok"==n.status?"ALLOW"==n.result?(this._alertService.success("User Right Granted !"),this._trnMainService.showNegativeBillingAuthForMain=!1):(this._alertService.warning("this user has no rights to do negative stock billing !"),this._trnMainService.showNegativeBillingAuthForMain=!1,this._trnMainService.TrnMainObj.VoucherType==d.Km.DebitNote&&(this._trnMainService.TrnMainObj.ProdList=this._trnMainService.TrnMainObj.ProdList.filter(t=>t.Quantity<=t.STOCK))):(this._alertService.warning("Authorization Failed"),this._trnMainService.showNegativeBillingAuthForMain=!1,this._trnMainService.TrnMainObj.VoucherType==d.Km.DebitNote&&(this._trnMainService.TrnMainObj.ProdList=this._trnMainService.TrnMainObj.ProdList.filter(t=>t.Quantity<=t.STOCK)))},n=>{this._loadingService.hide(),this._alertService.error(n)})}DoFullReturn(n){if(this._trnMainService.TrnMainObj.VoucherType===d.Km.DebitNote&&(null==this._trnMainService.TrnMainObj.REFBILL||""==this._trnMainService.TrnMainObj.REFBILL||null==this._trnMainService.TrnMainObj.REFBILL)||(this._trnMainService.TrnMainObj.VoucherType===d.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType===d.Km.GoodsReceived)&&(null==this._trnMainService.TrnMainObj.REFORDBILL||""==this._trnMainService.TrnMainObj.REFORDBILL||null==this._trnMainService.TrnMainObj.REFORDBILL))return;if(this.checkDNFullReturn())return this._alertService.warning("Cannot change full return status on Edit. This Debit Note Can only be reversed"),void(this._trnMainService.TrnMainObj.DOFULLRETURN=1);this._trnMainService.DOFULLRETURN=this._trnMainService.TrnMainObj.DOFULLRETURN;const t=0==this._trnMainService.TrnMainObj.DOFULLRETURN?1:0;n||(confirm("Do you want to switch to Partial Return Mode?")?(this._trnMainService.TrnMainObj.DOFULLRETURN=0,this.ConfirmChangeReturnMode(n),this._trnMainService.callPipe=!this._trnMainService.callPipe):setTimeout(()=>{this._trnMainService.TrnMainObj.DOFULLRETURN=t}))}checkDNFullReturn(){return"EDIT"==this._trnMainService.TrnMainObj.Mode&&"add-debitnote-itembase"==this._trnMainService.activeurlpath&&this._trnMainService.TrnMainObj.VoucherType===d.Km.DebitNote}ConfirmChangeReturnMode(n){0==n&&(this._trnMainService.DOFULLRETURN=0,1==this._trnMainService.TrnMainObj.isDeliveryOrder&&(this._trnMainService.TrnMainObj.MWAREHOUSE=null),this._trnMainService.isRatePartial=this._trnMainService.TrnMainObj.DCRATE>0,this._trnMainService.TrnMainObj.DCRATE=0!=this._trnMainService.nullToZeroConverter(this.ReffBillObj.AFTERFLATDISCRATE)?this.ReffBillObj.AFTERFLATDISCRATE:this.ReffBillObj.BEFOREFLATDISCRATE,this._trnMainService.TrnMainObj.FLATDCAMNT=0)}onChangeOnMixedPurchaseType(n){1==this.userSetting.EnableNonTradingModule&&(this._trnMainService.TrnMainObj.VoucherType==d.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType==d.Km.DebitNote)&&"asset-purchase-invoice"!==this.activeurlpath&&("NONTRADING"==this._trnMainService.TrnMainObj.INVOICETYPE?this._trnMainService.TrnMainObj.ProdList=[]:0==this._trnMainService.TrnMainObj.ProdList.length&&this._trnMainService.addRow(),"TRADING"==this._trnMainService.TrnMainObj.INVOICETYPE?this._trnMainService.TrnMainObj.AdditionProdList=[]:0==this._trnMainService.TrnMainObj.AdditionProdList.length&&this._trnMainService.addRowForAdditionalProdList())}disableCostCentreforRefPIWiseLoad(){if(1==this.userSetting.REFBILLCOMPULSORINDNOTE&&"add-debitnote-itembase"==this.activeurlpath)return!0}showPurchaseType(){if("add-purchase-invoice"==this.activeurlpath||this._trnMainService.TrnMainObj.VoucherType==d.Km.DebitNote||this._trnMainService.TrnMainObj.VoucherType==d.Km.ReverseDebitNote)return"add-purchase-invoice"!=this.activeurlpath||0===this.userSetting.ENABLE_GRN_IN_PI&&0===this.userSetting.PODELIVERYMODE||null===this._trnMainService.TrnMainObj.REFORDBILL||""===this._trnMainService.TrnMainObj.REFORDBILL||void 0===this._trnMainService.TrnMainObj.REFORDBILL||1===this.userSetting.ENABLE_GRN_IN_PI&&null!==this._trnMainService.TrnMainObj.REFORDBILL}onAddNewSupplier(){this._trnMainService.TrnMainObj.VoucherType==d.Km.SalesOrder&&1==this.userSetting.EnableCusProfileInSOrder?this.openQuickCusProfilePopup():this.CreateQuickParty.show()}onAddNewShippingLocation(){if(!this._trnMainService.TrnMainObj.BILLTO)return void this._alertService.info("Customer is not selected");const n=this._trnMainService.TrnMainObj.ShippingLocation?this._trnMainService.shippingAddress.find(r=>r.SHIPPING_ID===this._trnMainService.TrnMainObj.ShippingLocation):null;this.dialog.open(de,{data:{CUSTID:this._trnMainService.TrnMainObj.MEMBERNO,shippingLocation:n,mode:this._trnMainService.TrnMainObj.Mode}}).afterClosed().subscribe(r=>{r&&(this.GetShippingLocation(this._trnMainService.TrnMainObj.MEMBERNO),this._trnMainService.TrnMainObj.ShippingLocation=r)})}showAddButton(){return!!((this._trnMainService.TrnMainObj.VoucherType==d.Km.Purchase&&0==this.userSetting.ENABLE_GRN_IN_PI&&0==this.userSetting.PODELIVERYMODE||"goods-received-note"===this.activeurlpath)&&1==this._trnMainService.userProfile.ISMAIN&&"view"!=this._trnMainService.TrnMainObj.Mode?.toLowerCase()&&this.onPurchaseOrderSelect&&!this._trnMainService.disableCustomerInputField||this._trnMainService.TrnMainObj.VoucherType==d.Km.SalesOrder&&1==this.userSetting.EnableCusProfileInSOrder&&"view"!=this._trnMainService.TrnMainObj.Mode?.toLowerCase())}hideSalesman(){return 0!=this.userSetting.enablesalesman}applyFlatDiscount(n){this._trnMainService.TrnMainObj.TOTALFLATDISCOUNT=this._trnMainService.TrnMainObj.FLATDCAMNT?this._trnMainService.TrnMainObj.FLATDCAMNT:0,this._trnMainService.nullToZeroConverter(this._trnMainService.TrnMainObj.FLATDCAMNT)>0||this._trnMainService.nullToZeroConverter(this._trnMainService.TrnMainObj.DCRATE)>0&&this._trnMainService.nullToZeroConverter(this._trnMainService.TrnMainObj.DCRATE)<100?this._trnMainService.showFlatDiscOption=!0:this._trnMainService.beforeDiscFlat()}validateFlatDiscount(n){let t;return t=n instanceof Event?this._trnMainService.nullToZeroConverter(n.target.value):this._trnMainService.nullToZeroConverter(n),t>100?(this._trnMainService.TrnMainObj.DCRATE=0,void this._alertService.info("Flat discount rate cannot be greater than 100%")):t<0?(this._alertService.info("Flat discount rate cannot be less than 0%"),void(this._trnMainService.TrnMainObj.DCRATE=0)):void(0==this._trnMainService.nullToZeroConverter(t)&&this._trnMainService.discountsOnFlatZero())}validateFlatDiscountAmount(n){let t;t=n instanceof Event?this._trnMainService.nullToZeroConverter(n.target.value):this._trnMainService.nullToZeroConverter(n);let r=this._trnMainService.nullToZeroConverter(this._trnMainService.TrnMainObj.NETAMNT/1.13);return t>=r?(this._alertService.info(`Flat discount amount cannot be greater than or equal to total amount: ${r}`),void(this._trnMainService.TrnMainObj.FLATDCAMNT=0)):t<0?(this._alertService.info("Flat discount amount cannot be less than 0"),void(this._trnMainService.TrnMainObj.FLATDCAMNT=0)):void(0==this._trnMainService.nullToZeroConverter(t)&&this._trnMainService.discountsOnFlatZero())}showDiscountAddButton(){if(this._trnMainService.TrnMainObj.VoucherType==d.Km.SalesOrder&&1==this.userSetting.enableAdditionalFlatDiscountsInSales)return!0}onClickAddDiscounts(){if(this.totalIndividualDiscount=this._trnMainService.TrnMainObj.ProdList.reduce((n,t)=>n+(t.INDDISCOUNT??0),0),this.previousTotalIndividualDiscount=this.masterService.getPreviousTotalIndividualDiscount()?this.masterService.getPreviousTotalIndividualDiscount():0,this._trnMainService.TrnMainObj.GROSSAMNT)return"VIEW"==this._trnMainService.TrnMainObj.Mode?(this.savedDiscountObj=this._trnMainService.TrnMainObj.DiscountObj,this.onAddNewDiscounts(),!0):"EDIT"==this._trnMainService.TrnMainObj.Mode&&this._trnMainService.TrnMainObj.VoucherType==d.Km.SalesOrder?(this._trnMainService.discountSelectionEdit=!0,this.savedDiscountObj=this._trnMainService.TrnMainObj.DiscountObj,this.onAddNewDiscounts(),!0):this.totalIndividualDiscount?"overwrite"===this.flatDiscountType&&0==this._trnMainService.nullToZeroConverter(this._trnMainService.TrnMainObj.discountObj?.totalDiscountAmount)?(this._trnMainService.onFlatDiscountClear(),this.savedDiscountObj=this._trnMainService.TrnMainObj.DiscountObj,this.onAddNewDiscounts(),!0):this.savedDiscountObj?.discountRowDetail?.find(n=>n.discountAmount)&&this.previousTotalIndividualDiscount==this.totalIndividualDiscount?(this.onAddNewDiscounts(),!0):(this.masterService.setPreviousTotalIndividualDiscount(this.totalIndividualDiscount),void(this.showAdditionalFlatDiscountPopUp=!0)):(this.flatDiscountType="after",this.onAddNewDiscounts(),!0);this._alertService.info("Please Select Product to apply additional discount!!!")}onAddNewDiscounts(){this.showAdditionalFlatDiscountPopUp=!1,!this.flatDiscountType&&"NEW"!=this._trnMainService.TrnMainObj.Mode&&(this.flatDiscountType=this._trnMainService.TrnMainObj.AdditionalObj.BEFOREFLATDISCRATE?"before":"after"),this._trnMainService.TrnMainObj.DiscountObj?.discountRowDetail.some(t=>t.discountAmount>0&&null!=t.discountAmount)||(this.savedDiscountObj={}),0===this._trnMainService.TrnMainObj.FLATDCAMNT&&(this.savedDiscountObj={}),this.dialog.open(Me.C,{data:{object:this._trnMainService.TrnMainObj,grossAmount:this._trnMainService.TrnMainObj.GROSSAMNT,discountAmount:this._trnMainService.TrnMainObj.FLATDCAMNT,discountRate:this._trnMainService.TrnMainObj.DCRATE,ecsAmount:this._trnMainService.TrnMainObj.TOTALECS,listDiscounts:this.savedDiscountObj?.discountRowDetail?.find(t=>t.discountAmount>0||null!=t.discountAmount)?this.savedDiscountObj:this._trnMainService.TrnMainObj.DiscountObj,totalIndDiscount:this.totalIndividualDiscount,flatDisCalcType:this.flatDiscountType,formMode:this._trnMainService.TrnMainObj.Mode,urlPath:this.activeurlpath}}).afterClosed().subscribe(t=>{null===t?this._trnMainService.TrnMainObj.DiscountObj=null:(this._trnMainService.TrnMainObj.DiscountObj=t,this._trnMainService.TrnMainObj.FLATDCAMNT=t.totalDiscountAmount?t.totalDiscountAmount:0,this._trnMainService.TrnMainObj.TOTALFLATDISCOUNT=t.totalDiscountAmount?t.totalDiscountAmount:0,"after"===this.flatDiscountType?this._trnMainService.afterDiscFlat():"before"===this.flatDiscountType?this._trnMainService.beforeDiscFlat():"overwrite"===this.flatDiscountType&&this._trnMainService.onApplyClicked(),this.savedDiscountObj="overwrite"!=this.flatDiscountType?t:this._trnMainService.TrnMainObj.DiscountObj),0==this._trnMainService.nullToZeroConverter(t?.totalDiscountAmount)&&(this._trnMainService.onFlatDiscountClear(),this._trnMainService.clearDisAuthValues(),this._trnMainService.callPipe=!this._trnMainService.callPipe),this._trnMainService.callPipe=!this._trnMainService.callPipe})}closeAdditionalFlatDiscOption(){this.showAdditionalFlatDiscountPopUp=!1,this._trnMainService.showFlatDiscOption=!1,this._trnMainService.onFlatDiscountClear()}showBeforeOverwrite(){return this.totalIndividualDiscount=this._trnMainService.TrnMainObj.ProdList.reduce((n,t)=>n+(t.INDDISCOUNT??0),0),this.totalIndividualDiscount>0}closeDisAuthPopup(){this._trnMainService.onFlatDiscountClear(),this._trnMainService.clearDisAuthValues(),this._trnMainService.showDiscountAuth=!1}discountAuthConfirm(){this._trnMainService.disLimitAuthObj.isAuthDisLim=!0,this._loadingService.show("Authorizing Please wait");let n=this._trnMainService.TrnMainObj.ProdList.reduce((t,r)=>t+(r.INDDISCOUNT??0),0);this.masterService.authorizeDiscountLimitInSO(this._trnMainService.disLimitAuthObj).subscribe(t=>{if(this._loadingService.hide(),"ok"==t.status){let r=0!=this._trnMainService.nullToZeroConverter(t.result.userDisLimit)?t.result.userDisLimit:t.result.roleDisLimit;this._trnMainService.nullToZeroConverter(this._trnMainService.disLimitAuthObj.discountAmt)>0&&(this._trnMainService.limitValue=100*(n+Number(this._trnMainService.disLimitAuthObj.discountAmt))/this._trnMainService.TrnMainObj.GROSSAMNT),this._trnMainService.nullToZeroConverter(this._trnMainService.disLimitAuthObj.discountRate)>0&&(this._trnMainService.limitValue=100*(n+this._trnMainService.disLimitAuthObj.discountRate*this._trnMainService.TrnMainObj.GROSSAMNT/100)/this._trnMainService.TrnMainObj.GROSSAMNT),this._trnMainService.limitValue>r?(this._alertService.error("Specified discount value exceeded authorized discount limit!!!"),this._trnMainService.clearDisAuthValues(),this._trnMainService.onFlatDiscountClear(),this.savedDiscountObj=this._trnMainService.TrnMainObj.DiscountObj):(this._alertService.success("Authorization Sucessfull"),this._trnMainService.TrnMainObj.FLATDCAMNT=this._trnMainService.disLimitAuthObj.discountAmt,this._trnMainService.TrnMainObj.DCRATE=this._trnMainService.disLimitAuthObj.discountRate,this._trnMainService.resetDisLimitAuthObj()),this._trnMainService.showDiscountAuth=!1}else this._trnMainService.clearDisAuthValues(),this._trnMainService.onFlatDiscountClear()})}onClickAddFC(){this._trnMainService.showForeignCurrencyPopup=!0}closeFCPopup(){this._trnMainService.showForeignCurrencyPopup=!1}saveFC(){const n=new Date;this.currDate=(0,b.p6)(n,"yyyy-MM-dd","en-US");const{CountryName:t,CurrencyName:r,CURNAME:a,CurrencySymbol:h,EXRATE:m}=this._trnMainService.currency;t&&r&&a&&h&&null!=m?this.masterService.Currencies.find(O=>O.CURNAME.trim().toUpperCase()===this._trnMainService.currency.CURNAME.trim().toUpperCase())?this._alertService.error("Currency Already Exists!!!"):this._trnMainService.currency.EXRATE<0?this._alertService.error("Exchange Rate Should not be in Negative!!!"):(this._trnMainService.currency.LastUpdateDate=this.currDate,this._trnMainService.showForeignCurrencyPopup=!1,this._loadingService.show("Please wait"),this.masterService.saveCurrency([this._trnMainService.currency]).subscribe(O=>{"ok"==O.status?(this._trnMainService.TrnMainObj.FCurrency=this._trnMainService.currency.CURNAME,this._trnMainService.TrnMainObj.EXRATE=this._trnMainService.currency.EXRATE,this.masterService.getCurrencies().subscribe(he=>{this.masterService.Currencies=he}),this._trnMainService.currency={},this._alertService.success("Currency Added")):this._alertService.error("Currency Addition Failed!!!"),this._loadingService.hide()})):this._alertService.error("All fields are required!")}disableCostCenter(){return!("VIEW"!=this._trnMainService.TrnMainObj.Mode&&!this.disableCostCentreforRefPIWiseLoad()&&!this._trnMainService.disableCostCenterForCargo&&1!=this.userSetting.enabledistributedpurchase)}costCenterDelete(){this.disableCostCenter()||(this._trnMainService.TrnMainObj.COSTCENTER="")}}return c.\u0275fac=function(n){return new(n||c)(e.Y36(R.P),e.Y36(ue.p),e.Y36(l.e),e.Y36(N.uw),e.Y36(x.c),e.Y36(P.V),e.Y36(U.gz))},c.\u0275cmp=e.Xpm({type:c,selectors:[["trnmain-purchase-entry"]],viewQuery:function(n,t){if(1&n&&(e.Gf(A,5),e.Gf(V,5),e.Gf(ge,5),e.Gf(be,5),e.Gf(Oe,5),e.Gf(me,5),e.Gf(Ce,5),e.Gf(fe,5),e.Gf(Ae,5),e.Gf(Ee,5),e.Gf(Ne,5),e.Gf(De,5),e.Gf(je,5),e.Gf(xe,5),e.Gf(Re,5),e.Gf(Pe,5),e.Gf(Ie,5),e.Gf(Le,5)),2&n){let r;e.iGM(r=e.CRH())&&(t.genericGridSupplier=r.first),e.iGM(r=e.CRH())&&(t.genericGridShipName=r.first),e.iGM(r=e.CRH())&&(t.genericGridRefBill=r.first),e.iGM(r=e.CRH())&&(t.genericGridWarehouse=r.first),e.iGM(r=e.CRH())&&(t.fileUploadPopup=r.first),e.iGM(r=e.CRH())&&(t.genericGridAccount=r.first),e.iGM(r=e.CRH())&&(t.genericGridImportPurchaseOrder=r.first),e.iGM(r=e.CRH())&&(t.CreateQuickParty=r.first),e.iGM(r=e.CRH())&&(t.LoadPurchaseOrder=r.first),e.iGM(r=e.CRH())&&(t.importAdvanceAcGrid=r.first),e.iGM(r=e.CRH())&&(t.genericGridCustomer=r.first),e.iGM(r=e.CRH())&&(t.focusInputFormat=r.first),e.iGM(r=e.CRH())&&(t.genericGridGRN=r.first),e.iGM(r=e.CRH())&&(t.genericGridImportGRN=r.first),e.iGM(r=e.CRH())&&(t.genericGridSalesMan=r.first),e.iGM(r=e.CRH())&&(t.CreateCustomerProfile=r.first),e.iGM(r=e.CRH())&&(t.CreateShippingLocation=r.first),e.iGM(r=e.CRH())&&(t.genericGridPurchaseOrder=r)}},hostBindings:function(n,t){1&n&&e.NdJ("keydown",function(a){return t.updown(a)},!1,e.evT)},inputs:{viewDisable:"viewDisable"},decls:1,vars:1,consts:[["class","pd0 mr5 plainBackGround",4,"ngIf"],[1,"pd0","mr5","plainBackGround"],[1,"row","col-md-12",2,"padding","15px"],[1,"col-md-4","col-sm-6",2,"max-height","160px","overflow-y","scroll"],[1,"row"],[2,"width","25%"],[2,"float","right","width","73%","margin-top","0px","font-weight","bold"],["class","row",4,"ngIf"],[2,"float","right","width","73%"],["id","invoiceNO","type","text","autocomplete","off",2,"width","86%",3,"ngModel","disabled","readonly","placeholder","ngModelChange","keydown.enter"],["style","width: 25%;",4,"ngIf"],[4,"ngIf"],[1,"col-md-4","col-sm-6",2,"max-height","160px","overflow","hidden","overflow-y","auto"],["style","width: 50%",4,"ngIf"],[1,"col-md-4","col-sm-6",2,"max-height","160px","overflow-y","auto"],[1,"row","cell-with-comment"],["id","customerselectid","type","text","autocomplete","off",2,"width","69%",3,"disabled","ngModel","placeholder","change","ngModelChange","keydown.enter","keydown.tab","keyup"],["style","margin-left: 2px;","class","add",3,"click",4,"ngIf"],["type","text","readonly","",2,"width","70%",3,"ngModel","disabled","ngModelChange"],["id","vatId","type","text","readonly","",2,"width","70%",3,"ngModel","disabled","ngModelChange"],["id","remarksid","type","text",2,"width","70%","height","24px","min-height","24px","max-height","55px",3,"ngModel","disabled","ngModelChange"],[3,"popupsettings","onItemDoubleClick"],["genericGridSupplier",""],["genericGridShipName",""],["genericGridRefBill",""],["genericGridWarehouse",""],["genericGridAccount",""],["genericGridPurchaseOrder",""],[3,"popupsettings","onImportChalanClick"],["genericGridImportPurchaseOrder",""],[3,"popupsettings","onUploaded"],["fileUploadPopup",""],["genericGridGRN",""],["genericGridImportGRN",""],["genericGridCustomer",""],[3,"onLoadPO"],["LoadPurchaseOrder",""],["importAdvanceAcGrid",""],[3,"onSaveParty"],["CreateQuickParty",""],["genericGridSalesMan",""],[3,"onSave"],["CreateCustomerProfile",""],["class","backdrop",4,"ngIf"],["name","prefix","id","prefix",2,"width","35%",3,"ngModel","disabled","ngModelChange"],["value","",4,"ngIf"],["type","text",2,"width","51%",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["value",""],[2,"float","right","width","34%"],["id","entryDateAD","type","date",2,"width","100%",3,"ngModel","disabled","max","ngModelChange","change"],[2,"float","right","width","26%"],["name","InvnepaliDateFrom",3,"id","label","disable","ngModel","change","ngModelChange"],[2,"float","right","width","38%"],["id","poNoId","type","text","autocomplete","off","placeholder","Press Enter to Select QT no.","readonly","",3,"ngStyle","ngModel","disabled","ngModelChange","keydown.enter","keydown.delete"],["type","checkbox",2,"width","17px","height","19px","margin-top","-8px",3,"ngModel","disabled","change","ngModelChange"],[2,"width","auto","font-size","12px"],["class","col-md-7 p-0",4,"ngIf"],["class","col-md-5 pr-0 pl-4",4,"ngIf"],[1,"col-md-7","p-0"],[1,"col-md-5","p-0"],["id","wh","name","selectedWarehouse",1,"form-control","col-md-6","p-0",2,"height","25px","color","black","font-size","13px","padding","1px 12px","max-height","100px","overflow-y","auto",3,"ngModel","disabled","ngModelChange","change"],[1,"col-md-5","pr-0","pl-4"],["type","checkbox",1,"mt-0","pt-0",2,"width","17px","height","19px",3,"ngModel","disabled","change","ngModelChange"],[2,"width","80%","font-size","12px","margin-top","0px"],["id","suppBillNo","type","text","autocomplete","off",2,"width","86%",3,"ngModel","disabled","placeholder","ngModelChange","keydown.enter"],["type","date",2,"width","100%",3,"ngModel","disabled","max","ngModelChange","change"],["id","purchasetype",2,"width","62.5%",3,"ngModel","disabled","ngModelChange","change"],["value","TRADING"],["value","NONTRADING",4,"ngIf"],["value","MIXED"],["value","NONTRADING"],["type","checkbox",2,"width","25px","height","19px","margin-top","4px","margin-right","9px",3,"ngModel","disabled","change","ngModelChange"],[2,"width","31%"],["id","refbill","type","text",2,"width","70%",3,"disabled","ngModel","ngModelChange","keydown.enter","keydown.tab"],[2,"width","70%",3,"ngModel","disabled","ngModelChange"],["value","credit"],["value","cash"],[2,"float","right","width","39%"],["id","poNoId","type","text","autocomplete","off","placeholder","Enter to Select PO no.","readonly","",3,"ngStyle","ngModel","disabled","ngModelChange","keydown.enter","keydown.delete"],["type","checkbox",2,"width","17px","height","19px","margin-top","-8px",3,"ngModel","disabled","change","ngModelChange","keydown.delete"],["id","ImportPOno","type","text","placeholder","Enter to select Import PO No.","autocomplete","off","readonly","",3,"ngStyle","ngModel","disabled","ngModelChange","keydown.enter","keydown.delete"],["id","GRNNoId","type","text","autocomplete","off","placeholder","Press Enter to load Import GRN Bill","readonly","",3,"ngStyle","ngModel","disabled","ngModelChange","keydown.enter"],["id","GRNNoId","type","text","autocomplete","off","placeholder","Press Enter to load GRN Bill","readonly","",3,"ngStyle","ngModel","disabled","ngModelChange","keydown.enter"],["id","paymentTerms",2,"width","70%",3,"ngModel","disabled","ngModelChange","change"],["value","credit",4,"ngIf"],["value","cash",4,"ngIf"],["value","cheque",4,"ngIf"],["value","cheque"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["type","text","id","accountfield","autocomplete","off","placeholder","Press Enter to select Account",2,"width","70%",3,"disabled","ngModel","ngModelChange","keydown.enter","keydown.tab","keydown"],["type","text","autocomplete","off","placeholder","Press Enter to Select Account",2,"width","70%",3,"disabled","ngModel","ngModelChange","keydown.Enter","keydown.tab","keydown"],["type","text",2,"width","52%",3,"ngModel","disabled","ngModelChange"],["type","date",2,"width","44%",3,"ngModel","disabled","ngModelChange","change"],["id","warehouseId","type","text","style","width:70%;","autocomplete","off","readonly","",3,"disabled","ngModel","ngModelChange","keydown.enter",4,"ngIf"],["id","warehouseId","type","text","style","width:70%;","autocomplete","off",3,"disabled","ngModel","ngModelChange","keydown.enter",4,"ngIf"],["id","warehouseId","type","text","autocomplete","off","readonly","",2,"width","70%",3,"disabled","ngModel","ngModelChange","keydown.enter"],["id","warehouseId","type","text","autocomplete","off",2,"width","70%",3,"disabled","ngModel","ngModelChange","keydown.enter"],["id","locationID",2,"width","70%",3,"disabled","ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[2,"width","50%"],[2,"width","40%"],["id","currency",2,"width","40%",3,"ngModel","disabled","ngModelChange","change","keydown.Tab","keydown.Enter"],["class","add-discount-button add",3,"click",4,"ngIf"],[1,"add-discount-button","add",3,"click"],[1,"tooltip-text"],["id","exchangerateid","type","number",2,"width","50%",3,"ngModel","disabled","ngModelChange","change","keydown.enter"],["class","row p-0",4,"ngIf"],["style","width: 42%",4,"ngIf"],["id","CCenter",2,"width","69%",3,"ngModel","disabled","ngModelChange"],[1,"row","p-0"],[1,"col-12","px-0"],[1,"col-3","px-0"],[1,"col-6",2,"padding-left","2px","padding-right","0px"],["type","date",2,"width","78%",3,"ngModel","disabled","min","ngModelChange","change","focusout"],[1,"col-3","px-0",2,"margin-left","-3vw"],["name","DeliveryDate",3,"id","label","ngModel","max","disable","change","ngModelChange","focusout"],[1,"col-11","px-0"],[1,"col-3","p-0"],[1,"col-6",2,"padding-left","11px"],["type","time",2,"width","97%",3,"disabled","ngModel","ngModelChange"],[2,"float","right","width","41%"],["type","date",2,"width","100%",3,"ngModel","disabled","min","ngModelChange","change","focusout"],["name","DeliveryDate",3,"id","label","disable","ngModel","max","change","ngModelChange","focusout"],["id","salesmanselect","type","text","autocomplete","off","placeholder","Press Enter to select salesman","autocomplete","off","readonly","",2,"width","70%",3,"ngModel","ngModelChange","keydown.enter","keydown.delete"],[2,"border-color","#c0c0c0"],[1,"legend-class",2,"font-size","13px","width","110px"],[1,"col-md-12"],[2,"margin-top","-18px","margin-left","-14px","width","27%"],["type","number",2,"width","75%","margin-top","-25px",3,"ngModel","disabled","ngModelChange"],[1,"col-md-12",2,"margin-top","8px"],[2,"width","75%","margin-top","-25px",3,"ngModel","disabled","ngModelChange","change"],[2,"width","27%","margin-top","-18px","margin-left","-14px"],["id","accountField","type","text","autocomplete","off","placeholder","Press Enter to Select Account","readonly","",2,"width","75%","margin-top","-25px",3,"disabled","ngModel","ngModelChange","keydown.enter"],["id","currency",2,"width","47%",3,"ngModel","disabled","ngModelChange","change","keydown.Tab","keydown.Enter"],[2,"width","42%"],[1,"add",2,"margin-left","2px",3,"click"],["id","shiplocation",2,"width","65%",3,"ngModel","disabled","ngModelChange","change"],[1,"col-md-6",2,"padding","0px"],["type","number","id","flatDis1",2,"width","46%",3,"ngModel","disabled","ngModelChange","keydown.Enter","keydown.Tab","focusout"],["type","number",2,"width","48%",3,"ngModel","disabled","ngModelChange","focusout","keydown.Enter","change"],[2,"width","70%",3,"ngModel","disabled","ngClass","ngModelChange","keydown.delete"],["value","","selected",""],["id","consignmentnumid","type","text",2,"width","70%",3,"ngModel","ngModelChange"],["id","receivelocationid","type","text",2,"width","70%",3,"ngModel","ngModelChange"],[1,"modal-sticky",2,"display","block","padding","0px","margin-bottom","-6vh","margin-right","20vw"],[1,"modal-content","modal-content-main-area",2,"width","70%","height","auto"],[1,"modal-header",2,"padding","0px","background","#c0c0c0"],[1,"modal-title",2,"padding-left","5px"],["aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row",2,"margin","0.5rem"],[1,"col-sm-4","form-control-label",2,"font-size","13px"],[1,"col-sm-7",2,"padding","0px"],["type","text","id","Parent","autocomplete","off",1,"form-control",2,"height","4vh","font-size","13px",3,"ngModel","ngModelChange"],["type","password","id","Parent","autocomplete","off",1,"form-control",2,"height","4vh","font-size","13px",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-sm","btn-info",2,"font-size","12px",3,"click"],["type","button",1,"btn","btn-sm","btn-info",2,"font-size","12px",3,"click"],[1,"backdrop"],[1,"modal-sticky",2,"display","block","padding","0px","margin-bottom","0rem","margin-right","-1rem"],[1,"modal-content","modal-content-main-area",2,"width","53%"],["class"," form-control-label","style","font-size: 14px;",4,"ngIf"],["type","button","class","btn btn-sm btn-info","style","font-size: 10px;padding:6px",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-info",2,"font-size","10px","padding","6px",3,"click"],[1,"form-control-label",2,"font-size","14px"],[1,"modal-sticky",2,"display","block","padding","0px","margin-bottom","-4rem","margin-right","20rem"],[1,"modal-content","modal-content-main-area",2,"width","auto","height","auto"],[1,"form-group","row","mb-2",2,"margin","0.5rem"],[1,"col-md-6","col-sm-12"],[1,"col-5","form-control-label","p-0","m-0",2,"font-size","13px"],[1,"col-6",2,"padding","0px"],["type","number","id","Parent","autocomplete","off",1,"col-6","form-control",2,"height","4vh","font-size","13px",3,"disabled","ngModel","ngModelChange"],[1,"form-group-row",2,"margin","0.5rem"],[2,"border","2px solid #d9d9d9","width","100%"],[2,"font-size","13px","text-align","left","margin-bottom","3px","width","auto"],[1,"form-control",2,"width","100%",3,"ngModel","ngModelChange"],[1,"modal-sticky",2,"display","block","padding","0px","margin-bottom","0rem","margin-right","-1rem","width","80%","height","80%"],[1,"modal-content","modal-content-main-area",2,"width","80%"],[1,"col-md-6","col-sm-12","mb-2"],["type","text","id","Parent","placeholder","Enter country name...","autocomplete","off",1,"form-control",2,"height","4vh","font-size","13px",3,"ngModel","ngModelChange"],["type","text","id","Parent","placeholder","Enter currency name...","autocomplete","off",1,"form-control",2,"height","4vh","font-size","13px",3,"ngModel","ngModelChange"],["type","text","id","Parent","autocomplete","off","placeholder","Enter three digit code...",1,"form-control",2,"height","4vh","font-size","13px",3,"ngModel","ngModelChange"],["type","text","id","Parent","placeholder","Enter currency symbol...","autocomplete","off",1,"form-control",2,"height","4vh","font-size","13px",3,"ngModel","ngModelChange"],["type","number","id","Parent","placeholder","Enter exchange rate...","autocomplete","off",1,"form-control",2,"height","4vh","font-size","13px",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-info",2,"font-size","10px","padding","6px","width","auto",3,"click"]],template:function(n,t){1&n&&e.YNc(0,si,104,67,"div",0),2&n&&e.Q6J("ngIf",1==t.masterService.ShowMore)},dependencies:[b.mk,b.sg,b.O5,b.PC,v.YN,v.Kr,v.Fj,v.wV,v.Wl,v.EJ,v.JJ,v.On,i.Zl,E.U,f,p.X,o.c,M.r,_.v,u.u],styles:['.btn[_ngcontent-%COMP%] {\n        width: 65px;\n    }\n\n.add[_ngcontent-%COMP%]{\n  color: #2E8B57;\n  border: 2px solid #2E8B57;\n  margin-left: 2px;\n}\n\nspan.add[_ngcontent-%COMP%]:hover{\ncolor: #04AA6D;\nborder-color:#04AA6D;\n}\n\nspan.add[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{\n  position: absolute;\n  left: 50%;\n  top:50%;\n  transform: translate(-50%, -50%);\n}\n\nspan.add[_ngcontent-%COMP%]{\n  display: inline-block;\n    width: 15px;\n    height: 15px;\n    text-align: center;\n    font-size: 16px;\n    font-family: "Roboto";\n    border-radius: 50%;\n    background: #F7F7F7;\n    position: relative;\n    cursor: pointer;\n    margin-top: 7px;\n}\n\n.add-discount-button[_ngcontent-%COMP%] {\n      position: relative;\n      display: inline-block;\n      cursor: pointer;\n    }\n\n.add-discount-button[_ngcontent-%COMP%]   .tooltip-text[_ngcontent-%COMP%] {\n  visibility: hidden;\n  width: 100px;\n  background-color: #555;\n  color: #fff;\n  text-align: center;\n  border-radius: 5px;\n  padding: 5px;\n  position: absolute;\n  z-index: 1;\n  bottom: 125%;\n  right: 50%;\n  opacity: 0;\n  transition: opacity 0.3s;\n}\n\n.add-discount-button[_ngcontent-%COMP%]:hover   .tooltip-text[_ngcontent-%COMP%] {\n  visibility: visible;\n  opacity: 1;\n}\n\n.backdrop[_ngcontent-%COMP%] {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(61, 60, 60, 0.5);\n    z-index: 9999;\n  }\n\n  .faded-option[_ngcontent-%COMP%] {\n  color: gray;\n  }']}),c})()},3047:(Se,G,T)=>{T.d(G,{d:()=>ue});var i=T(64537),D=T(28698),B=T(92340),g=T(42326),d=T(53074),b=T(87584),j=T(7976),E=T(67311),y=T(67297),e=T(88692),S=T(20092),w=T(14970);function k(l,p){if(1&l&&(i.ynx(0),i.TgZ(1,"option",21),i._uU(2),i.qZA(),i.BQk()),2&l){const o=p.$implicit;i.xp6(1),i.Q6J("ngValue",o.SCHEMEID),i.xp6(1),i.Oqu(o.NAME)}}function N(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"h5",4),i._uU(4,"CREATE MEMBERSHIP"),i.qZA(),i.TgZ(5,"div",5)(6,"form",6),i.NdJ("ngSubmit",function(){i.CHM(o);const _=i.oxw();return i.KtG(_.onSave())}),i.TgZ(7,"button",7),i._uU(8,"SAVE"),i.qZA(),i.TgZ(9,"button",8),i.NdJ("click",function(){i.CHM(o);const _=i.oxw();return i.KtG(_.cancelPopup())}),i._uU(10,"CANCEL"),i.qZA()()()(),i.TgZ(11,"div",9)(12,"form",10)(13,"div",11)(14,"label",12),i._uU(15,"First Name:"),i.qZA(),i.TgZ(16,"div",13),i._UZ(17,"input",14),i.qZA()(),i.TgZ(18,"div",11)(19,"label",12),i._uU(20,"Last Name:"),i.qZA(),i.TgZ(21,"div",13),i._UZ(22,"input",15),i.qZA()(),i.TgZ(23,"div",11)(24,"label",12),i._uU(25,"Mobile No:"),i.qZA(),i.TgZ(26,"div",13),i._UZ(27,"input",16),i.qZA()(),i.TgZ(28,"div",11)(29,"label",12),i._uU(30,"Address:"),i.qZA(),i.TgZ(31,"div",13),i._UZ(32,"input",17),i.qZA()(),i.TgZ(33,"div",11)(34,"label",12),i._uU(35,"Scheme:"),i.qZA(),i.TgZ(36,"div",13)(37,"select",18),i.YNc(38,k,3,2,"ng-container",19),i.qZA()()(),i.TgZ(39,"div",11)(40,"label",12),i._uU(41,"Account:"),i.qZA(),i.TgZ(42,"div",13),i._UZ(43,"input",20),i.qZA()()()()()()}if(2&l){const o=i.oxw();i.xp6(6),i.Q6J("formGroup",o.membershipForm),i.xp6(1),i.Q6J("disabled",!o.membershipForm.valid),i.xp6(5),i.Q6J("formGroup",o.membershipForm),i.xp6(26),i.Q6J("ngForOf",o.schemeList)}}let x=(()=>{class l{constructor(o,M,_,u,A){this._trnMainService=o,this.fb=M,this.masterService=_,this.spinnerService=u,this.alertService=A,this.schemeList=[],this.mode="add",this.membershipObj={},this.onsubmit=new i.vpe,this.masterService.getMemCatList().subscribe(V=>{this.schemeList=V})}ngOnInit(){this.membershipForm=this.fb.group({FNAME:["",[S.kI.required]],LNAME:["",[S.kI.required]],MOBILE:["",[S.kI.required]],ADDRESS:[""],SCHEMEID:[""],ACCNAME:[""]})}show(){this.isActive=!0}cancelPopup(){this.isActive=!1,this._trnMainService.inputCode=!1,this.membershipForm.reset()}closeDialog(){this.isActive=!1}onSave(){let o=Object.assign(this.membershipObj,this.membershipForm.value);const M={mode:this.mode,data:o};this.spinnerService.show("Data is Saving ..."),this.masterService.postMembershipGroup(M).subscribe(_=>{"ok"==_.status?(this.closeDialog(),this.spinnerService.hide(),"ProceedConfirmation"==_.result?confirm("Member is not Created in  Server.Do you want to Process..")?(this.membershipForm.value.FurtherProceed="ProceedConfirmationYes",this.onSave()):(this.membershipForm.reset(),this.alertService.hide()):(this.membershipForm.reset(),this.alertService.info(_.result),setTimeout(()=>{this.alertService.hide()},500),this.onsubmit.emit(_.result2))):(this.alertService.info(_.result),this.spinnerService.hide())},_=>{this.spinnerService.hide()})}}return l.\u0275fac=function(o){return new(o||l)(i.Y36(b.p),i.Y36(S.qu),i.Y36(d.P),i.Y36(w.V),i.Y36(E.c))},l.\u0275cmp=i.Xpm({type:l,selectors:[["create-membership-dialog"]],outputs:{onsubmit:"onsubmit"},decls:1,vars:1,consts:[["class","membership_container","role","document","style","max-width: 100%; max-height: 500px; overflow:hidden",4,"ngIf"],["role","document",1,"membership_container",2,"max-width","100%","max-height","500px","overflow","hidden"],[1,"card"],[1,"card-header"],[1,"page-title"],[1,"button-group"],[3,"formGroup","ngSubmit"],["title","Save","type","submit",1,"btn","btn-info",2,"margin-right","2px",3,"disabled"],["type","button","title","Cancel",1,"btn","btn-info",3,"click"],[1,"card-body"],[1,"form-horizontal",2,"margin-top","15px",3,"formGroup"],[1,"form-group","row"],[1,"col-sm-2","form-control-label"],[1,"col-sm-5",2,"padding-left","1px"],["type","text","formControlName","FNAME","autocomplete","off",1,"form-control"],["type","text","formControlName","LNAME","autocomplete","off",1,"form-control"],["type","text","formControlName","MOBILE","autocomplete","off",1,"form-control"],["type","text","formControlName","ADDRESS","autocomplete","off",1,"form-control"],["formControlName","SCHEMEID",1,"form-control",2,"padding","0px 10px"],[4,"ngFor","ngForOf"],["type","text","formControlName","ACCNAME","autocomplete","off",1,"form-control"],[3,"ngValue"]],template:function(o,M){1&o&&i.YNc(0,N,44,4,"div",0),2&o&&i.Q6J("ngIf",M.isActive)},dependencies:[e.sg,e.O5,S._Y,S.YN,S.Kr,S.Fj,S.EJ,S.JJ,S.JL,S.sg,S.u],styles:["input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{border:1px solid #cbcbcb;border-radius:2px;height:30px;color:#000}.page-title[_ngcontent-%COMP%]{text-align:center}.form-control[_ngcontent-%COMP%]{font-size:14px}.button-group[_ngcontent-%COMP%]{position:absolute;right:3%;top:3%}.card-body[_ngcontent-%COMP%]{line-height:.4rem}","td[_ngcontent-%COMP%] {\n      border: 1px solid #e6e6e6;\n    }\n  \n    input[_ngcontent-%COMP%] {\n      padding: 8px;\n    }\n  \n    .form-group[_ngcontent-%COMP%] {\n      margin-bottom: 1rem;\n    }\n  \n    .membership_container[_ngcontent-%COMP%] {\n      position: fixed !important;\n      transform: translate(0px, -35px);\n      background: #ffffff;\n      z-index: 99999;\n      width: 65%;\n      top: 22.5%;\n      left: 16%;\n    }\n\n    label[_ngcontent-%COMP%]{\n      \n      font-size: 14px;\n      margin-left: 5rem;\n      margin-top: 10px;\n    }"]}),l})();var v=T(89952);let Z=(()=>{class l{constructor(o){this.authService=o,this.userSetting=this.authService.getSetting()}transform(o,M,_){let u=!1;return"VIEW"===M?(u=!0,u):0===this.userSetting.REFBILLCOMPULSORINDNOTE&&g.Km.DebitNote?u:o==g.Km.TaxInvoice||o==g.Km.Sales||o==g.Km.PerformaSalesInvoice||(-1!==[g.Km.DebitNote,g.Km.CreditNote].indexOf(o)&&(0===this.userSetting.ENABLEMANUALSALESRETURN||1===this.userSetting.REFBILLCOMPULSORINDNOTE)&&-1!==["NEW"].indexOf(M)&&1===_&&(u=!0),u)}}return l.\u0275fac=function(o){return new(o||l)(i.Y36(y.e,16))},l.\u0275pipe=i.Yjl({name:"roundingEnableDisable",type:l,pure:!0}),l})();const J=["CreateMembership"],H=["genericGridTDSAccount"],K=["genericGridTDSAccountSubLedger"];function F(l,p){1&l&&i._UZ(0,"div",7)}function q(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"tr")(1,"td"),i._uU(2,"Flat Dis%"),i.qZA(),i.TgZ(3,"td")(4,"input",20),i.NdJ("ngModelChange",function(_){i.CHM(o);const u=i.oxw(3);return i.KtG(u._trnMainService.TrnMainObj.DCRATE=_)})("ngModelChange",function(_){i.CHM(o);const u=i.oxw(3);return u.checkFlatDiscountRate(_),i.KtG(u._trnMainService.callPipe=!u._trnMainService.callPipe)}),i.qZA()()()}if(2&l){const o=i.oxw(3);i.xp6(4),i.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode&&(61==o._trnMainService.TrnMainObj.VoucherType||3==o._trnMainService.TrnMainObj.VoucherType||31==o._trnMainService.TrnMainObj.VoucherType||20==o._trnMainService.TrnMainObj.VoucherType||16==o._trnMainService.TrnMainObj.VoucherType||19==o._trnMainService.TrnMainObj.VoucherType)||16==o._trnMainService.TrnMainObj.VoucherType&&o._trnMainService.TrnMainObj.REFBILL&&1==o.masterService.userSetting.REFBILLCOMPULSORINDNOTE||null!=o._trnMainService.TrnMainObj.FLATDCAMNT&&0!=o._trnMainService.TrnMainObj.FLATDCAMNT)("ngModel",o._trnMainService.TrnMainObj.DCRATE)}}function Q(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"tr")(1,"td"),i._uU(2,"Flat Dis Amount:"),i.qZA(),i.TgZ(3,"td")(4,"input",21),i.NdJ("ngModelChange",function(_){i.CHM(o);const u=i.oxw(3);return i.KtG(u._trnMainService.TrnMainObj.FLATDCAMNT=_)})("change",function(){i.CHM(o);const _=i.oxw(3);return i.KtG(_.onChangeFlatDiscount())})("ngModelChange",function(_){i.CHM(o);const u=i.oxw(3);return u.checkFlatDiscountAmnt(_),i.KtG(u._trnMainService.callPipe=!u._trnMainService.callPipe)}),i.qZA()()()}if(2&l){const o=i.oxw(3);i.xp6(4),i.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode&&(61==o._trnMainService.TrnMainObj.VoucherType||3==o._trnMainService.TrnMainObj.VoucherType||31==o._trnMainService.TrnMainObj.VoucherType||20==o._trnMainService.TrnMainObj.VoucherType||16===o._trnMainService.TrnMainObj.VoucherType||19===o._trnMainService.TrnMainObj.VoucherType)||16==o._trnMainService.TrnMainObj.VoucherType&&o._trnMainService.TrnMainObj.REFBILL&&1==o.masterService.userSetting.REFBILLCOMPULSORINDNOTE||null!=o._trnMainService.TrnMainObj.DCRATE&&0!=o._trnMainService.TrnMainObj.DCRATE)("ngModel",o._trnMainService.TrnMainObj.FLATDCAMNT)}}function Y(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"button",26),i.NdJ("click",function(){i.CHM(o);const _=i.oxw(4);return i.KtG(_.onFlatDiscApply())}),i._uU(1," APPLY "),i.qZA()}if(2&l){const o=i.oxw(4);i.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode||(0==o._trnMainService.TrnMainObj.DCRATE||null==o._trnMainService.TrnMainObj.DCRATE)&&(0==o._trnMainService.TrnMainObj.FLATDCAMNT||null==o._trnMainService.TrnMainObj.FLATDCAMNT)||16==o._trnMainService.TrnMainObj.VoucherType&&o._trnMainService.TrnMainObj.REFBILL&&1==o.masterService.userSetting.REFBILLCOMPULSORINDNOTE)}}function W(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"button",26),i.NdJ("click",function(){i.CHM(o);const _=i.oxw(4);return i.KtG(_._trnMainService.onApplyClicked())}),i._uU(1," OVERWRITE "),i.qZA()}if(2&l){const o=i.oxw(4);i.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode||(0==o._trnMainService.TrnMainObj.DCRATE||null==o._trnMainService.TrnMainObj.DCRATE)&&(0==o._trnMainService.TrnMainObj.FLATDCAMNT||null==o._trnMainService.TrnMainObj.FLATDCAMNT)||16==o._trnMainService.TrnMainObj.VoucherType&&o._trnMainService.TrnMainObj.REFBILL&&1==o.masterService.userSetting.REFBILLCOMPULSORINDNOTE||o._trnMainService.disableOverwriteButton)}}function X(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"tr",22)(1,"td",23),i.YNc(2,Y,2,1,"button",24),i.qZA(),i.TgZ(3,"td",23),i.YNc(4,W,2,1,"button",25),i.qZA(),i.TgZ(5,"td",23)(6,"button",26),i.NdJ("click",function(){i.CHM(o);const _=i.oxw(3);return i.KtG(_._trnMainService.onRevertClicked())}),i._uU(7," REVERT "),i.qZA()()()}if(2&l){const o=i.oxw(3);i.xp6(2),i.Q6J("ngIf",3==o._trnMainService.TrnMainObj.VoucherType||19==o._trnMainService.TrnMainObj.VoucherType||16==o._trnMainService.TrnMainObj.VoucherType||31==o._trnMainService.TrnMainObj.VoucherType),i.xp6(2),i.Q6J("ngIf",!o.allIndDiscountsMissing),i.xp6(2),i.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode||16==o._trnMainService.TrnMainObj.VoucherType&&o._trnMainService.TrnMainObj.REFBILL&&1==o.masterService.userSetting.REFBILLCOMPULSORINDNOTE)}}function z(l,p){if(1&l&&(i.TgZ(0,"div",18),i.YNc(1,q,5,2,"tr",17),i.YNc(2,Q,5,2,"tr",17),i.YNc(3,X,8,3,"tr",19),i.qZA()),2&l){const o=i.oxw(2);i.xp6(1),i.Q6J("ngIf",3==o._trnMainService.TrnMainObj.VoucherType||19==o._trnMainService.TrnMainObj.VoucherType||16==o._trnMainService.TrnMainObj.VoucherType||20==o._trnMainService.TrnMainObj.VoucherType||31==o._trnMainService.TrnMainObj.VoucherType),i.xp6(1),i.Q6J("ngIf",3==o._trnMainService.TrnMainObj.VoucherType||19==o._trnMainService.TrnMainObj.VoucherType||16==o._trnMainService.TrnMainObj.VoucherType||20==o._trnMainService.TrnMainObj.VoucherType||31==o._trnMainService.TrnMainObj.VoucherType),i.xp6(1),i.Q6J("ngIf",3==o._trnMainService.TrnMainObj.VoucherType||16==o._trnMainService.TrnMainObj.VoucherType||19==o._trnMainService.TrnMainObj.VoucherType||20==o._trnMainService.TrnMainObj.VoucherType||31==o._trnMainService.TrnMainObj.VoucherType)}}function $(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"tr")(1,"td"),i._uU(2,"Gross Amount:"),i.qZA(),i.TgZ(3,"td",28)(4,"input",29),i.NdJ("ngModelChange",function(_){i.CHM(o);const u=i.oxw(3);return i.KtG(u._trnMainService.TrnMainObj.GROSSAMNT=_)}),i.qZA()()()}if(2&l){const o=i.oxw(3);i.xp6(4),i.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode)("ngModel",o._trnMainService.TrnMainObj.GROSSAMNT)("readonly",!0)}}function ee(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"tr")(1,"td"),i._uU(2,"Total Discount:"),i.qZA(),i.TgZ(3,"td")(4,"input",29),i.NdJ("ngModelChange",function(_){i.CHM(o);const u=i.oxw(3);return i.KtG(u._trnMainService.TrnMainObj.TOTALDISCOUNT=_)}),i.qZA()()()}if(2&l){const o=i.oxw(3);i.xp6(4),i.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode)("ngModel",o._trnMainService.TrnMainObj.TOTALDISCOUNT)("readonly",!0)}}function ne(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"tr")(1,"td"),i._uU(2,"Total Taxable:"),i.qZA(),i.TgZ(3,"td",28)(4,"input",29),i.NdJ("ngModelChange",function(_){i.CHM(o);const u=i.oxw(3);return i.KtG(u._trnMainService.TrnMainObj.TAXABLE=_)}),i.qZA()()()}if(2&l){const o=i.oxw(3);i.xp6(4),i.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode)("ngModel",o._trnMainService.TrnMainObj.TAXABLE)("readonly",!0)}}function ie(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"tr")(1,"td"),i._uU(2,"Total Non-Taxable:"),i.qZA(),i.TgZ(3,"td",28)(4,"input",29),i.NdJ("ngModelChange",function(_){i.CHM(o);const u=i.oxw(3);return i.KtG(u._trnMainService.TrnMainObj.NONTAXABLE=_)}),i.qZA()()()}if(2&l){const o=i.oxw(3);i.xp6(4),i.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode)("ngModel",o._trnMainService.TrnMainObj.NONTAXABLE)("readonly",!0)}}function te(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"tr")(1,"td"),i._uU(2,"VAT Amount:"),i.qZA(),i.TgZ(3,"td",28)(4,"input",29),i.NdJ("ngModelChange",function(_){i.CHM(o);const u=i.oxw(3);return i.KtG(u._trnMainService.TrnMainObj.VATAMNT=_)}),i.qZA()()()}if(2&l){const o=i.oxw(3);i.xp6(4),i.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode)("ngModel",o._trnMainService.TrnMainObj.VATAMNT)("readonly",!0)}}function re(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"tr")(1,"td"),i._uU(2,"Net Amount:"),i.qZA(),i.TgZ(3,"td",28)(4,"input",29),i.NdJ("ngModelChange",function(_){i.CHM(o);const u=i.oxw(3);return i.KtG(u._trnMainService.TrnMainObj.NETAMNT=_)}),i.qZA()()()}if(2&l){const o=i.oxw(3);i.xp6(4),i.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode)("ngModel",o._trnMainService.TrnMainObj.NETAMNT)("readonly",!0)}}function ae(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"tr")(1,"td"),i._uU(2,"Rounding:"),i.qZA(),i.TgZ(3,"td")(4,"input",30),i.NdJ("ngModelChange",function(_){i.CHM(o);const u=i.oxw(3);return i.KtG(u._trnMainService.TrnMainObj.ROUNDAMTMANUAL=_)})("keydown.enter",function(){i.CHM(o);const _=i.oxw(3);return i.KtG(_.changeAfterRoundAmt())})("keydown.alt.enter",function(){i.CHM(o);const _=i.oxw(3);return i.KtG(_.rounding())}),i.ALo(5,"roundingEnableDisable"),i.qZA()()()}if(2&l){const o=i.oxw(3);i.xp6(4),i.Q6J("disabled",i.Dn7(5,2,o._trnMainService.TrnMainObj.VoucherType,o._trnMainService.TrnMainObj.Mode,o._trnMainService.TrnMainObj.DOFULLRETURN))("ngModel",o._trnMainService.TrnMainObj.ROUNDAMTMANUAL)}}function oe(l,p){if(1&l&&(i.TgZ(0,"div",27),i.YNc(1,$,5,3,"tr",17),i.YNc(2,ee,5,3,"tr",17),i.YNc(3,ne,5,3,"tr",17),i.YNc(4,ie,5,3,"tr",17),i.YNc(5,te,5,3,"tr",17),i.YNc(6,re,5,3,"tr",17),i.YNc(7,ae,6,6,"tr",17),i.qZA()),2&l){const o=i.oxw(2);i.xp6(1),i.Q6J("ngIf","add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath||"purchase-import"==o.activeurlpath),i.xp6(1),i.Q6J("ngIf",("add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath)&&"lite"==o.AppMode),i.xp6(1),i.Q6J("ngIf","add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath||"purchase-import"==o.activeurlpath),i.xp6(1),i.Q6J("ngIf","add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath||"purchase-import"==o.activeurlpath),i.xp6(1),i.Q6J("ngIf","add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath||"purchase-import"==o.activeurlpath),i.xp6(1),i.Q6J("ngIf","add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath||"purchase-import"==o.activeurlpath),i.xp6(1),i.Q6J("ngIf",("add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath||"purchase-import"==o.activeurlpath)&&"pro"==o.AppMode)}}function ce(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"tr")(1,"td"),i._uU(2,"Discount:"),i.qZA(),i.TgZ(3,"td",28)(4,"input",20),i.NdJ("ngModelChange",function(_){i.CHM(o);const u=i.oxw(3);return i.KtG(u._trnMainService.TrnMainObj.AdditionalObj.AFTERVATDISCOUNT=_)})("ngModelChange",function(_){i.CHM(o);const u=i.oxw(3);return i.KtG(u.checkAfterVatDiscount(_))}),i.qZA()()()}if(2&l){const o=i.oxw(3);i.xp6(4),i.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode)("ngModel",o._trnMainService.TrnMainObj.AdditionalObj.AFTERVATDISCOUNT)}}function se(l,p){if(1&l&&(i.TgZ(0,"tr")(1,"td"),i._uU(2,"Discount "),i._UZ(3,"br"),i._uU(4," After Net Amount:"),i.qZA(),i.TgZ(5,"td",28),i._UZ(6,"input",32),i.qZA()()),2&l){const o=i.oxw(3);i.xp6(6),i.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode)("readonly",!0)("ngModel",o._trnMainService.TrnMainObj.NETAMNT-o._trnMainService.TrnMainObj.AdditionalObj.AFTERVATDISCOUNT)}}function f(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"tr")(1,"td"),i._uU(2,"TDS Amount:"),i.qZA(),i.TgZ(3,"td",28)(4,"input",20),i.NdJ("ngModelChange",function(_){i.CHM(o);const u=i.oxw(3);return i.KtG(u._trnMainService.TrnMainObj.AdditionalObj.TDSAMOUNT=_)}),i.qZA()()()}if(2&l){const o=i.oxw(3);i.xp6(4),i.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode)("ngModel",o._trnMainService.TrnMainObj.AdditionalObj.TDSAMOUNT)}}function Te(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"tr")(1,"td"),i._uU(2,"TDS Account:"),i.qZA(),i.TgZ(3,"td",28)(4,"input",33),i.NdJ("ngModelChange",function(_){i.CHM(o);const u=i.oxw(3);return i.KtG(u._trnMainService.TrnMainObj.AdditionalObj.TDSACCOUNTNAME=_)})("keydown.enter",function(){i.CHM(o);const _=i.oxw(3);return i.KtG(_.onTDSAccountEnter())})("keyup",function(_){i.CHM(o);const u=i.oxw(3);return i.KtG(u.onTDSAccountEnter(_))})("keypress",function(_){i.CHM(o);const u=i.oxw(3);return i.KtG(u.keyPress(_))}),i.qZA()()()}if(2&l){const o=i.oxw(3);i.xp6(4),i.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode)("ngModel",o._trnMainService.TrnMainObj.AdditionalObj.TDSACCOUNTNAME)}}function pe(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"tr")(1,"td"),i._uU(2,"TDS Sub Ledger Account:"),i.qZA(),i.TgZ(3,"td",28)(4,"input",34),i.NdJ("ngModelChange",function(_){i.CHM(o);const u=i.oxw(3);return i.KtG(u._trnMainService.TrnMainObj.AdditionalObj.SL_ACNAME=_)}),i.qZA()()()}if(2&l){const o=i.oxw(3);i.xp6(4),i.Q6J("disabled",!0)("ngModel",o._trnMainService.TrnMainObj.AdditionalObj.SL_ACNAME)}}function ve(l,p){if(1&l&&(i.TgZ(0,"div",31),i.YNc(1,ce,5,2,"tr",17),i.YNc(2,se,7,3,"tr",17),i.YNc(3,f,5,2,"tr",17),i.YNc(4,Te,5,2,"tr",17),i.YNc(5,pe,5,2,"tr",17),i.qZA()),2&l){const o=i.oxw(2);i.xp6(1),i.Q6J("ngIf",1==o.masterService.userSetting.EnableCashPurchaseDiscountFeature&&("add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath)),i.xp6(1),i.Q6J("ngIf",1==o.masterService.userSetting.EnableCashPurchaseDiscountFeature&&("add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath)&&"pro"==o.AppMode),i.xp6(1),i.Q6J("ngIf",("add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath)&&"pro"==o.AppMode),i.xp6(1),i.Q6J("ngIf","add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath),i.xp6(1),i.Q6J("ngIf",("add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath)&&o._trnMainService.TrnMainObj.AdditionalObj.SL_ACNAME)}}function _e(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"div")(1,"div",35)(2,"div",36)(3,"div",37)(4,"h6",38),i._uU(5,"Confirmation"),i.qZA(),i.TgZ(6,"button",39),i.NdJ("click",function(){i.CHM(o);const _=i.oxw(2);return i.KtG(_.closeModal())}),i.TgZ(7,"span",40),i._uU(8,"\xd7"),i.qZA()()(),i.TgZ(9,"div",41)(10,"p",42),i._uU(11,"Do you want to apply flat discount before or after the individual discount ?"),i.qZA()(),i.TgZ(12,"div",43)(13,"button",44),i.NdJ("click",function(){i.CHM(o);const _=i.oxw(2);return _._trnMainService.beforeDiscFlat(),i.KtG(_.showConfirm=!1)}),i._uU(14,"BEFORE "),i.qZA(),i.TgZ(15,"button",44),i.NdJ("click",function(){i.CHM(o);const _=i.oxw(2);return _._trnMainService.afterDiscFlat(),i.KtG(_.showConfirm=!1)}),i._uU(16,"AFTER"),i.qZA()()()()()}}const R=function(l){return{"mySidenav-show":l}},P=function(l){return{"toggler-btn-icon-reverse":l}};function U(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"div",8)(1,"button",9),i.NdJ("click",function(){i.CHM(o);const _=i.oxw();return _.toggleVisibility(),i.KtG(_.showOverWrite())}),i._uU(2," F10 "),i._UZ(3,"i",10),i.qZA(),i.TgZ(4,"div",11)(5,"table",12),i.YNc(6,z,4,3,"div",13),i.qZA(),i.TgZ(7,"table",14)(8,"div"),i.YNc(9,oe,8,7,"div",15),i.YNc(10,ve,6,5,"div",16),i.qZA()()(),i.YNc(11,_e,17,0,"div",17),i.qZA()}if(2&l){const o=i.oxw();i.Q6J("ngClass",i.VKq(6,R,o.hideShow)),i.xp6(3),i.Q6J("ngClass",i.VKq(8,P,o.hideShow)),i.xp6(3),i.Q6J("ngIf",3==o._trnMainService.TrnMainObj.VoucherType&&"purchase-import"!=o.activeurlpath||16==o._trnMainService.TrnMainObj.VoucherType||19==o._trnMainService.TrnMainObj.VoucherType||20==o._trnMainService.TrnMainObj.VoucherType||31==o._trnMainService.TrnMainObj.VoucherType||57==o._trnMainService.TrnMainObj.VoucherType),i.xp6(3),i.Q6J("ngIf","add-purchase-invoice"==o.activeurlpath||"purchase-import"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath),i.xp6(1),i.Q6J("ngIf","add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath),i.xp6(1),i.Q6J("ngIf",o.showConfirm)}}function le(l,p){if(1&l&&(i.TgZ(0,"tr")(1,"td"),i._uU(2,"Prior Earned Points:"),i.qZA(),i.TgZ(3,"td",56),i._uU(4),i.ALo(5,"twoDigitNumber"),i.qZA()()),2&l){const o=i.oxw(2);i.xp6(4),i.hij("",i.lcZ(5,1,o._trnMainService.TrnMainObj.TOTMEMPOINTS)," ")}}function de(l,p){1&l&&(i.TgZ(0,"span"),i._uU(1,"-"),i.qZA())}function Me(l,p){if(1&l){const o=i.EpF();i.TgZ(0,"div",8)(1,"button",45),i.NdJ("click",function(_){i.CHM(o);const u=i.oxw();return u.hideShow=!u.hideShow,u.onClickToolTip(_),i.KtG(u.doautomaticRounding())}),i._uU(2," F10 "),i._UZ(3,"i",10),i.qZA(),i.TgZ(4,"table",46)(5,"div",47)(6,"tr")(7,"td"),i._uU(8,"Membership ID"),i.qZA(),i.TgZ(9,"td")(10,"input",48),i.NdJ("click",function(){i.CHM(o);const _=i.oxw();return i.KtG(_.onClicked())})("focusout",function(_){i.CHM(o);const u=i.oxw();return i.KtG(u.memberFocusOut(_))})("focusin",function(_){i.CHM(o);const u=i.oxw();return i.KtG(u.memberFocusIN(_))})("ngModelChange",function(_){i.CHM(o);const u=i.oxw();return i.KtG(u._trnMainService.TrnMainObj.MEMBERNO=_)}),i.qZA()()(),i.TgZ(11,"tr")(12,"td"),i._uU(13,"Member Name:"),i.qZA(),i.TgZ(14,"td",49),i._uU(15),i.qZA()(),i.TgZ(16,"tr")(17,"td",50),i._uU(18,"Scheme:"),i.qZA(),i.TgZ(19,"td",51),i._uU(20),i.qZA()(),i.TgZ(21,"tr")(22,"td"),i._uU(23,"Referred By ID:"),i.qZA(),i.TgZ(24,"td")(25,"input",52),i.NdJ("focusout",function(_){i.CHM(o);const u=i.oxw();return i.KtG(u.memberReferFocusOut(_))})("focusin",function(_){i.CHM(o);const u=i.oxw();return i.KtG(u.memberReferFocusIN(_))})("ngModelChange",function(_){i.CHM(o);const u=i.oxw();return i.KtG(u._trnMainService.TrnMainObj.REFERMEMBERNO=_)}),i.qZA()()(),i.TgZ(26,"tr")(27,"td"),i._uU(28,"Referred By Name:"),i.qZA(),i.TgZ(29,"td",49),i._uU(30),i.qZA()(),i.YNc(31,le,6,3,"tr",17),i.TgZ(32,"tr")(33,"td"),i._uU(34,"Earned Point in Bill:"),i.qZA(),i.TgZ(35,"td",53),i.YNc(36,de,2,0,"span",17),i._uU(37),i.ALo(38,"twoDigitNumber"),i.qZA()(),i.TgZ(39,"tr")(40,"td"),i._uU(41,"Bill Amount:"),i.qZA(),i.TgZ(42,"td"),i._uU(43),i.ALo(44,"twoDigitNumber"),i.qZA()()(),i.TgZ(45,"div",47)(46,"tr")(47,"td"),i._uU(48,"Net Amount:"),i.qZA(),i.TgZ(49,"td",28)(50,"input",54),i.NdJ("ngModelChange",function(_){i.CHM(o);const u=i.oxw();return i.KtG(u._trnMainService.TrnMainObj.NETAMNT=_)}),i.qZA()()(),i.TgZ(51,"tr")(52,"td"),i._uU(53,"Rounding:"),i.qZA(),i.TgZ(54,"td")(55,"input",55),i.NdJ("ngModelChange",function(_){i.CHM(o);const u=i.oxw();return i.KtG(u._trnMainService.TrnMainObj.ROUNDAMTMANUAL=_)})("keydown.enter",function(){i.CHM(o);const _=i.oxw();return i.KtG(_.changeAfterRoundAmt())})("keydown.alt.enter",function(){i.CHM(o);const _=i.oxw();return i.KtG(_.rounding())}),i.ALo(56,"roundingEnableDisable"),i.qZA()()()()()()}if(2&l){const o=i.oxw();i.Q6J("ngClass",i.VKq(25,R,o.hideShow)),i.xp6(3),i.Q6J("ngClass",i.VKq(27,P,o.hideShow)),i.xp6(7),i.Q6J("ngModel",o._trnMainService.TrnMainObj.MEMBERNO),i.xp6(5),i.hij(" ",o._trnMainService.TrnMainObj.MEMBERNAME," "),i.xp6(5),i.hij(" ",o._trnMainService.TrnMainObj.SCHEMENAME," "),i.xp6(5),i.Q6J("ngModel",o._trnMainService.TrnMainObj.REFERMEMBERNO)("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode),i.xp6(5),i.hij(" ",o._trnMainService.TrnMainObj.REFERMEMBERNAME," "),i.xp6(1),i.Q6J("ngIf",15!==o._trnMainService.TrnMainObj.VoucherType),i.xp6(5),i.Q6J("ngIf",15==o._trnMainService.TrnMainObj.VoucherType),i.xp6(1),i.hij("",i.lcZ(38,17,o._trnMainService.TrnMainObj.EARNPOINS)," "),i.xp6(6),i.hij(" ",i.lcZ(44,19,o._trnMainService.TrnMainObj.NETAMNT)," "),i.xp6(7),i.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode)("ngModel",o._trnMainService.TrnMainObj.NETAMNT)("readonly",!0),i.xp6(5),i.Q6J("disabled",i.Dn7(56,21,o._trnMainService.TrnMainObj.VoucherType,o._trnMainService.TrnMainObj.Mode,o._trnMainService.TrnMainObj.DOFULLRETURN))("ngModel",o._trnMainService.TrnMainObj.ROUNDAMTMANUAL)}}let ue=(()=>{class l{constructor(o,M,_,u,A){this.masterService=o,this._trnMainService=M,this.arouter=_,this.alertservice=u,this._authService=A,this.hideShow=!1,this.focusOut=!1,this.focusOutReferNo=!1,this.roundingHover=!1,this.allIndDiscountsMissing=!1,this.genericGridTDSAccountSetting=new D.im,this.genericGridTDSAccountSubLedgerSetting=new D.im,this.onMemberIDSearch=new i.vpe,this.onMemberReferIDSearch=new i.vpe,this.onClickSlider=new i.vpe,this.showConfirm=!1,this.appType=this.masterService.appType,this.userSetting=A.getSetting(),console.log("callf10"),this.activeurlpath=_.snapshot.url[0].path,this.showOverWrite()}EnableMinusKeyPress(o){"Minus"===o.code&&o.stopPropagation()}ngOnInit(){this.AppMode=B.N.appMode}memberFocusOut(o){this.focusOut=!1,this._trnMainService.memberPopupForRefer=!1}memberReferFocusOut(o){this.focusOutReferNo=!1}memberReferFocusIN(o){this.focusOutReferNo=!0}memberFocusIN(o){this.focusOut=!0}onClickToolTip(o){this.onClickSlider.emit()}openCreateMembershipPopup(){"TI"==this._trnMainService.TrnMainObj.VoucherPrefix&&this.CreateMembership.show()}onClicked(){this._trnMainService.inputCode=!0}onSaveMembership(o){}onChangeFlatDiscount(){this._trnMainService.TrnMainObj.TOTALFLATDISCOUNT=this._trnMainService.TrnMainObj.FLATDCAMNT}onFlatDiscApply(){if(this._trnMainService.TrnMainObj){const o=(this._trnMainService.TrnMainObj.ProdList||[]).concat(this._trnMainService.TrnMainObj.AdditionProdList||[]);1==this.userSetting.EnableFDiscountBeforeIDiscount&&o.some(M=>M.INDDISCOUNT)?this.showConfirm=!0:this._trnMainService.afterDiscFlat()}}closeModal(){this.showConfirm=!1}checkFlatDiscountRate(o){return console.log("check discount rate",o),o>100?(this.alertservice.info("Flat discount rate cannot be greater than 100%"),void(this._trnMainService.TrnMainObj.DCRATE=0)):o<0?(this.alertservice.info("Flat discount rate cannot be less than 0%"),void(this._trnMainService.TrnMainObj.DCRATE=0)):void((0==o||null==o||null==o)&&this._trnMainService.onFlatDiscountClear())}checkFlatDiscountAmnt(o){let M=this._trnMainService.nullToZeroConverter(this._trnMainService.TrnMainObj.NETAMNT/1.13);return o>=M?(this.alertservice.info(`Flat discount amount cannot be greater than or equal to total amount: ${M}`),void(this._trnMainService.TrnMainObj.FLATDCAMNT=0)):o<0?(this.alertservice.info("Flat discount amount cannot be less than 0"),void(this._trnMainService.TrnMainObj.FLATDCAMNT=0)):void((0==o||null==o||null==o)&&this._trnMainService.onFlatDiscountClear())}checkAfterVatDiscount(o){return this._trnMainService.TrnMainObj.NETAMNT-this._trnMainService.TrnMainObj.AdditionalObj.AFTERVATDISCOUNT<=0?(this.alertservice.info(`Discount amount cannot be more than or equal to Net Amount: ${this._trnMainService.TrnMainObj.NETAMNT}`),void(this._trnMainService.TrnMainObj.AdditionalObj.AFTERVATDISCOUNT=0)):o<0?(this.alertservice.info("Discount amount cannot be less than 0"),void(this._trnMainService.TrnMainObj.AdditionalObj.AFTERVATDISCOUNT=0)):void 0}onTDSAccountEnter(){this.reIntialiseTDSData(),this.genericGridTDSAccountSetting={title:"TDS Accounts",apiEndpoints:"/getTDSAccountPagedList",defaultFilterIndex:1,columns:[{key:"ACCODE",title:"AC CODE",hidden:!1,noSearch:!1},{key:"ACNAME",title:"A/C NAME",hidden:!1,noSearch:!1}]},this.genericGridTDSAccount.show()}onTDSAccountSelect(o){this._trnMainService.TrnMainObj.AdditionalObj.SL_ACNAME=null,1==o.HASSUBLEDGER?(this._trnMainService.TrnMainObj.AdditionalObj.SubLedgerValidation=!0,this.showSubLedger()):(this._trnMainService.TrnMainObj.AdditionalObj.SubLedgerValidation=!1,this._trnMainService.TrnMainObj.AdditionalObj.SL_ACNAME=null,this._trnMainService.TrnMainObj.AdditionalObj.SL_ACID=null),this._trnMainService.TrnMainObj.AdditionalObj.TDSACCOUNTNAME=o.ACNAME,this._trnMainService.TrnMainObj.AdditionalObj.TDSACCOUNT=o.ACID}reIntialiseTDSData(){this._trnMainService.TrnMainObj.AdditionalObj.TDSACCOUNTNAME=null,this._trnMainService.TrnMainObj.AdditionalObj.TDSACCOUNT=null,this._trnMainService.TrnMainObj.AdditionalObj.SL_ACNAME=null,this._trnMainService.TrnMainObj.AdditionalObj.SL_ACID=null}showSubLedger(){this.genericGridTDSAccountSubLedgerSetting={title:"TDS Sub Ledger Accounts",apiEndpoints:"/getTDSAccountPagedListWithSubLedger",defaultFilterIndex:1,columns:[{key:"SL_ACID",title:"AC CODE",hidden:!1,noSearch:!1},{key:"SL_ACNAME",title:"A/C NAME",hidden:!1,noSearch:!1}]},this.genericGridTDSAccountSubLedger.show()}onTDSAccountSubLedgerSelect(o){console.log("jjsjs",o),this._trnMainService.TrnMainObj.AdditionalObj.SL_ACNAME=o.SL_ACNAME,this._trnMainService.TrnMainObj.AdditionalObj.SL_ACID=o.SL_ACID,this._trnMainService.TrnMainObj.AdditionalObj.SubLedgerValidation=!1}handleKeyDownboardEvent(o){"F10"==o.code&&(o.preventDefault(),this.hideShow=!this.hideShow,this.hideShow||(this.genericGridTDSAccount.hide(),this.genericGridTDSAccountSubLedger.hide())),"Enter"==o.code&&(this.focusOut&&this.onMemberIDSearch.emit(),this.focusOutReferNo&&this.onMemberReferIDSearch.emit()),"Insert"===o.code&&(o.preventDefault(),this._trnMainService.inputCode&&this.openCreateMembershipPopup())}hoverRounding(){this.roundingHover=!0}hoverRoundingLeave(){this.roundingHover=!1}changeAfterRoundAmt(){Math.abs(this.masterService.nullToZeroConverter(this._trnMainService.TrnMainObj.ROUNDAMTMANUAL))>0?this._trnMainService.TrnMainObj.ROUNDOFF?alert("Rounding amount has already been applied."):(this._trnMainService.TrnMainObj.ROUNDOFF=this._trnMainService.TrnMainObj.ROUNDAMTMANUAL,this._trnMainService.TrnMainObj.NETAMNT=this._trnMainService.TrnMainObj.NETAMNT+this._trnMainService.TrnMainObj.ROUNDAMTMANUAL):(this._trnMainService.TrnMainObj.ROUNDOFF=0,this._trnMainService.ReCalculateBillWithNormal())}doautomaticRounding(){console.log("rounding"),57==this._trnMainService.TrnMainObj.VoucherType&&this.rounding()}toggleVisibility(){this.hideShow=!this.hideShow}rounding(){this._trnMainService.TrnMainObj.VoucherType==g.Km.Sales||this._trnMainService.TrnMainObj.VoucherType==g.Km.TaxInvoice||this._trnMainService.TrnMainObj.VoucherType==g.Km.PerformaSalesInvoice||(this._trnMainService.TrnMainObj.ROUNDOFF&&(this._trnMainService.TrnMainObj.NETAMNT=this._trnMainService.TrnMainObj.NETAMNT-this._trnMainService.nullToZeroConverter(this._trnMainService.TrnMainObj.ROUNDAMTMANUAL),this._trnMainService.TrnMainObj.ROUNDOFF=0),this._trnMainService.TrnMainObj.NETWITHOUTROUNDOFF=Math.round(this._trnMainService.nullToZeroConverter(this._trnMainService.TrnMainObj.NETAMNT)),this._trnMainService.TrnMainObj.ROUNDOFF=this._trnMainService.TrnMainObj.NETWITHOUTROUNDOFF-this._trnMainService.TrnMainObj.NETAMNT,this._trnMainService.TrnMainObj.ROUNDAMTMANUAL=parseFloat(this._trnMainService.TrnMainObj.ROUNDOFF.toFixed(2)),this._trnMainService.TrnMainObj.NETAMNT=this._trnMainService.TrnMainObj.NETWITHOUTROUNDOFF)}keyPress(o){const _=String.fromCharCode(o.charCode);/[\b]/.test(_)||o.preventDefault()}showOverWrite(){if(this.allIndDiscountsMissing=!0,this._trnMainService.disableOverwriteButton=!1,this._trnMainService.TrnMainObj){const o=(this._trnMainService.TrnMainObj.ProdList||[]).concat(this._trnMainService.TrnMainObj.AdditionProdList||[]);this.allIndDiscountsMissing=!o.some(M=>M.INDDISCOUNT)}}}return l.\u0275fac=function(o){return new(o||l)(i.Y36(d.P),i.Y36(b.p),i.Y36(j.gz),i.Y36(E.c),i.Y36(y.e))},l.\u0275cmp=i.Xpm({type:l,selectors:[["voucher-sidebar-billdetail"]],viewQuery:function(o,M){if(1&o&&(i.Gf(J,5),i.Gf(H,5),i.Gf(K,5)),2&o){let _;i.iGM(_=i.CRH())&&(M.CreateMembership=_.first),i.iGM(_=i.CRH())&&(M.genericGridTDSAccount=_.first),i.iGM(_=i.CRH())&&(M.genericGridTDSAccountSubLedger=_.first)}},hostBindings:function(o,M){1&o&&i.NdJ("keydown",function(u){return M.EnableMinusKeyPress(u)})("keydown",function(u){return M.handleKeyDownboardEvent(u)},!1,i.evT)},outputs:{onMemberIDSearch:"onMemberIDSearch",onMemberReferIDSearch:"onMemberReferIDSearch",onClickSlider:"onClickSlider"},decls:9,vars:5,consts:[["class","backdrop",4,"ngIf"],["class","toggable-sidebar",3,"ngClass",4,"ngIf"],[3,"onsubmit"],["CreateMembership",""],[3,"popupsettings","onItemDoubleClick"],["genericGridTDSAccount",""],["genericGridTDSAccountSubLedger",""],[1,"backdrop"],[1,"toggable-sidebar",3,"ngClass"],["id","toggleButton",1,"btn","btn-info","btn-toggler",3,"click"],[1,"fa","fa-angle-double-left",3,"ngClass"],[1,"sidebar"],[1,"table","table-summary",2,"margin-bottom","0"],["class","mx-auto my-1 mt-2 box1",4,"ngIf"],[1,"table","table-summary"],["class","mx-auto my-1 mb-3 box1",4,"ngIf"],["class","mx-auto my-1 mb-2 box1",4,"ngIf"],[4,"ngIf"],[1,"mx-auto","my-1","mt-2","box1"],["class","buttons",4,"ngIf"],["type","number",2,"height","23px","width","95%",3,"disabled","ngModel","ngModelChange"],["type","number",2,"height","23px","width","95%",3,"disabled","ngModel","ngModelChange","change"],[1,"buttons"],[1,"actionbtn"],["class","btn btn-info ",3,"disabled","click",4,"ngIf"],["class","btn btn-info",3,"disabled","click",4,"ngIf"],[1,"btn","btn-info",3,"disabled","click"],[1,"mx-auto","my-1","mb-3","box1"],[1,"widthField"],["type","number",2,"height","23px","width","95%",3,"disabled","ngModel","readonly","ngModelChange"],["type","number","placeholder","Press Alt+Enter for Rounding",2,"height","23px","width","95%","font-size","12px",3,"disabled","ngModel","ngModelChange","keydown.enter","keydown.alt.enter"],[1,"mx-auto","my-1","mb-2","box1"],["type","number",2,"height","23px","width","95%",3,"disabled","readonly","ngModel"],["type","text","placeholder","Press Enter to select Account",2,"height","23px","width","95%",3,"disabled","ngModel","ngModelChange","keydown.enter","keyup","keypress"],["type","text","readonly","",2,"height","23px","width","95%","font-size","12px",3,"disabled","ngModel","ngModelChange"],[1,"modal-sticky",2,"display","block","padding","0px","margin-bottom","0rem","margin-right","-1rem"],[1,"modal-content","modal-content-main-area",2,"width","53%"],[1,"modal-header",2,"padding","0px","background","#c0c0c0"],[1,"modal-title",2,"padding-left","5px"],["aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-control-label",2,"font-size","14px"],[1,"modal-footer"],["type","button",1,"btn","btn-sm","btn-info",2,"font-size","10px","padding","6px",3,"click"],[1,"btn","btn-info","btn-toggler",3,"click"],[1,"table","table-summary",2,"text-align","left","white-space","nowrap"],[1,"box1","my-1","mx-auto"],["type","text","disabled","_trnMainService.TrnMainObj.VoucherType == 15",2,"height","23px","width","7.5rem",3,"ngModel","click","focusout","focusin","ngModelChange"],[2,"font-weight","500"],[2,"border-top","none"],[2,"border-top","none","font-weight","500"],["type","text","placeholder","Press Enter to Select",2,"height","23px","width","7.5rem",3,"ngModel","disabled","focusout","focusin","ngModelChange"],[2,"color","brown"],["type","number",2,"height","23px","width","85%","margin-right","5rem",3,"disabled","ngModel","readonly","ngModelChange"],["id","roundOffInput","type","number","placeholder","Press Alt+Enter for Rounding",2,"height","23px","width","95%","font-size","12px",3,"disabled","ngModel","ngModelChange","keydown.enter","keydown.alt.enter"],[2,"color","green"]],template:function(o,M){1&o&&(i.YNc(0,F,1,0,"div",0),i.YNc(1,U,12,10,"div",1),i.YNc(2,Me,57,29,"div",1),i.TgZ(3,"create-membership-dialog",2,3),i.NdJ("onsubmit",function(u){return M.onSaveMembership(u)}),i.qZA(),i.TgZ(5,"generic-popup-grid",4,5),i.NdJ("onItemDoubleClick",function(u){return M.onTDSAccountSelect(u)}),i.qZA(),i.TgZ(7,"generic-popup-grid",4,6),i.NdJ("onItemDoubleClick",function(u){return M.onTDSAccountSubLedgerSelect(u)}),i.qZA()),2&o&&(i.Q6J("ngIf",M.hideShow),i.xp6(1),i.Q6J("ngIf",14!=M._trnMainService.TrnMainObj.VoucherType&&"purchase-import-order"!=M.activeurlpath&&"asset-purchase-invoice"!=M.activeurlpath),i.xp6(1),i.Q6J("ngIf",(14==M._trnMainService.TrnMainObj.VoucherType||57==M._trnMainService.TrnMainObj.VoucherType||"abbreviated-sales-invoice"==M.activeurlpath||15==M._trnMainService.TrnMainObj.VoucherType)&&"self-billing"!=M.activeurlpath),i.xp6(3),i.Q6J("popupsettings",M.genericGridTDSAccountSetting),i.xp6(2),i.Q6J("popupsettings",M.genericGridTDSAccountSubLedgerSetting))},dependencies:[e.mk,e.O5,S.Fj,S.wV,S.JJ,S.On,D.Zl,x,v.g,Z],styles:[".toggable-sidebar[_ngcontent-%COMP%]{position:fixed;right:-22%;transition:.3s;width:260px;text-decoration:none;font-size:11px;font-weight:600;border-radius:0 5px 5px 0;color:#000;height:100%;width:22%;margin:0;z-index:2}@media (max-width: 1191px){.toggable-sidebar[_ngcontent-%COMP%]{right:-20%}}.mySidenav-show[_ngcontent-%COMP%]{right:0}@media (max-width: 1074px){.mySidenav-show[_ngcontent-%COMP%]{right:1rem}}.btn-toggler[_ngcontent-%COMP%]{position:absolute;left:-45px;top:-3px;background:#81DAAC!important;border-color:#81daac!important;padding:5px!important;font-size:10px!important;width:45px!important;z-index:3}.toggler-btn-icon-reverse[_ngcontent-%COMP%]{transform:rotate(180deg)}.table[_ngcontent-%COMP%], .billTender[_ngcontent-%COMP%]{background:#c0c0c0}.table-summary[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{font-size:12px;font-weight:700}.table-summary[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]:first-child{text-align:left!important}.actionbtn[_ngcontent-%COMP%]{padding:.25rem}.btn-info[_ngcontent-%COMP%]{font-size:9px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:11px;border:none!important}.box[_ngcontent-%COMP%]{border:1px solid grey;border-radius:1px}.hoverRounding[_ngcontent-%COMP%]{background:#17a2b8;position:fixed;border-radius:11px;text-align:center;vertical-align:middle;color:#fff;margin-top:-3.5%;right:26px;height:48px;font-size:12px;font-weight:500;line-height:23px;width:40px}@media (min-width: 1370px){.hoverRounding[_ngcontent-%COMP%]{right:42px;margin-top:-3.2%}}@media (max-height: 670px){.sidebar[_ngcontent-%COMP%]{height:526px;overflow-y:auto}}.box1[_ngcontent-%COMP%]{border:2px solid #e9e9e9;width:87%;border-radius:15px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:24%;padding:7px 5px!important}.buttons[_ngcontent-%COMP%]{display:flex;align-content:center;justify-content:space-evenly}input[_ngcontent-%COMP%]::placeholder{font-size:smaller}.backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#3d3c3c80;z-index:1}"]}),l})()}}]);