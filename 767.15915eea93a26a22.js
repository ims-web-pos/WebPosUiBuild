"use strict";(self.webpackChunkimserp=self.webpackChunkimserp||[]).push([[767],{60767:(rt,Z,p)=>{p.r(Z),p.d(Z,{UserManagerModule:()=>ot});var _=p(92752),P=p(89953);class D{static validate(s){return t=>"add"==s&&(""==t.value||t.value.length<5)?{editPasswordValidate:{valid:!1}}:null}}var O=p(66635),M=p(23815),a=p(7587);const F=[{MID:"Bill",children:[{MID:"Table View"},{MID:"Search Sales Person"},{MID:"Search Item F1"},{MID:"Re-print Bill"},{MID:"Recall Hold BIll"},{MID:"Sales Return"},{MID:"Hold Bill"},{MID:"Item Info"},{MID:"Clear Bill"},{MID:"Convert To Complementary Bill"},{MID:"Convert To VAT Bill"},{MID:"Bill Discount"},{MID:"Bill Preview"}]},{MID:"Customer",children:[{MID:"Search Customer"},{MID:"Add Customer"}]},{MID:"Order",children:[{MID:"Take Order"},{MID:"Search Order"},{MID:"Cancel Order"},{MID:"Non Warranty"},{MID:"Delivery Order"}]},{MID:"System",children:[{MID:"End Session"},{MID:"Day End"},{MID:"Day End Report"},{MID:"Force Close Session"},{MID:"Help"},{MID:"CashDrop Entry"},{MID:"PayOut Entry"},{MID:"Start Session"}]},{MID:"Check Card Balance",children:[]},{MID:"Footfall Entry",children:[]}],q=function(r){let s=r.value||"";return s?s&&s.length<6?{passwordStrength:"Password must be of minimum 6 characters"}:!1===/[A-Z]+/g.test(s)?{passwordStrength:"Password has to contain Upper case characters"}:!1===/[a-z]+/g.test(s)?{passwordStrength:"Password has to contain lower case characters"}:!1===/[0-9]+/g.test(s)?{passwordStrength:"Password has to contain number characters"}:!1===/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(s)?{passwordStrength:"Password has to contain special character"}:null:null};var A=p(92340),k=p(75655);const B=[{path:"pages",children:[{path:"dashboard",data:{menu:{title:"IMS-ERP",icon:"ion-android-home",selected:!0,expanded:!1,order:0}},children:[{path:"dashboard",data:{menu:{title:"Dashboard",icon:"ion-navicon-round",selected:!0,expanded:!1,order:0}}}]},{path:"account",menuType:[0],data:{menu:{title:"Accounting Entries",icon:"fa fa-usd"}},children:[{path:"AccountLedger",menuType:[0],data:{menu:{title:"Master Entry",icon:"nb-compose"}},children:[{path:"AccountMaster",menuType:[0],data:{menu:{title:"Account Master"}}},{path:"PartyTree",menuType:[0],data:{menu:{title:"Party Master"}}}]},{path:"acvouchers",menuType:[0],data:{menu:{title:"Accounting Vouchers"}},children:[{path:"journal-voucher",menuType:[0],data:{menu:{title:"Journal Voucher"}}},{path:"expense-voucher",menuType:[0],data:{menu:{title:"Expense Voucher"}}},{path:"income-voucher",menuType:[0],data:{menu:{title:"Income Voucher"}}},{path:"debit-note",menuType:[0],data:{menu:{title:"Debit Note -  AC Base"}}},{path:"credit-note",menuType:[0],data:{menu:{title:"Credit Note - AC Base"}}},{path:"capital-voucher",menuType:[0],data:{menu:{title:"Capitalize Purchase Voucher"}}}]},{path:"",menuType:[0],data:{menu:{title:"Opening Entry"}},children:[{path:"account-opening-balance",menuType:[0],data:{menu:{title:"Ledger Opening B/L"}}},{path:"party-opening-balance",menuType:[0],data:{menu:{title:"Party Opening B/L"}}}]}]},{path:"financialreports",menuType:[0],data:{menu:{title:"Accounting Reports",selected:!1,expanded:!1,order:1}},children:[{path:"account-ledger-reports",menuType:[0],data:{menu:{title:"Report",selected:!1,expanded:!1}},children:[{path:"accountledgerreport",menuType:[0],data:{menu:{title:"Account Ledger Report",selected:!1,expanded:!1}}},{path:"partyledgerreport",menuType:[0],data:{menu:{title:"Party Ledger Report",selected:!1,expanded:!1}}},{path:"debtorsreport",menuType:[0],data:{menu:{title:"Debtors Report",selected:!1,expanded:!1}}},{path:"creditorsreport",menuType:[0],data:{menu:{title:"Creditors Report",selected:!1,expanded:!1}}},{path:"voucher-regeister-report",menuType:[0],data:{menu:{title:"Voucher Register  Report",selected:!1,expanded:!1}}}]},{path:"trialbalance",menuType:[0],data:{menu:{title:"Trial Balance",selected:!1,expanded:!1}},children:[{path:"trial-balance-report",menuType:[0],data:{menu:{title:"Trial Balance Report",selected:!1,expanded:!1}}}]}]}]}],J=[{path:"pages",children:[{path:"dashboard",data:{menu:{title:"IMS-ERP",icon:"ion-android-home",selected:!0,expanded:!1,order:0}},children:[{path:"dashboard",data:{menu:{title:"Dashboard",icon:"ion-navicon-round",selected:!0,expanded:!1,order:0}}}]},{path:"account",menuType:[0],data:{menu:{title:"Financial Account",icon:"fa fa-usd"}},children:[{path:"AccountLedger",menuType:[0],data:{menu:{title:"Master Entry",icon:"nb-compose"}},children:[{path:"AccountMaster",menuType:[0],data:{menu:{title:"Account Master"}}},{path:"PartyTree",menuType:[0],data:{menu:{title:"Party Master"}}},{path:"chalan-master",menuType:[0],data:{menu:{title:"Chalan Master"}}},{path:"cost-center",menuType:[0],data:{menu:{title:"Cost Center Master"}}},{path:"subledger-master",menuType:[0],data:{menu:{title:"Sub Ledger Master"}}},{path:"voucher-series-master",manuType:[0],data:{menu:{title:"Voucher Series Master"}}},{path:"merchant-details",manuType:[0],data:{menu:{title:"Merchant Cellpay Details"}}},{path:"partycategory-master",manuType:[0],data:{menu:{title:"Party Category Master"}}}]},{path:"acvouchers",menuType:[0],data:{menu:{title:"Accounting Vouchers"}},children:[{path:"journal-voucher",menuType:[0],data:{menu:{title:"Journal Voucher"}}},{path:"contra-voucher",menuType:[0],data:{menu:{title:"Contra Voucher"}}},{path:"expense-voucher",menuType:[0],data:{menu:{title:"Payment Voucher"}}},{path:"income-voucher",menuType:[0],data:{menu:{title:"Receipt Voucher"}}},{path:"debit-note",menuType:[0],data:{menu:{title:"Debit Note -  AC Base"}}},{path:"credit-note",menuType:[0],data:{menu:{title:"Credit Note - AC Base"}}},{path:"bill-tracking",data:{menu:{title:"Bill Tracking Amendment"}}},{path:"additional-cost",data:{menu:{title:"Additional Cost"}}},{path:"newadditional-cost",data:{menu:{title:"New Additional Cost"}}},{path:"capital-voucher",menuType:[0],data:{menu:{title:"Capitalize Purchase Voucher"}}},{path:"postdirectory",menuType:[0],data:{menu:{title:"Post-Dated Cheque Voucher"}}},{path:"cellpay-voucher",menuType:[0],data:{menu:{title:"CellPay Voucher"}}}]},{path:"Opening",menuType:[0],data:{menu:{title:"Opening Entry"}},children:[{path:"account-opening-balance",menuType:[0],data:{menu:{title:"Ledger Opening B/L"}}},{path:"party-opening-balance",menuType:[0],data:{menu:{title:"Party Opening B/L"}}}]},{path:"ACPosting",data:{menu:{title:"Account Posting",icon:"nb-compose"}},children:[{path:"LatePostCollection",menuType:[0],data:{menu:{title:"Late Post"}}},{path:"EPaymentStatus",menuType:[0],data:{menu:{title:"EPayment Status"}}}]},{path:"Utilities",menuType:[0],data:{menu:{title:"Utilities"}},children:[{path:"bank-reconciliation",menuType:[0],data:{menu:{title:"Bank Reconciliation"}}},{path:"party-reconciliation",menuType:[0],data:{menu:{title:"Party Reconciliation"}}},{path:"party-balance-confirmation",menuType:[0],data:{menu:{title:"Party balance Confirmation"}}},{path:"PaymentCollection",menuType:[0],data:{menu:{title:"Payment Collection"}}}]},{path:"renum",menuType:[0],data:{menu:{title:"Renumbering"}},children:[{path:"VoucherRenumbering",menuType:[0],data:{menu:{title:"Voucher Renumbering"}}}]}]},{path:"transaction",menuType:[4],data:{menu:{title:"Transactions"}},children:[{path:"purchases",menuType:[0],data:{menu:{title:"Purchases",selected:!1,expanded:!1}},children:[{path:"add-purchase-invoice",menuType:[0],data:{menu:{title:"Purchase Invoice",selected:!1,expanded:!1}}},{path:"add-debitnote-itembase",menuType:[0],data:{menu:{title:"Purchase Return"}}}]},{path:"sales",menuType:[0],data:{menu:{title:"Sales",selected:!1,expanded:!1}},children:[{path:"addsientry",menuType:[0],data:{menu:{title:"Sales Invoice",selected:!1,expanded:!1}}},{path:"add-creditnote-itembase",menuType:[0],data:{menu:{title:"Sales Return"}}}]}]},{path:"financialreports",menuType:[0],data:{menu:{title:"Financial Report",selected:!1,expanded:!1,order:1}},children:[{path:"account-ledger-reports",menuType:[0],data:{menu:{title:"Ledger Report",selected:!1,expanded:!1}},children:[{path:"summaryledgerreport",menuType:[0],data:{menu:{title:"Account Group Ledger",selected:!1,expanded:!1}}},{path:"accountledgerreport",menuType:[0],data:{menu:{title:"Account Ledger Report",selected:!1,expanded:!1}}},{path:"summarypartyledger",menuType:[0],data:{menu:{title:"Party Group Ledger",selected:!1,expanded:!1}}},{path:"partyledgerreport",menuType:[0],data:{menu:{title:"Party Ledger Report",selected:!1,expanded:!1}}},{path:"sub-ledger-report-acbase",menuType:[0],data:{menu:{title:"Sub Ledger - Summary Report",selected:!1,expanded:!1}}},{path:"sub-ledger-report",menuType:[0],data:{menu:{title:"Sub Ledger - Ledger Report",selected:!1,expanded:!1}}}]},{path:"additionalreport",menuType:[0],data:{menu:{title:"   Debtors & Creditors Report",selected:!1,expanded:!1}},children:[{path:"debtorsreport",menuType:[0],data:{menu:{title:"Debtors Report",selected:!1,expanded:!1}}},{path:"creditorsreport",menuType:[0],data:{menu:{title:"Creditors Report",selected:!1,expanded:!1}}},{path:"debtorsagingreport",menuType:[0],data:{menu:{title:"Debtors Ageing Report",selected:!1,expanded:!1}}},{path:"creditorsagingreport",menuType:[0],data:{menu:{title:"Creditors Ageing Report",selected:!1,expanded:!1}}},{path:"debtorsoutstandingreport",menuType:[0],data:{menu:{title:"Debtors Outstanding  Report",selected:!1,expanded:!1}}},{path:"creditorsoutstandingreport",menuType:[0],data:{menu:{title:"Creditors Outstanding  Report",selected:!1,expanded:!1}}},{path:"bill-tracking-report",menuType:[0],data:{menu:{title:"Debtors Bill Tracking Report",selected:!1,expanded:!1}}},{path:"creditorsbill-tracking-report",menuType:[0],data:{menu:{title:"Creditors Bill Tracking Report",selected:!1,expanded:!1}}}]},{path:"registerBookReports",menuType:[0],data:{menu:{title:"   Register & Books Report"}},children:[{path:"voucher-regeister-report",menuType:[0],data:{menu:{title:"Voucher Register  Report",selected:!1,expanded:!1}}},{path:"cash-bank-book-report",menuType:[0],data:{menu:{title:"Cash & Bank Book Report",selected:!1,expanded:!1}}},{path:"day-book-report",menuType:[0],data:{menu:{title:"Day Book Report",selected:!1,expanded:!1}}},{path:"tds-report",menuType:[0],data:{menu:{title:"TDS Report",selected:!1,expanded:!1}}},{path:"postdated-chequevoucher-report",menuType:[0],data:{menu:{title:"Post-Dated Cheque Voucher Report",selected:!1,expanded:!1}}},{path:"monthly-sales-payment-report",menuType:[0],data:{menu:{title:"Monthly Sales Payment Report",selected:!1,expanded:!1}}}]},{path:"trialbalance",menuType:[0],data:{menu:{title:"Trial Balance",selected:!1,expanded:!1}},children:[{path:"trial-balance-report",menuType:[0],data:{menu:{title:"Trial Balance Report",selected:!1,expanded:!1}}},{path:"consolidated-trialbalance-report",menuType:[0],data:{menu:{title:" Consolidated Trial Balance",selected:!1,expanded:!1}}}]},{path:"final-report",menuType:[0],data:{menu:{title:"Final Report"}},children:[{path:"profit-loss-report",menuType:[0],data:{menu:{title:"Profit & Loss",selected:!1,expanded:!1}}},{path:"balance-sheet-report",menuType:[0],data:{menu:{title:"Balance Sheet",selected:!1,expanded:!1}}},{path:"consolidated-profit-loss-report",menuType:[0],data:{menu:{title:"Consolidated Profit & Loss",selected:!1,expanded:!1}}},{path:"consolidated-balance-sheet-report",menuType:[0],data:{menu:{title:"Consolidated Balance Sheet",selected:!1,expanded:!1}}}]},{path:"additionalcostreport",menuType:[0],data:{menu:{title:"  Additional Cost Report"}},children:[{path:"additionalcost-voucherwise-report",menuType:[0],data:{menu:{title:"Additional Cost Voucherwise Report",selected:!1,expanded:!1}}},{path:"additionalcost-itemwise-report",menuType:[0],data:{menu:{title:"Additional Cost Itemwise Report",selected:!1,expanded:!1}}}]},{path:"salesreport",menuType:[0],data:{menu:{title:"Sales Report"}},children:[{path:"salesreturnsummary-report",menuType:[0],data:{menu:{title:"Sales Return Summary Report",selected:!1,expanded:!1}}},{path:"salesreturnsummaryretailer-report",menuType:[0],data:{menu:{title:"Sales Return Summary Retailer Report",selected:!1,expanded:!1}}},{path:"salesreturn-reportdetail",menuType:[0],data:{menu:{title:"Sales Return Report Detail",selected:!1,expanded:!1}}}]},{path:"inventoryreport-dms",menuType:[0],data:{menu:{title:"Inventory Report"}},children:[{path:"stocksummary-reportdms",menuType:[0],data:{menu:{title:"Stock Summary Report"}}},{path:"stockledger-reportdms",menuType:[0],data:{menu:{title:"Stock Ledger Report"}}},{path:"stockvaluation-reportdms",menuType:[0],data:{menu:{title:"Stock Valuation Report"}}},{path:"stockabc-analysis-reportdms",menuType:[0],data:{menu:{title:"Stock ABC Analysis Report"}}},{path:"currentstock-warehousewise-reportdms",menuType:[0],data:{menu:{title:"Stock Report - Warehouse Wise"}}}]}]},{path:"configuration",menuType:[0],data:{menu:{title:"Configuration",icon:"ion-gear-b",selected:!1,expanded:!1,order:2}},children:[{path:"userManager",menuType:[0],data:{menu:{title:"User Manager",icon:"ion-android-people",selected:!1,expanded:!1,order:90}},children:[{path:"userlist",menuType:[0],data:{menu:{title:"User List"}}}]},{path:"manual-sync",menuType:[0],data:{menu:{title:"Manual Sync",selected:!1,expanded:!1}}},{path:"master-migration",menuType:[0],data:{menu:{title:"Master Migration"}}}]}]}];let V=(()=>{class r{static validate(t){const n=t.value||"";return n?-1===n.indexOf("@")?{emailFormat:"Email must contain '@'"}:-1===n.indexOf(".com")?{emailFormat:"Email must contain '.com'"}:r.EMAIL_REGEXP.test(n)?null:{validateEmail:{valid:!1}}:null}}return r.EMAIL_REGEXP=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,r})();var e=p(66274),G=p(14970),S=p(67311),I=p(53074),b=p(79765),Q=p(76165),U=p(67297),H=p(71180);let y=(()=>{class r{constructor(t,n,i){this.http=t,this.authService=n,this.gblState=i;let o=this.gblState.getGlobalSetting("apiUrl");o&&o.length>0&&(this.apiUrl=o)}getUserProfile(t){let n={status:"error",result:""},i=new b.xQ;const o={headers:this.authService.getRequestOption(),method:"post"};return this.http.get(this.apiUrl+"/getUser?username="+t,o).subscribe(l=>{i.next(l),i.unsubscribe()},l=>{n.status="error",n.result=l,i.next(n),i.unsubscribe()}),i}getRightList(){const t={headers:this.authService.getRequestOption(),method:"post"};let n={status:"error",result:""},i=new b.xQ;return this.http.get(this.apiUrl+"/getUserrightList",t).subscribe(o=>{i.next(o),i.unsubscribe()},o=>{n.status="error",n.result=o,i.next(n),i.unsubscribe()}),i}getUserList(){const t={headers:this.authService.getRequestOption(),method:"post"};let n={status:"error",result:""},i=new b.xQ;return this.http.get(this.apiUrl+"/getUserList",t).subscribe(o=>{i.next(o),i.unsubscribe()},o=>{n.status="error",n.result=o,i.next(n),i.unsubscribe()}),i}saveUser(t){const n={headers:this.authService.getRequestOption(),method:"post"};return this.http.post(this.apiUrl+"/saveuser",t,n)}saveRole(t){const n={headers:this.authService.getRequestOption(),method:"post"};return this.http.post(this.apiUrl+"/saveRole",t,n)}getRoleList(){const t={headers:this.authService.getRequestOption(),method:"post"};return this.http.get(this.apiUrl+"/getRoleList",t)}getPosRightsList(){console.log("get pos rights");const t={headers:this.authService.getRequestOption(),method:"post"};return this.http.get(this.apiUrl+"/getPosRights",t)}getRole(t){const n={headers:this.authService.getRequestOption(),method:"post"};return this.http.get(`${this.apiUrl}/getRole/?rolename=${t}`,n)}getProductCategoryName(){const t={headers:this.authService.getRequestOption(),method:"post"};return this.http.get(`${this.apiUrl}/getProdcutCategoryLineList`,t)}getUserDivList(t){const n={headers:this.authService.getRequestOption(),method:"post"};return this.http.get(`${this.apiUrl}/getUserDivList?username=`+t,n)}getPosBillingRightsMenu(){return this.http.get(this.apiUrl+"/getPosBillingRightsMenu")}getMenuDependencyList(){return this.http.get(this.apiUrl+"/getMenuDependencyList")}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(Q.eN),e.LFG(U.e),e.LFG(H.q))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var f=p(48083),R=p(23804),N=p(71259);const W=["childModal"],Y=["loginModal"];function z(r,s){1&r&&(e.TgZ(0,"li",13)(1,"a",78),e._uU(2,"User-right privilege"),e.qZA()())}function K(r,s){1&r&&(e.TgZ(0,"label",79),e._uU(1,"Is Waiter:\xa0"),e.qZA())}const C=function(){return{standalone:!0}};function $(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"input",80),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.checkChangeforisWaiter(i))})("ngModelChange",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.isWaiter=i)}),e.qZA()}if(2&r){const t=e.oxw(2);e.Q6J("ngModelOptions",e.DdM(2,C))("ngModel",t.isWaiter)}}function j(r,s){1&r&&(e.TgZ(0,"div"),e._uU(1," password is required "),e.qZA())}function X(r,s){if(1&r&&(e.TgZ(0,"div",83),e._uU(1),e.qZA()),2&r){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.userForm.get("password").errors.passwordStrength," ")}}function ee(r,s){if(1&r&&(e.TgZ(0,"div",81),e.YNc(1,j,2,0,"div",7),e.YNc(2,X,2,1,"div",82),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.userForm.get("password").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.userForm.get("password").hasError("passwordStrength"))}}function te(r,s){if(1&r&&(e.TgZ(0,"div",83),e._uU(1),e.qZA()),2&r){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.userForm.get("email").errors.emailFormat," ")}}function ie(r,s){if(1&r&&(e.TgZ(0,"div",81),e.YNc(1,te,2,1,"div",82),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.userForm.get("email").hasError("emailFormat"))}}function ne(r,s){if(1&r&&(e.TgZ(0,"option",84),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.s9C("value",t.rolename),e.xp6(1),e.hij(" ",null==t?null:t.rolename," ")}}function oe(r,s){if(1&r&&(e.TgZ(0,"option",84),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.s9C("value",t.INITIAL),e.xp6(1),e.hij(" ",null==t?null:t.NAME," ")}}function re(r,s){if(1&r&&(e.TgZ(0,"option",84),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.s9C("value",t.NAME),e.xp6(1),e.hij(" ",null==t?null:t.NAME," ")}}function se(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",24)(1,"ng-multiselect-dropdown",86),e.NdJ("onSelect",function(i){e.CHM(t);const o=e.oxw(3);return e.KtG(o.onCCSelect(i))})("onSelectAll",function(i){e.CHM(t);const o=e.oxw(3);return e.KtG(o.onCCSelectAll(i))})("onDeSelect",function(i){e.CHM(t);const o=e.oxw(3);return e.KtG(o.onCCDeSelect(i))})("onDeSelectAll",function(i){e.CHM(t);const o=e.oxw(3);return e.KtG(o.onCCDeSelectAll(i))}),e.qZA()()}if(2&r){const t=e.oxw(3);e.xp6(1),e.Q6J("placeholder","Select Cost Center ")("settings",t.costcenterSettings)("data",t.costcenterlist)}}function ae(r,s){if(1&r&&(e.TgZ(0,"div",21)(1,"label",35),e._uU(2,"Cost-center Mapping:"),e.qZA(),e.YNc(3,se,2,3,"div",85),e.qZA()),2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",t.costcenterlist.length)}}function le(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",9)(1,"label",48),e._uU(2," Discount Limit in Sales Order"),e.qZA(),e.TgZ(3,"input",52),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.discountLimitInSO=i)})("ngModelChange",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.checkDiscountLimit(i))}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.discountLimitInSO)}}function ce(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",9)(1,"label",48),e._uU(2,"Allow Sales Rate Change"),e.qZA(),e.TgZ(3,"input",49),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.AllowRateChangeInSO=i.target.checked?1:0)})("ngModelChange",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.AllowRateChangeInSO=i)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.AllowRateChangeInSO)}}function de(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",9)(1,"label",48),e._uU(2," Allow Minus Stock"),e.qZA(),e.TgZ(3,"input",49),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.AllowMinusStock=i.target.checked?1:0)})("ngModelChange",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.AllowMinusStock=i)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.AllowMinusStock)}}function ue(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",54)(1,"label",48),e._uU(2," User Wise Ageing Limit"),e.qZA(),e.TgZ(3,"input",52),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.StockAgeingLimit=i)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.StockAgeingLimit)}}function he(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",87)(1,"label",48),e._uU(2,"Allow WholeSale Bill"),e.qZA(),e.TgZ(3,"input",49),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.allowWholesaleBill=i.target.checked?1:0)})("ngModelChange",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.allowWholesaleBill=i)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.allowWholesaleBill)}}function pe(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"tbody",64)(1,"tr",64)(2,"td",65)(3,"input",66),e.NdJ("ngModelChange",function(i){const l=e.CHM(t).$implicit;return e.KtG(l.isCheck=i)})("change",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.ChangeDiv())}),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA()()()}if(2&r){const t=s.$implicit;e.xp6(3),e.Q6J("ngModelOptions",e.DdM(3,C))("ngModel",t.isCheck),e.xp6(2),e.Oqu(null==t?null:t.NAME)}}function ge(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"tbody",64)(1,"tr",64)(2,"td",65)(3,"input",66),e.NdJ("ngModelChange",function(i){const l=e.CHM(t).$implicit;return e.KtG(l.isCheck_trn=i)})("change",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.ChangeDiv_trn())}),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA()()()}if(2&r){const t=s.$implicit;e.xp6(3),e.Q6J("ngModelOptions",e.DdM(3,C))("ngModel",t.isCheck_trn),e.xp6(2),e.Oqu(null==t?null:t.NAME)}}function me(r,s){1&r&&(e.TgZ(0,"tr",88)(1,"td",74),e._UZ(2,"input",89),e.qZA(),e.TgZ(3,"td",75),e._UZ(4,"input",90),e.TgZ(5,"span"),e._uU(6," Open"),e.qZA()()()),2&r&&e.Q6J("formGroupName",s.index)}function _e(r,s){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"ul",12)(6,"li",13)(7,"a",14),e._uU(8,"User Information"),e.qZA()(),e.TgZ(9,"li",13)(10,"a",15),e._uU(11,"User Rights"),e.qZA()(),e.YNc(12,z,3,0,"li",16),e.TgZ(13,"li",13)(14,"a",17),e._uU(15,"POS Billing Rights"),e.qZA()()(),e.TgZ(16,"div",18)(17,"div",19)(18,"form",20)(19,"div",21)(20,"label",22),e._uU(21,"User Name:\xa0"),e.TgZ(22,"span",23),e._uU(23,"*"),e.qZA()(),e.TgZ(24,"div",24),e._UZ(25,"input",25),e.qZA(),e.YNc(26,K,2,0,"label",26),e.YNc(27,$,1,3,"input",27),e.qZA(),e.TgZ(28,"div",21)(29,"label",28),e._uU(30,"Password:\xa0"),e.TgZ(31,"span",23),e._uU(32,"*"),e.qZA()(),e.TgZ(33,"div",24),e._UZ(34,"input",29),e.YNc(35,ee,3,2,"div",30),e.qZA()(),e.TgZ(36,"div",21)(37,"label",31),e._uU(38,"Full Name:\xa0"),e.qZA(),e.TgZ(39,"div",24),e._UZ(40,"input",32),e.qZA()(),e.TgZ(41,"div",21)(42,"label",33),e._uU(43,"Email:\xa0"),e.TgZ(44,"span",23),e._uU(45,"*"),e.qZA()(),e.TgZ(46,"div",24),e._UZ(47,"input",34),e.YNc(48,ie,2,1,"div",30),e.qZA()(),e.TgZ(49,"div",21)(50,"label",35),e._uU(51,"Mobile No:"),e.qZA(),e.TgZ(52,"div",24),e._UZ(53,"input",36),e.qZA()(),e.TgZ(54,"div",21)(55,"label",35),e._uU(56,"Citizenship No:"),e.qZA(),e.TgZ(57,"div",24),e._UZ(58,"input",37),e.qZA()(),e.TgZ(59,"div",21)(60,"label",35),e._uU(61,"Role:\xa0"),e.TgZ(62,"span",23),e._uU(63,"*"),e.qZA()(),e.TgZ(64,"div",24)(65,"select",38),e.NdJ("change",function(){e.CHM(t);const i=e.oxw();let o;return e.KtG(i.onRoleChange(null==(o=i.userForm.get("role"))?null:o.value))}),e.YNc(66,ne,2,2,"option",39),e.qZA()()(),e.TgZ(67,"div",21)(68,"label",35),e._uU(69,"Default Division:\xa0"),e.TgZ(70,"span",23),e._uU(71,"*"),e.qZA()(),e.TgZ(72,"div",24)(73,"select",40),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.onDivisionSelect(i))}),e.YNc(74,oe,2,2,"option",39),e.qZA()()(),e.TgZ(75,"div",21)(76,"label",35),e._uU(77,"Default Warehouse:\xa0"),e.TgZ(78,"span",23),e._uU(79,"*"),e.qZA()(),e.TgZ(80,"div",24)(81,"select",41),e.YNc(82,re,2,2,"option",39),e.qZA()()(),e.YNc(83,ae,4,1,"div",42),e.TgZ(84,"div",21)(85,"label",35),e._uU(86,"Status:"),e.qZA(),e.TgZ(87,"div",24)(88,"select",43)(89,"option",44),e._uU(90,"Active"),e.qZA(),e.TgZ(91,"option",45),e._uU(92,"Inactive"),e.qZA()()()()()(),e.TgZ(93,"div",46)(94,"div",47)(95,"div",1)(96,"div",9)(97,"label",48),e._uU(98," Allow Zero Rate in PI"),e.qZA(),e.TgZ(99,"input",49),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.allowzeroinPIrate=i.target.checked?1:0)})("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.allowzeroinPIrate=i)}),e.qZA()(),e.TgZ(100,"div",9)(101,"label",48),e._uU(102," Allow Sales below Purchase Rate"),e.qZA(),e.TgZ(103,"input",49),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.AllowSalesBelowCRate=i.target.checked?1:0)})("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.AllowSalesBelowCRate=i)}),e.qZA()(),e.YNc(104,le,4,1,"div",50),e.TgZ(105,"div",51)(106,"label",48),e._uU(107," User Discount Limit"),e.qZA(),e.TgZ(108,"input",52),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.userDiscountLimit=i)}),e.qZA()(),e.YNc(109,ce,4,1,"div",50),e.TgZ(110,"div",9)(111,"label",48),e._uU(112," Allow Reverse Entry"),e.qZA(),e.TgZ(113,"input",49),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.AllowReverseEntry=i.target.checked?1:0)})("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.AllowReverseEntry=i)}),e.qZA()(),e.YNc(114,de,4,1,"div",50),e.TgZ(115,"div",9)(116,"label",48),e._uU(117," Credit Limit Authorization"),e.qZA(),e.TgZ(118,"input",49),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.AuthorizeCreditLimit=i.target.checked?1:0)})("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.AuthorizeCreditLimit=i)}),e.qZA()(),e.TgZ(119,"div",9)(120,"label",48),e._uU(121," Allow Rate Change in Barcode Printing"),e.qZA(),e.TgZ(122,"input",49),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.AllowRateChangeInBarcodePrinting=i.target.checked?1:0)})("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.AllowRateChangeInBarcodePrinting=i)}),e.qZA()(),e.YNc(123,ue,4,1,"div",53),e.TgZ(124,"div",54)(125,"label",48),e._uU(126,"Show Graph Dashboard"),e.qZA(),e.TgZ(127,"input",49),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.ShowDashboard=i.target.checked?1:0)})("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.ShowDashboard=i)}),e.qZA()(),e.TgZ(128,"div",54)(129,"label",48),e._uU(130,"Allow Contract Price below Purchase Rate"),e.qZA(),e.TgZ(131,"input",49),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.AllowContractPriceBelowPRate=i.target.checked?1:0)})("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.AllowContractPriceBelowPRate=i)}),e.qZA()(),e.YNc(132,he,4,1,"div",55),e.qZA()()(),e.TgZ(133,"div",56)(134,"form",57)(135,"div",58)(136,"div",59)(137,"table",60)(138,"thead")(139,"tr"),e._UZ(140,"th",61),e.TgZ(141,"th",62),e._uU(142,"Report Division Privilege"),e.qZA()()(),e.TgZ(143,"div",63)(144,"tbody",64)(145,"tr",64)(146,"td",65)(147,"input",66),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.SelectAll=i)})("change",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.ChangeAll())}),e.qZA()(),e.TgZ(148,"td"),e._uU(149,"Select All"),e.qZA()()(),e.YNc(150,pe,6,4,"tbody",67),e.qZA()()(),e.TgZ(151,"div",59)(152,"table",60)(153,"thead")(154,"tr"),e._UZ(155,"th",61),e.TgZ(156,"th",62),e._uU(157,"Transaction Division Privilege"),e.qZA()()(),e.TgZ(158,"div",63)(159,"tbody",64)(160,"tr",64)(161,"td",65)(162,"input",66),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.SelectAll_trn=i)})("change",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.ChangeAll_trn())}),e.qZA()(),e.TgZ(163,"td"),e._uU(164,"Select All"),e.qZA()()(),e.YNc(165,ge,6,4,"tbody",67),e.qZA()()()()()(),e.TgZ(166,"div",68)(167,"div",57)(168,"div",69)(169,"table",70)(170,"thead")(171,"tr",71)(172,"th",72),e._uU(173,"Menu"),e.qZA()()(),e.TgZ(174,"tbody")(175,"tr",73)(176,"td",74),e._uU(177," Select All "),e.qZA(),e.TgZ(178,"td",75)(179,"input",76),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.onSelectAllPOSBillRights("OPEN",i.target.checked))}),e.qZA(),e.TgZ(180,"span"),e._uU(181," Open"),e.qZA()()(),e.YNc(182,me,7,1,"tr",77),e.qZA()()()()()()()()()(),e.BQk()}if(2&r){const t=e.oxw();e.xp6(12),e.Q6J("ngIf",1==t.masterService.userSetting.UserwiseDivision),e.xp6(6),e.Q6J("formGroup",t.userForm),e.xp6(8),e.Q6J("ngIf",1==t.userSetting.EnableServiceCharge),e.xp6(1),e.Q6J("ngIf",1==t.userSetting.EnableServiceCharge),e.xp6(8),e.Q6J("ngIf",t.userForm.get("password").invalid&&(t.userForm.get("password").touched||t.userForm.get("password").dirty)),e.xp6(13),e.Q6J("ngIf",t.userForm.get("email").invalid&&(t.userForm.get("email").touched||t.userForm.get("email").dirty)),e.xp6(18),e.Q6J("ngForOf",t.roleList),e.xp6(8),e.Q6J("ngForOf",t.divisionList),e.xp6(8),e.Q6J("ngForOf",t.warehouseListByDivMapped),e.xp6(1),e.Q6J("ngIf",1==t.userSetting.EnableCostCenterWiseAccounting&&0!=t.userSetting.enableCostCenter),e.xp6(16),e.Q6J("ngModel",t.allowzeroinPIrate),e.xp6(4),e.Q6J("ngModel",t.AllowSalesBelowCRate),e.xp6(1),e.Q6J("ngIf","pro"==t.AppMode),e.xp6(4),e.Q6J("ngModel",t.userDiscountLimit),e.xp6(1),e.Q6J("ngIf","pro"==t.AppMode),e.xp6(4),e.Q6J("ngModel",t.AllowReverseEntry),e.xp6(1),e.Q6J("ngIf",1==t.masterService.userSetting.ENABLESINGLEBATCHMODE),e.xp6(4),e.Q6J("ngModel",t.AuthorizeCreditLimit),e.xp6(4),e.Q6J("ngModel",t.AllowRateChangeInBarcodePrinting),e.xp6(1),e.Q6J("ngIf",1==t.masterService.userSetting.EnableUserWiseAgeingLimit),e.xp6(4),e.Q6J("ngModel",t.ShowDashboard),e.xp6(4),e.Q6J("ngModel",t.AllowContractPriceBelowPRate),e.xp6(1),e.Q6J("ngIf",1===t.masterService.userSetting.ENABLEWSALESRATEBILLING&&1===t.masterService.userSetting.EnableWSalesRate),e.xp6(2),e.Q6J("formGroup",t.roleForm),e.xp6(13),e.Q6J("ngModelOptions",e.DdM(32,C))("ngModel",t.SelectAll),e.xp6(3),e.Q6J("ngForOf",t.userdivisionList),e.xp6(12),e.Q6J("ngModelOptions",e.DdM(33,C))("ngModel",t.SelectAll_trn),e.xp6(3),e.Q6J("ngForOf",t.userdivisionList),e.xp6(2),e.Q6J("formGroup",t.userForm),e.xp6(15),e.Q6J("ngForOf",t.userForm.controls.PosBillingRights.controls)}}function fe(r,s){1&r&&(e.ynx(0),e.TgZ(1,"td",75),e._UZ(2,"input",105),e.TgZ(3,"span"),e._uU(4," View"),e.qZA()(),e.TgZ(5,"td",75),e._UZ(6,"input",106),e.TgZ(7,"span"),e._uU(8," Add"),e.qZA()(),e.TgZ(9,"td",75),e._UZ(10,"input",107),e.TgZ(11,"span"),e._uU(12," Edit"),e.qZA()(),e.TgZ(13,"td",75),e._UZ(14,"input",108),e.TgZ(15,"span"),e._uU(16," Delete"),e.qZA()(),e.TgZ(17,"td",75),e._UZ(18,"input",109),e.TgZ(19,"span"),e._uU(20," Print"),e.qZA()(),e.BQk())}function ve(r,s){if(1&r&&(e.TgZ(0,"tr",88)(1,"td",100),e._UZ(2,"input",89),e.qZA(),e.YNc(3,fe,21,0,"ng-container",7),e.qZA()),2&r){const t=s.index,n=e.oxw(2);e.Q6J("formGroupName",t),e.xp6(3),e.Q6J("ngIf",""!=n.path)}}function Ae(r,s){if(1&r&&(e.TgZ(0,"div")(1,"Label",115),e._uU(2),e.qZA(),e._UZ(3,"input",116),e.qZA()),2&r){const t=e.oxw(2).$implicit;e.xp6(2),e.Oqu(t.value.description)}}function Ce(r,s){1&r&&e._UZ(0,"input",118)}function Te(r,s){1&r&&(e.TgZ(0,"span"),e._UZ(1,"input",119),e.qZA())}function xe(r,s){if(1&r&&(e.TgZ(0,"div")(1,"Label",115),e._uU(2),e.qZA(),e.YNc(3,Ce,1,0,"input",117),e.YNc(4,Te,2,0,"span",7),e.qZA()),2&r){const t=e.oxw(2).$implicit;e.xp6(2),e.Oqu(t.value.description),e.xp6(1),e.Q6J("ngIf","WAREHOUSE"!=t.value.right),e.xp6(1),e.Q6J("ngIf","WAREHOUSE"!=t.value.right)}}function we(r,s){if(1&r&&(e.TgZ(0,"option",84),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.s9C("value",t.INITIAL),e.xp6(1),e.hij("",t.NAME," ")}}function Me(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"Label",115),e._uU(2),e.qZA(),e._UZ(3,"input",118),e.TgZ(4,"span")(5,"select",120),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw(5);return e.KtG(o.changeDivision(i.target.value))}),e.YNc(6,we,2,2,"option",39),e.ALo(7,"async"),e.qZA()()()}if(2&r){const t=e.oxw(2).$implicit,n=e.oxw(3);e.xp6(2),e.Oqu(t.value.description),e.xp6(4),e.Q6J("ngForOf",e.lcZ(7,2,n.masterService.allDivisionList$))}}function be(r,s){if(1&r&&(e.TgZ(0,"option",124),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.Q6J("ngValue",t.NAME),e.xp6(1),e.hij(" ",t.NAME," ")}}function ye(r,s){if(1&r&&(e.TgZ(0,"div")(1,"Label",115),e._uU(2),e.qZA(),e._UZ(3,"input",121),e.TgZ(4,"span")(5,"select",122),e.YNc(6,be,2,2,"option",123),e.qZA()()()),2&r){const t=e.oxw(2).$implicit,n=e.oxw(3);e.xp6(2),e.Oqu(t.value.description),e.xp6(4),e.Q6J("ngForOf",n.divisionWarehouseList)}}function Ze(r,s){if(1&r&&(e.TgZ(0,"div")(1,"Label",115),e._uU(2),e.qZA(),e.TgZ(3,"span"),e._UZ(4,"input",125),e.qZA()()),2&r){const t=e.oxw(2).$implicit;e.xp6(2),e.Oqu(t.value.description)}}function Se(r,s){if(1&r&&(e.ynx(0),e.TgZ(1,"div",114),e.YNc(2,Ae,4,1,"div",7),e.YNc(3,xe,5,3,"div",7),e.YNc(4,Me,8,4,"div",7),e.YNc(5,ye,7,2,"div",7),e.YNc(6,Ze,5,1,"div",7),e.qZA(),e.BQk()),2&r){const t=e.oxw(),n=t.index,i=t.$implicit;e.xp6(1),e.Q6J("formGroupName",n),e.xp6(1),e.Q6J("ngIf","tinyint"==i.value.valueType),e.xp6(1),e.Q6J("ngIf",("varchar"==i.value.valueType||"char"==i.value.valueType)&&"DIVISION"!=i.value.right),e.xp6(1),e.Q6J("ngIf",("varchar"==i.value.valueType||"char"==i.value.valueType)&&"DIVISION"==i.value.right),e.xp6(1),e.Q6J("ngIf",("varchar"==i.value.valueType||"char"==i.value.valueType)&&"WAREHOUSE"==i.value.right),e.xp6(1),e.Q6J("ngIf","numeric"==i.value.valueType||"decimal"==i.value.valueType||"float"==i.value.valueType)}}function Ie(r,s){if(1&r&&(e.TgZ(0,"div",113),e.YNc(1,Se,7,6,"ng-container",7),e.qZA()),2&r){const t=s.$implicit;e.xp6(1),e.Q6J("ngIf","DIVISION"!=t.value.right&&"WAREHOUSE"!=t.value.right)}}function Ue(r,s){if(1&r&&(e.TgZ(0,"div",110)(1,"div",111),e.YNc(2,Ie,2,1,"div",112),e.qZA()()),2&r){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.roleForm.controls.userRights.controls)}}function Re(r,s){1&r&&(e.ynx(0),e.TgZ(1,"td",75),e._UZ(2,"input",105),e.TgZ(3,"span"),e._uU(4," View"),e.qZA()(),e.TgZ(5,"td",75),e._UZ(6,"input",106),e.TgZ(7,"span"),e._uU(8," Add"),e.qZA()(),e.TgZ(9,"td",75),e._UZ(10,"input",107),e.TgZ(11,"span"),e._uU(12," Edit"),e.qZA()(),e.TgZ(13,"td",75),e._UZ(14,"input",108),e.TgZ(15,"span"),e._uU(16," Delete"),e.qZA()(),e.TgZ(17,"td",75),e._UZ(18,"input",109),e.TgZ(19,"span"),e._uU(20," Print"),e.qZA()(),e.BQk())}function Ne(r,s){if(1&r&&(e.TgZ(0,"tr",88)(1,"td",100),e._UZ(2,"input",89),e.qZA(),e.YNc(3,Re,21,0,"ng-container",7),e.qZA()),2&r){const t=s.index,n=e.oxw(2);e.Q6J("formGroupName",t),e.xp6(3),e.Q6J("ngIf",""!=n.path)}}function Le(r,s){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"form",57)(2,"div",21)(3,"label",91),e._uU(4,"Role Name"),e.qZA(),e.TgZ(5,"div",92),e._UZ(6,"input",93),e.qZA()(),e.TgZ(7,"div",8)(8,"div",9)(9,"div",10)(10,"div",94)(11,"ul",12)(12,"li",13)(13,"a",95),e._uU(14,"Menu Rights"),e.qZA()(),e.TgZ(15,"li",13)(16,"a",96),e._uU(17,"Role Rights"),e.qZA()(),e.TgZ(18,"li",13)(19,"a",97),e._uU(20,"Account Menu Rights"),e.qZA()()(),e.TgZ(21,"div",18)(22,"div",98)(23,"div",99)(24,"table",70)(25,"thead")(26,"tr",71)(27,"th",72),e._uU(28,"Menu Rights"),e.qZA()()(),e.TgZ(29,"tbody")(30,"tr",73)(31,"td",100),e._uU(32," Select All "),e.qZA(),e.TgZ(33,"td",75)(34,"input",76),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.onSelectAll("view",i.target.checked))}),e.qZA(),e.TgZ(35,"span"),e._uU(36," View"),e.qZA()(),e.TgZ(37,"td",75)(38,"input",76),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.onSelectAll("add",i.target.checked))}),e.qZA(),e.TgZ(39,"span"),e._uU(40," Add"),e.qZA()(),e.TgZ(41,"td",75)(42,"input",76),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.onSelectAll("edit",i.target.checked))}),e.qZA(),e.TgZ(43,"span"),e._uU(44," Edit"),e.qZA()(),e.TgZ(45,"td",75)(46,"input",76),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.onSelectAll("delete",i.target.checked))}),e.qZA(),e.TgZ(47,"span"),e._uU(48," Delete"),e.qZA()(),e.TgZ(49,"td",75)(50,"input",76),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.onSelectAll("print",i.target.checked))}),e.qZA(),e.TgZ(51,"span"),e._uU(52," Print"),e.qZA()()(),e.YNc(53,ve,4,2,"tr",77),e.qZA()()()(),e.TgZ(54,"div",101),e.YNc(55,Ue,3,1,"div",102),e.qZA(),e.TgZ(56,"div",103)(57,"div",104)(58,"table",70)(59,"thead")(60,"tr",71)(61,"th",72),e._uU(62,"Account Menu Rights"),e.qZA()()(),e.TgZ(63,"tbody")(64,"tr",73)(65,"td",100),e._uU(66," Select All "),e.qZA(),e.TgZ(67,"td",75)(68,"input",76),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.onAccntSelectAll("view",i.target.checked))}),e.qZA(),e.TgZ(69,"span"),e._uU(70," View"),e.qZA()(),e.TgZ(71,"td",75)(72,"input",76),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.onAccntSelectAll("add",i.target.checked))}),e.qZA(),e.TgZ(73,"span"),e._uU(74," Add"),e.qZA()(),e.TgZ(75,"td",75)(76,"input",76),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.onAccntSelectAll("edit",i.target.checked))}),e.qZA(),e.TgZ(77,"span"),e._uU(78," Edit"),e.qZA()(),e.TgZ(79,"td",75)(80,"input",76),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.onAccntSelectAll("delete",i.target.checked))}),e.qZA(),e.TgZ(81,"span"),e._uU(82," Delete"),e.qZA()(),e.TgZ(83,"td",75)(84,"input",76),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.onAccntSelectAll("print",i.target.checked))}),e.qZA(),e.TgZ(85,"span"),e._uU(86," Print"),e.qZA()()(),e.YNc(87,Ne,4,2,"tr",77),e.qZA()()()()()()()()()(),e.BQk()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.roleForm),e.xp6(52),e.Q6J("ngForOf",t.roleForm.controls.menuRights.controls),e.xp6(2),e.Q6J("ngIf",t.roleForm.controls.userRights.controls.length),e.xp6(32),e.Q6J("ngForOf",t.roleForm.controls.AccountMenuRights.controls)}}let Ee=(()=>{class r{constructor(t,n,i,o,l,c,u,x,v){this.loadingService=t,this.alertService=n,this.masterService=i,this.fb=o,this.addUserService=l,this.router=c,this.activatedRoute=u,this.title=x,this.authservice=v,this.showAllDivision=!1,this.DialogMessage="Saving data please wait ...",this.mode="add",this.modeTitile="ADD USER",this.userMenuList=[],this.items=[],this.POSrightsList=[],this.AccountRights=[],this.userRightList=[],this.userType="group",this.warehouseList=[],this.divisionWarehouseList=[],this.divisionList=[],this.productCategoryList=[],this.dropdownList=[],this.selectedItems=[],this.posList=[],this.selectedDivMapping=[],this.allowzeroinPIrate=0,this.AllowSalesBelowCRate=0,this.AllowContractPriceBelowPRate=0,this.allowWholesaleBill=0,this.discountLimitInSO=0,this.userdivisionList=[],this.AllowRateChangeInSO=0,this.AllowRateChangeInBarcodePrinting=0,this.AllowReverseEntry=0,this.AllowQuantityApproval=0,this.AllowMinusStock=0,this.AuthorizeCreditLimit=0,this.StockAgeingLimit=0,this.DirectToAccounting=0,this.ShowDashboard=0,this.userDiscountLimit=0,this.warehouseListByDivMapped=[],this.posBillingRightsMenu=[],this.costcenterlist=[],this.selectedCCMapping=[],this.isWaiter=0,this.checkboxPropertiesMapping={model:"value",value:"right",label:"description",baCheckboxClass:"class"},this.AppMode=A.N.appMode,this.ProdMasterDisplayMode=A.N.productMasterMenuMode;try{this.userSetting=this.authservice.getSetting(),this.returnUrl=this.activatedRoute.snapshot.params.returnUrl||"",this.mode=this.activatedRoute.snapshot.params.mode,this.userType=this.activatedRoute.snapshot.params.group||"",this.user=this.activatedRoute.snapshot.params.user,this.masterService.refreshTransactionList(),this.masterService.getWarehouseList().subscribe(h=>{this.warehouseList=h,"lite"==this.AppMode&&(this.warehouseListByDivMapped=this.warehouseList,this.userForm.controls.warehouse.patchValue(this.masterService.userProfile.userWarehouse))}),this.masterService.getAllDivisions(this.showAllDivision=!0).subscribe(h=>{this.divisionList=h,this.dropdownList=h,console.log("dropdownlist",this.dropdownList),this.userdivisionList=h,"lite"==this.AppMode&&this.userForm.controls.division.patchValue(this.masterService.userProfile.userDivision)}),this.addUserService.getRoleList().subscribe(h=>{this.roleList=h.result}),this.addUserService.getPosRightsList().subscribe(h=>{this.posList=h.result}),this.addUserService.getMenuDependencyList().subscribe(h=>{console.log("ressss",h.result),h&&(this.menuDepenedencyList=h.result)}),this.masterService.getMainCostCenterList().subscribe(h=>{this.costcenterlist=h})}catch(h){alert(h)}this.title.setTitle("User Manager | IMS POS")}ngOnInit(){try{this.dropdownSettings={singleSelection:!1,idField:"INITIAL",textField:"NAME",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:4,allowSearchFilter:!1,maxHeight:100},this.costcenterSettings={singleSelection:!1,idField:"CCID",textField:"COSTCENTERNAME",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:5,allowSearchFilter:!1,maxHeight:100},this.userForm=this.fb.group({username:["",[a.kI.required]],password:["",[a.kI.compose([D.validate(this.mode)]),q]],fullname:[""],email:["",[a.kI.required,V]],mobile:[""],citizenship:[""],division:["",[a.kI.required]],warehouse:["",[a.kI.required]],role:[""],ISACTIVE:[1],PCL:["pc001"],LoginProfile:["user_login"],PosBillingRights:this.fb.array([]),costcenterMapping:[""],IsWaiter:[0],divisionMapping:[""]}),this.getProductCategoryName(),this.roleForm=this.fb.group({role:new a.NI("A",[a.kI.required]),roleName:new a.NI("",[a.kI.required]),menuRights:this.fb.array([]),userRights:this.fb.array([]),PosBillingRights:this.fb.array([]),AccountMenuRights:this.fb.array([])}),console.log("ROLEFORM",this.roleForm),"edit"===this.mode?(this.modeTitile="EDITING USER",this.addUserService.getUserProfile(this.user).subscribe(t=>{if("ok"===t.status){this.userForm.controls.username.patchValue(t.result.username),this.userForm.controls.email.patchValue(t.result.email),this.userForm.controls.fullname.patchValue(t.result.fullname),this.userForm.controls.mobile.patchValue(t.result.mobile),this.userForm.controls.citizenship.patchValue(t.result.citizenship),this.userForm.controls.role.patchValue(t.result.role),this.userForm.controls.division.patchValue(t.result.division),this.userForm.controls.warehouse.patchValue(t.result.warehouse),this.userForm.controls.ISACTIVE.patchValue(t.result.ISACTIVE),this.userForm.controls.PCL.patchValue(t.result.PCL),this.userForm.controls.LoginProfile.patchValue(t.result.LoginProfile),this.isWaiter=1==t.result.IsWaiter?1:0,this.getUserDivList(t.result.UserDivList),this.onDivisionSelect(this.userForm.controls.division.value,!1),this.userForm.controls.division.valueChanges.subscribe(o=>{this.resetWarehouse(),this.onDivisionSelect(o,!0)}),this.selectedCCMapping=t.result.costcenterMapping,this.userForm.patchValue({costcenterMapping:this.selectedCCMapping}),this.allowzeroinPIrate=t.result.ALLOWZERORATEINPI,this.AllowSalesBelowCRate=t.result.AllowSalesBelowCRate,this.AllowContractPriceBelowPRate=t.result.AllowContractPriceBelowPRate,this.allowWholesaleBill=t.result.AllowWholesaleBill,this.discountLimitInSO=t.result.SODiscountLimit,this.StockAgeingLimit=t.result.StockAgeingLimit,this.AllowRateChangeInSO=t.result.AllowRateChangeInSO,this.AllowRateChangeInBarcodePrinting=t.result.AllowRateChangeInBarcodePrinting,this.AllowReverseEntry=t.result.AllowReverseEntry,this.AllowQuantityApproval=t.result.AllowQuantityApproval,this.AllowMinusStock=t.result.AllowMinusStock,this.AuthorizeCreditLimit=t.result.AuthorizeCreditLimit,this.DirectToAccounting=t.result.DirectToAccounting,this.ShowDashboard=t.result.ShowDashboard;const i=this.masterService.nullToZeroConverter(t?.result?.disLimit);0===i?this.onRoleChange(t.result.role):this.userDiscountLimit=i}}),this.posBillMenuLoad()):"user"===this.mode?(this.modeTitile="Add User",this.posBillMenuLoad()):"role"!==this.mode&&"editRole"!==this.mode||(M.cloneDeep("pro"==A.N.appMode?O.C:k.h).forEach(c=>{c.children.forEach(u=>{this._convertObjectToItem(u,this.items,1)})}),M.cloneDeep(F).forEach(c=>{this.convertPosRightsToItem(c,this.POSrightsList,1)}),M.cloneDeep("pro"==A.N.appMode?J:B).forEach(c=>{this.convertAccountRightstoItem(c,this.AccountRights,1)}),console.log("Account rights list",this.AccountRights),"role"===this.mode?(this.modeTitile="ADD ROLE",this.addUserService.getMenuDependencyList().subscribe(c=>{c&&(this.menuDepenedencyList=c.result,this.initUserMenu())}),this.initPOSRights(),this.initAccountRights(),this.masterService.getRoleUserRights().subscribe(c=>{if("ok"==c.status){console.log("HERE",c.result.result);for(let u of c.result.result)this.userRightList.push({data_type:u.data_type,value:u.value,right:u.right,description:u.description});this.initUserRights()}},c=>{})):"editRole"===this.mode&&(this.modeTitile="EDIT ROLE",this.getRoleDetail(this.activatedRoute.snapshot.params.rolename),this.roleForm.controls.roleName.disable()))}catch(t){alert(t)}"lite"==this.AppMode&&(this.userForm.controls.division.disable(),this.userForm.controls.warehouse.disable()),"edit"==this.mode&&this.userForm.controls.username.disable()}onRoleChange(t){this.addUserService.getRole(t).subscribe(n=>{const i=this.masterService.nullToZeroConverter(n?.result?.userRights[1]?.value);this.userDiscountLimit=i})}initUserMenu(){try{const t=this.roleForm.controls.menuRights;this.items.forEach(n=>{let i=this.fb.group({title:new a.NI({value:n.title,disabled:!0}),path:new a.NI(n.path),view:new a.NI(!1),add:new a.NI(!1),edit:new a.NI(!1),delete:new a.NI(!1),print:new a.NI(!1),import:new a.NI(!1),export:new a.NI(!1),post:new a.NI(!1)});this.checkMenuWiseSettingList(n.path)&&t.push(i)})}catch(t){alert(t)}}initPOSRights(){const t=this.userForm.controls.PosBillingRights;this.POSrightsList.forEach(n=>{let i=this.fb.group({UNAME:new a.NI(n.UNAME),MID:new a.NI(n.MID),title:new a.NI({value:n.title,disabled:!0}),OPEN:new a.NI(!1),NEW:new a.NI(!1),EDIT:new a.NI(!1),DELETE:new a.NI(!1),PRINT:new a.NI(!1),EXPORT:new a.NI(!1)});t.push(i)})}catch(t){alert(t)}initPOSRightsforEdit(t){try{const n=this.userForm.controls.PosBillingRights;let i;this.POSrightsList.forEach(o=>{i=this.fb.group({title:new a.NI({value:o.title,disabled:!0}),MID:new a.NI(o.MID),UNAME:new a.NI(o.UNAME),OPEN:new a.NI(this.findPOSMenuRights(o.MID,t,"OPEN")),NEW:new a.NI(!1),EDIT:new a.NI(!1),DELETE:new a.NI(!1),PRINT:new a.NI(!1),EXPORT:new a.NI(!1)}),n.push(i)})}catch(n){alert(n)}}initAccountRights(){try{const t=this.roleForm.controls.AccountMenuRights;this.AccountRights.forEach(n=>{let i=this.fb.group({title:new a.NI({value:n.title,disabled:!0}),path:new a.NI(n.path),view:new a.NI(!1),add:new a.NI(!1),edit:new a.NI(!1),delete:new a.NI(!1),print:new a.NI(!1),import:new a.NI(!1),export:new a.NI(!1),post:new a.NI(!1)});t.push(i)}),console.log("account menu HHHH",t)}catch(t){alert(t)}}onItemSelect(t){console.log(t),this.getDivWiseWarehouseList(this.userForm.controls.divisionMapping.value)}onSelectAllPOSBillRights(t,n){const i=this.userForm.controls.PosBillingRights;try{switch(t){case"OPEN":i.controls.forEach(n?o=>{o.controls.OPEN.patchValue(!0)}:o=>{o.controls.OPEN.patchValue(!1)});break;case"NEW":i.controls.forEach(n?o=>{o.controls.NEW.patchValue(!0)}:o=>{o.controls.NEW.patchValue(!1)});break;case"EDIT":i.controls.forEach(n?o=>{o.controls.EDIT.patchValue(!0)}:o=>{o.controls.EDIT.patchValue(!1)});break;case"DELETE":i.controls.forEach(n?o=>{o.controls.DELETE.patchValue(!0)}:o=>{o.controls.DELETE.patchValue(!1)});break;case"PRINT":i.controls.forEach(n?o=>{o.controls.PRINT.patchValue(!0)}:o=>{o.controls.PRINT.patchValue(!1)});break;case"EXPORT":i.controls.forEach(n?o=>{o.controls.EXPORT.patchValue(!0)}:o=>{o.controls.EXPORT.patchValue(!1)})}}catch(o){console.log(o)}}onSelectAll(t,n){const i=this.roleForm.controls.menuRights;try{switch(t){case"view":i.controls.forEach(n?o=>{o.controls.view.patchValue(!0)}:o=>{o.controls.view.patchValue(!1)});break;case"add":i.controls.forEach(n?o=>{o.controls.add.patchValue(!0)}:o=>{o.controls.add.patchValue(!1)});break;case"delete":i.controls.forEach(n?o=>{o.controls.delete.patchValue(!0)}:o=>{o.controls.delete.patchValue(!1)});break;case"print":i.controls.forEach(n?o=>{o.controls.print.patchValue(!0)}:o=>{o.controls.print.patchValue(!1)});break;case"edit":i.controls.forEach(n?o=>{o.controls.edit.patchValue(!0)}:o=>{o.controls.edit.patchValue(!1)})}this.getDivWiseWarehouseList(t)}catch(o){console.log(o)}}onAccntSelectAll(t,n){const i=this.roleForm.controls.AccountMenuRights;try{switch(t){case"view":i.controls.forEach(n?o=>{o.controls.view.patchValue(!0)}:o=>{o.controls.view.patchValue(!1)});break;case"add":i.controls.forEach(n?o=>{o.controls.add.patchValue(!0)}:o=>{o.controls.add.patchValue(!1)});break;case"delete":i.controls.forEach(n?o=>{o.controls.delete.patchValue(!0)}:o=>{o.controls.delete.patchValue(!1)});break;case"print":i.controls.forEach(n?o=>{o.controls.print.patchValue(!0)}:o=>{o.controls.print.patchValue(!1)});break;case"edit":i.controls.forEach(n?o=>{o.controls.edit.patchValue(!0)}:o=>{o.controls.edit.patchValue(!1)})}this.getDivWiseWarehouseList(t)}catch(o){console.log(o)}}initUserRights(){try{const t=this.roleForm.controls.userRights;let n;console.log("abc",this.userRightList),this.userRightList&&this.userRightList?.length>0&&this.userRightList.map(i=>(i.valueType=i.data_type,"tinyint"===i.valueType?(console.log("tinyint right tp",i),i.value=1==i.value):"numeric"===i.valueType||"decimal"===i.valueType||"float"===i.valueType?""===i.value&&(i.value=0):(null==i.value||""===i.value)&&(i.value=""),i)).forEach(i=>{n=this.fb.group({path:new a.NI({value:i.description,disabled:!0}),right:i.right,value:i.value,valueType:[i.data_type],description:i.description?i.description:i.right}),this.userSetting.RATECHANGE_IN_POBASEPI&&0==this.userSetting.RATECHANGE_IN_POBASEPI&&"ALLOWRATECHANGEINPI"==n.value.right||t.push(n)})}catch(t){console.log("showalter"),alert(t)}}_convertObjectToItem(t,n,i,o){try{let l={};t.data&&t.data.menu&&(i+=2,l.path=t.path,l.title=Array(i).join("  ")+t.data.menu.title,l.add=!1,l.delete=!1,l.edit=!1,l.print=!1,l.export=!1,l.import=!1,l.view=!0,l.post=!1,n.push(l)),t.data&&t.children&&t.children.length>0&&t.children.forEach(c=>{this._convertObjectToItem(c,n,i+1)})}catch(l){alert(l)}}convertPosRightsToItem(t,n,i){try{let o={};t.MID&&(i+=2,o.UNAME=this.userForm.value.username,o.title=Array(i).join("  ")+t.MID,o.MID=t.MID,o.OPEN=0,o.EDIT=0,o.DELETE=0,o.PRINT=0,o.EXPORT=0,n.push(o)),t.children&&t.children.length>0&&t.children.forEach(l=>{this.convertPosRightsToItem(l,n,i+1)})}catch(o){alert(o)}}convertAccountRightstoItem(t,n,i,o){try{let l={};t.data&&t.data.menu&&(i+=2,l.path=t.path,l.title=Array(i).join("  ")+t.data.menu.title,l.add=!1,l.delete=!1,l.edit=!1,l.print=!1,l.export=!1,l.import=!1,l.view=!0,l.post=!1,n.push(l)),t.children&&t.children.length>0&&t.children.forEach(c=>{this.convertAccountRightstoItem(c,n,i+1)})}catch(l){alert(l)}}saveData(t){console.log("before saving data",t);try{"user"===this.mode||"edit"===this.mode?(this.loadingService.show("Saving User please wait...."),this.addUserService.saveUser(t).subscribe(n=>{if("ok"===n.status)this.loadingService.hide(),"user"===this.mode?this.alertService.success("User created successfully"):"edit"===this.mode&&this.alertService.success("User updated successfully"),this.router.navigate([this.returnUrl]);else{if(this.loadingService.hide(),"The ConnectionString property has not been initialized."===n.result._body)return void this.loginModal.show();this.alertService.error("Error in saving data:",n.result._body)}},n=>{this.loadingService.hide();try{200!==n.status&&this.alertService.error(n.error)}catch(i){this.alertService.error(i)}})):("role"===this.mode||"editRole"===this.mode)&&(this.loadingService.show("Saving data please wait...."),this.addUserService.saveRole(t).subscribe(n=>{this.loadingService.hide(),this.alertService.success(n.result),this.router.navigate([this.returnUrl])},n=>{this.loadingService.hide()}))}catch(n){alert(n),this.DialogMessage=n,setTimeout(()=>{this.childModal.hide()},3e3)}}onSubmit(){let t=!1;if("user"===this.mode){if(this.userForm.valid&&(t=!0),""==this.userForm.controls.role.value||null==this.userForm.controls.role.value)return void this.alertService.warning("Please select role to save new user...");if(""==this.userForm.controls.division.value||null==this.userForm.controls.division.value)return void this.alertService.warning("Please select default division to save new user...");if(""==this.userForm.controls.warehouse.value||null==this.userForm.controls.warehouse.value)return void this.alertService.warning("Please select default warehouse to save new user...")}else if("role"===this.mode||"editRole"===this.mode)this.roleForm.valid&&(t=!0);else if("edit"===this.mode){if(""==this.userForm.controls.warehouse.value||null==this.userForm.controls.warehouse.value)return void this.alertService.warning("Please select default warehouse before saving...");this.userForm.valid&&(t=!0)}if(t)try{let n=this.prepareToSave();if(console.log("role submit",n),""==n.data)return void this.alertService.warning("Please select required menus from Menu Rights tab before saving the role!!!");""!=n.data&&this.saveData(n)}catch(n){this.alertService.warning(n)}else this.alertService.warning("Please Fill all the required fields")}findMenuRights(t,n,i){try{if(n&&n.length){let o=n.filter(l=>l.menu===t)[0];if(null!=o)return o.right.indexOf(i)>-1}return!1}catch(o){alert(o)}}findPOSMenuRights(t,n,i){if(n&&n.length){let o=n.filter(l=>l.MID===t)[0];if(null!=o)return 1==o[i]}}prepareToSave(){let t;console.log("mode",this.mode);try{if("user"===this.mode){if("INVALID"===this.userForm.controls.username.status||"INVALID"===this.userForm.controls.password.status||"INVALID"===this.userForm.controls.email.status||"INVALID"===this.userForm.controls.mobile.status||"INVALID"===this.userForm.controls.citizenship.status||"INVALID"===this.userForm.controls.role.status||"INVALID"===this.userForm.controls.division.status||"INVALID"===this.userForm.controls.warehouse.status||"INVALID"===this.userForm.controls.PCL.status||"INVALID"===this.userForm.controls.fullname.status)return null;let c={};this.forTickValueinPosBillingrights(c),t={username:this.userForm.controls.username.value,password:this.userForm.controls.password.value,fullname:this.userForm.controls.fullname.value,email:this.userForm.controls.email.value,mobile:this.userForm.controls.mobile.value,citizenship:this.userForm.controls.citizenship.value,role:this.userForm.controls.role.value,division:this.userForm.controls.division.value,warehouse:this.userForm.controls.warehouse.value,ISACTIVE:this.userForm.controls.ISACTIVE.value,IsWaiter:this.userForm.controls.IsWaiter.value,LoginProfile:this.userForm.controls.LoginProfile.value,PCL:this.userForm.controls.PCL.value,PosBillingRights:c.posBilling,divisionMapping:this.userForm.controls.divisionMapping.value,costcenterMapping:this.userForm.controls.costcenterMapping.value,ALLOWZERORATEINPI:this.allowzeroinPIrate,AllowSalesBelowCRate:this.AllowSalesBelowCRate,AllowContractPriceBelowPRate:this.AllowContractPriceBelowPRate,AllowWholesaleBill:this.allowWholesaleBill,SODiscountLimit:this.discountLimitInSO,StockAgeingLimit:this.StockAgeingLimit,AllowRateChangeInSO:this.AllowRateChangeInSO,AllowRateChangeInBarcodePrinting:this.AllowRateChangeInBarcodePrinting,AllowReverseEntry:this.AllowReverseEntry,AllowQuantityApproval:this.AllowQuantityApproval,AllowMinusStock:this.AllowMinusStock,AuthorizeCreditLimit:this.AuthorizeCreditLimit,DirectToAccounting:this.DirectToAccounting,ShowDashboard:this.ShowDashboard,disLimit:this.userDiscountLimit}}else if("edit"===this.mode){if("INVALID"===this.userForm.controls.password.status||"INVALID"===this.userForm.controls.email.status)return null;let c={};this.forTickValueinPosBillingrights(c),t={username:this.userForm.controls.username.value,password:this.userForm.controls.password.value,fullname:this.userForm.controls.fullname.value,email:this.userForm.controls.email.value,mobile:this.userForm.controls.mobile.value,citizenship:this.userForm.controls.citizenship.value,role:this.userForm.controls.role.value,division:this.userForm.controls.division.value,warehouse:this.userForm.controls.warehouse.value,ISACTIVE:this.userForm.controls.ISACTIVE.value,IsWaiter:this.userForm.controls.IsWaiter.value,LoginProfile:this.userForm.controls.LoginProfile.value,PCL:this.userForm.controls.PCL.value,PosBillingRights:c.posBilling,divisionMapping:this.userForm.controls.divisionMapping.value,costcenterMapping:this.userForm.controls.costcenterMapping.value,ALLOWZERORATEINPI:this.allowzeroinPIrate,AllowSalesBelowCRate:this.AllowSalesBelowCRate,AllowContractPriceBelowPRate:this.AllowContractPriceBelowPRate,AllowWholesaleBill:this.allowWholesaleBill,SODiscountLimit:this.discountLimitInSO,StockAgeingLimit:this.StockAgeingLimit,AllowRateChangeInSO:this.AllowRateChangeInSO,AllowRateChangeInBarcodePrinting:this.AllowRateChangeInBarcodePrinting,AllowReverseEntry:this.AllowReverseEntry,AllowQuantityApproval:this.AllowQuantityApproval,AllowMinusStock:this.AllowMinusStock,AuthorizeCreditLimit:this.AuthorizeCreditLimit,DirectToAccounting:this.DirectToAccounting,ShowDashboard:this.ShowDashboard,disLimit:this.userDiscountLimit}}else if("role"===this.mode||"editRole"===this.mode){if("INVALID"===this.roleForm.controls.role.status||"INVALID"===this.roleForm.controls.roleName.status)return null;let u=[];this.roleForm.value.menuRights.forEach(d=>{let g=[];for(var m in d)"boolean"==typeof d[m]&&!0===d[m]&&g.push(m);g.length>0&&u.push({menu:d.path,right:g})}),console.log("account menurights",this.roleForm.value.AccountMenuRights);let v=[];this.roleForm.value.AccountMenuRights.forEach(d=>{let g=[];for(var m in d)"boolean"==typeof d[m]&&!0===d[m]&&g.push(m);g.length>0&&v.push({menu:d.path,right:g})});let h={};this.roleForm.value.PosBillingRights.forEach(d=>{d.OPEN=1==d.OPEN?1:0,d.NEW=1==d.NEW?1:0,d.EDIT=1==d.EDIT?1:0,d.DELETE=1==d.DELETE?1:0,d.PRINT=1==d.PRINT?1:0,d.EXPORT=1==d.EXPORT?1:0}),h.posBilling=this.roleForm.value.PosBillingRights,console.log("POSBILLING RIGHTS",h);let w=[];console.log("user rights",this.roleForm.value.userRights),this.roleForm.value.userRights.forEach(d=>{"tinyint"===d.valueType&&(d.value=!0===d.value?1:0),("numeric"===d.valueType||"decimal"===d.valueType||"float"===d.valueType)&&(""===d.value&&(d.value=0),Number.isNaN(d.value)&&(d.value=0)),w.push(d)}),t={role:this.roleForm.controls.role.value,roleName:this.roleForm.controls.roleName.value,menuRights:u,userRights:w,PosBillingRights:h,AccMenuRight:v},console.log("prepare to save",t)}var n=[];if(1==this.masterService.userSetting.UserwiseDivision){var o,l;o=1==this.SelectAll?"%":"",l=1==this.SelectAll_trn?"%":"";for(let c of this.userdivisionList)if(1==c.isCheck||1==c.isCheck_trn){let u={};u.DIV=c.INITIAL,u.ACID="",u.STAMP=1,u.ISACTIVE=1,u.isSelectAll=o,u.SelectAll_trn=l,u.isSelected=1==c.isCheck?1:0,u.isSelected_trn=1==c.isCheck_trn?1:0,n.push(u)}console.log("@@UDivList",n)}if("edit"===this.mode)return t.UserDivList=n,{mode:"edit",data:t};if("user"===this.mode)return t.UserDivList=n,{mode:"user",data:t};if("role"===this.mode)return 0==t.menuRights.length&&0==t.AccMenuRight.length?{mode:"role",data:""}:{mode:"role",data:t};if("editRole"===this.mode)return 0==t.menuRights.length&&0==t.AccMenuRight.length?{mode:"editRole",data:""}:{mode:"editRole",data:t}}catch(c){alert(c)}}forTickValueinPosBillingrights(t){this.userForm.value.PosBillingRights.forEach(n=>{n.OPEN=1==n.OPEN?1:0,n.NEW=1==n.NEW?1:0,n.EDIT=1==n.EDIT?1:0,n.DELETE=1==n.DELETE?1:0,n.PRINT=1==n.PRINT?1:0,n.EXPORT=1==n.EXPORT?1:0,n.UNAME=this.userForm.controls.username.value}),t.posBilling=this.userForm.value.PosBillingRights}getValue(){return!0}hideChildModal(){try{this.childModal.hide()}catch(t){alert(t)}}hideloginModal(){try{this.loginModal.hide()}catch(t){alert(t)}}back(){try{this.router.navigate([this.returnUrl])}catch(t){alert(t)}}changeDivision(t){this.divisionWarehouseList=this.warehouseList.filter(n=>n.DIVISION===t)}getRoleDetail(t){this.loadingService.show("Please wait! Getting Role Detail"),this.addUserService.getRole(t).subscribe(n=>{this.roleForm.controls.roleName.patchValue(n.result.rolename),this.userRightList=n.result.userRights,this.initUserRights(),null==n.result.menuRights||0===n.result.menuRights.length?(this.alertService.error("Cannot find menu rights"),this.router.navigate(["./pages/configuration/userManager/userlist"]),this.loadingService.hide()):(this.initUserMenuForEditRole(n.result.menuRights),this.initAccountMenuForEditRole(n.result.AccMenuRight)),this.loadingService.hide()},n=>{this.loadingService.hide(),this.alertService.info(n.error)})}initUserMenuForEditRole(t){try{const n=this.roleForm.controls.menuRights;let i;this.menurights=t,this.items.forEach(o=>{i=this.fb.group({title:new a.NI({value:o.title,disabled:!0}),path:new a.NI(o.path),view:new a.NI(this.findMenuRights(o.path,t,"view")),add:new a.NI(this.findMenuRights(o.path,t,"add")),edit:new a.NI(this.findMenuRights(o.path,t,"edit")),delete:new a.NI(this.findMenuRights(o.path,t,"delete")),print:new a.NI(this.findMenuRights(o.path,t,"print")),import:new a.NI(this.findMenuRights(o.path,t,"import")),export:new a.NI(this.findMenuRights(o.path,t,"export")),post:new a.NI(this.findMenuRights(o.path,t,"post"))}),this.checkMenuWiseSettingList(o.path)&&n.push(i)})}catch(n){alert(n)}}initAccountMenuForEditRole(t){try{const n=this.roleForm.controls.AccountMenuRights;let i;this.accountrights=t,this.AccountRights.forEach(o=>{i=this.fb.group({title:new a.NI({value:o.title,disabled:!0}),path:new a.NI(o.path),view:new a.NI(this.findMenuRights(o.path,t,"view")),add:new a.NI(this.findMenuRights(o.path,t,"add")),edit:new a.NI(this.findMenuRights(o.path,t,"edit")),delete:new a.NI(this.findMenuRights(o.path,t,"delete")),print:new a.NI(this.findMenuRights(o.path,t,"print")),import:new a.NI(this.findMenuRights(o.path,t,"import")),export:new a.NI(this.findMenuRights(o.path,t,"export")),post:new a.NI(this.findMenuRights(o.path,t,"post"))}),n.push(i)})}catch(n){alert(n)}}getProductCategoryName(){this.addUserService.getProductCategoryName().subscribe(t=>{this.productCategoryList=t.result})}TickAllValue(t,n){n.target.checked?this.AssignCheckValue(t,!0):0==n.target.checked&&this.AssignCheckValue(t,!1)}AssignCheckValue(t,n){console.log("This.menurights",this.menurights),this.roleForm=this.fb.group({role:new a.NI("A",[a.kI.required]),roleName:new a.NI("",[a.kI.required]),menuRights:this.fb.array([]),userRights:this.fb.array([])});const i=this.roleForm.controls.menuRights;let l;this.items.forEach(c=>{l=this.fb.group({title:new a.NI({value:c.title,disabled:!0}),path:new a.NI(c.path),view:new a.NI("view"==t?n:this.findMenuRights(c.path,this.menurights,"view")),add:new a.NI("add"==t?n:this.findMenuRights(c.path,this.menurights,"add")),edit:new a.NI("edit"==t?n:this.findMenuRights(c.path,this.menurights,"edit")),delete:new a.NI("delete"==t?n:this.findMenuRights(c.path,this.menurights,"delete")),print:new a.NI("print"==t?n:this.findMenuRights(c.path,this.menurights,"print")),import:new a.NI("import"==t?n:this.findMenuRights(c.path,this.menurights,"import")),export:new a.NI("export"==t?n:this.findMenuRights(c.path,this.menurights,"export")),post:new a.NI("post"==t?n:this.findMenuRights(c.path,this.menurights,"post"))}),i.push(l),this.BindNewlyTickValue(c.path,this.menurights,t,n)})}BindNewlyTickValue(t,n,i,o){if(n&&n.length){let l=n.filter(c=>c.menu===t)[0];null!=l&&(1==o?l.right.indexOf(i)||l.right.push(i):l.right.indexOf(i)||l.right.splice(i))}}ngAfterViewInit(){}getUserDivList(t){this.masterService.getAllDivisions().subscribe(n=>{this.userdivisionList=n,t.forEach(i=>{i.isCheck=1==i.isSelected,i.isCheck_trn=1==i.isSelected_trn}),this.userdivisionList.forEach(i=>{i.isCheck=!1,i.isCheck_trn=!1;let o=t.find(l=>l.INITIAL==i.INITIAL);console.log("sameDiv",o),i.isCheck=o?.isCheck,i.isCheck_trn=o?.isCheck_trn}),this.userdivisionList.every(i=>1==i.isCheck)&&(this.SelectAll=!0),this.userdivisionList.every(i=>1==i.isCheck_trn)&&(this.SelectAll_trn=!0)})}ChangeAll(){console.log("checkHere",this.SelectAll),this.userdivisionList.forEach(1==this.SelectAll?t=>t.isCheck=!0:t=>t.isCheck=!1)}ChangeAll_trn(){this.userdivisionList.forEach(1==this.SelectAll_trn?t=>t.isCheck_trn=!0:t=>t.isCheck_trn=!1)}ChangeDiv(){this.userdivisionList.filter(t=>0==t.isCheck)&&(this.SelectAll=!1),this.userdivisionList.every(t=>1==t.isCheck)&&(this.SelectAll=!0)}ChangeDiv_trn(){this.userdivisionList.filter(t=>0==t.isCheck)&&(this.SelectAll_trn=!1),this.userdivisionList.every(t=>1==t.isCheck)&&(this.SelectAll_trn=!0)}selectDivision(t){"user"==this.mode&&(this.userdivisionList.forEach(n=>n.isCheck=n.INITIAL==t.target.value),this.userdivisionList.forEach(n=>n.isCheck_trn=n.INITIAL==t.target.value),this.userdivisionList.forEach(n=>n.isDisable=1==n.isCheck),this.userdivisionList.forEach(n=>n.isDisable_trn=1==n.isCheck_trn))}onItemDeSelect(t){this.getDivWiseWarehouseList(this.userForm.controls.divisionMapping.value)}getDivWiseWarehouseList(t){let i=[],o="";t.length&&t.length>0?t.forEach(l=>{i.push(l.INITIAL),o+=`${i},`}):o=this.masterService.userProfile.userDivision,this.masterService.getWarehouseListByDivisionMapped(o).subscribe(l=>{this.warehouseListByDivMapped=l})}posBillMenuLoad(){this.addUserService.getPosBillingRightsMenu().subscribe(t=>{this.posBillingRightsMenu=t,this.posBillingRightsMenu.forEach(n=>{this.convertPosRightsToItem(n,this.POSrightsList,1)}),"edit"===this.mode?this.masterService.getPosBillingRights(this.user).subscribe(n=>{this.initPOSRightsforEdit(n.result)}):this.initPOSRights()})}checkDiscountLimit(t){return t>100?(this.alertService.info("Flat discount rate cannot be greater than 100%"),void(this.discountLimitInSO=0)):t<0?(this.alertService.info("Flat discount rate cannot be less than 0%"),void(this.discountLimitInSO=0)):void 0}checkMenuWiseSetting(t){return console.log("menupage",t),!(0==this.userSetting.EnableBatch&&"batch-adjustment"==t||0==this.userSetting.EnableVariantCategory&&("productwise"==t||"categorymaster"==t||"departmentvscategory"==t||"variant-adjustment"==t)||0==this.userSetting.enableCostCenter&&"cost-center"==t||0==this.userSetting.IMPORTPOBILLMODE&&"purchase-import-order"==t||0==this.userSetting.ENABLERATEGROUP&&"rategroup"==t||0==this.userSetting.centralizeddbmode&&"branchwise-price"==t||0==this.userSetting.EnableWebBilling&&("abbreviated-sales-invoice"==t||"add-sales-invoice"==t||"export-sales-invoice"==t||"add-sales-invoice-wholesale"==t||"add-creditnote-itembase"==t)||"old"==this.ProdMasterDisplayMode&&"productmasterdynamicattributes"==t||"new"==this.ProdMasterDisplayMode&&"productmaster"==t)}checkMenuWiseSettingList(t){let n=this.menuDepenedencyList.find(i=>i.Menu==t);return!(n&&0==this.userSetting[n.DependencySetting])}resetWarehouse(){this.userForm.controls.warehouse.setValue("")}onDivisionSelect(t,n){this.masterService.getWarehouseListByDivisionMapped(t).subscribe(i=>{this.warehouseListByDivMapped=i,n&&this.warehouseListByDivMapped&&this.warehouseListByDivMapped.length>0&&(console.log("div",t,"warehouses",this.warehouseListByDivMapped),this.userForm.controls.warehouse.patchValue(this.warehouseListByDivMapped[0].NAME))})}onCCSelect(t){console.log("event cc slect",t)}onCCSelectAll(t){}onCCDeSelect(t){}onCCDeSelectAll(t){}checkChangeforisWaiter(t){console.log("tick ko value",t),this.userForm.controls.IsWaiter.patchValue(t?1:0)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(G.V),e.Y36(S.c),e.Y36(I.P),e.Y36(a.qu),e.Y36(y),e.Y36(f.F0),e.Y36(f.gz),e.Y36(R.Dx),e.Y36(U.e))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-add-user"]],viewQuery:function(t,n){if(1&t&&(e.Gf(W,5),e.Gf(Y,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.childModal=i.first),e.iGM(i=e.CRH())&&(n.loginModal=i.first)}},decls:12,vars:3,consts:[[1,"row","sticky-top"],[1,"col-md-6"],[2,"white-space","nowrap","margin-left","-40px","margin-bottom","8px","font-family","Segoe UI Light","font-weight","bold","font-size","20px","padding-left","4%","width","192px"],[1,"col-md-6",2,"float","right"],["type","button",1,"btn","btn-info","pull-right",2,"margin-bottom","10px","font-size","12px",3,"click"],["type","submit",1,"btn","btn-info","pull-right",2,"margin-bottom","10px","font-size","12px",3,"click"],[2,"height","500px"],[4,"ngIf"],[1,"main-container",2,"margin-top","0px !important","margin-bottom","0px"],[1,"row"],[1,"col-md-12"],["id","user-tabs",1,"tabbable"],[1,"nav","nav-tabs"],[1,"nav-item"],["href","#userInfo","data-toggle","tab","role","tab",1,"nav-link","active"],["href","#userWiseRights","data-toggle","tab","role","tab",1,"nav-link"],["class","nav-item",4,"ngIf"],["href","#POSRights","data-toggle","tab",1,"nav-link"],[1,"tab-content"],["id","userInfo",1,"tab-pane","active"],[1,"form-horizontal",2,"width","60%","margin-top","2rem","margin-left","3rem",3,"formGroup"],[1,"form-group","row"],["for","inputUsername",1,"col-sm-3","form-control-label"],[2,"color","red"],[1,"col-sm-6"],["type","text","formControlName","username","id","inputUsername","placeholder","User Name","autocomplete","off",1,"form-control"],["for","isWaiter","class","col-sm-2 form-control-label","style","text-align: end;",4,"ngIf"],["type","checkbox","id","iswaiter","style","width: 17px; height: 32px;",3,"ngModelOptions","ngModel","ngModelChange",4,"ngIf"],["for","inputPassword3",1,"col-sm-3","form-control-label"],["type","password","formControlName","password","id","inputPassword3","placeholder","Password",1,"form-control","password"],["class","errors",4,"ngIf"],["for","inputFullname",1,"col-sm-3","form-control-label"],["type","text","formControlName","fullname","id","inputFullname","placeholder","Full Name",1,"form-control"],["for","inputEmail3",1,"col-sm-3","form-control-label"],["type","email","formControlName","email","id","inputEmail3","placeholder","Email",1,"form-control"],[1,"col-sm-3","form-control-label"],["type","text","maxlength","10","formControlName","mobile","oninput","this.value = this.value.replace(/[^0-9+\\s-]/g, '');",1,"form-control"],["type","text","formControlName","citizenship",1,"form-control"],["formControlName","role",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],["formControlName","division",1,"form-control",3,"change"],["formControlName","warehouse",1,"form-control"],["class","form-group row",4,"ngIf"],["formControlName","ISACTIVE",1,"form-control",2,"height","30px","padding-bottom","0px"],["value","1"],["value","0"],["id","userWiseRights",1,"tab-pane"],[1,"row","col-md-12",2,"margin-top","1rem"],[2,"width","40%"],["type","checkbox",2,"width","17px","height","32px",3,"ngModel","change","ngModelChange"],["class","row",4,"ngIf"],[1,"row",2,"margin-top","6px","margin-bottom","6px"],["type","number",2,"width","6rem","height","26px",3,"ngModel","ngModelChange"],["class","row","style","margin-top: 0.5rem;",4,"ngIf"],[1,"row",2,"margin-top","0.5rem"],["class","row","style","margin-top: 1.4rem;",4,"ngIf"],["id","Roleprivilege",1,"tab-pane"],[3,"formGroup"],["formArrayName","menuRights",1,"horizontal-scroll","row"],[1,"col-sm-3"],[2,"height","300px","border","1px solid #e2eaea"],[2,"width","26px","background","#e2eaea"],[2,"background","#e2eaea"],[1,"scrollable-div"],[2,"height","23px"],[2,"width","26px"],["type","checkbox",3,"ngModelOptions","ngModel","ngModelChange","change"],["style","height: 23px;",4,"ngFor","ngForOf"],["id","POSRights",1,"tab-pane"],["formArrayName","PosBillingRights",1,"horizontal-scroll"],[1,"table","table-striped",2,"width","100%"],[2,"position","sticky","top","0","line-height","1.5rem"],["scope","col",2,"width","14%"],[1,"row","show-grid",2,"margin-left","10px"],[2,"width","5%"],[2,"width","13%"],["type","checkbox",3,"change"],["style","margin-left: 10px;","class","row show-grid",3,"formGroupName",4,"ngFor","ngForOf"],["href","#Roleprivilege","data-toggle","tab",1,"nav-link"],["for","isWaiter",1,"col-sm-2","form-control-label",2,"text-align","end"],["type","checkbox","id","iswaiter",2,"width","17px","height","32px",3,"ngModelOptions","ngModel","ngModelChange"],[1,"errors"],["class","error-text",4,"ngIf"],[1,"error-text"],[3,"value"],["class","col-sm-6",4,"ngIf"],["formControlName","costcenterMapping",1,"custom-asset-dropdown",3,"placeholder","settings","data","onSelect","onSelectAll","onDeSelect","onDeSelectAll"],[1,"row",2,"margin-top","1.4rem"],[1,"row","show-grid",2,"margin-left","10px",3,"formGroupName"],["type","text","size","40","formControlName","title",2,"border","0","background-color","#d9e5e7 !important","height","3vh"],["type","checkbox","formControlName","OPEN"],["for","inputUsername",1,"col-sm-1","form-control-label"],[1,"col-sm-5"],["type","text","formControlName","roleName",1,"form-control",2,"width","27rem","height","1.5rem","margin-top","7px","margin-left","-15px"],["id","warehouse-tabs",1,"tabbable"],["href","#menuRights","data-toggle","tab",1,"nav-link","active"],["href","#userRights","data-toggle","tab",1,"nav-link"],["href","#accountMenuRights","data-toggle","tab",1,"nav-link"],["id","menuRights",1,"tab-pane","active"],["formArrayName","menuRights",1,"horizontal-scroll"],[2,"width","37%"],["id","userRights",1,"tab-pane"],["class","user-rights",4,"ngIf"],["id","accountMenuRights",1,"tab-pane"],["formArrayName","AccountMenuRights",1,"horizontal-scroll"],["type","checkbox","formControlName","view"],["type","checkbox","formControlName","add"],["type","checkbox","formControlName","edit"],["type","checkbox","formControlName","delete"],["type","checkbox","formControlName","print"],[1,"user-rights"],["formArrayName","userRights"],["class","col-sm-8",4,"ngFor","ngForOf"],[1,"col-sm-8"],[3,"formGroupName"],[1,"roledesclabel"],["type","checkbox","formControlName","value"],["type","text","style","border:0;background-color: transparent; margin-top: 3px; margin-bottom: 3px;","formControlName","path",4,"ngIf"],["type","text","formControlName","path",2,"border","0","background-color","transparent","margin-top","3px","margin-bottom","3px"],["type","text","formControlName","value",2,"margin-top","3px","margin-bottom","3px"],["formControlName","value",2,"margin-top","3px","margin-bottom","3px","min-width","200px",3,"change"],["type","text","formControlName","path",2,"border","0","background-color","transparent"],["formControlName","value",2,"margin-top","3px","margin-bottom","3px","min-width","200px"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["type","text","formControlName","value",2,"width","10rem"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"label",2),e._uU(3),e.qZA()(),e.TgZ(4,"div",3)(5,"button",4),e.NdJ("click",function(){return n.back()}),e._uU(6,"Cancel"),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return n.onSubmit()}),e._uU(8,"Save"),e.qZA()()(),e.TgZ(9,"div",6),e.YNc(10,_e,183,34,"ng-container",7),e.YNc(11,Le,88,4,"ng-container",7),e.qZA()),2&t&&(e.xp6(3),e.hij("",n.modeTitile," "),e.xp6(7),e.Q6J("ngIf","user"==n.mode||"edit"==n.mode),e.xp6(1),e.Q6J("ngIf","role"==n.mode||"editRole"==n.mode))},dependencies:[_.sg,_.O5,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.Wl,a.EJ,a.JJ,a.JL,a.nD,a.On,a.sg,a.u,a.x0,a.CE,N.O,_.Ov],styles:[".card[_ngcontent-%COMP%]{margin:auto!important;width:60%}.card-body[_ngcontent-%COMP%]{padding:5px!important;max-height:455px!important}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{border:1px solid #cbcbcb;border-radius:3px;height:4vh;color:#000}label[_ngcontent-%COMP%]{height:25px;font-size:14px}.col-sm-7[_ngcontent-%COMP%]{padding-left:1px}.form-control[_ngcontent-%COMP%]{font-size:14px;padding:0 5px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.1rem!important}tbody[_ngcontent-%COMP%]{display:block;height:63vh;overflow:auto}thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}th[_ngcontent-%COMP%]{font-size:15px}td[_ngcontent-%COMP%]{font-size:13px}.errors[_ngcontent-%COMP%]{color:red;text-align:center;font-size:12px}.custom-asset-dropdown[_ngcontent-%COMP%]    {line-height:13px;font-size:14px}.selectbox[_ngcontent-%COMP%]{padding:0 8px}.rolerightlabel[_ngcontent-%COMP%]{width:13rem}.roledesclabel[_ngcontent-%COMP%]{width:20rem}.scrollable-div[_ngcontent-%COMP%]{max-height:450px;overflow-y:auto;overflow-x:hidden;padding-right:15px}"]}),r})();var T=p(64298),L=p(72533);let Pe=(()=>{class r{transform(t,n){if(t)return n?t.filter(i=>{const o=n.replace(/[^A-Z0-9]/gi,"").toLowerCase(),l=i.username?i.username.replace(/[^A-Z0-9]/gi,"").toLowerCase():"",c=i.role?i.role.replace(/[^A-Z0-9]/gi,"").toLowerCase():"",u=i.rolename?i.rolename.replace(/[^A-Z0-9]/gi,"").toLowerCase():"";if(-1!==l.indexOf(o)||-1!==c.indexOf(o)||-1!==u.indexOf(o))return i}):t}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275pipe=e.Yjl({name:"searchData",type:r,pure:!1}),r})();const De=["genericGrid"],Oe=["genericGridRole"];function Fe(r,s){1&r&&(e.TgZ(0,"label",9),e._uU(1,"USER PROFILE MASTER "),e.qZA())}function qe(r,s){1&r&&(e.TgZ(0,"label",9),e._uU(1,"ROLE MASTER "),e.qZA())}function ke(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onAddClick())}),e._uU(1,"Add User"),e.qZA()}}function Be(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addRole())}),e._uU(1,"Add Role"),e.qZA()}}function Je(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openUserList())}),e._uU(1,"User List"),e.qZA()}}function Ve(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openRoleList())}),e._uU(1,"Role List"),e.qZA()}}function Ge(r,s){1&r&&(e.TgZ(0,"th",23),e._uU(1,"Division"),e.qZA())}function Qe(r,s){1&r&&(e.TgZ(0,"th",23),e._uU(1,"Warehouse"),e.qZA())}function He(r,s){if(1&r&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.hij("",t.DIVISION," ")}}function We(r,s){if(1&r&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.hij("",t.WAREHOUSE," ")}}function Ye(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td",25),e._uU(2),e.qZA(),e.TgZ(3,"td",26),e._uU(4),e.qZA(),e.TgZ(5,"td",27),e._uU(6),e.qZA(),e.TgZ(7,"td",26),e._uU(8),e.qZA(),e.YNc(9,He,2,1,"td",28),e.YNc(10,We,2,1,"td",28),e.TgZ(11,"td",29)(12,"button",30),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.onEditClick(o))}),e._uU(13,"Edit"),e.qZA()()()}if(2&r){const t=s.$implicit,n=s.index,i=e.oxw(3);e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.username),e.xp6(2),e.Oqu(t.role),e.xp6(2),e.hij("",t.ROLETYPE," "),e.xp6(1),e.Q6J("ngIf","lite"!=i.AppMode),e.xp6(1),e.Q6J("ngIf","lite"!=i.AppMode)}}const E=function(r,s,t){return{itemsPerPage:r,currentPage:s,totalItems:t}};function ze(r,s){if(1&r&&(e.ynx(0),e.YNc(1,Ye,14,6,"tr",24),e.ALo(2,"paginate"),e.ALo(3,"searchData"),e.BQk()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,e.xi3(3,4,t.userList,t.userfilter),e.kEZ(7,E,t.itemsPerPage,t.currentPage,t.totalCount)))}}function Ke(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",32)(1,"div",33)(2,"div",34)(3,"pagination-controls",35),e.NdJ("pageChange",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.userPagination(i))}),e.qZA()()()()}}function $e(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"div",11)(2,"span"),e._uU(3,"User Profile Lists"),e.qZA(),e.TgZ(4,"div",12)(5,"input",13),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.userfilter=i)}),e.qZA()()(),e.TgZ(6,"div",14)(7,"table",15)(8,"thead")(9,"tr",16)(10,"th",17),e._uU(11,"S.N"),e.qZA(),e.TgZ(12,"th",18),e._uU(13,"User Name"),e.qZA(),e.TgZ(14,"th",19),e._uU(15,"Role"),e.qZA(),e.TgZ(16,"th",18),e._uU(17,"Role Type"),e.qZA(),e.YNc(18,Ge,2,0,"th",20),e.YNc(19,Qe,2,0,"th",20),e.TgZ(20,"th",21),e._uU(21,"Action"),e.qZA()()(),e.TgZ(22,"tbody"),e.YNc(23,ze,4,11,"ng-container",8),e.qZA()()(),e.YNc(24,Ke,4,0,"div",22),e.ALo(25,"searchData"),e.qZA()}if(2&r){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.userfilter),e.xp6(13),e.Q6J("ngIf","lite"!=t.AppMode),e.xp6(1),e.Q6J("ngIf","lite"!=t.AppMode),e.xp6(4),e.Q6J("ngIf",t.userList&&t.userList.length>0),e.xp6(1),e.Q6J("ngIf",t.userList&&e.xi3(25,5,t.userList,t.userfilter).length>t.itemsPerPage)}}function je(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td",25),e._uU(2),e.qZA(),e.TgZ(3,"td",39),e._uU(4),e.qZA(),e.TgZ(5,"td",40),e._uU(6),e.qZA(),e.TgZ(7,"td",29)(8,"button",30),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.onRoleEditClick(o))}),e._uU(9,"Edit"),e.qZA()()()}if(2&r){const t=s.$implicit,n=s.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.rolename),e.xp6(2),e.Oqu(t.role)}}function Xe(r,s){if(1&r&&(e.ynx(0),e.YNc(1,je,10,3,"tr",24),e.ALo(2,"paginate"),e.ALo(3,"searchData"),e.BQk()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,e.xi3(3,4,t.roleList,t.rolefilter),e.kEZ(7,E,t.itemsPerPage,t.currentRolePage,t.totalCount)))}}function et(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",32)(1,"div",33)(2,"div",34)(3,"pagination-controls",35),e.NdJ("pageChange",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.rolePagination(i))}),e.qZA()()()()}}function tt(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"div",11)(2,"span"),e._uU(3,"Role Lists"),e.qZA(),e.TgZ(4,"div",12)(5,"input",36),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.rolefilter=i)}),e.qZA()()(),e.TgZ(6,"div",14)(7,"table",15)(8,"thead")(9,"tr",16)(10,"th",17),e._uU(11,"S.N"),e.qZA(),e.TgZ(12,"th",37),e._uU(13,"Role Name"),e.qZA(),e.TgZ(14,"th",38),e._uU(15,"Role"),e.qZA(),e.TgZ(16,"th",21),e._uU(17,"Action"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,Xe,4,11,"ng-container",8),e.qZA()()(),e.YNc(20,et,4,0,"div",22),e.ALo(21,"searchData"),e.qZA()}if(2&r){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.rolefilter),e.xp6(14),e.Q6J("ngIf",t.roleList&&t.roleList.length>0),e.xp6(1),e.Q6J("ngIf",t.roleList&&e.xi3(21,3,t.roleList,t.rolefilter).length>t.itemsPerPage)}}const it=[{path:"",component:(()=>{class r{constructor(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["user-manager"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},dependencies:[f.lC],encapsulation:2}),r})(),children:[{path:"userlist",component:(()=>{class r{constructor(t,n,i,o,l){this.adduserService=t,this.router=n,this.alertService=i,this.masterService=o,this.title=l,this.imsGridSettings=new T.U5,this.imsGridRoleSettings=new T.U5,this.isLoader=!0,this.userList=[],this.roleList=[],this.currentPage=1,this.currentRolePage=1,this.itemsPerPage=20,this.adduserService.getMenuDependencyList().subscribe(c=>{this.adduserService.menuDependencyList=c.result}),this.AppMode=A.N.appMode,this.userManager="user",this.imsGridSettings={title:"User Manager",apiEndpoints:"/getUserList",pageSize:10,showActionButton:!0,columns:[{key:"username",title:"User Name",hidden:!1,noSearch:!1,type:"string"},{key:"email",title:"Email",hidden:!1,noSearch:!1,type:"string"},{key:"role",title:"Role",hidden:!1,noSearch:!1,type:"string"}],actionKeys:[{text:"Edit",title:"Edit",icon:"fa fa-edit",type:T.Dw.EDIT},{text:"Delete",title:"Delete",icon:"fa fa-trash",type:T.Dw.DELETE}]},this.imsGridRoleSettings={title:"Role Master",apiEndpoints:"/getRoleList",pageSize:10,showActionButton:!0,columns:[{key:"rolename",title:"Role Name",hidden:!1,noSearch:!1,type:"string"},{key:"role",title:"Role",hidden:!1,noSearch:!1,type:"string"}],actionKeys:[{text:"Edit",title:"Edit",icon:"fa fa-edit",type:T.Dw.EDIT}]},this.title.setTitle("User Manager | IMS POS")}ngOnInit(){this.adduserService.getUserList().subscribe(t=>{t?(this.isLoader=!1,this.userList=t?t.result:[]):(this.isLoader=!1,this.userList=[],this.errorMessage="Something went wrong")},t=>{this.isLoader=!1,this.userList=[],this.errorMessage="Something went wrong"}),this.adduserService.getRoleList().subscribe(t=>{t?(this.isLoader=!1,this.roleList=t?t.result:[]):(this.isLoader=!1,this.roleList=[],this.errorMessage="Something went wrong")},t=>{this.isLoader=!1,this.roleList=[],this.errorMessage="Something went wrong"})}openRoleList(){this.userManager="role"}openUserList(){this.userManager="user"}onAddClick(){try{if(0==this.masterService.checkIsBranch())return void this.alertService.warning("Cannot addUsers in Branch office");this.router.navigate(["./pages/configuration/userManager/adduser",{mode:"user",returnUrl:this.router.url}])}catch(t){this.alertService.error(t)}}onDeleteConfirm(t){window.confirm("Are you sure you want to delete?")?t.confirm.resolve():t.confirm.reject()}onEditClick(t){if(this.masterService.checkIsBranch())try{this.router.navigate(["./pages/configuration/userManager/adduser",{mode:"edit",user:t.username,returnUrl:this.router.url}])}catch(n){this.alertService.error(n)}else this.alertService.warning("Cannot edit user in Branch office")}addRole(){try{this.router.navigate(["./pages/configuration/userManager/adduser",{mode:"role",returnUrl:this.router.url}])}catch(t){this.alertService.error(t)}}onRoleEditClick(t){try{this.router.navigate(["./pages/configuration/userManager/adduser",{mode:"editRole",rolename:t.rolename,returnUrl:this.router.url}])}catch(n){this.alertService.error(n)}}userPagination(t){this.isLoader=!0,this.currentPage=t;const n=this;window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{n.isLoader=!1},500)}rolePagination(t){this.isLoader=!0,this.currentRolePage=t;const n=this;window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{n.isLoader=!1},500)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(y),e.Y36(f.F0),e.Y36(S.c),e.Y36(I.P),e.Y36(R.Dx))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-list"]],viewQuery:function(t,n){if(1&t&&(e.Gf(De,5),e.Gf(Oe,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.genericGrid=i.first),e.iGM(i=e.CRH())&&(n.genericGridRole=i.first)}},features:[e._Bn([y])],decls:14,vars:8,consts:[[1,"row","col-md-12"],[1,"col-md-4"],["style","white-space: nowrap;margin-left:-40px;margin-bottom: 8px; font-family: Segoe UI Light;font-weight: bold;font-size: 20px; padding-left: 4%;width: 192px;",4,"ngIf"],[1,"col-md-8"],["class","btn btn-info pull-right","style","font-size: 12px;",3,"click",4,"ngIf"],[1,"row",2,"align-items","center"],[1,"col-md-12","col-sm-8",2,"margin-top","0.5rem"],[1,"card",2,"margin","auto","width","63rem"],[4,"ngIf"],[2,"white-space","nowrap","margin-left","-40px","margin-bottom","8px","font-family","Segoe UI Light","font-weight","bold","font-size","20px","padding-left","4%","width","192px"],[1,"btn","btn-info","pull-right",2,"font-size","12px",3,"click"],[1,"card-header"],[2,"width","25%"],["type","search","placeholder","Search...","name","userfilter",1,"form-control",2,"height","1.5rem","font-size","13px",3,"ngModel","ngModelChange"],[1,"card-body"],[1,"table","table-striped"],[2,"position","sticky","top","0","line-height","1.5rem"],["scope","col",2,"width","3%"],["scope","col",2,"width","15%"],["scope","col",2,"width","5%"],["scope","col","style","width:10%",4,"ngIf"],["scope","col",2,"text-align","center","width","18%"],["class","card-footer","style","padding:5px",4,"ngIf"],["scope","col",2,"width","10%"],[4,"ngFor","ngForOf"],[2,"width","3%"],[2,"width","15%"],[2,"width","5%"],["style","width:10%;",4,"ngIf"],[2,"width","18%","text-align","center"],["type","button","data-toggle","modal",1,"btn","btn-sm","btn-info","mr-1","btn-sm",2,"width","60px",3,"click"],[2,"width","10%"],[1,"card-footer",2,"padding","5px"],[1,"pagination"],[2,"margin","auto"],[3,"pageChange"],["type","search","placeholder","Search...","name","rolefilter",1,"form-control",2,"height","1.5rem","font-size","13px",3,"ngModel","ngModelChange"],["scope","col",2,"width","18%"],["scope","col",2,"width","8%"],[2,"width","18%"],[2,"width","8%"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Fe,2,0,"label",2),e.YNc(3,qe,2,0,"label",2),e.qZA(),e.TgZ(4,"div",3),e.YNc(5,ke,2,0,"button",4),e.YNc(6,Be,2,0,"button",4),e.YNc(7,Je,2,0,"button",4),e.YNc(8,Ve,2,0,"button",4),e.qZA()(),e.TgZ(9,"div",5)(10,"div",6)(11,"div",7),e.YNc(12,$e,26,8,"div",8),e.YNc(13,tt,22,6,"div",8),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("ngIf","user"==n.userManager),e.xp6(1),e.Q6J("ngIf","role"==n.userManager),e.xp6(2),e.Q6J("ngIf","user"==n.userManager),e.xp6(1),e.Q6J("ngIf","role"==n.userManager),e.xp6(1),e.Q6J("ngIf","role"==n.userManager),e.xp6(1),e.Q6J("ngIf","user"==n.userManager),e.xp6(4),e.Q6J("ngIf","user"==n.userManager),e.xp6(1),e.Q6J("ngIf","role"==n.userManager))},dependencies:[_.sg,_.O5,a.Fj,a.JJ,a.On,L.LS,L._s,Pe],styles:[".card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.card-header[_ngcontent-%COMP%]:after{display:none}.card-body[_ngcontent-%COMP%]{padding:5px!important;max-height:675px!important}.main-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:60px 0}.scroll-touch[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch!important}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.1rem!important}.sticky-top[_ngcontent-%COMP%]{margin-top:60px;height:100vh}tbody[_ngcontent-%COMP%]{display:block;height:59vh;overflow:auto}thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}th[_ngcontent-%COMP%]{font-size:15px}td[_ngcontent-%COMP%]{font-size:13px}.btn-sm[_ngcontent-%COMP%]{line-height:3px}.card-header[_ngcontent-%COMP%]{padding:10px 20px}.card-footer[_ngcontent-%COMP%]{height:6vh}.searchBy[_ngcontent-%COMP%]{font-size:13px;margin-left:18rem}"]}),r})()},{path:"adduser",component:Ee}]}];let nt=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[f.Bz.forChild(it),f.Bz]}),r})(),ot=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[_.ez,nt,P.m,N.Z.forRoot()]}),r})()}}]);