"use strict";(self.webpackChunkimserp=self.webpackChunkimserp||[]).push([[4746],{3937:(re,q,m)=>{m.d(q,{v:()=>wn});var n=m(28698),R=m(19102),K=m(17489),G=m.n(K),O=m(42326),U=m(1298),I=m(92340),Z=m(40216),j=m(70655),e=m(718),Y=m(68277),Q=m(87224),W=m(80013),H=m(70489),J=m(67311),y=m(35757),x=m(68567);const L=["inputBox"];function h(c,_){if(1&c&&(e.TgZ(0,"option",28),e._uU(1),e.qZA()),2&c){const i=e.oxw().$implicit;e.Q6J("value",i.key),e.xp6(1),e.hij(" ",i.title," ")}}function N(c,_){if(1&c&&(e.ynx(0),e.YNc(1,h,2,2,"option",27),e.BQk()),2&c){const i=_.$implicit;e.xp6(1),e.Q6J("ngIf",!i.noSearch)}}const S=function(c){return{"text-align":c}};function A(c,_){if(1&c&&(e.TgZ(0,"th",30),e._uU(1),e.qZA()),2&c){const i=e.oxw().$implicit;e.Q6J("ngStyle",e.VKq(2,S,i.alignment)),e.xp6(1),e.hij(" ",i.title," ")}}function B(c,_){if(1&c&&(e.ynx(0),e.YNc(1,A,2,4,"th",29),e.BQk()),2&c){const i=_.$implicit;e.xp6(1),e.Q6J("ngIf",!i.hidden)}}function X(c,_){1&c&&(e.TgZ(0,"th"),e._uU(1," Action "),e.qZA())}function $(c,_){if(1&c&&(e.TgZ(0,"div",35),e._uU(1),e.qZA()),2&c){const i=e.oxw(2).$implicit,t=e.oxw().$implicit;e.s9C("title",t[i.key]),e.xp6(1),e.hij(" ",t[i.key]," ")}}function z(c,_){if(1&c&&(e.TgZ(0,"div",35),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&c){const i=e.oxw(2).$implicit,t=e.oxw().$implicit;e.s9C("title",t[i.key]),e.xp6(1),e.hij(" ",e.Dn7(2,2,t[i.key],"INR","Rs. ")," ")}}function ee(c,_){if(1&c&&(e.TgZ(0,"div",35),e._uU(1),e.ALo(2,"date"),e.qZA()),2&c){const i=e.oxw(2).$implicit,t=e.oxw().$implicit;e.s9C("title",t[i.key]),e.xp6(1),e.hij(" ",e.xi3(2,2,t[i.key],"yyyy-MM-dd")," ")}}function ne(c,_){if(1&c&&(e.TgZ(0,"td",30),e.YNc(1,$,2,2,"div",34),e.YNc(2,z,3,6,"div",34),e.YNc(3,ee,3,5,"div",34),e.qZA()),2&c){const i=e.oxw().$implicit;e.Q6J("ngStyle",e.VKq(4,S,i.alignment)),e.xp6(1),e.Q6J("ngIf",!i.pipe&&!i.format),e.xp6(1),e.Q6J("ngIf",i.pipe),e.xp6(1),e.Q6J("ngIf",i.format)}}function ie(c,_){if(1&c&&(e.ynx(0),e.YNc(1,ne,4,6,"td",29),e.BQk()),2&c){const i=_.$implicit;e.xp6(1),e.Q6J("ngIf",!i.hidden)}}function P(c,_){if(1&c){const i=e.EpF();e.ynx(0),e.TgZ(1,"span")(2,"i",36),e.NdJ("click",function(){const a=e.CHM(i).$implicit,g=e.oxw(2).index,f=e.oxw(3);return e.KtG(f.onActionClicked(a.text,g))}),e.qZA()(),e.BQk()}if(2&c){const i=_.$implicit;e.xp6(2),e.Tol(i.icon),e.s9C("title",i.title)}}function V(c,_){if(1&c&&(e.ynx(0),e.TgZ(1,"td"),e.YNc(2,P,3,4,"ng-container",12),e.qZA(),e.BQk()),2&c){const i=e.oxw(4);e.xp6(2),e.Q6J("ngForOf",i.popupsettings.actionKeys)}}function l(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"tr",32),e.NdJ("dblclick",function(){const a=e.CHM(i).$implicit,g=e.oxw(3);return e.KtG(g.doubleClick(a))})("click",function(){const a=e.CHM(i).index,g=e.oxw(3);return e.KtG(g.singleClick(a))}),e.TgZ(1,"td")(2,"input",33),e.NdJ("ngModelChange",function(r){const g=e.CHM(i).$implicit;return e.KtG(g.selected=r)})("click",function(r){const g=e.CHM(i).$implicit,f=e.oxw(3);return e.KtG(f.onSelectVchr(r,g))}),e.qZA()(),e.YNc(3,ie,2,1,"ng-container",12),e.YNc(4,V,3,1,"ng-container",2),e.qZA()}if(2&c){const i=_.$implicit,t=_.index,r=e.oxw(3);e.ekj("selected-row",r.selectedRowIndex==t),e.xp6(2),e.Q6J("ngModel",i.selected),e.xp6(1),e.Q6J("ngForOf",r.popupsettings.columns),e.xp6(1),e.Q6J("ngIf",r.popupsettings.showActionButton&&r.popupsettings.actionKeys.length)}}const d=function(c,_,i,t){return{id:c,itemsPerPage:_,currentPage:i,totalItems:t}};function u(c,_){if(1&c&&(e.TgZ(0,"tbody"),e.YNc(1,l,5,5,"tr",31),e.ALo(2,"paginate"),e.qZA()),2&c){const i=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,i.itemList,e.l5B(4,d,i.tabindex,i.pageSize,i.pageNumber,i.totalItems)))}}function s(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",37)(1,"pagination-controls",38),e.NdJ("pageChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.onPageChange(r))}),e.qZA()()}if(2&c){const i=e.oxw(2);e.xp6(1),e.Q6J("id",i.tabindex)}}function b(c,_){if(1&c&&e._UZ(0,"div",39),2&c){const i=e.oxw(2);e.Q6J("innerHTML",i.summary,e.oJD)}}function D(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div")(1,"div")(2,"div",3)(3,"h4",4),e._uU(4),e.qZA(),e.TgZ(5,"button",5),e.NdJ("click",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.hide())}),e.TgZ(6,"span",6),e._uU(7,"\xd7"),e.qZA()()(),e.TgZ(8,"div",7)(9,"div",8)(10,"div",9)(11,"select",10),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.filterOption=r)})("change",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.triggerSearch(r))}),e.TgZ(12,"option",11),e._uU(13,"Select Filter Option"),e.qZA(),e.YNc(14,N,2,1,"ng-container",12),e.qZA()(),e.TgZ(15,"div",13),e._UZ(16,"input",14,15),e.qZA()()(),e.TgZ(18,"div",16)(19,"div",17)(20,"div",18)(21,"input",19),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.selectAll=r)})("click",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.onSelectAll(r))}),e.qZA(),e.TgZ(22,"label",20),e._uU(23," Select All "),e.qZA()(),e.TgZ(24,"button",21),e.NdJ("click",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.onImportChalan())}),e._uU(25,"Import Delivery Chalan"),e.qZA()(),e.TgZ(26,"table",22)(27,"thead")(28,"tr",23)(29,"th"),e._uU(30,"Select"),e.qZA(),e.YNc(31,B,2,1,"ng-container",12),e.YNc(32,X,2,0,"th",2),e.qZA()(),e.YNc(33,u,3,9,"tbody",2),e.qZA(),e.TgZ(34,"div",24),e.YNc(35,s,2,1,"div",25),e.qZA()()(),e.YNc(36,b,1,1,"div",26),e.qZA()}if(2&c){const i=e.oxw();e.xp6(4),e.hij(" ",i.popupsettings.title," "),e.xp6(7),e.Q6J("ngModel",i.filterOption),e.xp6(3),e.Q6J("ngForOf",i.popupsettings.columns),e.xp6(2),e.Q6J("formControl",i.filterValue),e.xp6(5),e.Q6J("ngModel",i.selectAll),e.xp6(10),e.Q6J("ngForOf",i.popupsettings.columns),e.xp6(1),e.Q6J("ngIf",i.popupsettings.showActionButton&&i.popupsettings.actionKeys.length),e.xp6(1),e.Q6J("ngIf",i.itemList.length),e.xp6(2),e.Q6J("ngIf",i.itemList.length),e.xp6(1),e.Q6J("ngIf",i.summary)}}class w extends Y.nd{constructor(_,i,t){super(_),this.injector=_,this.dialog=i,this.alertservice=t,this.requestUrl="",this.isActive=!1,this.itemList=[],this.selectedRowIndex=0,this.tabindex="list",this.hideGridOnDoubleClick=!0,this.vchrList=[],this.billTo="",this.tag="",this.isForCancelOrder=!1,this.onPopUpClose=new e.vpe,this.onItemDoubleClick=new e.vpe,this.onImportChalanClick=new e.vpe,this.onDeleteClicked=new e.vpe,this.onEmptyList=new e.vpe}ngAfterViewInit(){this.filterValue.valueChanges.pipe((0,W.b)(500)).subscribe(_=>{this.refreshPage(),this.refresh()})}show(_="",i=!1,t="",r=!0){this.hideGridOnDoubleClick=r,setTimeout(()=>{this.inputBox.nativeElement.focus()},10),this.summary=null,this.billTo=_,this.isForCancelOrder=i,this.itemList=[],this.isActive=!0,this.selectedRowIndex=0,this.tag=t,this.filterOption="",setTimeout(()=>{this.setFilterOption()},100)}setFilterOption(){if(this.popupsettings&&this.popupsettings.columns.length){const _=this.popupsettings.defaultFilterIndex?this.popupsettings.defaultFilterIndex:0;if(this.popupsettings.columns.length<=_)return;this.filterValue.setValue(this.popupsettings.userDefinefilterValue),this.filterOption=this.popupsettings.columns[_].key}}onSelectVchr(_,i){if(_.target.checked)i.selected=1,this.vchrList.push(i.VCHRNO);else{i.selected=0,this.selectAll=!1;const t=this.vchrList.indexOf(i.VCHRNO);t>-1&&this.vchrList.splice(t,1)}}onSelectAll(_){_.target.checked?this.popupsettings.selectAllApiEndpoint&&this._http.get(I.N.apiUrl+this.popupsettings.selectAllApiEndpoint).pipe((0,Q.P)()).subscribe(i=>{i&&(this.vchrList=i,this.itemList.forEach(t=>t.selected=1))}):(this.vchrList=[],this.itemList.forEach(i=>i.selected=0))}getData(){this.summary=null,this.selectedRowIndex=0;let t=`${I.N.apiUrl}${this.popupsettings.apiEndpoints}?currentPage=${this.pageNumber}&maxResultCount=${this.pageSize}`;return this.billTo&&""!==this.billTo&&null!=this.billTo&&void 0!==this.billTo&&(t+=`&billTo=${this.billTo}`),this.tag&&""!==this.tag&&null!=this.tag&&void 0!==this.isTableLoading&&(t+=`&tag=${this.tag}`),this.isForCancelOrder&&(t+=`&isForCancelOrder=${this.isForCancelOrder}`),this.requestUrl=this.getFilterOption(t),this._http.get(this.requestUrl).pipe((0,Q.P)()).subscribe(r=>{this.totalItems=r?r.totalCount:0,this.itemList=r?r.data:[],this.itemList.forEach(function(a){null!=a.TRNDATE&&void 0!==a.TRNDATE&&(a.TRNDATE=a.TRNDATE.toString().substring(0,10)),null!=a.DATE&&void 0!==a.DATE&&(a.DATE=a.DATE.toString().substring(0,10))}),this.itemList.length>0&&0===this.selectedRowIndex&&this.itemList[this.selectedRowIndex].itemSummary&&(this.summary=this.itemList[this.selectedRowIndex].itemSummary)})}hide(){this.itemList=[],this.pageNumber=1,this.totalItems=0,this.isActive=!1}triggerSearch(){null==this.filterOption||void 0===this.filterOption||""===this.filterOption||this.filterValue.setValue("")}singleClick(_){this.selectedRowIndex=_,this.summary=this.itemList[_].itemSummary}doubleClick(_){this.onItemDoubleClick.emit(_),this.hideGridOnDoubleClick&&this.hide()}onImportChalan(){console.log("vchrlist",this.vchrList),0!=this.vchrList?.length?this.onImportChalanClick.emit(this.vchrList):this.alertservice.info("Please select voucher first!")}updown(_){if(!this.isActive)return!0;if("ArrowDown"===_.code)_.preventDefault(),this.selectedRowIndex++,null!=this.itemList[this.selectedRowIndex]&&(this.summary=this.itemList[this.selectedRowIndex].itemSummary),this.calculateTotalPages(),this.selectedRowIndex===this.itemList.length&&this.pageNumber<this.totalPages?(this.pageNumber=this.pageNumber+1,this.refresh(),this.selectedRowIndex=0,this.itemListClosed()):this.selectedRowIndex===this.itemList.length&&this.pageNumber===this.totalPages&&(this.selectedRowIndex=this.itemList.length-1);else if("ArrowUp"===_.code)_.preventDefault(),this.selectedRowIndex--,null!=this.itemList[this.selectedRowIndex]&&(this.summary=this.itemList[this.selectedRowIndex].itemSummary),-1===this.selectedRowIndex&&this.pageNumber>1?(this.pageNumber=this.pageNumber-1,this.refresh(),this.selectedRowIndex=this.itemList.length-1,this.itemListClosed()):-1===this.selectedRowIndex&&1===this.pageNumber&&(this.selectedRowIndex=0);else if(("Enter"===_.code||"NumpadEnter"===_.code)&&this.selectedRowIndex>=0&&this.selectedRowIndex<this.itemList.length)_.preventDefault(),"BARCODE"===this.filterOption||(this.onItemDoubleClick.emit(this.itemList[this.selectedRowIndex]),this.hide(),this.itemListClosed());else if("Escape"===_.code)_.preventDefault(),this.hide(),this.itemListClosed();else if("ArrowRight"===_.code){if(_.preventDefault(),this.calculateTotalPages(),this.pageNumber>=this.totalPages)return void(this.pageNumber=this.totalPages);this.selectedRowIndex=0,this.pageNumber=this.pageNumber+1,this.refresh()}else if("ArrowLeft"===_.code){if(_.preventDefault(),this.pageNumber<=1)return void(this.pageNumber=1);this.selectedRowIndex=0,this.pageNumber=this.pageNumber-1,this.refresh()}}itemListClosed(){this.onPopUpClose.emit()}ngOnChanges(_){this.popupsettings=_.popupsettings.currentValue}onActionClicked(_,i){if(""!==_&&null!=_&&void 0!==_){const t=_.toLowerCase();switch(t){case"delete":case"cancel":confirm(`Are you sure to ${t} this row ?.`)&&this.onDeleteClicked.emit(this.itemList[i])}}}}w.\u0275fac=function(_){return new(_||w)(e.Y36(e.zs3),e.Y36(H.uw),e.Y36(J.c))},w.\u0275cmp=e.Xpm({type:w,selectors:[["generic-multiSelectpopup-grid"]],viewQuery:function(_,i){if(1&_&&e.Gf(L,5),2&_){let t;e.iGM(t=e.CRH())&&(i.inputBox=t.first)}},hostBindings:function(_,i){1&_&&e.NdJ("keydown",function(r){return i.updown(r)},!1,e.evT)},inputs:{popupsettings:"popupsettings",summary:"summary"},outputs:{onPopUpClose:"onPopUpClose",onItemDoubleClick:"onItemDoubleClick",onImportChalanClick:"onImportChalanClick",onDeleteClicked:"onDeleteClicked",onEmptyList:"onEmptyList"},features:[e.qOj,e.TTD],decls:3,vars:3,consts:[[1,"modal-sticky",2,"display","block","padding","0px","margin-bottom","25px"],[1,"modal-content","modal-content-main-area"],[4,"ngIf"],[1,"modal-header",2,"padding","0px","background","#7ed0ff"],[1,"modal-title",2,"padding-left","5px","font-size","1.2rem"],["aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"row"],[1,"col-md-12","row"],[1,"col-md-6",2,"margin","2px 0px","display","flex","padding","0px"],[2,"width","100%",3,"ngModel","ngModelChange","change"],["value","","selected",""],[4,"ngFor","ngForOf"],[1,"col-md-6",2,"margin","2px 0px","display","flex","padding-right","0px"],["type","text","placeholder","Enter keyword to search",2,"width","100%",3,"formControl"],["inputBox",""],[1,"col-md-12","table-scroll"],[1,"popupBtn","d-flex","justify-content-between"],[1,"form-check"],["type","checkbox","value","","id","flexCheckChecked",1,"form-check-input",3,"ngModel","ngModelChange","click"],["for","flexCheckChecked",1,"form-check-label",2,"margin-bottom","-10px"],[1,"btn","btn-success","btn-sm","mt-1","mb-1",3,"click"],[1,"table"],[2,"background","#7ed0ff"],[1,"row",2,"float","center","margin","4px 0px"],["class","col-md-12","style","width: 100%; margin-top: -1.8rem",4,"ngIf"],["style","margin-left: 25px; margin-top: -25px; font-size: 12px",3,"innerHTML",4,"ngIf"],[3,"value",4,"ngIf"],[3,"value"],[3,"ngStyle",4,"ngIf"],[3,"ngStyle"],["class","highlight","title","double click for detail view",3,"selected-row","dblclick","click",4,"ngFor","ngForOf"],["title","double click for detail view",1,"highlight",3,"dblclick","click"],["type","checkbox","value","","id","flexCheckChecked",1,"form-check-input",2,"margin-top","-10px","margin-left","13px",3,"ngModel","ngModelChange","click"],[3,"title",4,"ngIf"],[3,"title"],[3,"title","click"],[1,"col-md-12",2,"width","100%","margin-top","-1.8rem"],["maxSize","9","directionLinks","true","autoHide","true","responsive","true","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",2,"margin-left","6rem","margin-bottom","0","font-size","0.8rem",3,"id","pageChange"],[2,"margin-left","25px","margin-top","-25px","font-size","12px",3,"innerHTML"]],template:function(_,i){1&_&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,D,37,10,"div",2),e.qZA()()),2&_&&(e.ekj("modal-sticky-hide",!i.isActive),e.xp6(2),e.Q6J("ngIf",i.popupsettings))},dependencies:[U.sg,U.O5,U.PC,y.YN,y.Kr,y.Fj,y.Wl,y.EJ,y.JJ,y.On,y.oH,x.LS,U.H9,U.uU,x._s],styles:[".modal-content[_ngcontent-%COMP%] {\n    padding: 1px;\n    margin: 0px;\n    float: right;\n    width: auto;\n  }\n\n  tbody[_ngcontent-%COMP%]    > tr[_ngcontent-%COMP%]:hover {\n    background-color: #f3f5f4;\n    cursor: pointer;\n  }\n\n  tr[_ngcontent-%COMP%] {\n    font-size: 11px;\n  }\n\n  .selected-row[_ngcontent-%COMP%] {\n    background-color: #ced6d3 !important;\n  }\n\n  .table[_ngcontent-%COMP%]    > tbody[_ngcontent-%COMP%]    > tr[_ngcontent-%COMP%]    > td[_ngcontent-%COMP%] {\n    line-height: 24px !important;\n    padding: 5px 10px;\n    vertical-align: middle;\n  }\n\n  .table[_ngcontent-%COMP%]    > thead[_ngcontent-%COMP%]    > tr[_ngcontent-%COMP%]    > th[_ngcontent-%COMP%] {\n    line-height: 5px !important;\n  }\n\n  .table[_ngcontent-%COMP%]    > tbody[_ngcontent-%COMP%]    > tr[_ngcontent-%COMP%]    > td[_ngcontent-%COMP%]:first-child {\n    text-align: left !important;\n    padding: 0px 0px 0px 11px !important;\n  }\n\n  .modal-content[_ngcontent-%COMP%] {\n    box-shadow: -10px 0px 10px 1px #aaaaaa;\n  }\n\n  .modal-content-main-area[_ngcontent-%COMP%] {\n    max-height: 100%;\n    height: 100%;\n    overflow: auto;\n    overflow-x: hidden;\n  }\n\n  .modal-content-summary-area[_ngcontent-%COMP%] {\n    max-height: 20%;\n    height: 20%;\n    overflow: auto;\n    overflow-x: hidden;\n  }\n\n  .ellipsis[_ngcontent-%COMP%] {\n    \n    white-space: nowrap;\n  }"]}),(0,j.gn)([function oe(c){return function(_,i,t){const r=t.value,a=`__timeout__${i}`;return t.value=function(...g){clearTimeout(this[a]),this[a]=setTimeout(()=>r.apply(this,g),c)},t}}(10)],w.prototype,"updown",null);var de=m(53074),Me=m(87584),ue=m(67297),he=m(14970),pe=m(55757),p=m(471),E=m(90253),o=m(9267),T=m(23470),M=m(63213);const v=["genericGridSupplier"],ce=["genericGridShipName"],se=["genericGridRefBill"],ve=["genericGridWarehouse"],me=["fileUploadPopup"],Oe=["genericGridAccount"],Se=["genericGridImportPurchaseOrder"],be=["CreateQuickParty"],Ce=["LoadPurchaseOrder"],fe=["importAdvanceAcGrid"],Ae=["genericGridCustomer"],Ee=["focusInputFormat"],xe=["genericGridGRN"],Ne=["genericGridSalesMan"],Pe=["CreateCustomerProfile"],De=["genericGridPurchaseOrder"];function je(c,_){if(1&c&&(e.TgZ(0,"option",46),e._uU(1),e.qZA()),2&c){const i=_.$implicit;e.s9C("value",null==i?null:i.series),e.xp6(1),e.Oqu(null==i?null:i.series)}}function Re(c,_){if(1&c&&(e.ynx(0),e.YNc(1,je,2,2,"option",45),e.BQk()),2&c){const i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",i.chalanSeries)}}function ye(c,_){1&c&&(e.TgZ(0,"option",47),e._uU(1,"Chalan series not found!"),e.qZA())}function Ie(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Refno."),e.qZA(),e.TgZ(3,"td",8)(4,"select",42),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.CHALANNOPREFIX=r)}),e.YNc(5,Re,2,1,"ng-container",11),e.YNc(6,ye,2,0,"option",43),e.qZA(),e.TgZ(7,"input",44),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.CHALANNO=r)}),e.qZA()()()}if(2&c){const i=e.oxw(2);e.xp6(4),e.Q6J("ngModel",i._trnMainService.TrnMainObj.CHALANNOPREFIX)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode||1==i._trnMainService.disableAllFieldinPurchase),e.xp6(1),e.Q6J("ngIf",i.chalanSeries&&i.chalanSeries.length>0),e.xp6(1),e.Q6J("ngIf",i.chalanSeries&&0===i.chalanSeries.length),e.xp6(1),e.Q6J("ngModel",i._trnMainService.TrnMainObj.CHALANNO)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode)}}function Le(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Entry Date"),e.qZA(),e.TgZ(3,"td",48)(4,"input",49),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.TRNDATE=r)})("change",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.changeEntryDate(r.target.value,"AD"))}),e.qZA()(),e.TgZ(5,"td",50)(6,"nepali-date-picker",51),e.NdJ("change",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.changeEntryDate(r.detail.value,"BS"))})("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.BSDATE=r)}),e.qZA()()()}if(2&c){const i=e.oxw(2);e.xp6(4),e.s9C("max",i.currDate),e.Q6J("ngModel",i._trnMainService.TrnMainObj.TRNDATE)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode),e.xp6(2),e.Q6J("id","EntrynepaliDateFromPur")("label","From")("disable",i._trnMainService.disableNepaliDate||"VIEW"==i._trnMainService.TrnMainObj.Mode)("ngModel",i._trnMainService.TrnMainObj.BSDATE)}}function we(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div")(1,"input",54),e.NdJ("change",function(r){e.CHM(i);const a=e.oxw(3);return a._trnMainService.TrnMainObj.DOFULLRETURN=r.target.checked?1:0,e.KtG(a._trnMainService.callPipe=!a._trnMainService.callPipe)})("ngModelChange",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.DOFULLRETURN=r)}),e.qZA(),e.TgZ(2,"label",55),e._uU(3,"Load Full PO Details"),e.qZA()()}if(2&c){const i=e.oxw(3);e.xp6(1),e.Q6J("ngModel",i._trnMainService.TrnMainObj.DOFULLRETURN)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode)}}function Ze(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div")(1,"input",54),e.NdJ("change",function(r){e.CHM(i);const a=e.oxw(3);return a._trnMainService.TrnMainObj.DOFULLRETURN=r.target.checked?1:0,e.KtG(a._trnMainService.callPipe=!a._trnMainService.callPipe)})("ngModelChange",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.DOFULLRETURN=r)}),e.qZA(),e.TgZ(2,"label",55),e._uU(3,"Load Full Q.T Details"),e.qZA()()}if(2&c){const i=e.oxw(3);e.xp6(1),e.Q6J("ngModel",i._trnMainService.TrnMainObj.DOFULLRETURN)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode)}}const _e=function(c){return{width:c}};function Ue(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2),e.qZA(),e.TgZ(3,"td",52)(4,"input",53),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.REFORDBILL=r)})("keydown.enter",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.PurchaseOrderEnter(r))})("keydown.delete",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.PurchaseOrderDelete(r))}),e.qZA()(),e.TgZ(5,"td"),e.YNc(6,we,4,2,"div",11),e.YNc(7,Ze,4,2,"div",11),e.qZA()()}if(2&c){const i=e.oxw(2);e.xp6(2),e.Oqu(i.poNOLabel),e.xp6(2),e.Q6J("ngStyle",e.VKq(6,_e,20==i._trnMainService.TrnMainObj.VoucherType?"95%":"96%"))("ngModel",i._trnMainService.TrnMainObj.REFORDBILL)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode),e.xp6(2),e.Q6J("ngIf",3===i._trnMainService.TrnMainObj.VoucherType&&1!==i.userSetting.ENABLE_GRN_IN_PI||31===i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",20===i._trnMainService.TrnMainObj.VoucherType)}}function Ve(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Supplier's Bill No"),e.qZA(),e.TgZ(3,"td",8)(4,"input",56),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.REFORDBILL=r)})("keydown.enter",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.RefBillEnterCommand(r))}),e.qZA()()()}if(2&c){const i=e.oxw(2);e.xp6(4),e.Q6J("ngModel",i._trnMainService.TrnMainObj.REFORDBILL)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode)("placeholder",1==i.userSetting.REFBILLCOMPULSORINDNOTE?"Press Enter to select Supplier bill":"")}}function Ge(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2),e.qZA(),e.TgZ(3,"td",48)(4,"input",57),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.TRN_DATE=r)})("change",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.changeInvDate(r.target.value,"AD"))}),e.qZA()(),e.TgZ(5,"td",50)(6,"nepali-date-picker",51),e.NdJ("change",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.changeInvDate(r.detail.value,"BS"))})("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.BS_DATE=r)}),e.qZA()()()}if(2&c){const i=e.oxw(2);e.xp6(2),e.Oqu(i.invDateLabel),e.xp6(2),e.s9C("max",i.currDate),e.Q6J("ngModel",i._trnMainService.TrnMainObj.TRN_DATE)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode),e.xp6(2),e.Q6J("id","InvnepaliDateFromPur")("label","From")("disable",i._trnMainService.disableNepaliDate||"VIEW"==i._trnMainService.TrnMainObj.Mode)("ngModel",i._trnMainService.TrnMainObj.BS_DATE)}}function Be(c,_){1&c&&(e.TgZ(0,"option",62),e._uU(1,"NonTrading"),e.qZA())}function Fe(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Purchase Type"),e.qZA(),e.TgZ(3,"select",58),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.INVOICETYPE=r)})("change",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.onChangeOnMixedPurchaseType(r))}),e.TgZ(4,"option",59),e._uU(5,"Trading"),e.qZA(),e.YNc(6,Be,2,0,"option",60),e.TgZ(7,"option",61),e._uU(8,"Mixed"),e.qZA()()()}if(2&c){const i=e.oxw(2);e.xp6(3),e.Q6J("ngModel",i._trnMainService.TrnMainObj.INVOICETYPE)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode||1==i._trnMainService.disableAllFieldinPurchase||16==i._trnMainService.TrnMainObj.VoucherType&&1==i._trnMainService.userSetting.REFBILLCOMPULSORINDNOTE),e.xp6(3),e.Q6J("ngIf","GR"!=(null==i._trnMainService.TrnMainObj.REFORDBILL?null:i._trnMainService.TrnMainObj.REFORDBILL.substring(0,2)))}}function ke(c,_){1&c&&e._UZ(0,"label",5)}function Je(c,_){if(1&c){const i=e.EpF();e.ynx(0),e.TgZ(1,"input",63),e.NdJ("change",function(r){e.CHM(i);const a=e.oxw(2);return a._trnMainService.TrnMainObj.DOFULLRETURN=r.target.checked?1:0,e.KtG(a._trnMainService.callPipe=!a._trnMainService.callPipe)})("click",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.DoFullReturn(r.target.checked))})("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.DOFULLRETURN=r)}),e.qZA(),e.TgZ(2,"label",64),e._uU(3,"Do Full Return"),e.qZA(),e.BQk()}if(2&c){const i=e.oxw(2);e.xp6(1),e.Q6J("ngModel",i._trnMainService.TrnMainObj.DOFULLRETURN)("disabled","VIEW"===i._trnMainService.TrnMainObj.Mode)}}function Qe(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Ref Bill No."),e.qZA(),e.TgZ(3,"input",65),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.REFBILL=r)})("keydown.enter",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.RefBillEnterCommand(r))})("keydown.tab",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.RefBillEnterCommand(r))}),e.qZA()()}if(2&c){const i=e.oxw(2);e.xp6(3),e.Q6J("disabled",i.showRefBill||"VIEW"==i._trnMainService.TrnMainObj.Mode)("ngModel",i._trnMainService.TrnMainObj.REFBILL)}}function He(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Return Mode"),e.qZA(),e.TgZ(3,"select",66),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.TRNMODE=r)}),e.TgZ(4,"option",67),e._uU(5,"Credit"),e.qZA(),e.TgZ(6,"option",68),e._uU(7,"Cash"),e.qZA()()()}if(2&c){const i=e.oxw(2);e.xp6(3),e.Q6J("ngModel",i._trnMainService.TrnMainObj.TRNMODE)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode)}}function qe(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div")(1,"input",54),e.NdJ("change",function(r){e.CHM(i);const a=e.oxw(3);return a._trnMainService.TrnMainObj.DOFULLRETURN=r.target.checked?1:0,e.KtG(a._trnMainService.callPipe=!a._trnMainService.callPipe)})("ngModelChange",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.DOFULLRETURN=r)}),e.qZA(),e.TgZ(2,"label",55),e._uU(3,"Load Full PO Details"),e.qZA()()}if(2&c){const i=e.oxw(3);e.xp6(1),e.Q6J("ngModel",i._trnMainService.TrnMainObj.DOFULLRETURN)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode)}}function Ke(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div")(1,"input",54),e.NdJ("change",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.DOFULLRETURN=r.target.checked?1:0)})("ngModelChange",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.DOFULLRETURN=r)}),e.qZA(),e.TgZ(2,"label",55),e._uU(3,"Load Full Q.T Details"),e.qZA()()}if(2&c){const i=e.oxw(3);e.xp6(1),e.Q6J("ngModel",i._trnMainService.TrnMainObj.DOFULLRETURN)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode)}}function Ye(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2),e.qZA(),e.TgZ(3,"td",52)(4,"input",53),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.REFORDBILL=r)})("keydown.enter",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.PurchaseOrderEnter(r))})("keydown.delete",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.PurchaseOrderDelete(r))}),e.qZA()(),e.TgZ(5,"td"),e.YNc(6,qe,4,2,"div",11),e.YNc(7,Ke,4,2,"div",11),e.qZA()()}if(2&c){const i=e.oxw(2);e.xp6(2),e.Oqu(i.poNOLabel),e.xp6(2),e.Q6J("ngStyle",e.VKq(6,_e,20==i._trnMainService.TrnMainObj.VoucherType?"95%":"96%"))("ngModel",i._trnMainService.TrnMainObj.REFORDBILL)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode),e.xp6(2),e.Q6J("ngIf",3===i._trnMainService.TrnMainObj.VoucherType&&1!==i.userSetting.ENABLE_GRN_IN_PI||31===i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",20===i._trnMainService.TrnMainObj.VoucherType)}}function We(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Import PO No."),e.qZA(),e.TgZ(3,"td",52)(4,"input",69),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.REFORDBILL=r)})("keydown.enter",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.ImportPurchaseOrderEnter(r))})("keydown.delete",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.ImportPOdelete(r))}),e.qZA()(),e.TgZ(5,"td")(6,"input",54),e.NdJ("change",function(r){e.CHM(i);const a=e.oxw(2);return a._trnMainService.TrnMainObj.DOFULLRETURN=r.target.checked?1:0,e.KtG(a._trnMainService.callPipe=!a._trnMainService.callPipe)})("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.DOFULLRETURN=r)}),e.qZA(),e.TgZ(7,"label",55),e._uU(8,"Load Full PO Details"),e.qZA()()()}if(2&c){const i=e.oxw(2);e.xp6(4),e.Q6J("ngStyle",e.VKq(5,_e,20==i._trnMainService.TrnMainObj.VoucherType?"86%":"96%"))("ngModel",i._trnMainService.TrnMainObj.REFORDBILL)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode),e.xp6(2),e.Q6J("ngModel",i._trnMainService.TrnMainObj.DOFULLRETURN)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode)}}function Xe(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"GRN No"),e.qZA(),e.TgZ(3,"td",8)(4,"input",70),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.REFORDBILL=r)})("keydown.enter",function(){e.CHM(i);const r=e.oxw(2);return e.KtG(r.GrnNoEnter())}),e.qZA()()()}if(2&c){const i=e.oxw(2);e.xp6(4),e.Q6J("ngStyle",e.VKq(3,_e,20==i._trnMainService.TrnMainObj.VoucherType?"86%":"96%"))("ngModel",i._trnMainService.TrnMainObj.REFORDBILL)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode)}}function $e(c,_){1&c&&(e.TgZ(0,"option",67),e._uU(1,"Credit"),e.qZA())}function ze(c,_){1&c&&(e.TgZ(0,"option",68),e._uU(1,"Cash"),e.qZA())}function en(c,_){1&c&&(e.TgZ(0,"option",75),e._uU(1,"Cheque"),e.qZA())}function nn(c,_){if(1&c&&(e.TgZ(0,"option",77),e._uU(1),e.qZA()),2&c){const i=_.$implicit;e.Q6J("ngValue",i.PAYMODE),e.xp6(1),e.hij("",i.PAYMODE," ")}}function tn(c,_){if(1&c&&(e.ynx(0),e.YNc(1,nn,2,2,"option",76),e.BQk()),2&c){const i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",i.paymentTermList)}}function rn(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2),e.qZA(),e.TgZ(3,"select",71),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.TRNMODE=r)})("change",function(){e.CHM(i);const r=e.oxw(2);return e.KtG(r.paymentTermsChange())}),e.YNc(4,$e,2,0,"option",72),e.YNc(5,ze,2,0,"option",73),e.YNc(6,en,2,0,"option",74),e.YNc(7,tn,2,1,"ng-container",11),e.qZA()()}if(2&c){const i=e.oxw(2);e.xp6(2),e.Oqu(i.paymentTermLabel),e.xp6(1),e.Q6J("ngModel",i._trnMainService.TrnMainObj.TRNMODE)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode||1==i._trnMainService.disableAllFieldinPurchase||i._trnMainService.disablePaymentTerms||i.disableReturnModeInPartialDN||1===i.userSetting.REFBILLCOMPULSORINDNOTE&&1==i._trnMainService.TrnMainObj.DOFULLRETURN&&16===i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",3==i._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE"!=(null==i._trnMainService.TrnMainObj||null==i._trnMainService.TrnMainObj.AdditionalObj?null:i._trnMainService.TrnMainObj.AdditionalObj.tag)||16==i._trnMainService.TrnMainObj.VoucherType||37==i._trnMainService.TrnMainObj.VoucherType||31==i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",3==i._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE"!=(null==i._trnMainService.TrnMainObj||null==i._trnMainService.TrnMainObj.AdditionalObj?null:i._trnMainService.TrnMainObj.AdditionalObj.tag)||16==i._trnMainService.TrnMainObj.VoucherType||37==i._trnMainService.TrnMainObj.VoucherType||31==i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",3==i._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE"!=(null==i._trnMainService.TrnMainObj||null==i._trnMainService.TrnMainObj.AdditionalObj?null:i._trnMainService.TrnMainObj.AdditionalObj.tag)||16==i._trnMainService.TrnMainObj.VoucherType||37==i._trnMainService.TrnMainObj.VoucherType||31==i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",3==i._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE"==i._trnMainService.TrnMainObj.AdditionalObj.tag)}}function an(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Account"),e.qZA(),e.TgZ(3,"input",78),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.TRNACName=r)})("keydown.enter",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.AccountEnterCommand(r))})("keydown.tab",function(){e.CHM(i);const r=e.oxw(2);return e.KtG(r.focusToWarehouse())})("keydown",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.preventInput(r))}),e.qZA()()}if(2&c){const i=e.oxw(2);e.xp6(3),e.Q6J("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode||1==i._trnMainService.disableAllFieldinPurchase||1==i.disableOnCreditSelect||1===i.userSetting.REFBILLCOMPULSORINDNOTE&&1==i._trnMainService.TrnMainObj.DOFULLRETURN&&16===i._trnMainService.TrnMainObj.VoucherType)("ngModel",i._trnMainService.TrnMainObj.TRNACName)}}function on(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Account"),e.qZA(),e.TgZ(3,"input",79),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.TRNACName=r)})("keydown.Enter",function(){e.CHM(i);const r=e.oxw(2);return e.KtG(r.onImportAdvanceEnterClicked())})("keydown.tab",function(){e.CHM(i);const r=e.oxw(2);return e.KtG(r.focusToWarehouse())})("keydown",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.preventInput(r))}),e.qZA()()}if(2&c){const i=e.oxw(2);e.xp6(3),e.Q6J("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode||1==i._trnMainService.disableAllFieldinPurchase||1==i.disableOnCreditSelect)("ngModel",i._trnMainService.TrnMainObj.TRNACName)}}function cn(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Cheque No:"),e.qZA(),e.TgZ(3,"td",8)(4,"input",80),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.CHEQUENO=r)}),e.qZA(),e.TgZ(5,"input",81),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.CHEQUEDATE=r)})("change",function(){e.CHM(i);const r=e.oxw(2);return e.KtG(r.getEnglishDate())}),e.qZA()()()}if(2&c){const i=e.oxw(2);e.xp6(4),e.Q6J("ngModel",i._trnMainService.TrnMainObj.CHEQUENO)("disabled","cheque"!=i._trnMainService.TrnMainObj.TRNMODE||1==i._trnMainService.disableAllFieldinPurchase),e.xp6(1),e.Q6J("ngModel",i._trnMainService.TrnMainObj.CHEQUEDATE)("disabled","cheque"!=i._trnMainService.TrnMainObj.TRNMODE)}}function sn(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"input",84),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.MWAREHOUSE=r)})("keydown.enter",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a.WarehouseEnterCommand(r))}),e.ALo(1,"disableField"),e.qZA()}if(2&c){const i=e.oxw(3);e.Q6J("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode)("ngModel",i._trnMainService.TrnMainObj.MWAREHOUSE)("disabled",e.lcZ(1,3,"disableWareHouse")||1===i.userSetting.REFBILLCOMPULSORINDNOTE&&1==i._trnMainService.TrnMainObj.DOFULLRETURN&&16===i._trnMainService.TrnMainObj.VoucherType||i.disableForLite)}}function _n(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"input",85),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.MWAREHOUSE=r)})("keydown.enter",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a.WarehouseEnterCommand(r))}),e.qZA()}if(2&c){const i=e.oxw(3);e.Q6J("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode)("ngModel",i._trnMainService.TrnMainObj.MWAREHOUSE)}}function ln(c,_){if(1&c&&(e.TgZ(0,"div",4)(1,"label",5),e._uU(2),e.qZA(),e.YNc(3,sn,2,5,"input",82),e.YNc(4,_n,1,2,"input",83),e.qZA()),2&c){const i=e.oxw(2);e.xp6(2),e.Oqu(2==i.appType?"Godown":"Warehouse"),e.xp6(1),e.Q6J("ngIf","self-billing"!=i.activeurlpath),e.xp6(1),e.Q6J("ngIf","self-billing"==i.activeurlpath)}}function dn(c,_){if(1&c&&(e.ynx(0),e.TgZ(1,"option",46),e._uU(2),e.qZA(),e.BQk()),2&c){const i=_.$implicit;e.xp6(1),e.s9C("value",i.LocIDString),e.xp6(1),e.Oqu(i.Name)}}function Mn(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Location"),e.qZA(),e.TgZ(3,"select",86),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.MWAREHOUSE=r)}),e.YNc(4,dn,3,2,"ng-container",87),e.qZA()()}if(2&c){const i=e.oxw(2);e.xp6(3),e.Q6J("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode)("ngModel",i._trnMainService.TrnMainObj.MWAREHOUSE),e.xp6(1),e.Q6J("ngForOf",i.locationList)}}function un(c,_){if(1&c&&(e.TgZ(0,"option",46),e._uU(1),e.qZA()),2&c){const i=_.$implicit;e.s9C("value",i.CURNAME),e.xp6(1),e.hij(" ",i.CURNAME," ")}}function hn(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",88)(1,"label",88),e._uU(2,"Currency :"),e.qZA(),e.TgZ(3,"select",89),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.FCurrency=r)})("change",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.onCurrenyChange(r.target.value))})("keydown.Tab",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.focusToExcRate(r))})("keydown.Enter",function(r){e.CHM(i);const a=e.oxw(2);return r.preventDefault(),e.KtG(a.focusToExcRate(r))}),e.YNc(4,un,2,2,"option",45),e.qZA()()}if(2&c){const i=e.oxw(2);e.xp6(3),e.Q6J("ngModel",i._trnMainService.TrnMainObj.FCurrency)("disabled",i._trnMainService.itemselectevent||i._trnMainService.TrnMainObj.REFORDBILL||"VIEW"==i._trnMainService.TrnMainObj.Mode),e.xp6(1),e.Q6J("ngForOf",i.masterService.Currencies)}}function pn(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",88)(1,"label",90),e._uU(2,"EX Rate :"),e.qZA(),e.TgZ(3,"input",91),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.EXRATE=r)}),e.qZA()()}if(2&c){const i=e.oxw(2);e.xp6(3),e.Q6J("ngModel",i._trnMainService.TrnMainObj.EXRATE)("disabled",i._trnMainService.itemselectevent||"VIEW"==i._trnMainService.TrnMainObj.Mode)}}function Tn(c,_){if(1&c&&(e.TgZ(0,"option",46),e._uU(1),e.qZA()),2&c){const i=_.$implicit;e.s9C("value",i.CCID),e.xp6(1),e.hij(" ",i.COSTCENTERNAME,"")}}function gn(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Cost Center"),e.qZA(),e.TgZ(3,"select",93),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.COSTCENTER=r)}),e.YNc(4,Tn,2,2,"option",45),e.qZA()()}if(2&c){const i=e.oxw(3);e.xp6(3),e.Q6J("ngModel",i._trnMainService.TrnMainObj.COSTCENTER)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode),e.xp6(1),e.Q6J("ngForOf",i.costlists)}}function vn(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Delivery Date:"),e.qZA(),e.TgZ(3,"td",94)(4,"input",95),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.DeliveryDate=r)})("change",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a.changeDeliveryDate(r.target.value,"AD",r))})("focusout",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a.dateValidation(r.target.value,"DeliveryDate"))}),e.qZA()(),e.TgZ(5,"td",50)(6,"nepali-date-picker",96),e.NdJ("change",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a.changeDeliveryDate(r.detail.value,"BS",r))})("ngModelChange",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.DeliveryMiti=r)}),e.qZA()()()}if(2&c){const i=e.oxw(3);e.xp6(4),e.s9C("min",i.currDate),e.Q6J("ngModel",i._trnMainService.TrnMainObj.DeliveryDate)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode),e.xp6(2),e.Q6J("id","DeliveryDate")("label","Delivery Date")("ngModel",i._trnMainService.TrnMainObj.DeliveryMiti)("max",!1)("disabled",i._trnMainService.disableNepaliDate)}}function mn(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Order Expiry Date: "),e.qZA(),e.TgZ(3,"td",94)(4,"input",95),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.ORDEXPDATE=r)})("change",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a.changeExpiryDate(r.target.value,"AD"))})("focusout",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a.dateValidation(r.target.value,"OrderExpiryDate"))}),e.qZA()(),e.TgZ(5,"td",50)(6,"nepali-date-picker",97),e.NdJ("change",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a.changeExpiryDate(r.detail.value,"BS"))})("ngModelChange",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.ORDEXPMITI=r)}),e.qZA()()()}if(2&c){const i=e.oxw(3);e.xp6(4),e.s9C("min",i.currDate),e.Q6J("ngModel",i._trnMainService.TrnMainObj.ORDEXPDATE)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode),e.xp6(2),e.Q6J("id","OrderExpiryDate")("label","Expiry Date")("ngModel",i._trnMainService.TrnMainObj.ORDEXPMITI)("max",!1)}}function On(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Salesman"),e.qZA(),e.TgZ(3,"input",98),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.SALESMAN=r)})("keydown.enter",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a.salesManEnterCommand(r))})("keydown.delete",function(){e.CHM(i);const r=e.oxw(3);return e.KtG(r.salesmanDelete())}),e.qZA()()}if(2&c){const i=e.oxw(3);e.xp6(3),e.Q6J("ngModel",i._trnMainService.TrnMainObj.SALESMAN)}}function Sn(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",99),e._uU(2,"Load Wholesale Rate"),e.qZA(),e.TgZ(3,"input",100),e.NdJ("change",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.AdditionalObj.LoadWholeSaleRate=r.target.checked?1:0)})("ngModelChange",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.AdditionalObj.LoadWholeSaleRate=r)}),e.qZA()()}if(2&c){const i=e.oxw(3);e.xp6(3),e.Q6J("ngModel",i._trnMainService.TrnMainObj.AdditionalObj.LoadWholeSaleRate)}}function bn(c,_){if(1&c&&(e.TgZ(0,"option",46),e._uU(1),e.qZA()),2&c){const i=_.$implicit;e.s9C("value",i.CURNAME),e.xp6(1),e.hij(" ",i.CURNAME," ")}}function Cn(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",88)(1,"label",88),e._uU(2,"Currency :"),e.qZA(),e.TgZ(3,"select",89),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.FCurrency=r)})("change",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a.onCurrenyChange(r.target.value))})("keydown.Tab",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a.focusToExcRate(r))})("keydown.Enter",function(r){e.CHM(i);const a=e.oxw(3);return r.preventDefault(),e.KtG(a.focusToExcRate(r))}),e.YNc(4,bn,2,2,"option",45),e.qZA()()}if(2&c){const i=e.oxw(3);e.xp6(3),e.Q6J("ngModel",i._trnMainService.TrnMainObj.FCurrency)("disabled",i._trnMainService.itemselectevent||"VIEW"==i._trnMainService.TrnMainObj.Mode),e.xp6(1),e.Q6J("ngForOf",i.masterService.Currencies)}}function fn(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",101)(1,"label",90),e._uU(2,"EX Rate :"),e.qZA(),e.TgZ(3,"input",91),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(3);return e.KtG(a._trnMainService.TrnMainObj.EXRATE=r)}),e.qZA()()}if(2&c){const i=e.oxw(3);e.xp6(3),e.Q6J("ngModel",i._trnMainService.TrnMainObj.EXRATE)("disabled",i._trnMainService.itemselectevent||"VIEW"==i._trnMainService.TrnMainObj.Mode)}}function An(c,_){if(1&c&&(e.TgZ(0,"div"),e.YNc(1,gn,5,3,"div",7),e.YNc(2,vn,7,8,"div",7),e.YNc(3,mn,7,7,"div",7),e.YNc(4,On,4,1,"div",7),e.YNc(5,Sn,4,1,"div",7),e.TgZ(6,"div",4),e.YNc(7,Cn,5,3,"div",13),e.YNc(8,fn,4,2,"div",92),e.qZA()()),2&c){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",1==i.userSetting.enableCostCenter),e.xp6(1),e.Q6J("ngIf",19==i._trnMainService.TrnMainObj.VoucherType||20==i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",19==i._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE_ORDER"!=i._trnMainService.TrnMainObj.AdditionalObj.tag||20==i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf","salesorder"===i.activeurlpath&&i.hideSalesman()),e.xp6(1),e.Q6J("ngIf",i.showWholesaleRateOption()),e.xp6(2),e.Q6J("ngIf",19==i._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE_ORDER"==i._trnMainService.TrnMainObj.AdditionalObj.tag),e.xp6(1),e.Q6J("ngIf",3==i._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE"==i._trnMainService.TrnMainObj.AdditionalObj.tag||19==i._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE_ORDER"==i._trnMainService.TrnMainObj.AdditionalObj.tag)}}function En(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"span",102),e.NdJ("click",function(){e.CHM(i);const r=e.oxw(2);return e.KtG(r.onAddNewSupplier())}),e.TgZ(1,"p"),e._uU(2,"+"),e.qZA()()}}function xn(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Salesman"),e.qZA(),e.TgZ(3,"input",98),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.SALESMAN=r)})("keydown.enter",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.salesManEnterCommand(r))})("keydown.delete",function(){e.CHM(i);const r=e.oxw(2);return e.KtG(r.salesmanDelete())}),e.qZA()()}if(2&c){const i=e.oxw(2);e.xp6(3),e.Q6J("ngModel",i._trnMainService.TrnMainObj.SALESMAN)}}function Nn(c,_){if(1&c&&(e.TgZ(0,"option",46),e._uU(1),e.qZA()),2&c){const i=_.$implicit;e.s9C("value",i.NAME),e.xp6(1),e.hij(" ",i.NAME," ")}}function Pn(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Shipping Location"),e.qZA(),e.TgZ(3,"select",103),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.ShippingLocation=r)})("change",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.shippinglocationVoucher(r))}),e.YNc(4,Nn,2,2,"option",45),e.qZA()()}if(2&c){const i=e.oxw(2);e.xp6(3),e.Q6J("ngModel",i._trnMainService.TrnMainObj.ShippingLocation)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode),e.xp6(1),e.Q6J("ngForOf",i._trnMainService.shippingAddress)}}function Dn(c,_){if(1&c&&(e.TgZ(0,"option",46),e._uU(1),e.qZA()),2&c){const i=_.$implicit;e.s9C("value",i.CCID),e.xp6(1),e.hij(" ",i.COSTCENTERNAME,"")}}function jn(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Cost Center"),e.qZA(),e.TgZ(3,"select",66),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.COSTCENTER=r)}),e.YNc(4,Dn,2,2,"option",45),e.qZA()()}if(2&c){const i=e.oxw(2);e.xp6(3),e.Q6J("ngModel",i._trnMainService.TrnMainObj.COSTCENTER)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode||i.disableCostCentreforRefPIWiseLoad()||i._trnMainService.disableCostCenterForCargo),e.xp6(1),e.Q6J("ngForOf",i.costlists)}}function Rn(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Consignment NO :"),e.qZA(),e.TgZ(3,"input",104),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.DISPENSEBY=r)}),e.qZA()()}if(2&c){const i=e.oxw(2);e.xp6(3),e.Q6J("ngModel",i._trnMainService.TrnMainObj.DISPENSEBY)}}function yn(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",4)(1,"label",5),e._uU(2,"Receive Loc :"),e.qZA(),e.TgZ(3,"input",105),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a._trnMainService.TrnMainObj.RECEIVEBY=r)}),e.qZA()()}if(2&c){const i=e.oxw(2);e.xp6(3),e.Q6J("ngModel",i._trnMainService.TrnMainObj.RECEIVEBY)}}function In(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div")(1,"div",106)(2,"div",107)(3,"div",108)(4,"h6",109),e._uU(5,"Authorization for Negative Stock Entry"),e.qZA(),e.TgZ(6,"button",110),e.NdJ("click",function(){e.CHM(i);const r=e.oxw(2);return e.KtG(r.closeModal())}),e.TgZ(7,"span",111),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",112)(10,"div",113)(11,"label",114),e._uU(12,"User Name:"),e.qZA(),e.TgZ(13,"div",115)(14,"input",116),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.NegativeBillAuthObj.username=r)}),e.qZA()()(),e.TgZ(15,"div",113)(16,"label",114),e._uU(17,"Password:"),e.qZA(),e.TgZ(18,"div",115)(19,"input",117),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw(2);return e.KtG(a.NegativeBillAuthObj.password=r)}),e.qZA()()()(),e.TgZ(20,"div",118)(21,"button",119),e.NdJ("click",function(){e.CHM(i);const r=e.oxw(2);return e.KtG(r.NegativeBillAuthConfirm())}),e._uU(22,"Confirm"),e.qZA(),e.TgZ(23,"button",120),e.NdJ("click",function(){e.CHM(i);const r=e.oxw(2);return e.KtG(r.closeModal())}),e._uU(24,"Cancel"),e.qZA()()()()()}if(2&c){const i=e.oxw(2);e.xp6(14),e.Q6J("ngModel",i.NegativeBillAuthObj.username),e.xp6(5),e.Q6J("ngModel",i.NegativeBillAuthObj.password)}}function Ln(c,_){if(1&c){const i=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"label",5),e._uU(5),e.qZA(),e.TgZ(6,"td",6),e._uU(7),e.qZA()(),e.YNc(8,Ie,8,6,"div",7),e.YNc(9,Le,7,7,"div",7),e.TgZ(10,"div",4)(11,"label",5),e._uU(12),e.qZA(),e.TgZ(13,"td",8)(14,"input",9),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a._trnMainService.TrnMainObj.REFBILL=r)})("keydown.enter",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.RefBillEnterCommand(r))}),e.qZA()()(),e.YNc(15,Ue,8,8,"div",7),e.YNc(16,Ve,5,3,"div",7),e.ynx(17),e.YNc(18,Ge,7,8,"div",7),e.BQk(),e.YNc(19,Fe,9,3,"div",7),e.TgZ(20,"div",4),e.YNc(21,ke,1,0,"label",10),e.YNc(22,Je,4,2,"ng-container",11),e.qZA()(),e.TgZ(23,"div",12),e.YNc(24,Qe,4,2,"div",7),e.YNc(25,He,8,2,"div",7),e.YNc(26,Ye,8,8,"div",7),e.YNc(27,We,9,7,"div",7),e.YNc(28,Xe,5,5,"div",7),e.YNc(29,rn,8,7,"div",7),e.YNc(30,an,4,2,"div",7),e.YNc(31,on,4,2,"div",7),e.YNc(32,cn,6,4,"div",7),e.YNc(33,ln,5,3,"div",7),e.YNc(34,Mn,5,3,"div",7),e.TgZ(35,"div",4),e.YNc(36,hn,5,3,"div",13),e.YNc(37,pn,4,2,"div",13),e.qZA(),e.YNc(38,An,9,7,"div",11),e.qZA(),e.TgZ(39,"div",14)(40,"div",15)(41,"label",5),e._uU(42),e.qZA(),e.TgZ(43,"input",16),e.NdJ("change",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.supplierFieldChange())})("ngModelChange",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a._trnMainService.TrnMainObj.BILLTO=r)})("keydown.enter",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.SupplierEnterCommand(r))})("keydown.tab",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.focusToRemarks())})("keyup",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.SupplierEnterCommand(r))}),e.qZA(),e.YNc(44,En,3,0,"span",17),e.qZA(),e.TgZ(45,"div",4)(46,"label",5),e._uU(47,"Address"),e.qZA(),e.TgZ(48,"input",18),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a._trnMainService.TrnMainObj.BILLTOADD=r)}),e.qZA()(),e.TgZ(49,"div",4)(50,"label",5),e._uU(51,"Vat No "),e.qZA(),e.TgZ(52,"input",19),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a._trnMainService.TrnMainObj.BILLTOTEL=r)}),e.qZA()(),e.TgZ(53,"div",4)(54,"label",5),e._uU(55,"Remarks"),e.qZA(),e.TgZ(56,"textarea",20),e.NdJ("ngModelChange",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a._trnMainService.TrnMainObj.REMARKS=r)}),e.qZA()(),e.YNc(57,xn,4,1,"div",7),e.YNc(58,Pn,5,3,"div",7),e.YNc(59,jn,5,3,"div",7),e.YNc(60,Rn,4,1,"div",7),e.YNc(61,yn,4,1,"div",7),e.qZA()(),e.TgZ(62,"generic-popup-grid",21,22),e.NdJ("onItemDoubleClick",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.onSupplierSelected(r))}),e.qZA(),e.TgZ(64,"generic-popup-grid",21,23),e.NdJ("onItemDoubleClick",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.onShipNameSelected(r))}),e.qZA(),e.TgZ(66,"generic-popup-grid",21,24),e.NdJ("onItemDoubleClick",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.onRefBillSelected(r))}),e.qZA(),e.TgZ(68,"generic-popup-grid",21,25),e.NdJ("onItemDoubleClick",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.onWarehouseSelected(r))}),e.qZA(),e.TgZ(70,"generic-popup-grid",21,26),e.NdJ("onItemDoubleClick",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.onAccountSelect(r))}),e.qZA(),e.TgZ(72,"generic-popup-grid",21,27),e.NdJ("onItemDoubleClick",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.onPurchaseOrderSelect(r))}),e.qZA(),e.TgZ(74,"generic-multiSelectpopup-grid",28,27),e.NdJ("onImportChalanClick",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.onImportChalanClick(r))}),e.qZA(),e.TgZ(76,"generic-popup-grid",21,29),e.NdJ("onItemDoubleClick",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.onImportPurchaseOrderSelect(r))}),e.qZA(),e.TgZ(78,"file-uploader-popup",30,31),e.NdJ("onUploaded",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.onfileUpload(r))}),e.qZA(),e.TgZ(80,"generic-popup-grid",21,32),e.NdJ("onItemDoubleClick",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.onGRNSelect(r))}),e.qZA(),e.TgZ(82,"generic-popup-grid",21,33),e.NdJ("onItemDoubleClick",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.onCustomerSelected(r))}),e.qZA(),e.TgZ(84,"load-purchase-order",34,35),e.NdJ("onLoadPO",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.OKLoadPurchaseOrder(r))}),e.qZA(),e.TgZ(86,"generic-popup-grid",21,36),e.NdJ("onItemDoubleClick",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.onImportAdvanceItemClick(r))}),e.qZA(),e.TgZ(88,"quick-party-master",37,38),e.NdJ("onSaveParty",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.onSavePartyMaster(r))}),e.qZA(),e.TgZ(90,"generic-popup-grid",21,39),e.NdJ("onItemDoubleClick",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.onSalesManSelect(r))}),e.qZA(),e.TgZ(92,"create-customer-dialog",40,41),e.NdJ("onSave",function(r){e.CHM(i);const a=e.oxw();return e.KtG(a.onSaveCustomerProfile(r))}),e.qZA(),e.YNc(94,In,25,2,"div",11),e.qZA()}if(2&c){const i=e.oxw();e.xp6(5),e.Oqu(i.billLabel),e.xp6(2),e.hij(" ",i._trnMainService.TrnMainObj.VCHRNO," "),e.xp6(1),e.Q6J("ngIf",1==i.userSetting.enableCostCenter&&15==i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",16==i._trnMainService.TrnMainObj.VoucherType||3==i._trnMainService.TrnMainObj.VoucherType||37==i._trnMainService.TrnMainObj.VoucherType||19==i._trnMainService.TrnMainObj.VoucherType||20==i._trnMainService.TrnMainObj.VoucherType||31==i._trnMainService.TrnMainObj.VoucherType||40==i._trnMainService.TrnMainObj.VoucherType),e.xp6(3),e.Oqu(i.invNoLabel),e.xp6(2),e.Q6J("ngModel",i._trnMainService.TrnMainObj.REFBILL)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode||1==i._trnMainService.disableAllFieldinPurchase||1==i._trnMainService.disableOnGRNload)("readonly",16==i._trnMainService.TrnMainObj.VoucherType&&1==i.userSetting.REFBILLCOMPULSORINDNOTE)("placeholder",16==i._trnMainService.TrnMainObj.VoucherType&&1==i.userSetting.REFBILLCOMPULSORINDNOTE?"Press Enter to select PI bill":""),e.xp6(1),e.Q6J("ngIf","salesorder"===i.activeurlpath&&0!=i.userSetting.ENABLE_QUOTATTION_INSO),e.xp6(1),e.Q6J("ngIf",16==i._trnMainService.TrnMainObj.VoucherType||40==i._trnMainService.TrnMainObj.VoucherType),e.xp6(2),e.Q6J("ngIf",3==i._trnMainService.TrnMainObj.VoucherType||37==i._trnMainService.TrnMainObj.VoucherType||15==i._trnMainService.TrnMainObj.VoucherType||31==i._trnMainService.TrnMainObj.VoucherType||19==i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",i.showPurchaseType()),e.xp6(2),e.Q6J("ngIf",(3==i._trnMainService.TrnMainObj.VoucherType||37==i._trnMainService.TrnMainObj.VoucherType||31==i._trnMainService.TrnMainObj.VoucherType||16==i._trnMainService.TrnMainObj.VoucherType||40==i._trnMainService.TrnMainObj.VoucherType)&&"purchase-import"!=i.activeurlpath),e.xp6(1),e.Q6J("ngIf",1==i.userSetting.REFBILLCOMPULSORINDNOTE&&16==i._trnMainService.TrnMainObj.VoucherType),e.xp6(2),e.Q6J("ngIf",4==i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",4==i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",i.showReferenceBill()&&"asset-purchase-invoice"!==i.activeurlpath&&"salesorder"!==i.activeurlpath),e.xp6(1),e.Q6J("ngIf",3==i._trnMainService.TrnMainObj.VoucherType&&"asset-purchase-invoice"!=i.activeurlpath&&"IMPORT_PURCHASE"==(null==i._trnMainService||null==i._trnMainService.TrnMainObj||null==i._trnMainService.TrnMainObj.AdditionalObj?null:i._trnMainService.TrnMainObj.AdditionalObj.tag)&&0!=i.userSetting.IMPORTPOBILLMODE),e.xp6(1),e.Q6J("ngIf",3==i._trnMainService.TrnMainObj.VoucherType&&"asset-purchase-invoice"!==i.activeurlpath&&(1==i.userSetting.ENABLE_GRN_IN_PI||1==i.userSetting.ENABLE_GRN_IN_PI&&1==i.userSetting.EnableGRNInPIForCargo)&&"purchase-import"!=i.activeurlpath),e.xp6(1),e.Q6J("ngIf",3==i._trnMainService.TrnMainObj.VoucherType||37==i._trnMainService.TrnMainObj.VoucherType||16==i._trnMainService.TrnMainObj.VoucherType||31==i._trnMainService.TrnMainObj.VoucherType||40==i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",3==i._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE"!=(null==i._trnMainService||null==i._trnMainService.TrnMainObj||null==i._trnMainService.TrnMainObj.AdditionalObj?null:i._trnMainService.TrnMainObj.AdditionalObj.tag)||16==i._trnMainService.TrnMainObj.VoucherType||37==i._trnMainService.TrnMainObj.VoucherType||31==i._trnMainService.TrnMainObj.VoucherType||40==i._trnMainService.TrnMainObj.VoucherType),e.xp6(1),e.Q6J("ngIf",3==i._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE"==i._trnMainService.TrnMainObj.AdditionalObj.tag),e.xp6(1),e.Q6J("ngIf",19!=i._trnMainService.TrnMainObj.VoucherType&&20!=i._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE"!=(null==i._trnMainService||null==i._trnMainService.TrnMainObj||null==i._trnMainService.TrnMainObj.AdditionalObj?null:i._trnMainService.TrnMainObj.AdditionalObj.tag)),e.xp6(1),e.Q6J("ngIf",(3==i._trnMainService.TrnMainObj.VoucherType||16==i._trnMainService.TrnMainObj.VoucherType||37==i._trnMainService.TrnMainObj.VoucherType||31==i._trnMainService.TrnMainObj.VoucherType||40==i._trnMainService.TrnMainObj.VoucherType||20===i._trnMainService.TrnMainObj.VoucherType&&1==i.userSetting.CheckSaleableQtyInSO)&&"lite"!=i.AppMode&&"asset-purchase-invoice"!=i.activeurlpath),e.xp6(1),e.Q6J("ngIf","asset-purchase-invoice"===i.activeurlpath),e.xp6(2),e.Q6J("ngIf",3==i._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE"==i._trnMainService.TrnMainObj.AdditionalObj.tag),e.xp6(1),e.Q6J("ngIf",3==i._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE"==i._trnMainService.TrnMainObj.AdditionalObj.tag),e.xp6(1),e.Q6J("ngIf",19==i._trnMainService.TrnMainObj.VoucherType||20==i._trnMainService.TrnMainObj.VoucherType),e.xp6(4),e.Oqu(i.custsupp),e.xp6(1),e.MGl("placeholder","Press ENTER or TAB to select ",i.custsupp,""),e.Q6J("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode||"credit"==i._trnMainService.TrnMainObj.TRNMODE||1==i._trnMainService.disableAllFieldinPurchase||i._trnMainService.disableSupplierInfo||i._trnMainService.disableCustomerInfo||1===i.userSetting.REFBILLCOMPULSORINDNOTE&&1==i._trnMainService.TrnMainObj.DOFULLRETURN&&16===i._trnMainService.TrnMainObj.VoucherType)("ngModel",i._trnMainService.TrnMainObj.BILLTO),e.xp6(1),e.Q6J("ngIf",i.showAddButton()),e.xp6(4),e.Q6J("ngModel",i._trnMainService.TrnMainObj.BILLTOADD)("readonly",i.isAddressReadOnly||3==i._trnMainService.TrnMainObj.VoucherType||20===i._trnMainService.TrnMainObj.VoucherType)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode||1==i._trnMainService.disableAllFieldinPurchase||i._trnMainService.disableSupplierInfo||i._trnMainService.disableCustomerInfo||1===i.userSetting.REFBILLCOMPULSORINDNOTE&&1==i._trnMainService.TrnMainObj.DOFULLRETURN&&16===i._trnMainService.TrnMainObj.VoucherType),e.xp6(4),e.Q6J("readonly",i.isVatNoReadOnly||3==i._trnMainService.TrnMainObj.VoucherType||20==i._trnMainService.TrnMainObj.VoucherType)("ngModel",i._trnMainService.TrnMainObj.BILLTOTEL)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode||1==i._trnMainService.disableAllFieldinPurchase||i._trnMainService.disableSupplierInfo||i._trnMainService.disableCustomerInfo||1===i.userSetting.REFBILLCOMPULSORINDNOTE&&1==i._trnMainService.TrnMainObj.DOFULLRETURN&&16===i._trnMainService.TrnMainObj.VoucherType),e.xp6(4),e.Q6J("ngModel",i._trnMainService.TrnMainObj.REMARKS)("disabled","VIEW"==i._trnMainService.TrnMainObj.Mode||1==i._trnMainService.disableAllFieldinPurchase),e.xp6(1),e.Q6J("ngIf",20==i._trnMainService.TrnMainObj.VoucherType&&"salesorder"!==i.activeurlpath&&i.hideSalesman()),e.xp6(1),e.Q6J("ngIf","salesorder"===i.activeurlpath),e.xp6(1),e.Q6J("ngIf",0!=i.userSetting.enableCostCenter&&19!=i._trnMainService.TrnMainObj.VoucherType&&20!=i._trnMainService.TrnMainObj.VoucherType&&(3==i._trnMainService.TrnMainObj.VoucherType||16==i._trnMainService.TrnMainObj.VoucherType||31==i._trnMainService.TrnMainObj.VoucherType)&&"pro"==i.AppMode&&0==i.userSetting.EnableItemWiseCostCenter),e.xp6(1),e.Q6J("ngIf",3==i._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE"==i._trnMainService.TrnMainObj.AdditionalObj.tag),e.xp6(1),e.Q6J("ngIf",3==i._trnMainService.TrnMainObj.VoucherType&&"IMPORT_PURCHASE"==i._trnMainService.TrnMainObj.AdditionalObj.tag),e.xp6(1),e.Q6J("popupsettings",i.gridPopupSettingsForSupplier),e.xp6(2),e.Q6J("popupsettings",i.gridPopupSettingsForShipName),e.xp6(2),e.Q6J("popupsettings",i.gridPopupSettingsForRefBill),e.xp6(2),e.Q6J("popupsettings",i.gridPopupSettingsForWarehouse),e.xp6(2),e.Q6J("popupsettings",i.genericGridAccountSetting),e.xp6(2),e.Q6J("popupsettings",i.genericGridPurchaseOrderSetting),e.xp6(2),e.Q6J("popupsettings",i.genericGridPurchaseOrderSetting),e.xp6(2),e.Q6J("popupsettings",i.genericGridImportPurchaseOrderSetting),e.xp6(2),e.Q6J("popupsettings",i.fileUploadPopupSettings),e.xp6(2),e.Q6J("popupsettings",i.genericGridGRNSetting),e.xp6(2),e.Q6J("popupsettings",i.gridPopupSettingsForCustomer),e.xp6(4),e.Q6J("popupsettings",i.gridPopupSettingsForimportAdvanceAc),e.xp6(4),e.Q6J("popupsettings",i.gridPopupSettingsForSalesMan),e.xp6(4),e.Q6J("ngIf",1==i._trnMainService.showNegativeBillingAuthForMain)}}let wn=(()=>{class c{constructor(i,t,r,a,g,f,C){this.masterService=i,this._trnMainService=t,this._authService=r,this.dialog=a,this._alertService=g,this._loadingService=f,this.arouter=C,this.viewDisable=!1,this.gridPopupSettingsForRefBill=new n.im,this.gridPopupSettingsForSupplier=new R.sG,this.gridPopupSettingsForShipName=new n.im,this.gridPopupSettingsForWarehouse=new n.im,this.fileUploadPopupSettings=new Z.s,this.genericGridAccountSetting=new n.im,this.genericGridPurchaseOrderSetting=new n.im,this.genericGridImportPurchaseOrderSetting=new n.im,this.gridPopupSettingsForimportAdvanceAc=new n.im,this.genericGridGRNSetting=new n.im,this.gridPopupSettingsForCustomer=new n.im,this.gridPopupSettingsForSalesMan=new n.im,this.billLabel="Bill No",this.invNoLabel="Invoice No:",this.invDateLabel="Invoice Date:",this.poNOLabel="PO NO",this.paymentTermLabel="Payment Terms",this.custsupp="Supplier",this.chalanSeries=[],this.isAddressReadOnly=!1,this.isVatNoReadOnly=!1,this.paymentTermList=[],this.disableReturnModeInPartialDN=!1,this.NegativeBillAuthObj={username:"",password:"",remarks:""},this.disableOnCreditSelect=!1,this.ReffBillObj={},this.appType=this.masterService.appType,this.userProfile=this._authService.getUserProfile(),this.orgType=this.userProfile.CompanyInfo.ORG_TYPE,this.userSetting=this._authService.getSetting(),this.AppMode=I.N.appMode,"lite"==this.AppMode&&(this.disableForLite=!0),20!=this._trnMainService.TrnMainObj.VoucherType&&(this._trnMainService.TrnMainObj.DOFULLRETURN=1==this.userSetting.REFBILLCOMPULSORINDNOTE?1:0),20==this._trnMainService.TrnMainObj.VoucherType&&(0==this._trnMainService.TrnMainObj.DOFULLRETURN&&0!=this.userSetting.ENABLE_QUOTATTION_INSO?this._trnMainService.TrnMainObj.DOFULLRETURN=0:0!=this.userSetting.ENABLE_QUOTATTION_INSO&&(this._trnMainService.TrnMainObj.DOFULLRETURN=1));var F=this.masterService.PhiscalObj.BeginDate;F=F.substring(0,10),this.date2=F,this.gridPopupSettingsForShipName={title:"Customer",apiEndpoints:"/getAccountPagedListByPType/PA/C",defaultFilterIndex:0,columns:[{key:"ACNAME",title:"NAME",hidden:!1,noSearch:!1},{key:"ACCODE",title:"CODE",hidden:!1,noSearch:!1},{key:"ADDRESS",title:"ADDRESS",hidden:!1,noSearch:!1},{key:"EMAIL",title:"EMAIL",hidden:!1,noSearch:!1}]},this.gridPopupSettingsForWarehouse={title:2==this.appType?"Godown":"Warehouse",apiEndpoints:"/getDivisionWiseWarehousePagedList",defaultFilterIndex:0,columns:[{key:"NAME",title:"NAME",hidden:!1,noSearch:!1}]},"distributor"==this._trnMainService.userProfile.CompanyInfo.ORG_TYPE&&(this.showRefBill=!0),this._trnMainService.TrnMainObj.CHALANNO="",this.loadCompanyInfo(),this.activeurlpath=C.snapshot.url[0].path,("purchase-import"==this.activeurlpath||"purchase-import-order"==this.activeurlpath)&&this.masterService.getPaymentTermList().subscribe(k=>{this.paymentTermList=k.result}),"asset-purchase-invoice"===this.activeurlpath&&(this.masterService.GetAssetLocation().subscribe(k=>{"ok"==k.status&&(this.locationList=k.result,this._trnMainService.TrnMainObj.MWAREHOUSE=this.locationList.find(Te=>Te.IsDefault).LocIDString)}),this.masterService.getMinimumDepValue().subscribe(k=>{this._trnMainService.TrnMainObj.MinDepValue=k}))}ngAfterViewInit(){16==this._trnMainService.TrnMainObj.VoucherType||(20==this._trnMainService.TrnMainObj.VoucherType?setTimeout(()=>{console.log("focus on entry"),document.getElementById("entryDateAD").focus()},1e3):document.getElementById("invoiceNO").focus())}ngOnInit(){this._trnMainService.TrnMainObj.CHALANNO="",this.getDateMiti();const i=new Date;this.currDate=(0,U.p6)(i,"yyyy-MM-dd","en-US"),this.currDateBS=this.convertTOBS(this.currDate),this.masterService.getAllChalanSeries(this._trnMainService.TrnMainObj.VoucherPrefix?this._trnMainService.TrnMainObj.VoucherPrefix:"").subscribe(r=>{r&&"ok"===r.status&&r.result?(this.chalanSeries=r.result?r.result:[],this._trnMainService.TrnMainObj.CHALANNOPREFIX=""):this.chalanSeries=[]},r=>{this.chalanSeries=[]}),this.masterService.getAllCostCenter().subscribe(r=>{r&&(this.costlists=r)},r=>{this.costlists=[]}),this._trnMainService.TrnMainObj.VoucherType===O.Km.GoodsReceived&&(this._trnMainService.TrnMainObj.DOFULLRETURN=1,this._trnMainService.TrnMainObj.VATBILL=0),19===this._trnMainService.TrnMainObj.VoucherType?(this.billLabel="PO NO.",this.invNoLabel="Ref No:",this.invDateLabel="Ref Date:"):3==this._trnMainService.TrnMainObj.VoucherType?(this.billLabel="PI No.",this.invNoLabel="Invoice No:",this.invDateLabel="Invoice Date:",this.poNOLabel="PO NO",this.paymentTermLabel="Payment Terms",(0!=this.userSetting.IMPORTBILLPO&&"IMPORT_PURCHASE"==this._trnMainService.TrnMainObj.AdditionalObj.tag||0!=this.userSetting.PODELIVERYMODE&&"IMPORT_PURCHASE"!==this._trnMainService.TrnMainObj.AdditionalObj.tag)&&(this._trnMainService.TrnMainObj.DOFULLRETURN=1),this._trnMainService.TrnMainObj.VATBILL=0):16==this._trnMainService.TrnMainObj.VoucherType?(this.billLabel="RETURN NO.",this.invNoLabel="Ref PI No:",this.invDateLabel="Ref PI Date:",this.poNOLabel="Ref Sup Inv NO",this.paymentTermLabel="Return Mode"):20==this._trnMainService.TrnMainObj.VoucherType?(this.billLabel="SO NO.",this.invNoLabel="Ref No:",this.custsupp="Customer",this.poNOLabel="Quotation Ref no.",this._trnMainService.TrnMainObj.DOFULLRETURN=0===this._trnMainService.TrnMainObj.DOFULLRETURN?0:1):this.billLabel="BILL NO.","asset-purchase-invoice"==this.activeurlpath&&(this._trnMainService.TrnMainObj.INVOICETYPE="NONTRADING")}getDateMiti(){this.masterService.getDateMiti(this.userProfile.PhiscalYearInfo.PhiscalID).subscribe(i=>{this.dateMiti=i&&"ok"===i.status&&i.result&&i.result?i.result:[]},i=>{this.dateMiti=[]})}onChangePanBill(){if(this._trnMainService.TrnMainObj.VoucherType!=O.Km.Purchase&&this._trnMainService.TrnMainObj.VoucherType!=O.Km.DebitNote||"MIXED"!=this._trnMainService.TrnMainObj.INVOICETYPE&&"NONTRADING"!=this._trnMainService.TrnMainObj.INVOICETYPE)this._trnMainService.ReCalculateBillWithNormal();else{for(let i=0;i<this._trnMainService.TrnMainObj?.AdditionProdList?.length;i++)this._trnMainService.TrnMainObj.AdditionProdList[i].RATE=this._trnMainService.TrnMainObj.AdditionProdList[i].ALTRATE,this._trnMainService.TrnMainObj.AdditionProdList[i].VAT=this._trnMainService.calculateVATforNonTrading(i);this._trnMainService.ReCalculateBillForNonTradingPurchase(),this._trnMainService.calculateTradingNontradingTotalinDebitNote()}}OnChangePurchaseReturnType(i){("StockIssueApproved"==this._trnMainService.TrnMainObj.AdditionalObj.RETURNTYPE||"DamageSalesReturnApproved"==this._trnMainService.TrnMainObj.AdditionalObj.RETURNTYPE)&&(this.showRefBill=!1),"StockIssueApproved"==this._trnMainService.TrnMainObj.AdditionalObj.RETURNTYPE?this.gridPopupSettingsForRefBill=this.masterService.getGenericGridPopUpSettings("StockTransferForPurchaseReturn"):"DamageSalesReturnApproved"==this._trnMainService.TrnMainObj.AdditionalObj.RETURNTYPE&&(this.gridPopupSettingsForRefBill=this.masterService.getGenericGridPopUpSettings("DamageIssueForPurchaseReturn"))}undo(){this._trnMainService.TrnMainObj.TRNMODE="credit"}showReferenceBill(){return this._trnMainService.TrnMainObj.VoucherType===O.Km.SalesOrder&&(1===this.userSetting.ENABLE_QUOTATTION_INSO||2===this.userSetting.ENABLE_QUOTATTION_INSO)||this._trnMainService.TrnMainObj.VoucherType===O.Km.Purchase&&(1===this.userSetting.PODELIVERYMODE||2===this.userSetting.PODELIVERYMODE)&&"IMPORT_PURCHASE"!==this._trnMainService.TrnMainObj.AdditionalObj.tag&&1!==this.userSetting.ENABLE_GRN_IN_PI||this._trnMainService.TrnMainObj.VoucherType===O.Km.GoodsReceived&&(1===this.userSetting.PODELIVERYMODE||2===this.userSetting.PODELIVERYMODE)&&0!=this.userSetting.ENABLE_GRN_IN_PI}ngOnDestroy(){}getNepaliDate(){if(""!==this._trnMainService.TrnMainObj.TRNDATE&&null!==this._trnMainService.TrnMainObj.TRNDATE){const i=`${this._trnMainService.TrnMainObj.TRNDATE}`,t=G().find(this.dateMiti,["AD",i]);console.log("BSDATE",t),this._trnMainService.TrnMainObj.BSDATE=t&&t.MITI}if(""!==this._trnMainService.TrnMainObj.TRN_DATE&&null!==this._trnMainService.TrnMainObj.TRN_DATE){const i=`${this._trnMainService.TrnMainObj.TRN_DATE}`,t=G().find(this.dateMiti,["AD",i]);this._trnMainService.TrnMainObj.BS_DATE=t&&t.MITI}if(""!==this._trnMainService.TrnMainObj.DeliveryDate&&null!==this._trnMainService.TrnMainObj.DeliveryDate){const i=`${this._trnMainService.TrnMainObj.DeliveryDate}`,t=G().find(this.dateMiti,["AD",i]);this._trnMainService.TrnMainObj.DeliveryMiti=t&&t.MITI}if(""!==this._trnMainService.TrnMainObj.ORDEXPDATE&&null!==this._trnMainService.TrnMainObj.ORDEXPDATE){const i=`${this._trnMainService.TrnMainObj.ORDEXPDATE}`,t=G().find(this.dateMiti,["AD",i]);this._trnMainService.TrnMainObj.ORDEXPMITI=t&&t.MITI}}getEnglishDate(){if(""!==this._trnMainService.TrnMainObj.BSDATE&&null!==this._trnMainService.TrnMainObj.BSDATE){const i=`${this._trnMainService.TrnMainObj.BSDATE}`,t=G().find(this.dateMiti,["MITI",i]);this._trnMainService.TrnMainObj.TRNDATE=t&&t.AD}if(""!==this._trnMainService.TrnMainObj.BS_DATE&&null!==this._trnMainService.TrnMainObj.BS_DATE){const i=`${this._trnMainService.TrnMainObj.BS_DATE}`,t=G().find(this.dateMiti,["MITI",i]);this._trnMainService.TrnMainObj.TRN_DATE=t&&t.AD}if(""!==this._trnMainService.TrnMainObj.DeliveryMiti&&null!==this._trnMainService.TrnMainObj.DeliveryMiti){const i=`${this._trnMainService.TrnMainObj.DeliveryMiti}`,t=G().find(this.dateMiti,["MITI",i]);this._trnMainService.TrnMainObj.DeliveryDate=t&&t.AD}if(""!==this._trnMainService.TrnMainObj.ORDEXPMITI&&null!==this._trnMainService.TrnMainObj.ORDEXPMITI){const i=`${this._trnMainService.TrnMainObj.ORDEXPMITI}`,t=G().find(this.dateMiti,["MITI",i]);this._trnMainService.TrnMainObj.ORDEXPDATE=t&&t.AD}}convertTOBS(i){var t=m(82071),r=i.replace("-","/").replace("-","/"),a=t.ad2bs(r);return("1"==a.en.day||"2"==a.en.day||"3"==a.en.day||"4"==a.en.day||"5"==a.en.day||"6"==a.en.day||"7"==a.en.day||"8"==a.en.day||"9"==a.en.day?"0"+a.en.day:a.en.day)+"/"+("1"==a.en.month||"2"==a.en.month||"3"==a.en.month||"4"==a.en.month||"5"==a.en.month||"6"==a.en.month||"7"==a.en.month||"8"==a.en.month||"9"==a.en.month?"0"+a.en.month:a.en.month)+"/"+a.en.year}formatDate(i){return i.replace(/(\d{2})\/(\d{2})\/(\d{4})/,"$3-$2-$1")}changeEntryDate(i,t){i>this.currDate&&"AD"==t&&(this._trnMainService.TrnMainObj.TRNDATE=this.currDate,i=this.currDate),this.formatDate(i)>this.formatDate(this.currDateBS)&&"BS"==t&&(this._trnMainService.TrnMainObj.BSDATE=this.currDateBS,i=this.currDateBS);var g=m(82071);if("AD"==t){var f=i.replace("-","/").replace("-","/"),C=g.ad2bs(f);this._trnMainService.TrnMainObj.BSDATE=("1"==C.en.day||"2"==C.en.day||"3"==C.en.day||"4"==C.en.day||"5"==C.en.day||"6"==C.en.day||"7"==C.en.day||"8"==C.en.day||"9"==C.en.day?"0"+C.en.day:C.en.day)+"/"+("1"==C.en.month||"2"==C.en.month||"3"==C.en.month||"4"==C.en.month||"5"==C.en.month||"6"==C.en.month||"7"==C.en.month||"8"==C.en.month||"9"==C.en.month?"0"+C.en.month:C.en.month)+"/"+C.en.year}else if("BS"==t){var F=i.split("/");console.log("date arr",F),f=g.bs2ad(F[2]+"/"+F[1]+"/"+F[0]),this._trnMainService.TrnMainObj.TRNDATE=f.year+"-"+(1==f.month.toString().length?"0"+f.month:f.month)+"-"+(1==f.day.toString().length?"0"+f.day:f.day)}"asset-purchase-invoice"===this.activeurlpath&&this.masterService.getAssetDepreciationDoneMonths().subscribe(k=>{const Te=this._trnMainService.TrnMainObj.BSDATE.split("/")[1];for(const ge of k.result)if(ge.MONTHNO===Te){this._trnMainService.TrnMainObj.TRNDATE=this.currDate,this._trnMainService.TrnMainObj.BSDATE=this.currDateBS,this._alertService.info(`Depreciation cancellation is required to enter purchase invoice for this month(${ge.MONTHNAME.toLowerCase()})`);break}})}changeInvDate(i,t){i>this.currDate&&"AD"==t&&(this._trnMainService.TrnMainObj.TRN_DATE=this.currDate,i=this.currDate),this.formatDate(i)>this.formatDate(this.currDateBS)&&"BS"==t&&(this._trnMainService.TrnMainObj.BS_DATE=this.currDateBS,i=this.currDateBS);var g=m(82071);if("AD"==t){var f=i.replace("-","/").replace("-","/"),C=g.ad2bs(f);this._trnMainService.TrnMainObj.BS_DATE=("1"==C.en.day||"2"==C.en.day||"3"==C.en.day||"4"==C.en.day||"5"==C.en.day||"6"==C.en.day||"7"==C.en.day||"8"==C.en.day||"9"==C.en.day?"0"+C.en.day:C.en.day)+"/"+("1"==C.en.month||"2"==C.en.month||"3"==C.en.month||"4"==C.en.month||"5"==C.en.month||"6"==C.en.month||"7"==C.en.month||"8"==C.en.month||"9"==C.en.month?"0"+C.en.month:C.en.month)+"/"+C.en.year}else if("BS"==t){var F=i.split("/");f=g.bs2ad(F[2]+"/"+F[1]+"/"+F[0]),this._trnMainService.TrnMainObj.TRN_DATE=f.year+"-"+(1==f.month.toString().length?"0"+f.month:f.month)+"-"+(1==f.day.toString().length?"0"+f.day:f.day)}}changeExpiryDate(i,t){var r=m(82071);if("AD"==t){console.log("change to bs",i);var a=i.replace("-","/").replace("-","/"),g=r.ad2bs(a);this._trnMainService.TrnMainObj.ORDEXPMITI=("1"==g.en.day||"2"==g.en.day||"3"==g.en.day||"4"==g.en.day||"5"==g.en.day||"6"==g.en.day||"7"==g.en.day||"8"==g.en.day||"9"==g.en.day?"0"+g.en.day:g.en.day)+"/"+("1"==g.en.month||"2"==g.en.month||"3"==g.en.month||"4"==g.en.month||"5"==g.en.month||"6"==g.en.month||"7"==g.en.month||"8"==g.en.month||"9"==g.en.month?"0"+g.en.month:g.en.month)+"/"+g.en.year}else if("BS"==t){console.log(" change to AD",i);var f=i.split("/");a=r.bs2ad(f[2]+"/"+f[1]+"/"+f[0]),this._trnMainService.TrnMainObj.ORDEXPDATE=a.year+"-"+(1==a.month.toString().length?"0"+a.month:a.month)+"-"+(1==a.day.toString().length?"0"+a.day:a.day),console.log("changed to AD(expiry DATE)",this._trnMainService.TrnMainObj.ORDEXPDATE)}}dateValidation(i,t){if(i<this.currDate){if("DeliveryDate"==t)return this._alertService.warning("Delivery date shouldnot be entered in back date"),this._trnMainService.TrnMainObj.DeliveryDate=this.currDate,void this.changeDeliveryDate(this._trnMainService.TrnMainObj.DeliveryDate,"AD");if("OrderExpiryDate"==t)return this._alertService.warning("Expiry date shouldnot be entered in back date"),this._trnMainService.TrnMainObj.ORDEXPDATE=this.currDate,void this.changeExpiryDate(this._trnMainService.TrnMainObj.ORDEXPDATE,"AD")}}changeDeliveryDate(i,t,r){var a=m(82071);if("AD"==t){console.log("change to bs",i);var g=i.replace("-","/").replace("-","/"),f=a.ad2bs(g);this._trnMainService.TrnMainObj.DeliveryMiti=("1"==f.en.day||"2"==f.en.day||"3"==f.en.day||"4"==f.en.day||"5"==f.en.day||"6"==f.en.day||"7"==f.en.day||"8"==f.en.day||"9"==f.en.day?"0"+f.en.day:f.en.day)+"/"+("1"==f.en.month||"2"==f.en.month||"3"==f.en.month||"4"==f.en.month||"5"==f.en.month||"6"==f.en.month||"7"==f.en.month||"8"==f.en.month||"9"==f.en.month?"0"+f.en.month:f.en.month)+"/"+f.en.year,console.log("changed to bs(delivery DATE)",this._trnMainService.TrnMainObj.DeliveryMiti)}else if("BS"==t){console.log(" change to AD",i);var C=i.split("/");g=a.bs2ad(C[2]+"/"+C[1]+"/"+C[0]),this._trnMainService.TrnMainObj.DeliveryDate=g.year+"-"+(1==g.month.toString().length?"0"+g.month:g.month)+"-"+(1==g.day.toString().length?"0"+g.day:g.day),console.log("changed to AD(delivery DATE)",this._trnMainService.TrnMainObj.DeliveryDate)}}SupplierEnterCommand(i){this._trnMainService.customerEvent=!0,this.showPartyMasterPopup=!1,this.showInSupplierPopup=!0,this.showCustomerProfilePopup=!0,"salesorder"==this.activeurlpath?this.getCustomersList():(this.getSupplierList(),this.genericGridSupplier.show())}supplierFieldChange(){this._trnMainService.TrnMainObj.PARAC=null,this._trnMainService.TrnMainObj.TRNAC=null,this._trnMainService.TrnMainObj.BILLTOADD=null,this._trnMainService.TrnMainObj.AdditionalObj.TRNTYPE=null,this._trnMainService.TrnMainObj.TRNMODE=null,this._trnMainService.TrnMainObj.PARTY_ORG_TYPE=null,this._trnMainService.TrnMainObj.CREDITDAYS=0}onSupplierSelected(i){this._trnMainService.TrnMainObj.BILLTO=i.ACNAME,this._trnMainService.TrnMainObj.PARAC=i.ACID,this._trnMainService.TrnMainObj.BILLTOADD=i.ADDRESS,this._trnMainService.TrnMainObj.AdditionalObj.TRNTYPE=null==i.PSTYPE?null:i.PSTYPE.toLowerCase(),this._trnMainService.TrnMainObj.PARTY_ORG_TYPE=i.ORG_TYPE,this._trnMainService.TrnMainObj.CREDITDAYS=i.CRPERIOD,this._trnMainService.TrnMainObj.BILLTOTEL=i.VATNO,this._trnMainService.TrnMainObj.BILLTOMOB=i.PHONE,(this._trnMainService.TrnMainObj.VoucherType===O.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType===O.Km.GoodsReceived||this._trnMainService.TrnMainObj.VoucherType===O.Km.PurchaseOrder||this._trnMainService.TrnMainObj.VoucherType===O.Km.DebitNote)&&(this._trnMainService.TrnMainObj.VATBILL=i.SUPTYPE,null!=this._trnMainService.TrnMainObj.ProdList[0].MENUCODE&&this.onChangePanBill()),this._trnMainService.TrnMainObj.AdditionalObj.SelectedTermsAndCondition=i.TERMSANDCONDITIONS?JSON.parse(i.TERMSANDCONDITIONS):"","add-purchase-order"==this.activeurlpath&&this._trnMainService.TrnMainObj.AdditionalObj.SelectedTermsAndCondition&&(this._trnMainService.TrnMainObj.AdditionalObj.TermsAndConditionID=this._trnMainService.TrnMainObj.AdditionalObj?.SelectedTermsAndCondition?.find(t=>1==t.isDefault).ID),("purchase-import"==this.activeurlpath||"purchase-import-order"==this.activeurlpath)&&"CREDIT"==this._trnMainService.TrnMainObj.TRNMODE&&(this._trnMainService.TrnMainObj.TRNAC=i.ACID,this._trnMainService.TrnMainObj.TRNACName=i.ACNAME),this.masterService.masterGetmethod("/getPartyBalanceAmount?acid="+i.ACID).subscribe(t=>{"ok"==t.status&&(this._trnMainService.TrnMainObj.BALANCE=this._trnMainService.nullToZeroConverter(t.result))},t=>{}),document.getElementById("remarksid").focus()}shipNameEnterCommand(i){i.preventDefault(),document.getElementById("shipname").blur(),this.genericGridShipName.show()}supplierFieldDisabled(){return null!=this._trnMainService.TrnMainObj.ProdList&&this._trnMainService.TrnMainObj.ProdList.filter(i=>null!=i.MCODE).length>0&&("VIEW"==this._trnMainService.TrnMainObj.Mode||"credit"==this._trnMainService.TrnMainObj.TRNMODE)}onShipNameSelected(i){this._trnMainService.TrnMainObj.AdditionalObj.SHIPNAME=i.ACID,this._trnMainService.TrnMainObj.AdditionalObj.SHIPNAMEVIEW=i.ACNAME,this._trnMainService.TrnMainObj.DeliveryAddress=i.ADDRESS}changeinvalues(){console.log("change in value")}paymentTermsChange(){if(console.log("payment terms change",this._trnMainService.TrnMainObj.TRNMODE),this.flushCreditSelectedData(),this.disableOnCreditSelect=!1,"cash"==this._trnMainService.TrnMainObj.TRNMODE?(this.masterService.focusAnyControl("customerselectid"),this.masterService.userSetting.CASHINHAND_AC?(this._trnMainService.TrnMainObj.TRNAC=this.masterService.userSetting.CASHINHAND_AC,this._trnMainService.TrnMainObj.TRNACName="CASH IN HAND A/C"):(alert("'Default Cash' on database not found. Please Contact to Administrator for this!"),this._trnMainService.TrnMainObj.TRNACName="error...")):this._trnMainService.TrnMainObj.VoucherType===O.Km.Purchase&&"IMPORT_PURCHASE"==this._trnMainService.TrnMainObj.AdditionalObj.tag&&this._trnMainService.TrnMainObj.REFORDBILL&&"CREDIT"==this._trnMainService.TrnMainObj.TRNMODE||this._trnMainService.TrnMainObj.VoucherType===O.Km.Purchase&&"IMPORT_PURCHASE"!=this._trnMainService.TrnMainObj.AdditionalObj.tag&&this._trnMainService.TrnMainObj.REFORDBILL&&"credit"==this._trnMainService.TrnMainObj.TRNMODE&&1!=this.userSetting.ENABLE_GRN_IN_PI?(this._trnMainService.TrnMainObj.TRNAC=this._trnMainService.TrnMainObj.PARAC,this._trnMainService.TrnMainObj.TRNACName=this._trnMainService.TrnMainObj.BILLTO,this.disableOnCreditSelect=!0):(this._trnMainService.TrnMainObj.TRNAC="",this._trnMainService.TrnMainObj.TRNACName=""),this._trnMainService.TrnMainObj.VoucherType===O.Km.Purchase&&"IMPORT_PURCHASE"==this._trnMainService.TrnMainObj.AdditionalObj.tag||this._trnMainService.TrnMainObj.VoucherType===O.Km.PurchaseOrder&&"IMPORT_PURCHASE_ORDER"==this._trnMainService.TrnMainObj.AdditionalObj.tag){let i;i=this.paymentTermList.filter(t=>t.PAYMODE==this._trnMainService.TrnMainObj.TRNMODE),this.paymentTermAcid=i&&i[0].ACID}}flushCreditSelectedData(){0!=this.userSetting.IMPORTPOBILLMODE&&"purchase-import"==this.activeurlpath||0!=this.userSetting.PODELIVERYMODE&&this._trnMainService.TrnMainObj.VoucherType==O.Km.Purchase&&"purchase-import"!=this.activeurlpath||0!=this.userSetting.PODELIVERYMODE&&this._trnMainService.TrnMainObj.VoucherType==O.Km.GoodsReceived||(this._trnMainService.TrnMainObj.PARAC="",this._trnMainService.TrnMainObj.BILLTO="",this._trnMainService.TrnMainObj.BILLTOADD="",this._trnMainService.TrnMainObj.BILLTOTEL="",this._trnMainService.TrnMainObj.MEMBERNO="",this._trnMainService.TrnMainObj.RECEIVEBY="",this._trnMainService.TrnMainObj.TRNAC="",this._trnMainService.TrnMainObj.TRNACName="",this._trnMainService.TrnMainObj.MEMBERNAME="",this._trnMainService.TrnMainObj.SCHEMENAME="")}RefBillEnterCommand(i){this._trnMainService.customerEvent=!0,this._trnMainService.TrnMainObj.VoucherType===O.Km.DebitNote&&(i.preventDefault(),1==this.userSetting.REFBILLCOMPULSORINDNOTE&&(this.genericGridRefBill.show(),"invoiceNO"==i.target.id?this.gridPopupSettingsForRefBill=this.masterService.getGenericGridPopUpSettings("REFBILLOFPURCHASERETURN","",0):"suppBillNo"==i.target.id&&(this.gridPopupSettingsForRefBill=this.masterService.getGenericGridPopUpSettings("REFBILLOFPURCHASERETURN","",2))))}onRefBillSelected(i){this._trnMainService.TrnMainObj.VoucherType!=O.Km.DebitNote||0==i.POST?(console.log("ref bill selectedd in purchase",i),this.ReffBillObj=i,this._trnMainService.TrnMainObj.REFBILL=i.VCHRNO,this._trnMainService.TrnMainObj.PARAC=i.PARAC,this._trnMainService.TrnMainObj.BILLTO=i.BILLTO,this._trnMainService.TrnMainObj.TRNAC=i.TRNAC,this._trnMainService.TrnMainObj.BILLTOADD=i.BILLTOADD,this._trnMainService.TrnMainObj.TRNMODE=i.TRNMODE,this._trnMainService.TrnMainObj.DCRATE=i.DCRATE,this._trnMainService.TrnMainObj.TOTALFLATDISCOUNT=i.TOTALFLATDISCOUNT,this._trnMainService.TrnMainObj.BILLTOTEL=i.BILLTOTEL,this._trnMainService.TrnMainObj.REFORDBILL=i.REFBILL,this._trnMainService.TrnMainObj.COSTCENTER=i.COSTCENTER,this._trnMainService.TrnMainObj.INVOICETYPE=null!=i.INVOICETYPE?i.INVOICETYPE:"TRADING",this._trnMainService.TrnMainObj.VoucherType==O.Km.DebitNote&&(this._trnMainService.TrnMainObj.CHEQUENO=i.CHEQUENO,this._trnMainService.TrnMainObj.CHEQUEDATE=i.CHEQUEDATE,this._trnMainService.TrnMainObj.VATBILL=i.VATBILL,this._trnMainService.TrnMainObj.AdditionalObj.AFTERFLATDISCRATE=i.AFTERFLATDISCRATE,this._trnMainService.TrnMainObj.AdditionalObj.BEFOREFLATDISCRATE=i.BEFOREFLATDISCRATE,(i.AFTERFLATDISCRATE>0||i.BEFOREFLATDISCRATE>0)&&(this._trnMainService.TrnMainObj.DCRATE=i.AFTERFLATDISCRATE>0?i.AFTERFLATDISCRATE:i.BEFOREFLATDISCRATE)),this.masterService.getAccountNameForMaster(this._trnMainService.TrnMainObj.TRNAC).subscribe(t=>{let r=[];t&&"ok"===t.status&&t.result&&(r=t.result,this._trnMainService.TrnMainObj.TRNACName=r[0].ACNAME)}),16==this._trnMainService.TrnMainObj.VoucherType&&1==this.userSetting.REFBILLCOMPULSORINDNOTE&&(1==this._trnMainService.TrnMainObj.DOFULLRETURN?this._trnMainService.loadDataForPurchaseReturn(i.VCHRNO,i.DIVISION,i.PhiscalID):this.disableReturnModeInPartialDN=!0),"StockIssueApproved"==this.purchaseReturnType?(this._trnMainService.TrnMainObj.REFBILL=i.REFBILL,document.getElementById("poNoId").focus()):null!=document.getElementById("poNoId")&&(this._trnMainService.TrnMainObj.REFBILL=i.VCHRNO,document.getElementById("poNoId").focus())):this._alertService.info(`Voucher Approval for ${i.VCHRNO} is already done!. You are not authorized to reverse this voucher.`)}RefBillFieldDisabled(){return null!=this._trnMainService.TrnMainObj.ProdList&&this._trnMainService.TrnMainObj.ProdList.filter(i=>null!=i.MCODE).length>0}preventInput(i){return i.preventDefault(),!1}WarehouseEnterCommand(i){this.genericGridWarehouse.show()}onWarehouseSelected(i){this._trnMainService.TrnMainObj.MWAREHOUSE=i.NAME}getSupplierList(){this.gridPopupSettingsForSupplier={title:"Supplier",apiEndpoints:"/getAccountPagedListByPType/PA/V",defaultFilterIndex:0,useDefinefilterValue:this._trnMainService.TrnMainObj.BILLTO,columns:[{key:"ACNAME",title:"NAME",hidden:!1,noSearch:!1},{key:"ACCODE",title:"CODE",hidden:!1,noSearch:!1},{key:"ADDRESS",title:"ADDRESS",hidden:!1,noSearch:!1},{key:"VATNO",title:"VATNO",hidden:!1,noSearch:!1}]}}AccountEnterCommand(){console.log("reachdown"),this.showPartyMasterPopup=!1,this.showInSupplierPopup=!1;var i="";(this._trnMainService.TrnMainObj.VoucherType==O.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType==O.Km.DebitNote||this._trnMainService.TrnMainObj.VoucherType==O.Km.GoodsReceived)&&("cash"==this._trnMainService.TrnMainObj.TRNMODE?i="Bank Deposit Voucher":"credit"==this._trnMainService.TrnMainObj.TRNMODE?(i="Supplier",this.showPartyMasterPopup=!0):i="BankList"),this.genericGridAccountSetting={title:"Accounts",apiEndpoints:`/getAccountPagedListByMapId/Master/${i}/`,defaultFilterIndex:1,columns:[{key:"ACCODE",title:"AC CODE",hidden:!1,noSearch:!1},{key:"ACNAME",title:"A/C NAME",hidden:!1,noSearch:!1}]},this.genericGridAccount.show()}onAccountSelect(i){try{this.flushCreditSelectedData(),this._trnMainService.TrnMainObj.TRNAC=i.ACID,this._trnMainService.TrnMainObj.TRNACName=i.ACNAME,"credit"==this._trnMainService.TrnMainObj.TRNMODE&&(this.isAddressReadOnly=!0,this.isVatNoReadOnly=!0,this._trnMainService.TrnMainObj.BILLTO=i.ACNAME,this._trnMainService.TrnMainObj.BILLTOTEL=i.VATNO,this._trnMainService.TrnMainObj.BILLTOADD=i.ADDRESS,this._trnMainService.TrnMainObj.PARAC=i.ACID,this._trnMainService.TrnMainObj.BILLTOMOB=i.PHONE),(this._trnMainService.TrnMainObj.VoucherType===O.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType===O.Km.GoodsReceived||this._trnMainService.TrnMainObj.VoucherType===O.Km.PurchaseOrder||this._trnMainService.TrnMainObj.VoucherType===O.Km.DebitNote)&&(this._trnMainService.TrnMainObj.VATBILL=i.SUPTYPE,null!=this._trnMainService.TrnMainObj.ProdList[0]?.MENUCODE&&this.onChangePanBill())}catch(t){alert(t)}1==this.userSetting.ReceiptBasedGRN&&this._trnMainService.TrnMainObj.VoucherType==O.Km.GoodsReceived?document.getElementById("poNoId").focus():document.getElementById("warehouseId").focus()}focusToWarehouse(){(this._trnMainService.TrnMainObj.VoucherType==O.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType==O.Km.DebitNote)&&document.getElementById("warehouseId").focus()}focusToSupplier(){(this._trnMainService.TrnMainObj.VoucherType==O.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType==O.Km.DebitNote)&&("credit"!=this._trnMainService.TrnMainObj.TRNMODE?document.getElementById("supplierid").focus():document.getElementById("remarksid").focus())}showWholesaleRateOption(){return 1==this.userSetting.LoadWholesaleRateinSalesOrder&&this._trnMainService.TrnMainObj.VoucherType==O.Km.SalesOrder}loadCompanyInfo(){1!=this._trnMainService.inputCode&&this.masterService.loadCompany().subscribe(i=>{this._trnMainService.TrnMainObj.AdditionalObj.BILLFORMATS=i.BILLFORMATS,this._trnMainService.TrnMainObj.AdditionalObj.BILLUNITS=i.BILLUNITS})}openQuickPartyMasterPopup(){"PI"==this._trnMainService.TrnMainObj.VoucherPrefix&&1==this.showPartyMasterPopup&&(this.masterService.isSalesPage=!1,this.CreateQuickParty.show(),this.genericGridAccount.hide())}openQuickPartyInSupplier(){"PI"==this._trnMainService.TrnMainObj.VoucherPrefix&&1==this.showInSupplierPopup&&(this.masterService.isSalesPage=!1,this.CreateQuickParty.show(),this.genericGridSupplier.hide())}openQuickCusProfilePopup(){20==this._trnMainService.TrnMainObj.VoucherType&&(this.CreateCustomerProfile.show(),this.genericGridCustomer.hide(),this.showCustomerProfilePopup=!1)}onSaveCustomerProfile(i){console.log("on save customer",i),this._trnMainService.TrnMainObj.BILLTO=i.name,this._trnMainService.TrnMainObj.BILLTOADD=i.address,this._trnMainService.TrnMainObj.BILLTOTEL=i.pan,this._trnMainService.TrnMainObj.BILLTOMOB=i.mobNo,document.getElementById("remarksid").focus(),this.masterService.getMemershipFromMemberNo(i.memID).subscribe(t=>{this._trnMainService.TrnMainObj.MEMBERNO=t[0].MEMID,this._trnMainService.TrnMainObj.MEMBERNAME=t[0].FNAME,this._trnMainService.TrnMainObj.SCHEMENAME=t[0].SCHEMEID,"B2B"==this.masterService.userSetting.CompanyType&&(this._trnMainService.TrnMainObj.PARAC=t[0].ACCOUNT)})}onSavePartyMaster(i){(1==this.showPartyMasterPopup||"credit"==this._trnMainService.TrnMainObj.TRNMODE)&&(this._trnMainService.TrnMainObj.TRNACName=i.ACNAME,this._trnMainService.TrnMainObj.TRNAC=i.ACID,this._trnMainService.TrnMainObj.BILLTO=i.ACNAME,this._trnMainService.TrnMainObj.BILLTOADD=i.ADDRESS,this._trnMainService.TrnMainObj.BILLTOTEL=i.VATNO,setTimeout(()=>{this.masterService.focusAnyControl("warehouseId")},500)),1==this.showInSupplierPopup&&("purchase-import"==this.activeurlpath&&(this._trnMainService.TrnMainObj.PARAC=i.ACID),this._trnMainService.TrnMainObj.BILLTO=i.ACNAME,this._trnMainService.TrnMainObj.BILLTOADD=i.ADDRESS,this._trnMainService.TrnMainObj.BILLTOTEL=i.VATNO)}focusToRemarks(){this.masterService.focusAnyControl("remarksid")}GrnNoEnter(){1==this.userSetting.EnableGRNInPIForCargo?0!=this.userSetting.ENABLE_GRN_IN_PI&&3==this._trnMainService.TrnMainObj.VoucherType&&(this.genericGridGRNSetting={title:"Good Received Note",apiEndpoints:"/getGRNVoucherListFromCargo",defaultFilterIndex:0,columns:[{key:"VCHRNO",title:"GRN Number",hidden:!1,noSearch:!1},{key:"TRNDATE",title:"Date",hidden:!1,noSearch:!1},{key:"BOOKINGID",title:"Booking ID",hidden:!1,noSearch:!1},{key:"SUPPLIER_NAME",title:"Supplier",hidden:!1,noSearch:!1}]}):0!=this.userSetting.ENABLE_GRN_IN_PI&&3==this._trnMainService.TrnMainObj.VoucherType&&(this.genericGridGRNSetting={title:"Good Received Note",apiEndpoints:"/getGRNPagedList/GR",defaultFilterIndex:0,columns:[{key:"GRNNUMBER",title:"GRN Number",hidden:!1,noSearch:!1},{key:"DATE",title:"Date",hidden:!1,noSearch:!1},{key:"SUPPLIERNAME",title:"Supplier Name",hidden:!1,noSearch:!1}]}),this.genericGridGRN.show()}PurchaseOrderEnter(){if(console.log("usersetting",this.userSetting.PODELIVERYMODE,"vouchertype",this._trnMainService.TrnMainObj.VoucherType),1!=this.userSetting.ReceiptBasedGRN||this._trnMainService.TrnMainObj.TRNAC){if(0!=this.userSetting.PODELIVERYMODE||0!=this.userSetting.ENABLE_QUOTATTION_INSO){let i;this.genericGridPurchaseOrderSetting=20==this._trnMainService.TrnMainObj.VoucherType?{title:"Quotation",apiEndpoints:`/getPurchaseOrderPagedList/${i}/QT`,defaultFilterIndex:2,columns:[{key:"PONUMBER",title:"Quotation No.",hidden:!1,noSearch:!1},{key:"DATE",title:"Date",hidden:!1,noSearch:!1},{key:"SUPPLIERNAME",title:"Customer Name",hidden:!1,noSearch:!1}]}:{title:"Purchase Order",apiEndpoints:1==this.userSetting.ReceiptBasedGRN?`/getPOPagedListInGRN/${this._trnMainService.TrnMainObj.TRNAC}`:`/getPurchaseOrderPagedList/${i}/PO`,selectAllApiEndpoint:1==this.userSetting.ReceiptBasedGRN?`/getAllPOListInGRNSupplierWise?acid=${this._trnMainService.TrnMainObj.TRNAC}`:"",defaultFilterIndex:0,columns:[{key:1==this.userSetting.ReceiptBasedGRN?"VCHRNO":"PONUMBER",title:"PO Number",hidden:!1,noSearch:!1},{key:1==this.userSetting.ReceiptBasedGRN?"TRNDATE":"DATE",title:"Date",hidden:!1,noSearch:!1},{key:1==this.userSetting.ReceiptBasedGRN?"ACNAME":"SUPPLIERNAME",title:"Supplier Name",hidden:!1,noSearch:!1}]},console.log(this.genericGridPurchaseOrder),this.genericGridPurchaseOrder.map(t=>{console.log(t),console.log(t instanceof n.Zl),console.log(t instanceof w),(t instanceof n.Zl&&!this.userSetting.IsBBSM||t instanceof w&&this.userSetting.IsBBSM)&&t.show()})}}else this._alertService.info("Please select account first!")}onPurchaseOrderSelect(i){i&&(this._trnMainService.TrnMainObj.REFORDBILL=i.PONUMBER,this._trnMainService.TrnMainObj.AdditionalObj.INVOICETYPE="FROMPO",this._trnMainService.TrnMainObj.TRNACName=i.SUPPLIERNAME,this._trnMainService.TrnMainObj.BILLTO=i.SUPPLIERNAME,this._trnMainService.TrnMainObj.BILLTOADD=i.ADDRESS,this._trnMainService.TrnMainObj.BILLTOTEL=i.VATNO,this._trnMainService.TrnMainObj.VATBILL=i.VATBILL,this._trnMainService.TrnMainObj.TRNMODE="credit",this._trnMainService.disableSupplierInfo=!0,this.disableOnCreditSelect=!0,this._trnMainService.disablePaymentTerms=!0,this._trnMainService.TrnMainObj.ProdList=[],this._trnMainService.addRow(),this._trnMainService.TrnMainObj.TOTALSQTY=0,this._trnMainService.TrnMainObj.GROSSAMNT=0,this._trnMainService.TrnMainObj.TAXABLE=0,this._trnMainService.TrnMainObj.NONTAXABLE=0,this._trnMainService.TrnMainObj.VATAMNT=0,this._trnMainService.TrnMainObj.NETWITHOUTROUNDOFF=0,this._trnMainService.TrnMainObj.INVOICETYPE="TRADING",((this._trnMainService.TrnMainObj.VoucherType===O.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType===O.Km.GoodsReceived)&&0!==this.userSetting.PODELIVERYMODE||this._trnMainService.TrnMainObj.VoucherType===O.Km.SalesOrder)&&(this._trnMainService.TrnMainObj.PARAC=i.ACID,this._trnMainService.TrnMainObj.TRNAC=i.ACID),this._trnMainService.TrnMainObj.VoucherType===O.Km.SalesOrder&&(this._trnMainService.TrnMainObj.SALESMAN=i.SALESMAN,this._trnMainService.TrnMainObj.SALESMANID=i.SALESMANID,this._trnMainService.disableCustomerInfo=!0),this._trnMainService.TrnMainObj.VoucherType===O.Km.Purchase&&1===this._trnMainService.TrnMainObj.DOFULLRETURN&&this._trnMainService.loadDataForPurchaseFromPOORDER(i.PONUMBER,i.DIVISION,i.PHISCALID,"POINPI"),this._trnMainService.TrnMainObj.VoucherType===O.Km.GoodsReceived&&1===this._trnMainService.TrnMainObj.DOFULLRETURN&&this._trnMainService.loadDataForGRNFromPOORDER(i.PONUMBER,i.DIVISION,i.PHISCALID,"POINPI"),this._trnMainService.TrnMainObj.VoucherType===O.Km.SalesOrder&&1===this._trnMainService.TrnMainObj.DOFULLRETURN&&this._trnMainService.loadDataForSalesOrderFromQuotation(i.PONUMBER,i.DIVISION,i.PHISCALID,""),20!=this._trnMainService.TrnMainObj.VoucherType&&1==this._trnMainService.DOFULLRETURN&&(this._trnMainService.disableRateOnPOselect=!0,this._trnMainService.disableItemSelectOnPOselect=!0),this._trnMainService.TrnMainObj.VoucherType===O.Km.SalesOrder&&0!=this.userSetting.enableCostCenter?setTimeout(()=>{document.getElementById("CCenter").focus()}):setTimeout(()=>{document.getElementById("remarksid").focus()},500),null!=this._trnMainService.TrnMainObj.ProdList[0].MENUCODE&&this._trnMainService.ReCalculateBillWithNormal())}onImportChalanClick(i){let t="";i.forEach(r=>{t+=`${r},`}),t=t.substring(0,t.length-1),this.fileUploadPopupSettings=Object.assign(new Z.s,{title:"GRN Upload",uploadEndpoints:`/importFileForGRN?voucherList=${t}`,sampleFileUrl:"/downloadSampleExcelforMasterMigration?importName=Goods Received Note",allowMultiple:!1,acceptFormat:".xlsx",vchrlist:i,voucherUpload:!0,filename:"GRN Upload Sample"}),this.fileUploadPopup.show()}onfileUpload(i){console.log("data",i),"ok"==i.status&&(this._trnMainService.TrnMainObj.ProdList=[],this._trnMainService.TrnMainObj.ProdList=i.result,this._trnMainService.TrnMainObj.ProdList.forEach(t=>{t.RATE=t.ALTRATE}),this._trnMainService.ReCalculateBillWithNormal())}PurchaseOrderDelete(i){null!=this._trnMainService.TrnMainObj.REFORDBILL&&(this._trnMainService.TrnMainObj.REFORDBILL=null,this._trnMainService.TrnMainObj.AdditionalObj.INVOICETYPE=null,this._trnMainService.TrnMainObj.TRNACName=null,this._trnMainService.TrnMainObj.BILLTO=null,this._trnMainService.TrnMainObj.BILLTOADD=null,this._trnMainService.TrnMainObj.BILLTOTEL=null,this._trnMainService.TrnMainObj.FCurrency=null,this._trnMainService.TrnMainObj.EXRATE=null,this._trnMainService.TrnMainObj.TRNMODE="credit",this._trnMainService.TrnMainObj.TRNAC=null,this._trnMainService.TrnMainObj.PARAC=null,this._trnMainService.TrnMainObj.ProdList=[],this._trnMainService.addRow(),this._trnMainService.TrnMainObj.TOTALSQTY=0,this._trnMainService.TrnMainObj.GROSSAMNT=0,this._trnMainService.TrnMainObj.TAXABLE=0,this._trnMainService.TrnMainObj.NONTAXABLE=0,this._trnMainService.TrnMainObj.VATAMNT=0,this._trnMainService.TrnMainObj.NETWITHOUTROUNDOFF=0,this._trnMainService.disableSupplierInfo=!1,this._trnMainService.disableCustomerInfo=!1,this.disableOnCreditSelect=!1,this._trnMainService.TrnMainObj.VoucherType==O.Km.SalesOrder&&(this._trnMainService.TrnMainObj.TRNMODE=null,this._trnMainService.TrnMainObj.DeliveryDate=null,this._trnMainService.TrnMainObj.DeliveryMiti=null,this._trnMainService.TrnMainObj.ORDEXPDATE=null,this._trnMainService.TrnMainObj.ORDEXPMITI=null))}ImportPurchaseOrderEnter(i){if(0!==this.userSetting.IMPORTPOBILLMODE){let t;this.genericGridImportPurchaseOrderSetting={title:"Import Purchase Order",apiEndpoints:`/getImportPurchaseOrderPagedList/${t}/PO`,defaultFilterIndex:0,columns:[{key:"PONUMBER",title:"Import PO Number",hidden:!1,noSearch:!1},{key:"DATE",title:"Date",hidden:!1,noSearch:!1},{key:"SUPPLIERNAME",title:"Supplier Name",hidden:!1,noSearch:!1}]},this.genericGridImportPurchaseOrder.show()}}onImportPurchaseOrderSelect(i){i&&(this._trnMainService.TrnMainObj.REFORDBILL=i.PONUMBER,this._trnMainService.TrnMainObj.AdditionalObj.INVOICETYPE="FROMIMPORTPO",this._trnMainService.TrnMainObj.TRNACName="",this._trnMainService.TrnMainObj.BILLTO=i.SUPPLIERNAME,this._trnMainService.TrnMainObj.BILLTOADD=i.ADDRESS,this._trnMainService.TrnMainObj.BILLTOTEL=i.VATNO,this._trnMainService.TrnMainObj.FCurrency=i.FCurrency,this._trnMainService.TrnMainObj.EXRATE=i.EXRATE,this._trnMainService.TrnMainObj.TRNAC="",this._trnMainService.TrnMainObj.PARAC=i.ACID,this._trnMainService.TrnMainObj.ProdList=[],this._trnMainService.addRow(),this._trnMainService.disableSupplierInfo=!0,this._trnMainService.TrnMainObj.TOTALSQTY=0,this._trnMainService.TrnMainObj.GROSSAMNT=0,this._trnMainService.TrnMainObj.TAXABLE=0,this._trnMainService.TrnMainObj.NONTAXABLE=0,this._trnMainService.TrnMainObj.VATAMNT=0,this._trnMainService.TrnMainObj.NETWITHOUTROUNDOFF=0,this._trnMainService.purchaseOrderQty=null,this._trnMainService.produstWiseOrderUnit="",this._trnMainService.purchaseOrderRate=null,this._trnMainService.TrnMainObj.VoucherType===O.Km.Purchase&&"IMPORT_PURCHASE"===this._trnMainService.TrnMainObj.AdditionalObj.tag&&1===this._trnMainService.TrnMainObj.DOFULLRETURN&&(this._trnMainService.loadDataForImportPurchaseFromIMPORDER(i.PONUMBER,i.DIVISION,i.PhiscalID,"POINPI"),setTimeout(()=>{document.getElementById("paymentTerms").focus()},500)),this._trnMainService.disableRateOnPOselect=!0,setTimeout(()=>{document.getElementById("paymentTerms").focus()},100))}ImportPOdelete(i){if(null!=this._trnMainService.TrnMainObj.REFORDBILL)return this._trnMainService.TrnMainObj.REFORDBILL=null,this._trnMainService.TrnMainObj.AdditionalObj.INVOICETYPE=null,this._trnMainService.TrnMainObj.TRNACName=null,this._trnMainService.TrnMainObj.BILLTO=null,this._trnMainService.TrnMainObj.BILLTOADD=null,this._trnMainService.TrnMainObj.BILLTOTEL=null,this._trnMainService.TrnMainObj.FCurrency=null,this._trnMainService.TrnMainObj.EXRATE=null,this._trnMainService.TrnMainObj.TRNMODE=null,this._trnMainService.TrnMainObj.TRNAC=null,this._trnMainService.TrnMainObj.PARAC=null,this._trnMainService.TrnMainObj.ProdList=[],this._trnMainService.addRow(),this._trnMainService.TrnMainObj.TOTALSQTY=0,this._trnMainService.TrnMainObj.GROSSAMNT=0,this._trnMainService.TrnMainObj.TAXABLE=0,this._trnMainService.TrnMainObj.NONTAXABLE=0,this._trnMainService.TrnMainObj.VATAMNT=0,this._trnMainService.TrnMainObj.NETWITHOUTROUNDOFF=0,this._trnMainService.disableSupplierInfo=!1,void(this._trnMainService.disableCustomerInfo=!1)}onGRNSelect(i){this._loadingService.show("Loading details, please wait..."),1==this.userSetting.EnableGRNInPIForCargo&&1==this.userSetting.ENABLE_GRN_IN_PI?this.onGrnSelectForCargo(i):this.onGRNSelectForNonCargo(i)}onGrnSelectForCargo(i){this.masterService.LoadTransactionForCargo(i.VCHRNO).subscribe(t=>{if("ok"==t.status){this._loadingService.hide();const r=m(4542);this._trnMainService.TrnMainObj.Mode="NEW",this._trnMainService.TrnMainObj.guid=r(),this._trnMainService.TrnMainObj.REFORDBILL=t.result[0].VCHRNO,this._trnMainService.TrnMainObj.VoucherType=O.Km.Purchase,this._trnMainService.TrnMainObj.VoucherPrefix="PI",this._trnMainService.TrnMainObj.TRNMODE=t.result.TRNMODE,this._trnMainService.TrnMainObj.CNDN_MODE=0,this._trnMainService.TrnMainObj.ProdList=t.result,this._trnMainService.TrnMainObj.AdditionalObj.tag="LOCAL_PURCHASE",console.log("Trn Main",this._trnMainService.TrnMainObj.ProdList,this._trnMainService.TrnMainObj.REFORDBILL,t.result[0].BOOKINGID,this._trnMainService.TrnMainObj.REFBILL,this._trnMainService.TrnMainObj.COSTCENTER,this._trnMainService.nullToZeroConverter(i.BILLDATE)),this._trnMainService.getVoucherNumber(),this._trnMainService.TrnMainObj.TRN_DATE=0!=this._trnMainService.nullToZeroConverter(i.BILLDATE)?i.BILLDATE:i.TRNDATE,this.getNepaliDate(),this._trnMainService.TrnMainObj.REFBILL=0!=this._trnMainService.nullToZeroConverter(i.BILLNO)?i.BILLNO:"",this.masterService.getAllCostCenter().subscribe(g=>{if(g){this.costlists=g;let f=this.costlists.filter(C=>C.COSTCENTERNAME==t.result[0].BOOKINGID);f&&(this._trnMainService.TrnMainObj.COSTCENTER=f[0].CCID)}},g=>{this.costlists=[]}),this._trnMainService.TrnMainObj.GROSSAMNT=this._trnMainService.TrnMainObj.VoucherType==O.Km.Purchase&&1==t.result.VATBILL?t.result.NONTAXABLE:t.result.TAXABLE,this._trnMainService.TrnMainObj.TOTALSQTY=0,this._trnMainService.TrnMainObj.ProdList.forEach(g=>{this._trnMainService.TrnMainObj.TOTALSQTY+=g.Quantity});for(let g in this._trnMainService.TrnMainObj.ProdList)this._trnMainService.TrnMainObj.ProdList[g].MFGDATE=null==this._trnMainService.TrnMainObj.ProdList[g].MFGDATE?"":0==this.userSetting.enableDayWiseMfgEXPDate?this._trnMainService.TrnMainObj.ProdList[g].MFGDATE.toString().substring(0,7):this._trnMainService.TrnMainObj.ProdList[g].MFGDATE.toString().substring(0,10),this._trnMainService.TrnMainObj.ProdList[g].EXPDATE=null==this._trnMainService.TrnMainObj.ProdList[g].EXPDATE?"":0==this.userSetting.enableDayWiseMfgEXPDate?this._trnMainService.TrnMainObj.ProdList[g].EXPDATE.toString().substring(0,7):this._trnMainService.TrnMainObj.ProdList[g].EXPDATE.toString().substring(0,10);this._trnMainService.ReCalculateBillWithNormal(),this._trnMainService.disableSupplierInfo=!0,this._trnMainService.disableCostCenterForCargo=!0;let a=this.masterService.userProfile.roleRights.find(g=>"ALLOWRATECHANGEINPI"==g.right);(0==this.userSetting.RATECHANGE_IN_POBASEPI||1==this.userSetting.RATECHANGE_IN_POBASEPI&&0==a.value)&&(this._trnMainService.disableRateOnGRNload=!0)}},t=>{this._loadingService.hide(),this._alertService.error(t)},()=>{this._loadingService.hide()})}onGRNSelectForNonCargo(i){this.masterService.LoadTransaction(i.GRNNUMBER,i.DIVISION,i.PhiscalID).subscribe(t=>{if("ok"==t.status){this._loadingService.hide();const r=m(4542);this._trnMainService.TrnMainObj=t.result,this._trnMainService.TrnMainObj.Mode="NEW",this._trnMainService.TrnMainObj.guid=r(),this._trnMainService.TrnMainObj.REFORDBILL=i.GRNNUMBER,this._trnMainService.TrnMainObj.VoucherType=O.Km.Purchase,this._trnMainService.TrnMainObj.VoucherPrefix="PI",this._trnMainService.TrnMainObj.TRNMODE=t.result.TRNMODE,this._trnMainService.TrnMainObj.CNDN_MODE=0,this._trnMainService.TrnMainObj.AdditionalObj.tag="LOCAL_PURCHASE",this._trnMainService.TrnMainObj.INVOICETYPE="TRADING",this._trnMainService.TrnMainObj.TRN_DATE=null==t.result.TRN_DATE?"":t.result.TRN_DATE.toString().substring(0,10),this.masterService.getCurrentDate().subscribe(g=>{this._trnMainService.TrnMainObj.TRNDATE=g.Date.substring(0,10),this._trnMainService.TrnMainObj.BSDATE=this._trnMainService.getBsDate(this._trnMainService.TrnMainObj.TRNDATE)}),this._trnMainService.getVoucherNumber(),this._trnMainService.TrnMainObj.GROSSAMNT=this._trnMainService.TrnMainObj.VoucherType==O.Km.Purchase&&1==t.result.VATBILL?t.result.NONTAXABLE:t.result.TAXABLE,this._trnMainService.TrnMainObj.TOTALSQTY=0,this._trnMainService.TrnMainObj.ProdList.forEach(g=>{this._trnMainService.TrnMainObj.TOTALSQTY+=g.Quantity});for(let g in this._trnMainService.TrnMainObj.ProdList)this._trnMainService.TrnMainObj.ProdList[g].MFGDATE=null==this._trnMainService.TrnMainObj.ProdList[g].MFGDATE?"":0==this.userSetting.enableDayWiseMfgEXPDate?this._trnMainService.TrnMainObj.ProdList[g].MFGDATE.toString().substring(0,7):this._trnMainService.TrnMainObj.ProdList[g].MFGDATE.toString().substring(0,10),this._trnMainService.TrnMainObj.ProdList[g].EXPDATE=null==this._trnMainService.TrnMainObj.ProdList[g].EXPDATE?"":0==this.userSetting.enableDayWiseMfgEXPDate?this._trnMainService.TrnMainObj.ProdList[g].EXPDATE.toString().substring(0,7):this._trnMainService.TrnMainObj.ProdList[g].EXPDATE.toString().substring(0,10);this._trnMainService.ReCalculateBillWithNormal(),this._trnMainService.disableOnGRNload=!0,this._trnMainService.disableSupplierInfo=!0;let a=this.masterService.userProfile.roleRights.find(g=>"ALLOWRATECHANGEINPI"==g.right);(0==this.userSetting.RATECHANGE_IN_POBASEPI||1==this.userSetting.RATECHANGE_IN_POBASEPI&&0==a.value)&&(this._trnMainService.disableRateOnGRNload=!0),this._trnMainService.addRowForAdditionalProdList()}},t=>{this._loadingService.hide(),this._alertService.error(t._body)},()=>{this._loadingService.hide()})}OKLoadPurchaseOrder(i){for(let t in i)this._trnMainService.TrnMainObj.ProdList[t].MENUCODE=this._trnMainService.TrnMainObj.PODetailList[t].MENUCODE,this._trnMainService.TrnMainObj.ProdList[t].MCODE=this._trnMainService.TrnMainObj.PODetailList[t].MCODE,this._trnMainService.TrnMainObj.ProdList[t].ITEMDESC=this._trnMainService.TrnMainObj.PODetailList[t].DESCA,this._trnMainService.TrnMainObj.ProdList[t].ALTUNIT=this._trnMainService.TrnMainObj.PODetailList[t].UNIT,this._trnMainService.TrnMainObj.ProdList[t].BASEUNIT=this._trnMainService.TrnMainObj.PODetailList[t].UNIT,this._trnMainService.TrnMainObj.ProdList[t].ALTERNATEQUANTIY=this._trnMainService.TrnMainObj.PODetailList[t].DELIVERQTY,this._trnMainService.TrnMainObj.ProdList[t].ALTRATE=this._trnMainService.TrnMainObj.PODetailList[t].DELIVERRATE,this._trnMainService.TrnMainObj.ProdList[t].RATE=this._trnMainService.TrnMainObj.PODetailList[t].DELIVERRATE,this._trnMainService.TrnMainObj.ProdList[t].AMOUNT=this._trnMainService.TrnMainObj.PODetailList[t].AMOUNT,this._trnMainService.TrnMainObj.ProdList[t].NETAMOUNT=this._trnMainService.TrnMainObj.PODetailList[t].AMOUNT,this._trnMainService.TrnMainObj.ProdList[t].NETAMNT=this._trnMainService.TrnMainObj.PODetailList[t].AMOUNT,this._trnMainService.TrnMainObj.ProdList[t].MFGDATE=this._trnMainService.TrnMainObj.PODetailList[t].MFGDATE,this._trnMainService.TrnMainObj.ProdList[t].EXPDATE=this._trnMainService.TrnMainObj.PODetailList[t].EXPIRYDATE,this._trnMainService.TrnMainObj.ProdList[t].INDDISCOUNTRATE=this._trnMainService.TrnMainObj.PODetailList[t].DISCOUNT_RATE,this._trnMainService.TrnMainObj.ProdList[t].INDDISCOUNT=this._trnMainService.TrnMainObj.PODetailList[t].DISCOUNT_AMOUNT,this._trnMainService.TrnMainObj.ProdList[t].CRATE=this._trnMainService.TrnMainObj.PODetailList[t].NET_RATE,this._trnMainService.TrnMainObj.ProdList[t].SELLRATEBEFORETAX=this._trnMainService.TrnMainObj.PODetailList[t].SELLRATEBEFORETAX,this._trnMainService.TrnMainObj.ProdList[t].W_SELLRATEBEFORETAX=this._trnMainService.TrnMainObj.PODetailList[t].W_SELLRATEBEFORETAX,this._trnMainService.TrnMainObj.ProdList[t].isPurchaseOrderItem=!0,this._trnMainService.getAllUnitsOfItem(t),this._trnMainService.calculateNetRATE(t),this._trnMainService.addRow();this._trnMainService.ReCalculateBillWithNormal(),this._trnMainService.TrnMainObj.ProdList.splice(-1),this.LoadPurchaseOrder.hide()}showPopup(){this._trnMainService.TrnMainObj.AdditionalObj.PONO&&this.LoadPurchaseOrder.show()}onCurrenyChange(i){let t=this.masterService.Currencies.filter(r=>r.CURNAME==i)[0];console.log("SELECTEDCURRENCY",t),this._trnMainService.TrnMainObj.EXRATE=t.EXRATE}onImportAdvanceEnterClicked(){null==this.paymentTermAcid||void 0===this.paymentTermAcid||""===this.paymentTermAcid?(this.getSupplierList(),this.genericGridSupplier.show()):(this.gridPopupSettingsForimportAdvanceAc={title:"Import Advance A/C",apiEndpoints:`/getImportAdvanceAcPagedList/${this.paymentTermAcid}`,defaultFilterIndex:0,columns:[{key:"ACNAME",title:"A/C Name",hidden:!1,noSearch:!1},{key:"ACID",title:"ACID",hidden:!0,noSearch:!0}]},this.importAdvanceAcGrid.show())}onImportAdvanceItemClick(i){console.log("r1",this._trnMainService.TrnMainObj.TRNACName),this._trnMainService.TrnMainObj.TRNAC=i.ACID,this._trnMainService.TrnMainObj.TRNACName=i.ACNAME,console.log("acname",this._trnMainService.TrnMainObj.TRNACName),this.masterService.focusAnyControl(""==this._trnMainService.TrnMainObj.REFORDBILL?"remarksid":"currency")}updown(i){"Insert"===i.code&&(i.preventDefault(),1==this.showPartyMasterPopup&&this.openQuickPartyMasterPopup(),1==this.showInSupplierPopup&&this.openQuickPartyInSupplier(),1==this.showCustomerProfilePopup&&this.openQuickCusProfilePopup()),"Escape"==i.code&&(i.preventDefault(),1==this._trnMainService.showNegativeBillingAuthForMain&&this.closeModal())}getCustomersList(){this.gridPopupSettingsForCustomer={title:"Customers",apiEndpoints:"/getAccountPagedListByPType/PA/C",defaultFilterIndex:this.userSetting.FilterIndexForCustomer,columns:[{key:"ACNAME",title:"NAME",hidden:!1,noSearch:!1},{key:"ACCODE",title:"CODE",hidden:!1,noSearch:!1},{key:"ADDRESS",title:"ADDRESS",hidden:!1,noSearch:!1},{key:"EMAIL",title:"EMAIL",hidden:!1,noSearch:!1}]},this.genericGridCustomer.show()}GetShippingAddress(i){this.masterService.getAllShippingList(i).subscribe(t=>{t&&(this._trnMainService.shippingAddress=t.result,this._trnMainService.TrnMainObj.ShippingLocation=this._trnMainService.shippingAddress.find(r=>1==r.ISDEFAULT)?.NAME)},t=>{this._trnMainService.shippingAddress=[]})}shippinglocationVoucher(i){console.log("event",i),this._trnMainService.TrnMainObj.ShippingLocation=i.target.value}onCustomerSelected(i){if(1==this.userSetting.EnableContractPrice&&(this._trnMainService.TrnMainObj.VoucherType==O.Km.TaxInvoice||this._trnMainService.TrnMainObj.VoucherType==O.Km.PerformaSalesInvoice||this._trnMainService.TrnMainObj.VoucherType==O.Km.SalesOrder)&&this._trnMainService.TrnMainObj.PARAC&&this._trnMainService.TrnMainObj.ProdList.find(t=>t.MCODE)&&i.ACID!=this._trnMainService.TrnMainObj.PARAC&&i.CUSTID!=this._trnMainService.TrnMainObj.PARAC){if(!confirm("Are you sure you want to change customer? This will empty product selection grid."))return;this._trnMainService.TrnMainObj.ProdList=[],this._trnMainService.addRow()}if(this.GetShippingAddress(i.ACID),this._trnMainService.TrnMainObj.MEMBERNO=i.CUSTID,this._trnMainService.TrnMainObj.MEMBERNAME=i.CUSTNAME,this._trnMainService.TrnMainObj.SCHEMENAME=i.SCHEMEID,this._trnMainService.TrnMainObj.SALESMAN=i.SALESMAN,this._trnMainService.TrnMainObj.SALESMANID=i.SALESMANID,this._trnMainService.TrnMainObj.CREDITLIMIT=i.CRLIMIT,"B2C"==this.userSetting.CompanyType&&14==this._trnMainService.TrnMainObj.VoucherType&&"cash"==this._trnMainService.TrnMainObj.TRNMODE)return this._trnMainService.TrnMainObj.BILLTO=i.CUSTNAME,this._trnMainService.TrnMainObj.BILLTOADD=i.ADDRESS,this._trnMainService.TrnMainObj.BILLTOMOB=i.MOBILENO,this._trnMainService.TrnMainObj.RECEIVEBY=i.ACID,this._trnMainService.TrnMainObj.BILLTOTEL=i.VATNO,this._trnMainService.vatFreeBill(),null!=this._trnMainService.TrnMainObj.ProdList[0].MENUCODE&&this._trnMainService.ReCalculateBillWithNormal(),void document.getElementById("remarksid").focus();this._trnMainService.TrnMainObj.PRICEMODE=i.PRICEMODE?i.PRICEMODE:1,this._trnMainService.TrnMainObj.PARAC=i.ACID,this._trnMainService.TrnMainObj.BILLTO=i.ACNAME,this._trnMainService.TrnMainObj.RECEIVEBY=i.ACID,this._trnMainService.TrnMainObj.BILLTOTEL=i.VATNO,this._trnMainService.TrnMainObj.BILLTOADD=i.ADDRESS,this._trnMainService.TrnMainObj.AdditionalObj.TRNTYPE=null==i.PSTYPE?null:i.PSTYPE.toLowerCase(),this._trnMainService.TrnMainObj.TRNMODE=null!=i.PMODE&&""!=i.PMODE||this._trnMainService.TrnMainObj.VoucherType===O.Km.SalesOrder?i.PMODE:"credit",this._trnMainService.TrnMainObj.PARTY_ORG_TYPE=i.ORG_TYPE,this._trnMainService.TrnMainObj.CREDITDAYS=i.CRPERIOD,this._trnMainService.TrnMainObj.CUS_FIX_DISCOUNT_PER=i.CUS_FIX_DISCOUNT_PER,this._trnMainService.TrnMainObj.CUS_Remote_Discount=i.CUS_Remote_Discount,this._trnMainService.TrnMainObj.CUS_Remote_Discount=i.CUS_Remote_Discount,this._trnMainService.getCustomerwiseCreditLimit(this._trnMainService.TrnMainObj.PARAC,this._trnMainService.TrnMainObj.TRN_DATE),this._trnMainService.vatFreeBill(),null!=this._trnMainService.TrnMainObj.ProdList[0].MENUCODE&&this._trnMainService.ReCalculateBillWithNormal(),document.getElementById("remarksid").focus()}salesManEnterCommand(){this.getSalesManList(),this.genericGridSalesMan.show()}getSalesManList(){this.gridPopupSettingsForSalesMan=this.masterService.getGenericGridPopUpSettings("SalesManList")}onSalesManSelect(i){this._trnMainService.TrnMainObj.SALESMANID=i.SALESMANID,this._trnMainService.TrnMainObj.SALESMAN=i.NAME,console.log("trnmain on sales man slect",this._trnMainService.TrnMainObj.SALESMANID,this._trnMainService.TrnMainObj.SALESMAN),this._trnMainService.TrnMainObj.VoucherType==O.Km.TaxInvoice||this._trnMainService.TrnMainObj.VoucherType==O.Km.CreditNote?this.masterService.focusAnyControl("barcode0"):this._trnMainService.TrnMainObj.VoucherType==O.Km.SalesOrder&&this.masterService.focusAnyControl("itemDesc0")}salesmanDelete(){null!=this._trnMainService.TrnMainObj.SALESMAN&&(this._trnMainService.TrnMainObj.SALESMAN=null,this._trnMainService.TrnMainObj.SALESMANID=null)}focusToExcRate(i){i.preventDefault(),this.masterService.focusAnyControl("exchangerateid")}closeModal(){this._trnMainService.showNegativeBillingAuthForMain=!1,this._trnMainService.TrnMainObj.VoucherType==O.Km.DebitNote&&(this._trnMainService.TrnMainObj.ProdList=this._trnMainService.TrnMainObj.ProdList.filter(i=>i.Quantity<=i.STOCK))}NegativeBillAuthConfirm(){this._loadingService.show("Authorizing Please wait"),this.masterService.NegativeBillingAuth(this.NegativeBillAuthObj).subscribe(i=>{this.NegativeBillAuthObj={username:"",password:"",remarks:""},console.log("Negative stock responee",i),this._loadingService.hide(),"ok"==i.status?"ALLOW"==i.result?(this._alertService.success("User Right Granted !"),this._trnMainService.showNegativeBillingAuthForMain=!1):(this._alertService.warning("this user has no rights to do negative stock billing !"),this._trnMainService.showNegativeBillingAuthForMain=!1,this._trnMainService.TrnMainObj.VoucherType==O.Km.DebitNote&&(this._trnMainService.TrnMainObj.ProdList=this._trnMainService.TrnMainObj.ProdList.filter(t=>t.Quantity<=t.STOCK))):(this._alertService.warning("Authorization Failed"),this._trnMainService.showNegativeBillingAuthForMain=!1,this._trnMainService.TrnMainObj.VoucherType==O.Km.DebitNote&&(this._trnMainService.TrnMainObj.ProdList=this._trnMainService.TrnMainObj.ProdList.filter(t=>t.Quantity<=t.STOCK)))},i=>{this._loadingService.hide(),this._alertService.error(i)})}DoFullReturn(i){if(null!=this._trnMainService.TrnMainObj.REFBILL&&""!=this._trnMainService.TrnMainObj.REFBILL&&null!=this._trnMainService.TrnMainObj.REFBILL)if(this._trnMainService.TrnMainObj.DOFULLRETURN=1==i?1:0,this._trnMainService.DOFULLRETURN=this._trnMainService.TrnMainObj.DOFULLRETURN,this._trnMainService.TrnMainObj.ProdList?.length>0){if(!confirm("Below data will be refresh. Do you want to continue?"))return;this.ConfirmChangeReturnMode()}else this.ConfirmChangeReturnMode()}ConfirmChangeReturnMode(){0==this._trnMainService.DOFULLRETURN?(this._trnMainService.TrnMainObj.ProdList=[],this._trnMainService.addRow(),this._trnMainService.DOFULLRETURN=1):""!=this.ReffBillObj&&this.onRefBillSelected(this.ReffBillObj)}onChangeOnMixedPurchaseType(i){1==this.userSetting.EnableNonTradingModule&&(this._trnMainService.TrnMainObj.VoucherType==O.Km.Purchase||this._trnMainService.TrnMainObj.VoucherType==O.Km.DebitNote)&&"asset-purchase-invoice"!==this.activeurlpath&&("NONTRADING"==this._trnMainService.TrnMainObj.INVOICETYPE?this._trnMainService.TrnMainObj.ProdList=[]:0==this._trnMainService.TrnMainObj.ProdList.length&&this._trnMainService.addRow())}disableCostCentreforRefPIWiseLoad(){if(1==this.userSetting.REFBILLCOMPULSORINDNOTE&&"add-debitnote-itembase"==this.activeurlpath)return!0}showPurchaseType(){if("add-purchase-invoice"==this.activeurlpath||this._trnMainService.TrnMainObj.VoucherType==O.Km.DebitNote||this._trnMainService.TrnMainObj.VoucherType==O.Km.ReverseDebitNote)return"add-purchase-invoice"!=this.activeurlpath||0===this.userSetting.ENABLE_GRN_IN_PI&&0===this.userSetting.PODELIVERYMODE||null===this._trnMainService.TrnMainObj.REFORDBILL||""===this._trnMainService.TrnMainObj.REFORDBILL||void 0===this._trnMainService.TrnMainObj.REFORDBILL||1===this.userSetting.ENABLE_GRN_IN_PI&&null!==this._trnMainService.TrnMainObj.REFORDBILL}onAddNewSupplier(){this._trnMainService.TrnMainObj.VoucherType==O.Km.SalesOrder?this.openQuickCusProfilePopup():this.CreateQuickParty.show()}showAddButton(){if(this._trnMainService.TrnMainObj.VoucherType==O.Km.Purchase||"goods-received-note"===this.activeurlpath||"add-purchase-invoice"===this.activeurlpath||this._trnMainService.TrnMainObj.VoucherType==O.Km.SalesOrder)return!0}hideSalesman(){return 0!=this.userSetting.enablesalesman}}return c.\u0275fac=function(i){return new(i||c)(e.Y36(de.P),e.Y36(Me.p),e.Y36(ue.e),e.Y36(H.uw),e.Y36(J.c),e.Y36(he.V),e.Y36(pe.gz))},c.\u0275cmp=e.Xpm({type:c,selectors:[["trnmain-purchase-entry"]],viewQuery:function(i,t){if(1&i&&(e.Gf(v,5),e.Gf(ce,5),e.Gf(se,5),e.Gf(ve,5),e.Gf(me,5),e.Gf(Oe,5),e.Gf(Se,5),e.Gf(be,5),e.Gf(Ce,5),e.Gf(fe,5),e.Gf(Ae,5),e.Gf(Ee,5),e.Gf(xe,5),e.Gf(Ne,5),e.Gf(Pe,5),e.Gf(De,5)),2&i){let r;e.iGM(r=e.CRH())&&(t.genericGridSupplier=r.first),e.iGM(r=e.CRH())&&(t.genericGridShipName=r.first),e.iGM(r=e.CRH())&&(t.genericGridRefBill=r.first),e.iGM(r=e.CRH())&&(t.genericGridWarehouse=r.first),e.iGM(r=e.CRH())&&(t.fileUploadPopup=r.first),e.iGM(r=e.CRH())&&(t.genericGridAccount=r.first),e.iGM(r=e.CRH())&&(t.genericGridImportPurchaseOrder=r.first),e.iGM(r=e.CRH())&&(t.CreateQuickParty=r.first),e.iGM(r=e.CRH())&&(t.LoadPurchaseOrder=r.first),e.iGM(r=e.CRH())&&(t.importAdvanceAcGrid=r.first),e.iGM(r=e.CRH())&&(t.genericGridCustomer=r.first),e.iGM(r=e.CRH())&&(t.focusInputFormat=r.first),e.iGM(r=e.CRH())&&(t.genericGridGRN=r.first),e.iGM(r=e.CRH())&&(t.genericGridSalesMan=r.first),e.iGM(r=e.CRH())&&(t.CreateCustomerProfile=r.first),e.iGM(r=e.CRH())&&(t.genericGridPurchaseOrder=r)}},hostBindings:function(i,t){1&i&&e.NdJ("keydown",function(a){return t.updown(a)},!1,e.evT)},inputs:{viewDisable:"viewDisable"},decls:1,vars:1,consts:[["class","pd0 mr5 plainBackGround",4,"ngIf"],[1,"pd0","mr5","plainBackGround"],[1,"row","col-md-12",2,"padding","15px"],[1,"col-md-4","col-sm-6",2,"max-height","160px","overflow-y","scroll"],[1,"row"],[2,"width","25%"],[2,"float","right","width","73%","margin-top","0px","font-weight","bold"],["class","row",4,"ngIf"],[2,"float","right","width","73%"],["id","invoiceNO","type","text","autocomplete","off",2,"width","86%",3,"ngModel","disabled","readonly","placeholder","ngModelChange","keydown.enter"],["style","width: 25%;",4,"ngIf"],[4,"ngIf"],[1,"col-md-4","col-sm-6",2,"max-height","160px","overflow","hidden"],["style","width: 50%",4,"ngIf"],[1,"col-md-4","col-sm-6",2,"max-height","160px","overflow-y","auto"],[1,"row","cell-with-comment"],["id","customerselectid","type","text","autocomplete","off",2,"width","69%",3,"disabled","ngModel","placeholder","change","ngModelChange","keydown.enter","keydown.tab","keyup"],["style","margin-left: 2px;","class","add",3,"click",4,"ngIf"],["type","text",2,"width","70%",3,"ngModel","readonly","disabled","ngModelChange"],["id","vatId","type","text",2,"width","70%",3,"readonly","ngModel","disabled","ngModelChange"],["id","remarksid","type","text",2,"width","70%","height","24px","min-height","24px","max-height","55px",3,"ngModel","disabled","ngModelChange"],[3,"popupsettings","onItemDoubleClick"],["genericGridSupplier",""],["genericGridShipName",""],["genericGridRefBill",""],["genericGridWarehouse",""],["genericGridAccount",""],["genericGridPurchaseOrder",""],[3,"popupsettings","onImportChalanClick"],["genericGridImportPurchaseOrder",""],[3,"popupsettings","onUploaded"],["fileUploadPopup",""],["genericGridGRN",""],["genericGridCustomer",""],[3,"onLoadPO"],["LoadPurchaseOrder",""],["importAdvanceAcGrid",""],[3,"onSaveParty"],["CreateQuickParty",""],["genericGridSalesMan",""],[3,"onSave"],["CreateCustomerProfile",""],["name","prefix","id","prefix",2,"width","35%",3,"ngModel","disabled","ngModelChange"],["value","",4,"ngIf"],["type","text",2,"width","51%",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["value",""],[2,"float","right","width","34%"],["id","entryDateAD","type","date",2,"width","100%",3,"ngModel","disabled","max","ngModelChange","change"],[2,"float","right","width","26%"],["name","InvnepaliDateFrom",3,"id","label","disable","ngModel","change","ngModelChange"],[2,"float","right","width","39%"],["id","poNoId","type","text","autocomplete","off","placeholder","Enter to Select PO no.","readonly","",3,"ngStyle","ngModel","disabled","ngModelChange","keydown.enter","keydown.delete"],["type","checkbox",2,"width","17px","height","19px","margin-top","-8px",3,"ngModel","disabled","change","ngModelChange"],[2,"width","auto","font-size","12px"],["id","suppBillNo","type","text","autocomplete","off",2,"width","86%",3,"ngModel","disabled","placeholder","ngModelChange","keydown.enter"],["type","date",2,"width","100%",3,"ngModel","disabled","max","ngModelChange","change"],["id","purchasetype",2,"width","62.5%",3,"ngModel","disabled","ngModelChange","change"],["value","TRADING"],["value","NONTRADING",4,"ngIf"],["value","MIXED"],["value","NONTRADING"],["type","checkbox",2,"width","25px","height","19px","margin-top","4px","margin-right","9px",3,"ngModel","disabled","change","click","ngModelChange"],[2,"width","31%"],["id","refbill","type","text",2,"width","70%",3,"disabled","ngModel","ngModelChange","keydown.enter","keydown.tab"],[2,"width","70%",3,"ngModel","disabled","ngModelChange"],["value","credit"],["value","cash"],["id","ImportPOno","type","text","placeholder","Enter to select Import PO No.","autocomplete","off","readonly","",3,"ngStyle","ngModel","disabled","ngModelChange","keydown.enter","keydown.delete"],["id","GRNNoId","type","text","autocomplete","off","placeholder","Press Enter to load GRN Bill","readonly","",3,"ngStyle","ngModel","disabled","ngModelChange","keydown.enter"],["id","paymentTerms",2,"width","70%",3,"ngModel","disabled","ngModelChange","change"],["value","credit",4,"ngIf"],["value","cash",4,"ngIf"],["value","cheque",4,"ngIf"],["value","cheque"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["type","text","id","accountfield","autocomplete","off","placeholder","Press Enter to select Account",2,"width","70%",3,"disabled","ngModel","ngModelChange","keydown.enter","keydown.tab","keydown"],["type","text","autocomplete","off","placeholder","Press Enter to Select Account",2,"width","70%",3,"disabled","ngModel","ngModelChange","keydown.Enter","keydown.tab","keydown"],["type","text",2,"width","52%",3,"ngModel","disabled","ngModelChange"],["type","date",2,"width","44%",3,"ngModel","disabled","ngModelChange","change"],["id","warehouseId","type","text","style","width:70%;","autocomplete","off","readonly","",3,"disabled","ngModel","ngModelChange","keydown.enter",4,"ngIf"],["id","warehouseId","type","text","style","width:70%;","autocomplete","off",3,"disabled","ngModel","ngModelChange","keydown.enter",4,"ngIf"],["id","warehouseId","type","text","autocomplete","off","readonly","",2,"width","70%",3,"disabled","ngModel","ngModelChange","keydown.enter"],["id","warehouseId","type","text","autocomplete","off",2,"width","70%",3,"disabled","ngModel","ngModelChange","keydown.enter"],["id","locationID",2,"width","70%",3,"disabled","ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[2,"width","50%"],["id","currency",2,"width","47%",3,"ngModel","disabled","ngModelChange","change","keydown.Tab","keydown.Enter"],[2,"width","40%"],["id","exchangerateid","type","number",2,"width","50%",3,"ngModel","disabled","ngModelChange"],["style","width: 42%",4,"ngIf"],["id","CCenter",2,"width","69%",3,"ngModel","disabled","ngModelChange"],[2,"float","right","width","41%"],["type","date",2,"width","100%",3,"ngModel","disabled","min","ngModelChange","change","focusout"],["name","DeliveryDate",3,"id","label","ngModel","max","disabled","change","ngModelChange"],["name","DeliveryDate",3,"id","label","ngModel","max","change","ngModelChange"],["id","salesmanselect","type","text","autocomplete","off","placeholder","Press Enter to select salesman","autocomplete","off","readonly","",2,"width","70%",3,"ngModel","ngModelChange","keydown.enter","keydown.delete"],[2,"width","25%","font-size","11px"],["type","checkbox",2,"width","17px","height","19px","margin-top","4px","margin-right","9px",3,"ngModel","change","ngModelChange"],[2,"width","42%"],[1,"add",2,"margin-left","2px",3,"click"],["id","shiplocation",2,"width","70%",3,"ngModel","disabled","ngModelChange","change"],["id","consignmentnumid","type","text",2,"width","70%",3,"ngModel","ngModelChange"],["id","receivelocationid","type","text",2,"width","70%",3,"ngModel","ngModelChange"],[1,"modal-sticky",2,"display","block","padding","0px","margin-bottom","-6vh","margin-right","20vw"],[1,"modal-content","modal-content-main-area",2,"width","70%","height","auto"],[1,"modal-header",2,"padding","0px","background","#c0c0c0"],[1,"modal-title",2,"padding-left","5px"],["aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row",2,"margin","0.5rem"],[1,"col-sm-4","form-control-label",2,"font-size","13px"],[1,"col-sm-7",2,"padding","0px"],["type","text","id","Parent","autocomplete","off",1,"form-control",2,"height","4vh","font-size","13px",3,"ngModel","ngModelChange"],["type","password","id","Parent","autocomplete","off",1,"form-control",2,"height","4vh","font-size","13px",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-sm","btn-info",2,"font-size","12px",3,"click"],["type","button",1,"btn","btn-sm","btn-info",2,"font-size","12px",3,"click"]],template:function(i,t){1&i&&e.YNc(0,Ln,95,61,"div",0),2&i&&e.Q6J("ngIf",1==t.masterService.ShowMore)},dependencies:[U.sg,U.O5,U.PC,y.YN,y.Kr,y.Fj,y.wV,y.Wl,y.EJ,y.JJ,y.On,n.Zl,Z.U,w,p.X,E.c,o.r,T.v,M.u],styles:['.btn[_ngcontent-%COMP%] {\n        width: 65px;\n    }\n\n.add[_ngcontent-%COMP%]{\n  color: #2E8B57;\n  border: 2px solid #2E8B57;\n  margin-left: 2px;\n}\n\nspan.add[_ngcontent-%COMP%]:hover{\ncolor: #04AA6D;\nborder-color:#04AA6D;\n}\n\nspan.add[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{\n  position: absolute;\n  left: 50%;\n  top:50%;\n  transform: translate(-50%, -50%);\n}\n\nspan.add[_ngcontent-%COMP%]{\n  display: inline-block;\n    width: 15px;\n    height: 15px;\n    text-align: center;\n    font-size: 16px;\n    font-family: "Roboto";\n    border-radius: 50%;\n    background: #F7F7F7;\n    position: relative;\n    cursor: pointer;\n    margin-top: 7px;\n}']}),c})()},3047:(re,q,m)=>{m.d(q,{d:()=>pe});var n=m(718),R=m(28698),K=m(92340),G=m(53074),O=m(87584),U=m(55757),I=m(67311),Z=m(1298),j=m(35757),e=m(14970);function Y(p,E){if(1&p&&(n.ynx(0),n.TgZ(1,"option",21),n._uU(2),n.qZA(),n.BQk()),2&p){const o=E.$implicit;n.xp6(1),n.Q6J("ngValue",o.SCHEMEID),n.xp6(1),n.Oqu(o.NAME)}}function Q(p,E){if(1&p){const o=n.EpF();n.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"h5",4),n._uU(4,"CREATE MEMBERSHIP"),n.qZA(),n.TgZ(5,"div",5)(6,"form",6),n.NdJ("ngSubmit",function(){n.CHM(o);const M=n.oxw();return n.KtG(M.onSave())}),n.TgZ(7,"button",7),n._uU(8,"SAVE"),n.qZA(),n.TgZ(9,"button",8),n.NdJ("click",function(){n.CHM(o);const M=n.oxw();return n.KtG(M.cancelPopup())}),n._uU(10,"CANCEL"),n.qZA()()()(),n.TgZ(11,"div",9)(12,"form",10)(13,"div",11)(14,"label",12),n._uU(15,"First Name:"),n.qZA(),n.TgZ(16,"div",13),n._UZ(17,"input",14),n.qZA()(),n.TgZ(18,"div",11)(19,"label",12),n._uU(20,"Last Name:"),n.qZA(),n.TgZ(21,"div",13),n._UZ(22,"input",15),n.qZA()(),n.TgZ(23,"div",11)(24,"label",12),n._uU(25,"Mobile No:"),n.qZA(),n.TgZ(26,"div",13),n._UZ(27,"input",16),n.qZA()(),n.TgZ(28,"div",11)(29,"label",12),n._uU(30,"Address:"),n.qZA(),n.TgZ(31,"div",13),n._UZ(32,"input",17),n.qZA()(),n.TgZ(33,"div",11)(34,"label",12),n._uU(35,"Scheme:"),n.qZA(),n.TgZ(36,"div",13)(37,"select",18),n.YNc(38,Y,3,2,"ng-container",19),n.qZA()()(),n.TgZ(39,"div",11)(40,"label",12),n._uU(41,"Account:"),n.qZA(),n.TgZ(42,"div",13),n._UZ(43,"input",20),n.qZA()()()()()()}if(2&p){const o=n.oxw();n.xp6(6),n.Q6J("formGroup",o.membershipForm),n.xp6(1),n.Q6J("disabled",!o.membershipForm.valid),n.xp6(5),n.Q6J("formGroup",o.membershipForm),n.xp6(26),n.Q6J("ngForOf",o.schemeList)}}let W=(()=>{class p{constructor(o,T,M,v,ce){this._trnMainService=o,this.fb=T,this.masterService=M,this.spinnerService=v,this.alertService=ce,this.schemeList=[],this.mode="add",this.membershipObj={},this.onsubmit=new n.vpe,this.masterService.getMemCatList().subscribe(se=>{this.schemeList=se})}ngOnInit(){this.membershipForm=this.fb.group({FNAME:["",[j.kI.required]],LNAME:["",[j.kI.required]],MOBILE:["",[j.kI.required]],ADDRESS:[""],SCHEMEID:[""],ACCNAME:[""]})}show(){this.isActive=!0}cancelPopup(){this.isActive=!1,this._trnMainService.inputCode=!1,this.membershipForm.reset()}closeDialog(){this.isActive=!1}onSave(){let o=Object.assign(this.membershipObj,this.membershipForm.value);const T={mode:this.mode,data:o};this.spinnerService.show("Data is Saving ..."),this.masterService.postMembershipGroup(T).subscribe(M=>{"ok"==M.status?(this.closeDialog(),this.spinnerService.hide(),"ProceedConfirmation"==M.result?confirm("Member is not Created in  Server.Do you want to Process..")?(this.membershipForm.value.FurtherProceed="ProceedConfirmationYes",this.onSave()):(this.membershipForm.reset(),this.alertService.hide()):(this.membershipForm.reset(),this.alertService.info(M.result),setTimeout(()=>{this.alertService.hide()},500),this.onsubmit.emit(M.result2))):(this.alertService.info(M.result),this.spinnerService.hide())},M=>{this.spinnerService.hide()})}}return p.\u0275fac=function(o){return new(o||p)(n.Y36(O.p),n.Y36(j.qu),n.Y36(G.P),n.Y36(e.V),n.Y36(I.c))},p.\u0275cmp=n.Xpm({type:p,selectors:[["create-membership-dialog"]],outputs:{onsubmit:"onsubmit"},decls:1,vars:1,consts:[["class","membership_container","role","document","style","max-width: 100%; max-height: 500px; overflow:hidden",4,"ngIf"],["role","document",1,"membership_container",2,"max-width","100%","max-height","500px","overflow","hidden"],[1,"card"],[1,"card-header"],[1,"page-title"],[1,"button-group"],[3,"formGroup","ngSubmit"],["title","Save","type","submit",1,"btn","btn-info",2,"margin-right","2px",3,"disabled"],["type","button","title","Cancel",1,"btn","btn-info",3,"click"],[1,"card-body"],[1,"form-horizontal",2,"margin-top","15px",3,"formGroup"],[1,"form-group","row"],[1,"col-sm-2","form-control-label"],[1,"col-sm-5",2,"padding-left","1px"],["type","text","formControlName","FNAME","autocomplete","off",1,"form-control"],["type","text","formControlName","LNAME","autocomplete","off",1,"form-control"],["type","text","formControlName","MOBILE","autocomplete","off",1,"form-control"],["type","text","formControlName","ADDRESS","autocomplete","off",1,"form-control"],["formControlName","SCHEMEID",1,"form-control",2,"padding","0px 10px"],[4,"ngFor","ngForOf"],["type","text","formControlName","ACCNAME","autocomplete","off",1,"form-control"],[3,"ngValue"]],template:function(o,T){1&o&&n.YNc(0,Q,44,4,"div",0),2&o&&n.Q6J("ngIf",T.isActive)},dependencies:[Z.sg,Z.O5,j._Y,j.YN,j.Kr,j.Fj,j.EJ,j.JJ,j.JL,j.sg,j.u],styles:["input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{border:1px solid #cbcbcb;border-radius:2px;height:30px;color:#000}.page-title[_ngcontent-%COMP%]{text-align:center}.form-control[_ngcontent-%COMP%]{font-size:14px}.button-group[_ngcontent-%COMP%]{position:absolute;right:3%;top:3%}.card-body[_ngcontent-%COMP%]{line-height:.4rem}","td[_ngcontent-%COMP%] {\n      border: 1px solid #e6e6e6;\n    }\n  \n    input[_ngcontent-%COMP%] {\n      padding: 8px;\n    }\n  \n    .form-group[_ngcontent-%COMP%] {\n      margin-bottom: 1rem;\n    }\n  \n    .membership_container[_ngcontent-%COMP%] {\n      position: fixed !important;\n      transform: translate(0px, -35px);\n      background: #ffffff;\n      z-index: 99999;\n      width: 65%;\n      top: 22.5%;\n      left: 16%;\n    }\n\n    label[_ngcontent-%COMP%]{\n      \n      font-size: 14px;\n      margin-left: 5rem;\n      margin-top: 10px;\n    }"]}),p})();var H=m(89952),J=m(42326),y=m(67297);let x=(()=>{class p{constructor(o){this.authService=o,this.userSetting=this.authService.getSetting()}transform(o,T,M){let v=!1;return"VIEW"===T?(v=!0,v):(-1!==[J.Km.DebitNote,J.Km.CreditNote].indexOf(o)&&(1===this.userSetting.REFBILLCOMPULSORINCNOTE||1===this.userSetting.REFBILLCOMPULSORINDNOTE)&&-1!==["NEW"].indexOf(T)&&1===M&&(v=!0),v)}}return p.\u0275fac=function(o){return new(o||p)(n.Y36(y.e,16))},p.\u0275pipe=n.Yjl({name:"roundingEnableDisable",type:p,pure:!0}),p})();const L=["CreateMembership"],h=["genericGridTDSAccount"],N=["genericGridTDSAccountSubLedger"];function S(p,E){1&p&&(n.TgZ(0,"td"),n._uU(1,"Flat Dis%"),n.qZA())}function A(p,E){if(1&p){const o=n.EpF();n.TgZ(0,"tr")(1,"td"),n._uU(2,"Flat Dis Amount:"),n.qZA(),n.TgZ(3,"td")(4,"input",19),n.NdJ("ngModelChange",function(M){n.CHM(o);const v=n.oxw(3);return n.KtG(v._trnMainService.TrnMainObj.FLATDCAMNT=M)})("change",function(){n.CHM(o);const M=n.oxw(3);return n.KtG(M.onChangeFlatDiscount())})("ngModelChange",function(M){n.CHM(o);const v=n.oxw(3);return v.checkFlatDiscountAmnt(M),n.KtG(v._trnMainService.callPipe=!v._trnMainService.callPipe)}),n.qZA()()()}if(2&p){const o=n.oxw(3);n.xp6(4),n.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode&&(61==o._trnMainService.TrnMainObj.VoucherType||3==o._trnMainService.TrnMainObj.VoucherType||31==o._trnMainService.TrnMainObj.VoucherType||20==o._trnMainService.TrnMainObj.VoucherType||16===o._trnMainService.TrnMainObj.VoucherType||19===o._trnMainService.TrnMainObj.VoucherType)||16==o._trnMainService.TrnMainObj.VoucherType&&1==o._trnMainService.TrnMainObj.DOFULLRETURN&&o._trnMainService.TrnMainObj.REFBILL||null!=o._trnMainService.TrnMainObj.DCRATE&&0!=o._trnMainService.TrnMainObj.DCRATE)("ngModel",o._trnMainService.TrnMainObj.FLATDCAMNT)}}function B(p,E){if(1&p){const o=n.EpF();n.TgZ(0,"button",23),n.NdJ("click",function(){n.CHM(o);const M=n.oxw(4);return n.KtG(M.onFlatDiscApply())}),n._uU(1," APPLY "),n.qZA()}if(2&p){const o=n.oxw(4);n.Q6J("disabled",(0==o._trnMainService.TrnMainObj.DCRATE||null==o._trnMainService.TrnMainObj.DCRATE)&&(0==o._trnMainService.TrnMainObj.FLATDCAMNT||null==o._trnMainService.TrnMainObj.FLATDCAMNT)||16==o._trnMainService.TrnMainObj.VoucherType&&1==o._trnMainService.TrnMainObj.DOFULLRETURN&&o._trnMainService.TrnMainObj.REFBILL)}}function X(p,E){if(1&p){const o=n.EpF();n.TgZ(0,"tr",20)(1,"td",21),n.YNc(2,B,2,1,"button",22),n.qZA(),n.TgZ(3,"td",21)(4,"button",23),n.NdJ("click",function(){n.CHM(o);const M=n.oxw(3);return n.KtG(M._trnMainService.onApplyClicked())}),n._uU(5," OVERWRITE "),n.qZA()(),n.TgZ(6,"td",21)(7,"button",24),n.NdJ("click",function(){n.CHM(o);const M=n.oxw(3);return n.KtG(M._trnMainService.onRevertClicked())}),n._uU(8," REVERT "),n.qZA()()()}if(2&p){const o=n.oxw(3);n.xp6(2),n.Q6J("ngIf",3==o._trnMainService.TrnMainObj.VoucherType||19==o._trnMainService.TrnMainObj.VoucherType||16==o._trnMainService.TrnMainObj.VoucherType||31==o._trnMainService.TrnMainObj.VoucherType),n.xp6(2),n.Q6J("disabled",(0==o._trnMainService.TrnMainObj.DCRATE||null==o._trnMainService.TrnMainObj.DCRATE)&&(0==o._trnMainService.TrnMainObj.FLATDCAMNT||null==o._trnMainService.TrnMainObj.FLATDCAMNT)||16==o._trnMainService.TrnMainObj.VoucherType&&1==o._trnMainService.TrnMainObj.DOFULLRETURN&&o._trnMainService.TrnMainObj.REFBILL)}}function $(p,E){if(1&p){const o=n.EpF();n.TgZ(0,"div",16)(1,"tr"),n.YNc(2,S,2,0,"td",15),n.TgZ(3,"td")(4,"input",17),n.NdJ("ngModelChange",function(M){n.CHM(o);const v=n.oxw(2);return n.KtG(v._trnMainService.TrnMainObj.DCRATE=M)})("ngModelChange",function(M){n.CHM(o);const v=n.oxw(2);return v.checkFlatDiscountRate(M),n.KtG(v._trnMainService.callPipe=!v._trnMainService.callPipe)}),n.qZA()()(),n.YNc(5,A,5,2,"tr",15),n.YNc(6,X,9,2,"tr",18),n.qZA()}if(2&p){const o=n.oxw(2);n.xp6(2),n.Q6J("ngIf",3==o._trnMainService.TrnMainObj.VoucherType||19==o._trnMainService.TrnMainObj.VoucherType||16==o._trnMainService.TrnMainObj.VoucherType||20==o._trnMainService.TrnMainObj.VoucherType||31==o._trnMainService.TrnMainObj.VoucherType),n.xp6(2),n.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode&&(61==o._trnMainService.TrnMainObj.VoucherType||3==o._trnMainService.TrnMainObj.VoucherType||31==o._trnMainService.TrnMainObj.VoucherType||20==o._trnMainService.TrnMainObj.VoucherType||16==o._trnMainService.TrnMainObj.VoucherType||19==o._trnMainService.TrnMainObj.VoucherType)||16==o._trnMainService.TrnMainObj.VoucherType&&1==o._trnMainService.TrnMainObj.DOFULLRETURN&&o._trnMainService.TrnMainObj.REFBILL||null!=o._trnMainService.TrnMainObj.FLATDCAMNT&&0!=o._trnMainService.TrnMainObj.FLATDCAMNT)("ngModel",o._trnMainService.TrnMainObj.DCRATE),n.xp6(1),n.Q6J("ngIf",3==o._trnMainService.TrnMainObj.VoucherType||19==o._trnMainService.TrnMainObj.VoucherType||16==o._trnMainService.TrnMainObj.VoucherType||20==o._trnMainService.TrnMainObj.VoucherType||31==o._trnMainService.TrnMainObj.VoucherType),n.xp6(1),n.Q6J("ngIf",3==o._trnMainService.TrnMainObj.VoucherType||16==o._trnMainService.TrnMainObj.VoucherType||19==o._trnMainService.TrnMainObj.VoucherType||20==o._trnMainService.TrnMainObj.VoucherType||31==o._trnMainService.TrnMainObj.VoucherType)}}function z(p,E){if(1&p){const o=n.EpF();n.TgZ(0,"tr")(1,"td"),n._uU(2,"Gross Amount:"),n.qZA(),n.TgZ(3,"td",26)(4,"input",27),n.NdJ("ngModelChange",function(M){n.CHM(o);const v=n.oxw(3);return n.KtG(v._trnMainService.TrnMainObj.GROSSAMNT=M)}),n.qZA()()()}if(2&p){const o=n.oxw(3);n.xp6(4),n.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode)("ngModel",o._trnMainService.TrnMainObj.GROSSAMNT)("readonly",!0)}}function ee(p,E){if(1&p){const o=n.EpF();n.TgZ(0,"tr")(1,"td"),n._uU(2,"Total Discount:"),n.qZA(),n.TgZ(3,"td")(4,"input",27),n.NdJ("ngModelChange",function(M){n.CHM(o);const v=n.oxw(3);return n.KtG(v._trnMainService.TrnMainObj.TOTALDISCOUNT=M)}),n.qZA()()()}if(2&p){const o=n.oxw(3);n.xp6(4),n.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode)("ngModel",o._trnMainService.TrnMainObj.TOTALDISCOUNT)("readonly",!0)}}function ne(p,E){if(1&p){const o=n.EpF();n.TgZ(0,"tr")(1,"td"),n._uU(2,"Total Taxable:"),n.qZA(),n.TgZ(3,"td",26)(4,"input",27),n.NdJ("ngModelChange",function(M){n.CHM(o);const v=n.oxw(3);return n.KtG(v._trnMainService.TrnMainObj.TAXABLE=M)}),n.qZA()()()}if(2&p){const o=n.oxw(3);n.xp6(4),n.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode)("ngModel",o._trnMainService.TrnMainObj.TAXABLE)("readonly",!0)}}function ie(p,E){if(1&p){const o=n.EpF();n.TgZ(0,"tr")(1,"td"),n._uU(2,"Total Non-Taxable:"),n.qZA(),n.TgZ(3,"td",26)(4,"input",27),n.NdJ("ngModelChange",function(M){n.CHM(o);const v=n.oxw(3);return n.KtG(v._trnMainService.TrnMainObj.NONTAXABLE=M)}),n.qZA()()()}if(2&p){const o=n.oxw(3);n.xp6(4),n.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode)("ngModel",o._trnMainService.TrnMainObj.NONTAXABLE)("readonly",!0)}}function P(p,E){if(1&p){const o=n.EpF();n.TgZ(0,"tr")(1,"td"),n._uU(2,"VAT Amount:"),n.qZA(),n.TgZ(3,"td",26)(4,"input",27),n.NdJ("ngModelChange",function(M){n.CHM(o);const v=n.oxw(3);return n.KtG(v._trnMainService.TrnMainObj.VATAMNT=M)}),n.qZA()()()}if(2&p){const o=n.oxw(3);n.xp6(4),n.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode)("ngModel",o._trnMainService.TrnMainObj.VATAMNT)("readonly",!0)}}function V(p,E){if(1&p){const o=n.EpF();n.TgZ(0,"tr")(1,"td"),n._uU(2,"Net Amount:"),n.qZA(),n.TgZ(3,"td",26)(4,"input",27),n.NdJ("ngModelChange",function(M){n.CHM(o);const v=n.oxw(3);return n.KtG(v._trnMainService.TrnMainObj.NETAMNT=M)}),n.qZA()()()}if(2&p){const o=n.oxw(3);n.xp6(4),n.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode)("ngModel",o._trnMainService.TrnMainObj.NETAMNT)("readonly",!0)}}function l(p,E){if(1&p){const o=n.EpF();n.TgZ(0,"tr")(1,"td"),n._uU(2,"Rounding:"),n.qZA(),n.TgZ(3,"td")(4,"input",28),n.NdJ("ngModelChange",function(M){n.CHM(o);const v=n.oxw(3);return n.KtG(v._trnMainService.TrnMainObj.ROUNDAMTMANUAL=M)})("keydown.enter",function(){n.CHM(o);const M=n.oxw(3);return n.KtG(M.changeAfterRoundAmt())})("keydown.alt.enter",function(){n.CHM(o);const M=n.oxw(3);return n.KtG(M.rounding())}),n.ALo(5,"roundingEnableDisable"),n.qZA()()()}if(2&p){const o=n.oxw(3);n.xp6(4),n.Q6J("disabled",n.Dn7(5,2,o._trnMainService.TrnMainObj.VoucherType,o._trnMainService.TrnMainObj.Mode,o._trnMainService.TrnMainObj.DOFULLRETURN))("ngModel",o._trnMainService.TrnMainObj.ROUNDAMTMANUAL)}}function d(p,E){if(1&p&&(n.TgZ(0,"div",25),n.YNc(1,z,5,3,"tr",15),n.YNc(2,ee,5,3,"tr",15),n.YNc(3,ne,5,3,"tr",15),n.YNc(4,ie,5,3,"tr",15),n.YNc(5,P,5,3,"tr",15),n.YNc(6,V,5,3,"tr",15),n.YNc(7,l,6,6,"tr",15),n.qZA()),2&p){const o=n.oxw(2);n.xp6(1),n.Q6J("ngIf","add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath),n.xp6(1),n.Q6J("ngIf",("add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath)&&"lite"==o.AppMode),n.xp6(1),n.Q6J("ngIf","add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath),n.xp6(1),n.Q6J("ngIf","add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath),n.xp6(1),n.Q6J("ngIf","add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath),n.xp6(1),n.Q6J("ngIf","add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath),n.xp6(1),n.Q6J("ngIf",("add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath)&&"pro"==o.AppMode)}}function u(p,E){if(1&p){const o=n.EpF();n.TgZ(0,"tr")(1,"td"),n._uU(2,"Discount:"),n.qZA(),n.TgZ(3,"td",26)(4,"input",17),n.NdJ("ngModelChange",function(M){n.CHM(o);const v=n.oxw(3);return n.KtG(v._trnMainService.TrnMainObj.AdditionalObj.AFTERVATDISCOUNT=M)})("ngModelChange",function(M){n.CHM(o);const v=n.oxw(3);return n.KtG(v.checkAfterVatDiscount(M))}),n.qZA()()()}if(2&p){const o=n.oxw(3);n.xp6(4),n.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode)("ngModel",o._trnMainService.TrnMainObj.AdditionalObj.AFTERVATDISCOUNT)}}function s(p,E){if(1&p&&(n.TgZ(0,"tr")(1,"td"),n._uU(2,"Net Amount "),n._UZ(3,"br"),n._uU(4," after Discount:"),n.qZA(),n.TgZ(5,"td",26),n._UZ(6,"input",30),n.qZA()()),2&p){const o=n.oxw(3);n.xp6(6),n.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode)("readonly",!0)("ngModel",o._trnMainService.TrnMainObj.NETAMNT-o._trnMainService.TrnMainObj.AdditionalObj.AFTERVATDISCOUNT)}}function b(p,E){if(1&p){const o=n.EpF();n.TgZ(0,"tr")(1,"td"),n._uU(2,"TDS Amount:"),n.qZA(),n.TgZ(3,"td",26)(4,"input",17),n.NdJ("ngModelChange",function(M){n.CHM(o);const v=n.oxw(3);return n.KtG(v._trnMainService.TrnMainObj.AdditionalObj.TDSAMOUNT=M)}),n.qZA()()()}if(2&p){const o=n.oxw(3);n.xp6(4),n.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode)("ngModel",o._trnMainService.TrnMainObj.AdditionalObj.TDSAMOUNT)}}function D(p,E){if(1&p){const o=n.EpF();n.TgZ(0,"tr")(1,"td"),n._uU(2,"TDS Account:"),n.qZA(),n.TgZ(3,"td",26)(4,"input",31),n.NdJ("ngModelChange",function(M){n.CHM(o);const v=n.oxw(3);return n.KtG(v._trnMainService.TrnMainObj.AdditionalObj.TDSACCOUNTNAME=M)})("keydown.enter",function(){n.CHM(o);const M=n.oxw(3);return n.KtG(M.onTDSAccountEnter())})("keyup",function(M){n.CHM(o);const v=n.oxw(3);return n.KtG(v.onTDSAccountEnter(M))})("keypress",function(M){n.CHM(o);const v=n.oxw(3);return n.KtG(v.keyPress(M))}),n.qZA()()()}if(2&p){const o=n.oxw(3);n.xp6(4),n.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode)("ngModel",o._trnMainService.TrnMainObj.AdditionalObj.TDSACCOUNTNAME)}}function w(p,E){if(1&p){const o=n.EpF();n.TgZ(0,"tr")(1,"td"),n._uU(2,"TDS Sub Ledger Account:"),n.qZA(),n.TgZ(3,"td",26)(4,"input",32),n.NdJ("ngModelChange",function(M){n.CHM(o);const v=n.oxw(3);return n.KtG(v._trnMainService.TrnMainObj.AdditionalObj.SL_ACNAME=M)}),n.qZA()()()}if(2&p){const o=n.oxw(3);n.xp6(4),n.Q6J("disabled",!0)("ngModel",o._trnMainService.TrnMainObj.AdditionalObj.SL_ACNAME)}}function ae(p,E){if(1&p&&(n.TgZ(0,"div",29),n.YNc(1,u,5,2,"tr",15),n.YNc(2,s,7,3,"tr",15),n.YNc(3,b,5,2,"tr",15),n.YNc(4,D,5,2,"tr",15),n.YNc(5,w,5,2,"tr",15),n.qZA()),2&p){const o=n.oxw(2);n.xp6(1),n.Q6J("ngIf","add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath),n.xp6(1),n.Q6J("ngIf",("add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath)&&"pro"==o.AppMode),n.xp6(1),n.Q6J("ngIf",("add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath)&&"pro"==o.AppMode),n.xp6(1),n.Q6J("ngIf","add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath),n.xp6(1),n.Q6J("ngIf",("add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath)&&o._trnMainService.TrnMainObj.AdditionalObj.SL_ACNAME)}}function te(p,E){if(1&p){const o=n.EpF();n.TgZ(0,"div")(1,"div",33)(2,"div",34)(3,"div",35)(4,"h6",36),n._uU(5,"Confirmation"),n.qZA(),n.TgZ(6,"button",37),n.NdJ("click",function(){n.CHM(o);const M=n.oxw(2);return n.KtG(M.closeModal())}),n.TgZ(7,"span",38),n._uU(8,"\xd7"),n.qZA()()(),n.TgZ(9,"div",39)(10,"p",40),n._uU(11,"Do you want to apply flat discount before or after the individual discount ?"),n.qZA()(),n.TgZ(12,"div",41)(13,"button",42),n.NdJ("click",function(){n.CHM(o);const M=n.oxw(2);return M._trnMainService.beforeDiscFlat(),n.KtG(M.showConfirm=!1)}),n._uU(14,"BEFORE "),n.qZA(),n.TgZ(15,"button",42),n.NdJ("click",function(){n.CHM(o);const M=n.oxw(2);return M._trnMainService.afterDiscFlat(),n.KtG(M.showConfirm=!1)}),n._uU(16,"AFTER"),n.qZA()()()()()}}const le=function(p){return{"mySidenav-show":p}},oe=function(p){return{"toggler-btn-icon-reverse":p}};function de(p,E){if(1&p){const o=n.EpF();n.TgZ(0,"div",6)(1,"button",7),n.NdJ("click",function(){n.CHM(o);const M=n.oxw();return n.KtG(M.hideShow=!M.hideShow)}),n._uU(2," F10 "),n._UZ(3,"i",8),n.qZA(),n.TgZ(4,"div",9)(5,"table",10),n.YNc(6,$,7,5,"div",11),n.qZA(),n.TgZ(7,"table",12)(8,"div"),n.YNc(9,d,8,7,"div",13),n.YNc(10,ae,6,5,"div",14),n.qZA()()(),n.YNc(11,te,17,0,"div",15),n.qZA()}if(2&p){const o=n.oxw();n.Q6J("ngClass",n.VKq(6,le,o.hideShow)),n.xp6(3),n.Q6J("ngClass",n.VKq(8,oe,o.hideShow)),n.xp6(3),n.Q6J("ngIf",3==o._trnMainService.TrnMainObj.VoucherType||16==o._trnMainService.TrnMainObj.VoucherType||19==o._trnMainService.TrnMainObj.VoucherType||20==o._trnMainService.TrnMainObj.VoucherType||31==o._trnMainService.TrnMainObj.VoucherType),n.xp6(3),n.Q6J("ngIf","add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath),n.xp6(1),n.Q6J("ngIf","add-purchase-invoice"==o.activeurlpath||"add-debitnote-itembase"==o.activeurlpath),n.xp6(1),n.Q6J("ngIf",o.showConfirm)}}function Me(p,E){if(1&p&&(n.TgZ(0,"tr")(1,"td"),n._uU(2,"Prior Earned Points:"),n.qZA(),n.TgZ(3,"td",52),n._uU(4),n.ALo(5,"twoDigitNumber"),n.qZA()()),2&p){const o=n.oxw(2);n.xp6(4),n.hij("",n.lcZ(5,1,o._trnMainService.TrnMainObj.TOTMEMPOINTS)," ")}}function ue(p,E){1&p&&(n.TgZ(0,"span"),n._uU(1,"-"),n.qZA())}function he(p,E){if(1&p){const o=n.EpF();n.TgZ(0,"div",6)(1,"button",7),n.NdJ("click",function(M){n.CHM(o);const v=n.oxw();return v.hideShow=!v.hideShow,n.KtG(v.onClickToolTip(M))}),n._uU(2," F10 "),n._UZ(3,"i",8),n.qZA(),n.TgZ(4,"table",43)(5,"div",44)(6,"tr")(7,"td"),n._uU(8,"Membership ID"),n.qZA(),n.TgZ(9,"td")(10,"input",45),n.NdJ("click",function(){n.CHM(o);const M=n.oxw();return n.KtG(M.onClicked())})("focusout",function(M){n.CHM(o);const v=n.oxw();return n.KtG(v.memberFocusOut(M))})("focusin",function(M){n.CHM(o);const v=n.oxw();return n.KtG(v.memberFocusIN(M))})("ngModelChange",function(M){n.CHM(o);const v=n.oxw();return n.KtG(v._trnMainService.TrnMainObj.MEMBERNO=M)}),n.qZA()()(),n.TgZ(11,"tr")(12,"td"),n._uU(13,"Member Name:"),n.qZA(),n.TgZ(14,"td",46),n._uU(15),n.qZA()(),n.TgZ(16,"tr")(17,"td",47),n._uU(18,"Scheme:"),n.qZA(),n.TgZ(19,"td",48),n._uU(20),n.qZA()(),n.TgZ(21,"tr")(22,"td"),n._uU(23,"Referred By ID:"),n.qZA(),n.TgZ(24,"td")(25,"input",49),n.NdJ("focusout",function(M){n.CHM(o);const v=n.oxw();return n.KtG(v.memberReferFocusOut(M))})("focusin",function(M){n.CHM(o);const v=n.oxw();return n.KtG(v.memberReferFocusIN(M))})("ngModelChange",function(M){n.CHM(o);const v=n.oxw();return n.KtG(v._trnMainService.TrnMainObj.REFERMEMBERNO=M)}),n.qZA()()(),n.TgZ(26,"tr")(27,"td"),n._uU(28,"Referred By Name:"),n.qZA(),n.TgZ(29,"td",46),n._uU(30),n.qZA()(),n.YNc(31,Me,6,3,"tr",15),n.TgZ(32,"tr")(33,"td"),n._uU(34,"Earned Point in Bill:"),n.qZA(),n.TgZ(35,"td",50),n.YNc(36,ue,2,0,"span",15),n._uU(37),n.ALo(38,"twoDigitNumber"),n.qZA()(),n.TgZ(39,"tr")(40,"td"),n._uU(41,"Bill Amount:"),n.qZA(),n.TgZ(42,"td"),n._uU(43),n.ALo(44,"twoDigitNumber"),n.qZA()()(),n.TgZ(45,"div",44)(46,"tr")(47,"td"),n._uU(48,"Net Amount:"),n.qZA(),n.TgZ(49,"td",26)(50,"input",51),n.NdJ("ngModelChange",function(M){n.CHM(o);const v=n.oxw();return n.KtG(v._trnMainService.TrnMainObj.NETAMNT=M)}),n.qZA()()(),n.TgZ(51,"tr")(52,"td"),n._uU(53,"Rounding:"),n.qZA(),n.TgZ(54,"td")(55,"input",28),n.NdJ("ngModelChange",function(M){n.CHM(o);const v=n.oxw();return n.KtG(v._trnMainService.TrnMainObj.ROUNDAMTMANUAL=M)})("keydown.enter",function(){n.CHM(o);const M=n.oxw();return n.KtG(M.changeAfterRoundAmt())})("keydown.alt.enter",function(){n.CHM(o);const M=n.oxw();return n.KtG(M.rounding())}),n.ALo(56,"roundingEnableDisable"),n.qZA()()()()()()}if(2&p){const o=n.oxw();n.Q6J("ngClass",n.VKq(25,le,o.hideShow)),n.xp6(3),n.Q6J("ngClass",n.VKq(27,oe,o.hideShow)),n.xp6(7),n.Q6J("ngModel",o._trnMainService.TrnMainObj.MEMBERNO),n.xp6(5),n.hij(" ",o._trnMainService.TrnMainObj.MEMBERNAME," "),n.xp6(5),n.hij(" ",o._trnMainService.TrnMainObj.SCHEMENAME," "),n.xp6(5),n.Q6J("ngModel",o._trnMainService.TrnMainObj.REFERMEMBERNO)("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode),n.xp6(5),n.hij(" ",o._trnMainService.TrnMainObj.REFERMEMBERNAME," "),n.xp6(1),n.Q6J("ngIf",15!==o._trnMainService.TrnMainObj.VoucherType),n.xp6(5),n.Q6J("ngIf",15==o._trnMainService.TrnMainObj.VoucherType),n.xp6(1),n.hij("",n.lcZ(38,17,o._trnMainService.TrnMainObj.EARNPOINS)," "),n.xp6(6),n.hij(" ",n.lcZ(44,19,o._trnMainService.TrnMainObj.NETAMNT)," "),n.xp6(7),n.Q6J("disabled","VIEW"==o._trnMainService.TrnMainObj.Mode)("ngModel",o._trnMainService.TrnMainObj.NETAMNT)("readonly",!0),n.xp6(5),n.Q6J("disabled",n.Dn7(56,21,o._trnMainService.TrnMainObj.VoucherType,o._trnMainService.TrnMainObj.Mode,o._trnMainService.TrnMainObj.DOFULLRETURN))("ngModel",o._trnMainService.TrnMainObj.ROUNDAMTMANUAL)}}let pe=(()=>{class p{constructor(o,T,M,v){this.masterService=o,this._trnMainService=T,this.arouter=M,this.alertservice=v,this.hideShow=!1,this.focusOut=!1,this.focusOutReferNo=!1,this.roundingHover=!1,this.genericGridTDSAccountSetting=new R.im,this.genericGridTDSAccountSubLedgerSetting=new R.im,this.onMemberIDSearch=new n.vpe,this.onMemberReferIDSearch=new n.vpe,this.onClickSlider=new n.vpe,this.showConfirm=!1,this.appType=this.masterService.appType,this.activeurlpath=M.snapshot.url[0].path}EnableMinusKeyPress(o){"Minus"===o.code&&o.stopPropagation()}ngOnInit(){this.AppMode=K.N.appMode}memberFocusOut(o){this.focusOut=!1,this._trnMainService.memberPopupForRefer=!1}memberReferFocusOut(o){this.focusOutReferNo=!1}memberReferFocusIN(o){this.focusOutReferNo=!0}memberFocusIN(o){this.focusOut=!0}onClickToolTip(o){this.onClickSlider.emit()}openCreateMembershipPopup(){"TI"==this._trnMainService.TrnMainObj.VoucherPrefix&&this.CreateMembership.show()}onClicked(){this._trnMainService.inputCode=!0}onSaveMembership(o){}onChangeFlatDiscount(){this._trnMainService.TrnMainObj.TOTALFLATDISCOUNT=this._trnMainService.TrnMainObj.FLATDCAMNT}onFlatDiscApply(){this._trnMainService.TrnMainObj.ProdList.filter(T=>0!=T.INDDISCOUNTRATE&&null!=T.INDDISCOUNTRATE&&null!=T.INDDISCOUNTRATE||0!=T.INDDISCOUNT&&null!=T.INDDISCOUNT&&null!=T.INDDISCOUNT).length>0?this.showConfirm=!0:this._trnMainService.beforeDiscFlat()}closeModal(){this.showConfirm=!1}checkFlatDiscountRate(o){return console.log("check discount rate",o),o>100?(this.alertservice.info("Flat discount rate cannot be greater than 100%"),void(this._trnMainService.TrnMainObj.DCRATE=0)):o<0?(this.alertservice.info("Flat discount rate cannot be less than 0%"),void(this._trnMainService.TrnMainObj.DCRATE=0)):void((0==o||null==o||null==o)&&this._trnMainService.onFlatDiscountClear())}checkFlatDiscountAmnt(o){let T=this._trnMainService.nullToZeroConverter(this._trnMainService.TrnMainObj.NETAMNT/1.13);return o>=T?(this.alertservice.info(`Flat discount amount cannot be greater than or equal to total amount: ${T}`),void(this._trnMainService.TrnMainObj.FLATDCAMNT=0)):o<0?(this.alertservice.info("Flat discount amount cannot be less than 0"),void(this._trnMainService.TrnMainObj.FLATDCAMNT=0)):void((0==o||null==o||null==o)&&this._trnMainService.onFlatDiscountClear())}checkAfterVatDiscount(o){return this._trnMainService.TrnMainObj.NETAMNT-this._trnMainService.TrnMainObj.AdditionalObj.AFTERVATDISCOUNT<=0?(this.alertservice.info(`Discount amount cannot be more than or equal to Net Amount: ${this._trnMainService.TrnMainObj.NETAMNT}`),void(this._trnMainService.TrnMainObj.AdditionalObj.AFTERVATDISCOUNT=0)):o<0?(this.alertservice.info("Discount amount cannot be less than 0"),void(this._trnMainService.TrnMainObj.AdditionalObj.AFTERVATDISCOUNT=0)):void 0}onTDSAccountEnter(){this.reIntialiseTDSData(),this.genericGridTDSAccountSetting={title:"TDS Accounts",apiEndpoints:"/getTDSAccountPagedList",defaultFilterIndex:1,columns:[{key:"ACCODE",title:"AC CODE",hidden:!1,noSearch:!1},{key:"ACNAME",title:"A/C NAME",hidden:!1,noSearch:!1}]},this.genericGridTDSAccount.show()}onTDSAccountSelect(o){this._trnMainService.TrnMainObj.AdditionalObj.SL_ACNAME=null,1==o.HASSUBLEDGER?(this._trnMainService.TrnMainObj.AdditionalObj.SubLedgerValidation=!0,this.showSubLedger()):(this._trnMainService.TrnMainObj.AdditionalObj.SubLedgerValidation=!1,this._trnMainService.TrnMainObj.AdditionalObj.SL_ACNAME=null,this._trnMainService.TrnMainObj.AdditionalObj.SL_ACID=null),this._trnMainService.TrnMainObj.AdditionalObj.TDSACCOUNTNAME=o.ACNAME,this._trnMainService.TrnMainObj.AdditionalObj.TDSACCOUNT=o.ACID}reIntialiseTDSData(){this._trnMainService.TrnMainObj.AdditionalObj.TDSACCOUNTNAME=null,this._trnMainService.TrnMainObj.AdditionalObj.TDSACCOUNT=null,this._trnMainService.TrnMainObj.AdditionalObj.SL_ACNAME=null,this._trnMainService.TrnMainObj.AdditionalObj.SL_ACID=null}showSubLedger(){this.genericGridTDSAccountSubLedgerSetting={title:"TDS Sub Ledger Accounts",apiEndpoints:"/getTDSAccountPagedListWithSubLedger",defaultFilterIndex:1,columns:[{key:"SL_ACID",title:"AC CODE",hidden:!1,noSearch:!1},{key:"SL_ACNAME",title:"A/C NAME",hidden:!1,noSearch:!1}]},this.genericGridTDSAccountSubLedger.show()}onTDSAccountSubLedgerSelect(o){console.log("jjsjs",o),this._trnMainService.TrnMainObj.AdditionalObj.SL_ACNAME=o.SL_ACNAME,this._trnMainService.TrnMainObj.AdditionalObj.SL_ACID=o.SL_ACID,this._trnMainService.TrnMainObj.AdditionalObj.SubLedgerValidation=!1}handleKeyDownboardEvent(o){"F10"==o.code&&(o.preventDefault(),this.hideShow=!this.hideShow,this.hideShow||(this.genericGridTDSAccount.hide(),this.genericGridTDSAccountSubLedger.hide())),"Enter"==o.code&&(this.focusOut&&this.onMemberIDSearch.emit(),this.focusOutReferNo&&this.onMemberReferIDSearch.emit()),"Insert"===o.code&&(o.preventDefault(),this._trnMainService.inputCode&&this.openCreateMembershipPopup())}hoverRounding(){this.roundingHover=!0}hoverRoundingLeave(){this.roundingHover=!1}changeAfterRoundAmt(){Math.abs(this.masterService.nullToZeroConverter(this._trnMainService.TrnMainObj.ROUNDAMTMANUAL))>0?this._trnMainService.TrnMainObj.ROUNDOFF?alert("Rounding amount has already been applied."):(this._trnMainService.TrnMainObj.ROUNDOFF=this._trnMainService.TrnMainObj.ROUNDAMTMANUAL,this._trnMainService.TrnMainObj.NETAMNT=this._trnMainService.TrnMainObj.NETAMNT+this._trnMainService.TrnMainObj.ROUNDAMTMANUAL):(this._trnMainService.TrnMainObj.ROUNDOFF=0,this._trnMainService.ReCalculateBillWithNormal())}rounding(){this._trnMainService.TrnMainObj.ROUNDOFF&&(this._trnMainService.TrnMainObj.NETAMNT=this._trnMainService.TrnMainObj.NETAMNT-this._trnMainService.TrnMainObj.ROUNDAMTMANUAL,this._trnMainService.TrnMainObj.ROUNDOFF=0),this._trnMainService.TrnMainObj.NETWITHOUTROUNDOFF=Math.round(this._trnMainService.nullToZeroConverter(this._trnMainService.TrnMainObj.NETAMNT)),this._trnMainService.TrnMainObj.ROUNDOFF=this._trnMainService.TrnMainObj.NETWITHOUTROUNDOFF-this._trnMainService.TrnMainObj.NETAMNT,this._trnMainService.TrnMainObj.ROUNDAMTMANUAL=parseFloat(this._trnMainService.TrnMainObj.ROUNDOFF.toFixed(2)),this._trnMainService.TrnMainObj.NETAMNT=this._trnMainService.TrnMainObj.NETWITHOUTROUNDOFF}keyPress(o){const M=String.fromCharCode(o.charCode);/[\b]/.test(M)||o.preventDefault()}}return p.\u0275fac=function(o){return new(o||p)(n.Y36(G.P),n.Y36(O.p),n.Y36(U.gz),n.Y36(I.c))},p.\u0275cmp=n.Xpm({type:p,selectors:[["voucher-sidebar-billdetail"]],viewQuery:function(o,T){if(1&o&&(n.Gf(L,5),n.Gf(h,5),n.Gf(N,5)),2&o){let M;n.iGM(M=n.CRH())&&(T.CreateMembership=M.first),n.iGM(M=n.CRH())&&(T.genericGridTDSAccount=M.first),n.iGM(M=n.CRH())&&(T.genericGridTDSAccountSubLedger=M.first)}},hostBindings:function(o,T){1&o&&n.NdJ("keydown",function(v){return T.EnableMinusKeyPress(v)})("keydown",function(v){return T.handleKeyDownboardEvent(v)},!1,n.evT)},outputs:{onMemberIDSearch:"onMemberIDSearch",onMemberReferIDSearch:"onMemberReferIDSearch",onClickSlider:"onClickSlider"},decls:8,vars:4,consts:[["class","toggable-sidebar",3,"ngClass",4,"ngIf"],[3,"onsubmit"],["CreateMembership",""],[3,"popupsettings","onItemDoubleClick"],["genericGridTDSAccount",""],["genericGridTDSAccountSubLedger",""],[1,"toggable-sidebar",3,"ngClass"],[1,"btn","btn-info","btn-toggler",3,"click"],[1,"fa","fa-angle-double-left",3,"ngClass"],[1,"sidebar"],[1,"table","table-summary",2,"margin-bottom","0"],["class","mx-auto my-1 mt-2 box1",4,"ngIf"],[1,"table","table-summary"],["class","mx-auto my-1 mb-3 box1",4,"ngIf"],["class","mx-auto my-1 mb-2 box1",4,"ngIf"],[4,"ngIf"],[1,"mx-auto","my-1","mt-2","box1"],["type","number",2,"height","23px","width","95%",3,"disabled","ngModel","ngModelChange"],["class","buttons",4,"ngIf"],["type","number",2,"height","23px","width","95%",3,"disabled","ngModel","ngModelChange","change"],[1,"buttons"],[1,"actionbtn"],["class","btn btn-info ",3,"disabled","click",4,"ngIf"],[1,"btn","btn-info",3,"disabled","click"],[1,"btn","btn-info",3,"click"],[1,"mx-auto","my-1","mb-3","box1"],[1,"widthField"],["type","number",2,"height","23px","width","95%",3,"disabled","ngModel","readonly","ngModelChange"],["type","number","placeholder","Press Alt+Enter for Rounding",2,"height","23px","width","95%","font-size","12px",3,"disabled","ngModel","ngModelChange","keydown.enter","keydown.alt.enter"],[1,"mx-auto","my-1","mb-2","box1"],["type","number",2,"height","23px","width","95%",3,"disabled","readonly","ngModel"],["type","text","placeholder","Press Enter to select Account",2,"height","23px","width","95%",3,"disabled","ngModel","ngModelChange","keydown.enter","keyup","keypress"],["type","text","readonly","",2,"height","23px","width","95%","font-size","12px",3,"disabled","ngModel","ngModelChange"],[1,"modal-sticky",2,"display","block","padding","0px","margin-bottom","0rem","margin-right","-1rem"],[1,"modal-content","modal-content-main-area",2,"width","53%"],[1,"modal-header",2,"padding","0px","background","#c0c0c0"],[1,"modal-title",2,"padding-left","5px"],["aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-control-label",2,"font-size","14px"],[1,"modal-footer"],["type","button",1,"btn","btn-sm","btn-info",2,"font-size","10px","padding","6px",3,"click"],[1,"table","table-summary",2,"text-align","left","white-space","nowrap"],[1,"box1","my-1","mx-auto"],["type","text","disabled","_trnMainService.TrnMainObj.VoucherType == 15",2,"height","23px","width","7.5rem",3,"ngModel","click","focusout","focusin","ngModelChange"],[2,"font-weight","500"],[2,"border-top","none"],[2,"border-top","none","font-weight","500"],["type","text","placeholder","Press Enter to Select",2,"height","23px","width","7.5rem",3,"ngModel","disabled","focusout","focusin","ngModelChange"],[2,"color","brown"],["type","number",2,"height","23px","width","85%","margin-right","5rem",3,"disabled","ngModel","readonly","ngModelChange"],[2,"color","green"]],template:function(o,T){1&o&&(n.YNc(0,de,12,10,"div",0),n.YNc(1,he,57,29,"div",0),n.TgZ(2,"create-membership-dialog",1,2),n.NdJ("onsubmit",function(v){return T.onSaveMembership(v)}),n.qZA(),n.TgZ(4,"generic-popup-grid",3,4),n.NdJ("onItemDoubleClick",function(v){return T.onTDSAccountSelect(v)}),n.qZA(),n.TgZ(6,"generic-popup-grid",3,5),n.NdJ("onItemDoubleClick",function(v){return T.onTDSAccountSubLedgerSelect(v)}),n.qZA()),2&o&&(n.Q6J("ngIf",14!=T._trnMainService.TrnMainObj.VoucherType&&"purchase-import-order"!=T.activeurlpath&&"asset-purchase-invoice"!=T.activeurlpath&&"purchase-import"!=T.activeurlpath),n.xp6(1),n.Q6J("ngIf",(14==T._trnMainService.TrnMainObj.VoucherType||"abbreviated-sales-invoice"==T.activeurlpath||15==T._trnMainService.TrnMainObj.VoucherType)&&"self-billing"!=T.activeurlpath),n.xp6(3),n.Q6J("popupsettings",T.genericGridTDSAccountSetting),n.xp6(2),n.Q6J("popupsettings",T.genericGridTDSAccountSubLedgerSetting))},dependencies:[Z.mk,Z.O5,j.Fj,j.wV,j.JJ,j.On,R.Zl,W,H.g,x],styles:[".toggable-sidebar[_ngcontent-%COMP%]{position:fixed;right:-22%;transition:.3s;width:260px;text-decoration:none;font-size:11px;font-weight:600;border-radius:0 5px 5px 0;color:#000;height:100%;width:22%;margin:0}@media (max-width: 1191px){.toggable-sidebar[_ngcontent-%COMP%]{right:-20%}}.mySidenav-show[_ngcontent-%COMP%]{right:0}@media (max-width: 1074px){.mySidenav-show[_ngcontent-%COMP%]{right:1rem}}.btn-toggler[_ngcontent-%COMP%]{position:absolute;left:-45px;top:-3px;background:#81DAAC!important;border-color:#81daac!important;padding:5px!important;font-size:10px!important;width:45px!important}.toggler-btn-icon-reverse[_ngcontent-%COMP%]{transform:rotate(180deg)}.table[_ngcontent-%COMP%], .billTender[_ngcontent-%COMP%]{background:#c0c0c0}.table-summary[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{font-size:12px;font-weight:700}.table-summary[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]:first-child{text-align:left!important}.actionbtn[_ngcontent-%COMP%]{padding:.25rem}.btn-info[_ngcontent-%COMP%]{font-size:9px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:11px;border:none!important}.box[_ngcontent-%COMP%]{border:1px solid grey;border-radius:1px}.hoverRounding[_ngcontent-%COMP%]{background:#17a2b8;position:fixed;border-radius:11px;text-align:center;vertical-align:middle;color:#fff;margin-top:-3.5%;right:26px;height:48px;font-size:12px;font-weight:500;line-height:23px;width:40px}@media (min-width: 1370px){.hoverRounding[_ngcontent-%COMP%]{right:42px;margin-top:-3.2%}}@media (max-height: 670px){.sidebar[_ngcontent-%COMP%]{height:526px;overflow-y:auto}}.box1[_ngcontent-%COMP%]{border:2px solid #e9e9e9;width:87%;border-radius:15px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:24%;padding:7px 5px!important}.buttons[_ngcontent-%COMP%]{display:flex;align-content:center;justify-content:space-evenly}input[_ngcontent-%COMP%]::placeholder{font-size:smaller}"]}),p})()},471:(re,q,m)=>{m.d(q,{X:()=>l});var n=m(718),R=m(35757),K=m(92340),G=m(53074),O=m(87584),U=m(67311),I=m(14970),Z=m(1298);const j=["customerName"];function e(d,u){1&d&&(n.TgZ(0,"span"),n._uU(1,"Name is required."),n.qZA())}function Y(d,u){if(1&d&&(n.TgZ(0,"div",28),n.YNc(1,e,2,0,"span",29),n.qZA()),2&d){const s=n.oxw(2);n.xp6(1),n.Q6J("ngIf",s.form.controls.name.errors.required)}}function Q(d,u){1&d&&(n.TgZ(0,"span"),n._uU(1,"Name is required."),n.qZA())}function W(d,u){if(1&d&&(n.TgZ(0,"div",28),n.YNc(1,Q,2,0,"span",29),n.qZA()),2&d){const s=n.oxw(2);n.xp6(1),n.Q6J("ngIf",s.form.controls.name.errors.required)}}function H(d,u){1&d&&(n.TgZ(0,"span"),n._uU(1,"Address is required."),n.qZA())}function J(d,u){if(1&d&&(n.TgZ(0,"div",28),n.YNc(1,H,2,0,"span",29),n.qZA()),2&d){const s=n.oxw(2);n.xp6(1),n.Q6J("ngIf",s.form.controls.address.errors.required)}}function y(d,u){1&d&&(n.TgZ(0,"span"),n._uU(1,"Pan No is required."),n.qZA())}function x(d,u){if(1&d&&(n.TgZ(0,"div",28),n.YNc(1,y,2,0,"span",29),n.qZA()),2&d){const s=n.oxw(2);n.xp6(1),n.Q6J("ngIf",s.form.controls.pan.errors.required)}}function L(d,u){1&d&&(n.TgZ(0,"span"),n._uU(1,"Pan No is required."),n.qZA())}function h(d,u){if(1&d&&(n.TgZ(0,"div",28),n.YNc(1,L,2,0,"span",29),n.qZA()),2&d){const s=n.oxw(2);n.xp6(1),n.Q6J("ngIf",s.form.controls.pan.errors.required)}}function N(d,u){1&d&&(n.TgZ(0,"span"),n._uU(1,"PAN No must be 9 digit long."),n.qZA())}function S(d,u){if(1&d&&(n.TgZ(0,"div",28),n.YNc(1,N,2,0,"span",29),n.qZA()),2&d){const s=n.oxw(2);n.xp6(1),n.Q6J("ngIf",s.form.controls.pan.errors.minlength||s.form.controls.pan.errors.maxlength)}}function A(d,u){1&d&&(n.TgZ(0,"span"),n._uU(1,"Mobile No is required."),n.qZA())}function B(d,u){if(1&d&&(n.TgZ(0,"div",28),n.YNc(1,A,2,0,"span",29),n.qZA()),2&d){const s=n.oxw(2);n.xp6(1),n.Q6J("ngIf",s.form.controls.mobNo.errors.required)}}function X(d,u){1&d&&(n.TgZ(0,"span"),n._uU(1,"Mobile No is required."),n.qZA())}function $(d,u){if(1&d&&(n.TgZ(0,"div",28),n.YNc(1,X,2,0,"span",29),n.qZA()),2&d){const s=n.oxw(2);n.xp6(1),n.Q6J("ngIf",s.form.controls.mobNo.errors.required)}}function z(d,u){1&d&&(n.TgZ(0,"span"),n._uU(1,"Mobile No must be 10 digit long."),n.qZA())}function ee(d,u){if(1&d&&(n.TgZ(0,"div",28),n.YNc(1,z,2,0,"span",29),n.qZA()),2&d){const s=n.oxw(2);n.xp6(1),n.Q6J("ngIf",s.form.controls.mobNo.errors.minlength||s.form.controls.mobNo.errors.maxlength)}}function ne(d,u){1&d&&(n.TgZ(0,"div",11)(1,"label",12),n._uU(2,"MOBILE NO REGISTER IN:"),n.qZA(),n.TgZ(3,"div",13)(4,"select",30),n._UZ(5,"option",31),n.TgZ(6,"option",32),n._uU(7,"Viber"),n.qZA(),n.TgZ(8,"option",33),n._uU(9,"Whatsapp"),n.qZA()()()())}function ie(d,u){if(1&d&&(n.ynx(0),n.TgZ(1,"option",34),n._uU(2),n.qZA(),n.BQk()),2&d){const s=u.$implicit;n.xp6(1),n.Q6J("ngValue",s.SCHEMEID),n.xp6(1),n.Oqu(s.NAME)}}function P(d,u){if(1&d){const s=n.EpF();n.TgZ(0,"div",11)(1,"div",13)(2,"input",35),n.NdJ("change",function(D){n.CHM(s);const w=n.oxw(2);return n.KtG(w.form.value.createMember=D.target.checked?1:0)}),n.qZA(),n.TgZ(3,"label",36),n._uU(4,"Create Customer Profile as Member Also"),n.qZA()(),n._UZ(5,"div",37),n.qZA()}}function V(d,u){if(1&d){const s=n.EpF();n.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"h5",4),n._uU(4,"CREATE CUSTOMER PROFILE"),n.qZA(),n.TgZ(5,"div",5)(6,"button",6),n.NdJ("keydown.F6",function(){n.CHM(s);const D=n.oxw();return n.KtG(D.submit(D.form.value))})("click",function(){n.CHM(s);const D=n.oxw();return n.KtG(D.submit(D.form.value))}),n._uU(7,"SAVE [End]"),n.qZA(),n.TgZ(8,"button",7),n.NdJ("click",function(){n.CHM(s);const D=n.oxw();return n.KtG(D.onclear())})("keydown.F3",function(){n.CHM(s);const D=n.oxw();return n.KtG(D.onclear())}),n._uU(9,"RESET"),n.qZA(),n.TgZ(10,"button",8),n.NdJ("click",function(){n.CHM(s);const D=n.oxw();return n.KtG(D.closeDialog())}),n._uU(11,"CANCEL"),n.qZA()()(),n.TgZ(12,"div",9)(13,"form",10)(14,"div",11)(15,"label",12),n._uU(16,"NAME:"),n.qZA(),n.TgZ(17,"div",13),n._UZ(18,"input",14,15),n.YNc(20,Y,2,1,"div",16),n.YNc(21,W,2,1,"div",16),n.qZA()(),n.TgZ(22,"div",11)(23,"label",12),n._uU(24,"ADDRESS:"),n.qZA(),n.TgZ(25,"div",13),n._UZ(26,"input",17),n.YNc(27,J,2,1,"div",16),n.qZA()(),n.TgZ(28,"div",11)(29,"label",12),n._uU(30,"PANNO:"),n.qZA(),n.TgZ(31,"div",13)(32,"input",18),n.NdJ("keypress",function(D){n.CHM(s);const w=n.oxw();return n.KtG(w.keyPress(D))}),n.qZA(),n.YNc(33,x,2,1,"div",16),n.YNc(34,h,2,1,"div",16),n.YNc(35,S,2,1,"div",16),n.qZA()(),n.TgZ(36,"div",11)(37,"label",12),n._uU(38,"PHONE NO:"),n.qZA(),n.TgZ(39,"div",13),n._UZ(40,"input",19),n.qZA()(),n.TgZ(41,"div",11)(42,"label",12),n._uU(43,"MOBILE NO:"),n.qZA(),n.TgZ(44,"div",13)(45,"input",20),n.NdJ("keypress",function(D){n.CHM(s);const w=n.oxw();return n.KtG(w.keyPress(D))}),n.qZA(),n.YNc(46,B,2,1,"div",16),n.YNc(47,$,2,1,"div",16),n.YNc(48,ee,2,1,"div",16),n.qZA()(),n.YNc(49,ne,10,0,"div",21),n.TgZ(50,"div",11)(51,"label",12),n._uU(52,"EMAIL:"),n.qZA(),n.TgZ(53,"div",13),n._UZ(54,"input",22),n.qZA()(),n.TgZ(55,"div",11)(56,"label",12),n._uU(57,"STATUS:"),n.qZA(),n.TgZ(58,"div",13)(59,"select",23)(60,"option",24),n._uU(61,"ACTIVE"),n.qZA(),n.TgZ(62,"option",25),n._uU(63,"INACTIVE"),n.qZA()()()(),n.TgZ(64,"div",11)(65,"label",12),n._uU(66,"Scheme:"),n.qZA(),n.TgZ(67,"div",13)(68,"select",26),n.YNc(69,ie,3,2,"ng-container",27),n.qZA()()(),n.YNc(70,P,6,0,"div",21),n.qZA()()()()}if(2&d){const s=n.oxw();n.xp6(6),n.Q6J("disabled",s.form.invalid),n.xp6(7),n.Q6J("formGroup",s.form),n.xp6(7),n.Q6J("ngIf",!s.isSubmitting&&s.form.controls.name.invalid&&(s.form.controls.name.dirty||s.form.controls.name.touched)),n.xp6(1),n.Q6J("ngIf",s.isSubmitting&&s.form.controls.name.invalid),n.xp6(6),n.Q6J("ngIf",!s.isSubmitting&&s.form.controls.address.invalid&&(s.form.controls.address.dirty||s.form.controls.address.touched)),n.xp6(6),n.Q6J("ngIf",!s.isSubmitting&&s.form.controls.pan.invalid&&(s.form.controls.pan.dirty||s.form.controls.pan.touched)),n.xp6(1),n.Q6J("ngIf",s.isSubmitting&&s.form.controls.pan.invalid),n.xp6(1),n.Q6J("ngIf",!s.isSubmitting&&s.form.controls.pan.invalid&&(s.form.controls.pan.dirty||s.form.controls.pan.touched)),n.xp6(11),n.Q6J("ngIf",!s.isSubmitting&&s.form.controls.mobNo.invalid&&(s.form.controls.mobNo.dirty||s.form.controls.mobNo.touched)),n.xp6(1),n.Q6J("ngIf",s.isSubmitting&&s.form.controls.mobNo.invalid),n.xp6(1),n.Q6J("ngIf",!s.isSubmitting&&s.form.controls.mobNo.invalid&&(s.form.controls.mobNo.dirty||s.form.controls.mobNo.touched)),n.xp6(1),n.Q6J("ngIf",s.form.controls.mobNo.valid&&"lite"!=s.AppMode),n.xp6(20),n.Q6J("ngForOf",s.schemeList),n.xp6(1),n.Q6J("ngIf",1==s.masterservice.userSetting.CREATE_CPROFILE_AS_MEMBER&&"lite"!=s.AppMode)}}let l=(()=>{class d{constructor(s,b,D,w,ae){this.fb=s,this.masterservice=b,this._trnMainService=D,this.alertService=w,this.spinnerService=ae,this.isSubmitting=!1,this.isSubmitted=!1,this.onSave=new n.vpe,this.mode="add",this.dropdownList=[],this.selectedItems=[],this.activerowIndex=0,this.AppMode=K.N.appMode,this.masterservice.getAllDivisions().subscribe(te=>{this.dropdownList=te}),this.masterservice.getMemCatList().subscribe(te=>{this.schemeList=te}),this.forminit()}ngOnInit(){this.dropdownSettings={singleSelection:!1,idField:"INITIAL",textField:"NAME",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:3,allowSearchFilter:!1,maxHeight:100}}forminit(){this.form=this.fb.group({name:["",[R.kI.required]],address:[""],pan:["",[R.kI.minLength(9),R.kI.maxLength(9)]],phoneNo:[""],mobNo:["",[R.kI.minLength(10),R.kI.maxLength(10)]],email:[""],createMember:[""],MOBILENO_REG_IN:[""],FurtherProceed:[""],divisionMapping:[""],ShippingList:[[]],VehicleList:[[]],STATUS:[1],SCHEMEID:[""]}),this.form.controls.createMember.patchValue(1==this.masterservice.userSetting.CREATE_CPROFILE_AS_MEMBER?1:0)}submit(s){this.isSubmitting=!0,1!=this.masterservice.userSetting.CREATE_CPROFILE_AS_MEMBER||1!=this.form.value.createMember||14===this._trnMainService.TrnMainObj.VoucherType||1===this._trnMainService.TrnMainObj.VoucherType||""!=this.form.value.mobNo?((""==this.form.value.mobNo||null==this.form.value.mobNo)&&(this.form.value.MOBILENO_REG_IN=""),this.spinnerService.show("Please Wait Data is Saving"),console.log("saveing cutomer prodile",this.form.value),this.masterservice.saveCustomerProfile(this.form.value,this.mode).subscribe(b=>{"ok"==b.status?(this.closeDialog(),this.spinnerService.hide(),"ProceedConfirmation"==b.result?confirm("Member is not Created in  Server.Do you want to Process..")?(this.form.value.FurtherProceed="ProceedConfirmationYes",this.submit(this.form.value)):(this.onclear(),this.alertService.hide()):(this.onclear(),this.alertService.info(b.result),setTimeout(()=>{this.alertService.hide()},500),this.alertService.emitShowHideSubject.subscribe(D=>{setTimeout(()=>{document.getElementById("barcode"+this.activerowIndex).focus()},0)}),this.onSave.emit(b.result2))):(this.alertService.info(b.result),this.spinnerService.hide())},b=>{this.spinnerService.hide()})):this.alertService.info("Please Enter Mobile No. First!")}onclear(){this.form.reset(),1==this.masterservice.userSetting.CREATE_CPROFILE_AS_MEMBER&&this.form.controls.createMember.patchValue(!0)}closeDialog(){this.isActive=!1,this.masterservice.customerpopup=!1}keyPress(s){const D=String.fromCharCode(s.charCode);/[0-9]/.test(D)||s.preventDefault()}show(){this.isActive=!0,this.masterservice.customerpopup=!0,setTimeout(()=>{this.customerName.nativeElement.focus()},10)}hide(){this.isActive=!1,this.masterservice.customerpopup=!1}handleKeyDownboardEvent(s){"Escape"==s.code&&(s.preventDefault(),this.closeDialog()),"End"==s.code&&(this.form.invalid||(s.preventDefault(),this.submit(this.form.value)))}onItemSelect(s){console.log(s)}onSelectAll(s){console.log(s)}}return d.\u0275fac=function(s){return new(s||d)(n.Y36(R.qu),n.Y36(G.P),n.Y36(O.p),n.Y36(U.c),n.Y36(I.V))},d.\u0275cmp=n.Xpm({type:d,selectors:[["create-customer-dialog"]],viewQuery:function(s,b){if(1&s&&n.Gf(j,5),2&s){let D;n.iGM(D=n.CRH())&&(b.customerName=D.first)}},hostBindings:function(s,b){1&s&&n.NdJ("keydown",function(w){return b.handleKeyDownboardEvent(w)},!1,n.evT)},outputs:{onSave:"onSave"},decls:1,vars:1,consts:[["class","customer_container",4,"ngIf"],[1,"customer_container"],[1,"card"],[1,"card-header"],[1,"page-title"],[1,"button-group"],["title","Save","type","submit",1,"btn","btn-info",2,"margin-right","2px",3,"disabled","keydown.F6","click"],["type","button","title","reset",1,"btn","btn-info",2,"margin-right","2px",3,"click","keydown.F3"],["type","button","title","Cancel",1,"btn","btn-info",3,"click"],[1,"card-body"],[1,"form-horizontal",2,"margin-top","15px",3,"formGroup"],[1,"form-group","row"],[1,"col-sm-3","form-control-label",2,"margin-left","-12px"],[1,"col-sm-5"],["type","text","placeholder","NAME","formControlName","name",1,"form-control"],["customerName",""],["class","invalid-feedback d-block",4,"ngIf"],["type","text","placeholder","ADDRESS","formControlName","address",1,"form-control"],["type","text","placeholder","PANNO","formControlName","pan","maxlength","9","minlength","9",1,"form-control",3,"keypress"],["type","text","placeholder","PHONE NO","formControlName","phoneNo",1,"form-control"],["type","text","placeholder","MOBILE NO","formControlName","mobNo","maxlength","10","minlength","10",1,"form-control",3,"keypress"],["class","form-group row",4,"ngIf"],["type","email","placeholder","EMAIL","formControlName","email",1,"form-control"],["formControlName","STATUS",1,"form-control",2,"padding","0px 5px"],["value","1"],["value","0"],["formControlName","SCHEMEID",1,"form-control",2,"padding","0px 5px"],[4,"ngFor","ngForOf"],[1,"invalid-feedback","d-block"],[4,"ngIf"],["formControlName","MOBILENO_REG_IN",1,"form-control",2,"padding","0px 5px"],["value",""],["value","VIBER"],["value","WHATSAPP"],[3,"ngValue"],["type","checkbox","id","createMember","formControlName","createMember",1,"form-control",2,"height","59%","width","5%",3,"change"],[1,"form-control-label",2,"width","100%","margin-top","-3%","margin-left","6%"],[1,"col-sm-3"]],template:function(s,b){1&s&&n.YNc(0,V,71,14,"div",0),2&s&&n.Q6J("ngIf",b.isActive)},dependencies:[Z.sg,Z.O5,R._Y,R.YN,R.Kr,R.Fj,R.Wl,R.EJ,R.JJ,R.JL,R.wO,R.nD,R.sg,R.u],styles:[".customer_container[_ngcontent-%COMP%]{position:fixed!important;transform:translate(-50px,-50px);background:#ffffff;z-index:99999;width:60%;top:14.5%;left:22%;border-radius:.65rem}.card[_ngcontent-%COMP%]{box-shadow:#00000026 0 2px 8px;border-radius:.65rem}.page-title[_ngcontent-%COMP%]{text-align:center}.form-control[_ngcontent-%COMP%]{font-size:12px;height:25px}.button-group[_ngcontent-%COMP%]{position:absolute;right:3%;top:3%}.card-body[_ngcontent-%COMP%]{line-height:.4rem}.custom-asset-dropdown[_ngcontent-%COMP%]    {line-height:13px;font-size:14px}.selectbox[_ngcontent-%COMP%]{padding:0 8px}"]}),d})()},9267:(re,q,m)=>{m.d(q,{r:()=>ie});var n=m(718),R=m(53074),K=m(67311),G=m(87584),O=m(14970),U=m(67297),I=m(1298),Z=m(35757);const j=function(){return{width:"80px"}},e=function(){return{width:"118px"}};function Y(P,V){if(1&P&&(n.TgZ(0,"th",21),n._uU(1,"Dis%"),n.qZA()),2&P){const l=n.oxw(2);n.Q6J("ngStyle",1==l.masterService.is_PurchaseOrder?n.DdM(1,j):n.DdM(2,e))}}function Q(P,V){if(1&P&&(n.TgZ(0,"th",21),n._uU(1,"Dis Amt"),n.qZA()),2&P){const l=n.oxw(2);n.Q6J("ngStyle",1==l.masterService.is_PurchaseOrder?n.DdM(1,j):n.DdM(2,e))}}function W(P,V){if(1&P&&(n.TgZ(0,"th",21),n._uU(1,"Net Rate"),n.qZA()),2&P){const l=n.oxw(2);n.Q6J("ngStyle",1==l.masterService.is_PurchaseOrder?n.DdM(1,j):n.DdM(2,e))}}function H(P,V){if(1&P){const l=n.EpF();n.TgZ(0,"td",31)(1,"input",42),n.NdJ("ngModelChange",function(u){n.CHM(l);const s=n.oxw().$implicit;return n.KtG(s.DISCOUNT_RATE=u)})("change",function(){n.CHM(l);const u=n.oxw().index,s=n.oxw(2);return n.KtG(s.DiscountPercentChange(u))})("keyup.Tab",function(){n.CHM(l);const u=n.oxw().index,s=n.oxw(2);return n.KtG(s.DiscountPercentChange(u))})("keyup.Enter",function(){n.CHM(l);const u=n.oxw().index,s=n.oxw(2);return n.KtG(s.DiscountPercentChange(u))}),n.qZA()()}if(2&P){const l=n.oxw().$implicit;n.xp6(1),n.Q6J("ngModel",l.DISCOUNT_RATE)}}function J(P,V){if(1&P){const l=n.EpF();n.TgZ(0,"td",31)(1,"input",48),n.NdJ("ngModelChange",function(u){n.CHM(l);const s=n.oxw().$implicit;return n.KtG(s.DISCOUNT_AMOUNT=u)}),n.qZA()()}if(2&P){const l=n.oxw().$implicit;n.xp6(1),n.Q6J("ngModel",l.DISCOUNT_AMOUNT)}}function y(P,V){if(1&P){const l=n.EpF();n.TgZ(0,"td",31)(1,"input",48),n.NdJ("ngModelChange",function(u){n.CHM(l);const s=n.oxw().$implicit;return n.KtG(s.NET_RATE=u)}),n.qZA()()}if(2&P){const l=n.oxw().$implicit;n.xp6(1),n.Q6J("ngModel",l.NET_RATE)}}const x=function(){return{width:"150px"}},L=function(){return{width:"165px"}};function h(P,V){if(1&P){const l=n.EpF();n.TgZ(0,"tr")(1,"td",29)(2,"label",30),n._uU(3),n.qZA()(),n.TgZ(4,"td",31)(5,"input",32),n.NdJ("ngModelChange",function(u){const b=n.CHM(l).$implicit;return n.KtG(b.MENUCODE=u)}),n.qZA()(),n.TgZ(6,"td",33)(7,"input",34),n.NdJ("ngModelChange",function(u){const b=n.CHM(l).$implicit;return n.KtG(b.DESCA=u)}),n.qZA()(),n.TgZ(8,"td",35)(9,"input",32),n.NdJ("ngModelChange",function(u){const b=n.CHM(l).$implicit;return n.KtG(b.UNIT=u)}),n.qZA()(),n.TgZ(10,"td",36)(11,"input",37),n.NdJ("ngModelChange",function(u){const b=n.CHM(l).$implicit;return n.KtG(b.RATE=u)}),n.qZA()(),n.TgZ(12,"td",38)(13,"input",39),n.NdJ("ngModelChange",function(u){const b=n.CHM(l).$implicit;return n.KtG(b.ORDERQTY=u)}),n.qZA()(),n.TgZ(14,"td",40)(15,"input",41),n.NdJ("ngModelChange",function(u){const b=n.CHM(l).$implicit;return n.KtG(b.DELIVERQTY=u)})("change",function(){const s=n.CHM(l).index,b=n.oxw(2);return n.KtG(b.ValidateDeliverQty(s))})("keyup.Tab",function(){const s=n.CHM(l).index,b=n.oxw(2);return n.KtG(b.ValidateDeliverQty(s))})("keyup.Enter",function(){const s=n.CHM(l).index,b=n.oxw(2);return n.KtG(b.ValidateDeliverQty(s))}),n.qZA()(),n.TgZ(16,"td",31)(17,"input",42),n.NdJ("ngModelChange",function(u){const b=n.CHM(l).$implicit;return n.KtG(b.DELIVERRATE=u)})("change",function(){const s=n.CHM(l).index,b=n.oxw(2);return n.KtG(b.ValidateDeliverRate(s))})("keyup.Tab",function(){const s=n.CHM(l).index,b=n.oxw(2);return n.KtG(b.ValidateDeliverRate(s))})("keyup.Enter",function(){const s=n.CHM(l).index,b=n.oxw(2);return n.KtG(b.ValidateDeliverRate(s))}),n.qZA()(),n.YNc(18,H,2,1,"td",43),n.YNc(19,J,2,1,"td",43),n.YNc(20,y,2,1,"td",43),n.TgZ(21,"td",44)(22,"input",45),n.NdJ("ngModelChange",function(u){const b=n.CHM(l).$implicit;return n.KtG(b.AMOUNT=u)}),n.qZA()(),n.TgZ(23,"td",46)(24,"input",47),n.NdJ("ngModelChange",function(u){const b=n.CHM(l).$implicit;return n.KtG(b.MFGDATE=u)}),n.qZA()(),n.TgZ(25,"td",46)(26,"input",47),n.NdJ("ngModelChange",function(u){const b=n.CHM(l).$implicit;return n.KtG(b.EXPIRYDATE=u)}),n.qZA()()()}if(2&P){const l=V.$implicit,d=V.index,u=n.oxw(2);n.xp6(3),n.Oqu(d+1),n.xp6(2),n.Q6J("ngModel",l.MENUCODE),n.xp6(2),n.Q6J("ngModel",l.DESCA),n.xp6(2),n.Q6J("ngModel",l.UNIT),n.xp6(2),n.Q6J("ngModel",l.RATE),n.xp6(2),n.Q6J("ngModel",l.ORDERQTY),n.xp6(2),n.Q6J("ngModel",l.DELIVERQTY),n.xp6(2),n.Q6J("ngModel",l.DELIVERRATE),n.xp6(1),n.Q6J("ngIf",u.masterService.is_PurchaseOrder),n.xp6(1),n.Q6J("ngIf",u.masterService.is_PurchaseOrder),n.xp6(1),n.Q6J("ngIf",u.masterService.is_PurchaseOrder),n.xp6(2),n.Q6J("ngModel",l.AMOUNT)("readonly",!0),n.xp6(2),n.Q6J("ngStyle",1==u.masterService.is_PurchaseOrder?n.DdM(17,x):n.DdM(18,L))("ngModel",l.MFGDATE),n.xp6(2),n.Q6J("ngStyle",1==u.masterService.is_PurchaseOrder?n.DdM(19,x):n.DdM(20,L))("ngModel",l.EXPIRYDATE)}}const N=function(){return{width:"45px"}},S=function(){return{width:"0px"}},A=function(){return{width:"60px"}},B=function(){return{width:"100px"}},X=function(){return{width:"65px"}},$=function(){return{width:"55px"}},z=function(){return{width:"70px"}},ee=function(){return{width:"180px"}};function ne(P,V){if(1&P){const l=n.EpF();n.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h4",5),n._uU(5),n.qZA()()(),n.TgZ(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",7)(10,"div",9)(11,"label"),n._uU(12,"Order No. :"),n.qZA(),n.TgZ(13,"label",10),n._uU(14),n.qZA()()(),n.TgZ(15,"div",7)(16,"div",9)(17,"label"),n._uU(18,"Order Date :"),n.qZA(),n.TgZ(19,"label",10),n._uU(20),n.qZA()()()(),n.TgZ(21,"div",8)(22,"div",7)(23,"div")(24,"label"),n._uU(25,"Supplier Name :"),n.qZA(),n.TgZ(26,"label",11),n._uU(27),n.qZA()()()(),n.TgZ(28,"div",8)(29,"div",7)(30,"div",9)(31,"input",12),n.NdJ("ngModelChange",function(u){n.CHM(l);const s=n.oxw();return n.KtG(s.sameQty=u)})("change",function(){n.CHM(l);const u=n.oxw();return n.KtG(u.QtySameAsOrderQty(u.sameQty))}),n.qZA(),n.TgZ(32,"label",10),n._uU(33,"Qty Same as Order Qty"),n.qZA()()(),n.TgZ(34,"div",7)(35,"div",9)(36,"input",12),n.NdJ("ngModelChange",function(u){n.CHM(l);const s=n.oxw();return n.KtG(s.sameRate=u)})("change",function(){n.CHM(l);const u=n.oxw();return n.KtG(u.QtySameAsOrderRate(u.sameRate))}),n.qZA(),n.TgZ(37,"label",10),n._uU(38,"Rate Same as Order Rate"),n.qZA()()()()(),n.TgZ(39,"table",13)(40,"thead",14)(41,"tr")(42,"th",15),n._uU(43,"SI NO "),n.qZA(),n.TgZ(44,"th",16),n._uU(45,"Item Code"),n.qZA(),n.TgZ(46,"th",17),n._uU(47,"Item Name"),n.qZA(),n.TgZ(48,"th",18),n._uU(49,"Unit"),n.qZA(),n.TgZ(50,"th",19),n._uU(51,"Order Rate"),n.qZA(),n.TgZ(52,"th",20),n._uU(53,"Order Qty"),n.qZA(),n.TgZ(54,"th",20),n._uU(55,"Deliver Qty"),n.qZA(),n.TgZ(56,"th",21),n._uU(57,"Rate"),n.qZA(),n.YNc(58,Y,2,3,"th",22),n.YNc(59,Q,2,3,"th",22),n.YNc(60,W,2,3,"th",22),n.TgZ(61,"th",23),n._uU(62,"Amount"),n.qZA(),n.TgZ(63,"th",24),n._uU(64,"Mfg Date"),n.qZA(),n.TgZ(65,"th",24),n._uU(66,"Exp Date"),n.qZA()()(),n.TgZ(67,"tbody",25),n.YNc(68,h,27,21,"tr",26),n.qZA()()(),n.TgZ(69,"div",27)(70,"button",28),n.NdJ("click",function(){n.CHM(l);const u=n.oxw();return n.KtG(u.OkCommand())}),n._uU(71,"Ok"),n.qZA(),n.TgZ(72,"button",28),n.NdJ("click",function(){n.CHM(l);const u=n.oxw();return n.KtG(u.hide())}),n._uU(73,"Cancel"),n.qZA()()()()}if(2&P){const l=n.oxw();n.xp6(5),n.Oqu(l.masterService.Popup_Heading),n.xp6(9),n.Oqu(l.masterService.PO_Voucherno),n.xp6(6),n.Oqu(l.masterService.PO_Date),n.xp6(7),n.Oqu(l.masterService.SupplierName),n.xp6(4),n.Q6J("ngModel",l.sameQty),n.xp6(5),n.Q6J("ngModel",l.sameRate),n.xp6(6),n.Q6J("ngStyle",1==l.masterService.is_PurchaseOrder?n.DdM(19,N):n.DdM(20,S)),n.xp6(2),n.Q6J("ngStyle",1==l.masterService.is_PurchaseOrder?n.DdM(21,A):n.DdM(22,B)),n.xp6(2),n.Q6J("ngStyle",1==l.masterService.is_PurchaseOrder?n.DdM(23,B):n.DdM(24,x)),n.xp6(2),n.Q6J("ngStyle",n.DdM(1==l.masterService.is_PurchaseOrder?25:26,X)),n.xp6(2),n.Q6J("ngStyle",1==l.masterService.is_PurchaseOrder?n.DdM(27,j):n.DdM(28,S)),n.xp6(2),n.Q6J("ngStyle",1==l.masterService.is_PurchaseOrder?n.DdM(29,$):n.DdM(30,S)),n.xp6(2),n.Q6J("ngStyle",1==l.masterService.is_PurchaseOrder?n.DdM(31,A):n.DdM(32,S)),n.xp6(2),n.Q6J("ngStyle",1==l.masterService.is_PurchaseOrder?n.DdM(33,z):n.DdM(34,e)),n.xp6(2),n.Q6J("ngIf",l.masterService.is_PurchaseOrder),n.xp6(1),n.Q6J("ngIf",l.masterService.is_PurchaseOrder),n.xp6(1),n.Q6J("ngIf",l.masterService.is_PurchaseOrder),n.xp6(1),n.Q6J("ngStyle",1==l.masterService.is_PurchaseOrder?n.DdM(35,j):n.DdM(36,ee)),n.xp6(7),n.Q6J("ngForOf",l._trnMainService.TrnMainObj.PODetailList)}}let ie=(()=>{class P{constructor(l,d,u,s,b){this.masterService=l,this.alertService=d,this._trnMainService=u,this.spinnerService=s,this._authService=b,this.onLoadPO=new n.vpe,this.userSetting=b.getSetting()}ngOnInit(){}show(){this.isActive=!0}hide(){this.isActive=!1}CalculateAmount(l){this._trnMainService.TrnMainObj.PODetailList[l].DELIVERRATE&&(this._trnMainService.TrnMainObj.PODetailList[l].AMOUNT=this._trnMainService.TrnMainObj.PODetailList[l].DELIVERQTY*this._trnMainService.TrnMainObj.PODetailList[l].DELIVERRATE)}ValidateDeliverRate(l){if(this._trnMainService.TrnMainObj.PODetailList[l].DELIVERRATE&&this._trnMainService.TrnMainObj.PODetailList[l].DELIVERRATE<this._trnMainService.TrnMainObj.PODetailList[l].RATE){if(!confirm("Deliver Rate is less than Order Rate.Do you want to continue?"))return;1==this.masterService.is_PurchaseOrder&&1===this.userSetting.HALTSPRICECHAGEDASKED&&(this._trnMainService.showPriceChangeDetail=!0,this._trnMainService.showPriceChangeDetailINDisc=!0,this._trnMainService.getAllSelingPriceOfItem(l)),this.CalculateAmount(l)}if(this._trnMainService.TrnMainObj.PODetailList[l].DELIVERRATE>this._trnMainService.TrnMainObj.PODetailList[l].RATE)return this.alertService.info("Deliver Rate is greater than Order Rate"),void this.alertService.emitShowHideSubject.subscribe(d=>{setTimeout(()=>{this._trnMainService.TrnMainObj.PODetailList[l].DELIVERRATE=0,this.CalculateAmount(l)},0)});this.CalculateAmount(l)}ValidateDeliverQty(l){if(this._trnMainService.TrnMainObj.PODetailList[l].DELIVERQTY&&this._trnMainService.TrnMainObj.PODetailList[l].DELIVERQTY<this._trnMainService.TrnMainObj.PODetailList[l].ORDERQTY){if(!confirm("Deliver Qty is less than Order Qty.Do you want to continue?"))return;this.CalculateAmount(l)}if(this._trnMainService.TrnMainObj.PODetailList[l].DELIVERQTY>this._trnMainService.TrnMainObj.PODetailList[l].ORDERQTY)return this.alertService.info("Deliver Qty is greater than Order Qty"),void this.alertService.emitShowHideSubject.subscribe(d=>{setTimeout(()=>{this._trnMainService.TrnMainObj.PODetailList[l].DELIVERQTY=0,this.CalculateAmount(l)},0)});this.CalculateAmount(l)}OkCommand(){this._trnMainService.TrnMainObj.PODetailList.forEach(u=>u.MCODE=u.MCODE),this._trnMainService.TrnMainObj.PODetailList.forEach(u=>u.VCHRNO=this.masterService.PO_Voucherno);let l=this._trnMainService.TrnMainObj.PODetailList.filter(u=>u.DELIVERRATE==u.RATE);if(l.length>0)for(let u in l)if(l[u].DELIVERRATE==l[u].DELIVERRATE&&!confirm(`Same rate detected in ${l[u].DESCA} . Do you want to continue?`))return;let d=this._trnMainService.TrnMainObj.PODetailList.filter(u=>0==u.DELIVERRATE||null==u.DELIVERRATE||null==u.DELIVERRATE);if(d.length>0){for(let s in d)if(!confirm(`Rate not entered in ${d[s].DESCA} . Do you want to assign it with Order Rate?`))return;d.forEach(s=>s.DELIVERRATE=s.RATE),d.filter(s=>0==s.DELIVERQTY||null==s.DELIVERQTY||null==s.DELIVERQTY).length>0&&d.forEach(s=>s.DELIVERQTY=s.ORDERQTY),d.forEach(s=>s.AMOUNT=s.DELIVERRATE*s.DELIVERQTY)}this.onLoadPO.emit(this._trnMainService.TrnMainObj.PODetailList)}QtySameAsOrderQty(l){1==l?(this._trnMainService.TrnMainObj.PODetailList.forEach(d=>d.DELIVERQTY=d.ORDERQTY),this._trnMainService.TrnMainObj.PODetailList.forEach(d=>d.AMOUNT=d.DELIVERQTY*d.DELIVERRATE)):(this._trnMainService.TrnMainObj.PODetailList.forEach(d=>d.DELIVERQTY=0),this._trnMainService.TrnMainObj.PODetailList.forEach(d=>d.AMOUNT=d.DELIVERQTY*d.DELIVERRATE))}QtySameAsOrderRate(l){1==l?(this._trnMainService.TrnMainObj.PODetailList.forEach(d=>d.DELIVERRATE=d.RATE),this._trnMainService.TrnMainObj.PODetailList.forEach(d=>d.AMOUNT=d.DELIVERQTY*d.DELIVERRATE)):(this._trnMainService.TrnMainObj.PODetailList.forEach(d=>d.DELIVERRATE=0),this._trnMainService.TrnMainObj.PODetailList.forEach(d=>d.AMOUNT=d.DELIVERQTY*d.DELIVERRATE))}DiscountPercentChange(l){this._trnMainService.TrnMainObj.PODetailList[l].DISCOUNT_AMOUNT=this._trnMainService.TrnMainObj.PODetailList[l].DISCOUNT_RATE/100*this._trnMainService.TrnMainObj.PODetailList[l].DELIVERRATE,this._trnMainService.TrnMainObj.PODetailList[l].NET_RATE=this._trnMainService.TrnMainObj.PODetailList[l].DELIVERRATE-this._trnMainService.TrnMainObj.PODetailList[l].DISCOUNT_RATE/100*this._trnMainService.TrnMainObj.PODetailList[l].DELIVERRATE,this._trnMainService.TrnMainObj.PODetailList[l].AMOUNT=this._trnMainService.TrnMainObj.PODetailList[l].NET_RATE*this._trnMainService.TrnMainObj.PODetailList[l].DELIVERQTY}}return P.\u0275fac=function(l){return new(l||P)(n.Y36(R.P),n.Y36(K.c),n.Y36(G.p),n.Y36(O.V),n.Y36(U.e))},P.\u0275cmp=n.Xpm({type:P,selectors:[["load-purchase-order"]],outputs:{onLoadPO:"onLoadPO"},decls:1,vars:1,consts:[["class","purchaseorder_container","role","document","style","max-width: 100%; max-height: 500px; overflow:hidden",4,"ngIf"],["role","document",1,"purchaseorder_container",2,"max-width","100%","max-height","500px","overflow","hidden"],[1,"modal-content",2,"padding","14px 16px 10px 16px","margin","0","width","90vw","height","70vh"],[1,"modal-header","row"],[1,"col-md-7"],[1,"modal-title","pull-right"],[1,"table-responsive"],[1,"row"],[1,"col-md-4"],[1,"col"],[1,"label-class"],[2,"width","200px !important"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"table","columformat-class",2,"display","grid","font-size","12px"],[2,"background-color","rgb(184, 184, 184)"],[2,"width","80px",3,"ngStyle"],["scope","col",2,"width","100px","text-align","center",3,"ngStyle"],["scope","col",2,"width","150px","text-align","center",3,"ngStyle"],["scope","col",2,"width","65px","text-align","center",3,"ngStyle"],["scope","col",2,"width","120px","text-align","center",3,"ngStyle"],["scope","col",2,"width","90px","text-align","center",3,"ngStyle"],["scope","col",2,"width","118px","text-align","center",3,"ngStyle"],["scope","col","style","width: 118px; text-align: center;",3,"ngStyle",4,"ngIf"],["scope","col",2,"width","180px","text-align","center",3,"ngStyle"],["scope","col",2,"width","150px","text-align","center"],[2,"font-size","17px","height","190px"],[4,"ngFor","ngForOf"],[1,"modal-footer",2,"height","20px"],["type","button",1,"btn","btn-primary",3,"click"],[1,"columformat-class",2,"width","60px"],[2,"font-size","12px","width","10px"],[1,"columformat-class",2,"width","120px","line-height","32px"],["type","text",1,"form-control",2,"height","26px","margin-top","2px","font-size","12px",3,"ngModel","ngModelChange"],[1,"columformat-class",2,"width","150px","line-height","32px"],["type","text",1,"form-control",2,"color","black","height","26px","margin-top","2px","font-size","12px",3,"ngModel","ngModelChange"],[1,"columformat-class",2,"width","85px","line-height","32px"],[1,"columformat-class",2,"width","110px","line-height","32px"],["type","text",1,"form-control","number-field",2,"height","26px","margin-top","2px","font-size","12px",3,"ngModel","ngModelChange"],[1,"columformat-class",2,"width","90px","line-height","32px","font-size","12px"],["type","number",1,"form-control",2,"height","26px","margin-top","2px","font-size","12px",3,"ngModel","ngModelChange"],[1,"columformat-class",2,"width","90px","line-height","32px"],["type","number",1,"form-control",2,"height","26px","margin-top","2px","font-size","12px",3,"ngModel","ngModelChange","change","keyup.Tab","keyup.Enter"],["type","number",1,"form-control","number-field",2,"height","26px","margin-top","2px","font-size","12px",3,"ngModel","ngModelChange","change","keyup.Tab","keyup.Enter"],["style","width: 120px;line-height: 32px; ","class","columformat-class",4,"ngIf"],[1,"columformat-class",2,"width","180px","line-height","32px"],["type","number",1,"form-control","number-field",2,"height","26px","margin-top","2px","font-size","12px",3,"ngModel","readonly","ngModelChange"],[1,"columformat-class",2,"line-height","32px"],["type","month","max","2999-12-31",1,"form-control",2,"height","26px","margin-top","2px","font-size","12px","width","165px",3,"ngStyle","ngModel","ngModelChange"],["type","number",1,"form-control","number-field",2,"height","26px","margin-top","2px","font-size","12px",3,"ngModel","ngModelChange"]],template:function(l,d){1&l&&n.YNc(0,ne,74,37,"div",0),2&l&&n.Q6J("ngIf",d.isActive)},dependencies:[I.sg,I.O5,I.PC,Z.Fj,Z.wV,Z.Wl,Z.JJ,Z.On],styles:["input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{border:1px solid #cbcbcb;border-radius:3px;height:23px;color:#000}","td[_ngcontent-%COMP%] {\n        border: 1px solid #e6e6e6;\n        padding: 1px !important;\n    }\n    \n    input[_ngcontent-%COMP%] {\n        padding: 8px;\n    }\n    \n    .form-group[_ngcontent-%COMP%] {\n        margin-bottom: 0rem;\n    }\n    \n    .purchaseorder_container[_ngcontent-%COMP%] {\n        position: fixed !important;\n        transform: translate(0px, -35px);\n        background: #ffffff;\n        z-index: 99999;\n        width: 90%;\n        top: 22.5%;\n        left: 5%;\n    }\n    \n    .label-class[_ngcontent-%COMP%] {\n        width: 135px;\n    }\n    \n    .btn[_ngcontent-%COMP%] {\n        margin-top: 60px;\n    }\n\n    .number-field[_ngcontent-%COMP%]{\n        text-align: right;\n    }"]}),P})()},90253:(re,q,m)=>{m.d(q,{c:()=>y});var n=m(718),R=m(53074),K=m(67311),G=m(87584),O=m(14970),U=m(1298),I=m(35757);const Z=["partyGroup"];function j(x,L){if(1&x&&(n.TgZ(0,"option",41),n._uU(1),n.qZA()),2&x){const h=L.$implicit;n.s9C("value",h.ACID),n.xp6(1),n.Oqu(h.ACNAME)}}function e(x,L){if(1&x&&(n.TgZ(0,"option",41),n._uU(1),n.qZA()),2&x){const h=L.$implicit;n.s9C("value",h.OrgTypeCode),n.xp6(1),n.Oqu(h.OrgTypeName)}}function Y(x,L){if(1&x){const h=n.EpF();n.TgZ(0,"div",18)(1,"div",25)(2,"label",30),n._uU(3,"PARTY CAT: "),n.qZA()(),n.TgZ(4,"div",42)(5,"select",43),n.NdJ("ngModelChange",function(S){n.CHM(h);const A=n.oxw(2);return n.KtG(A.partymasterObj.GEO=S)}),n.YNc(6,e,2,2,"option",17),n.qZA()()()}if(2&x){const h=n.oxw(2);n.xp6(5),n.Q6J("ngModel",h.partymasterObj.GEO),n.xp6(1),n.Q6J("ngForOf",h.GeoList)}}function Q(x,L){if(1&x&&(n.TgZ(0,"option",41),n._uU(1),n.qZA()),2&x){const h=L.$implicit;n.s9C("value",h.AREANAME),n.xp6(1),n.Oqu(h.AREANAME)}}function W(x,L){if(1&x){const h=n.EpF();n.TgZ(0,"div",18)(1,"div",25)(2,"label",30),n._uU(3,"AREA:"),n.qZA()(),n.TgZ(4,"div",44)(5,"input",45),n.NdJ("change",function(S){n.CHM(h);const A=n.oxw(2);return n.KtG(A.onChangeArea(S))})("ngModelChange",function(S){n.CHM(h);const A=n.oxw(2);return n.KtG(A.partymasterObj.CITY=S)}),n.qZA(),n.TgZ(6,"datalist",46),n.YNc(7,Q,2,2,"option",17),n.qZA()()()}if(2&x){const h=n.oxw(2);n.xp6(5),n.Q6J("ngModel",h.partymasterObj.CITY),n.xp6(2),n.Q6J("ngForOf",h.areaList)}}function H(x,L){if(1&x){const h=n.EpF();n.TgZ(0,"div",18),n._UZ(1,"div",25),n.TgZ(2,"div",31)(3,"input",47),n.NdJ("ngModelChange",function(S){n.CHM(h);const A=n.oxw(2);return n.KtG(A.createMember=S)}),n.qZA(),n.TgZ(4,"label",48),n._uU(5,"Create Customer A/C as Member Also"),n.qZA()()()}if(2&x){const h=n.oxw(2);n.xp6(3),n.Q6J("ngModel",h.createMember)("disabled","V"==h.partymasterObj.PType)}}function J(x,L){if(1&x){const h=n.EpF();n.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h4",5),n._uU(5,"PARTY MASTER"),n.qZA()(),n.TgZ(6,"div",6)(7,"button",7),n.NdJ("click",function(){n.CHM(h);const S=n.oxw();return n.KtG(S.cancelPartyPopup())}),n._uU(8,"Cancel"),n.qZA(),n.TgZ(9,"button",8),n.NdJ("click",function(){n.CHM(h);const S=n.oxw();return n.KtG(S.savePartyMaster())}),n._uU(10," Save "),n.qZA()()(),n.TgZ(11,"div",9)(12,"div",10)(13,"div")(14,"div",11)(15,"div",12)(16,"label",13),n._uU(17,"PARTY GROUP:"),n.qZA()(),n.TgZ(18,"div",14)(19,"select",15,16),n.NdJ("ngModelChange",function(S){n.CHM(h);const A=n.oxw();return n.KtG(A.partymasterObj.ACID=S)}),n.YNc(21,j,2,2,"option",17),n.qZA()()(),n.TgZ(22,"div",18)(23,"div",12)(24,"label",19),n._uU(25,"PARTY NAME:"),n.qZA()(),n.TgZ(26,"div",20)(27,"input",21),n.NdJ("ngModelChange",function(S){n.CHM(h);const A=n.oxw();return n.KtG(A.partymasterObj.ACNAME=S)}),n.qZA()()(),n.TgZ(28,"div",18)(29,"div",12)(30,"label",22),n._uU(31,"ADDRESS:"),n.qZA()(),n.TgZ(32,"div",20)(33,"textarea",23),n.NdJ("ngModelChange",function(S){n.CHM(h);const A=n.oxw();return n.KtG(A.partymasterObj.ADDRESS=S)}),n.qZA()()()(),n.TgZ(34,"div",9)(35,"div",24)(36,"div",18)(37,"div",25)(38,"label",26),n._uU(39,"VAT NO:"),n.qZA()(),n.TgZ(40,"div",27)(41,"input",28),n.NdJ("keypress",function(S){n.CHM(h);const A=n.oxw();return n.KtG(A.keyPress(S))})("ngModelChange",function(S){n.CHM(h);const A=n.oxw();return n.KtG(A.partymasterObj.VATNO=S)}),n.qZA()()(),n.YNc(42,Y,7,2,"div",29),n.YNc(43,W,8,2,"div",29),n.TgZ(44,"div",18)(45,"div",25)(46,"label",30),n._uU(47," CREDIT LIMIT:"),n.qZA()(),n.TgZ(48,"div",31)(49,"input",21),n.NdJ("ngModelChange",function(S){n.CHM(h);const A=n.oxw();return n.KtG(A.partymasterObj.CRLIMIT=S)}),n.qZA()()(),n.TgZ(50,"div",18)(51,"div",25)(52,"label",30),n._uU(53,"CREDIT DAYS:"),n.qZA()(),n.TgZ(54,"div",31)(55,"input",21),n.NdJ("ngModelChange",function(S){n.CHM(h);const A=n.oxw();return n.KtG(A.partymasterObj.CRPERIOD=S)}),n.qZA()()(),n.YNc(56,H,6,2,"div",29),n.qZA(),n.TgZ(57,"div",32)(58,"fieldset",33)(59,"legend",34),n._uU(60,"Party Type:"),n.qZA(),n.TgZ(61,"input",35),n.NdJ("ngModelChange",function(S){n.CHM(h);const A=n.oxw();return n.KtG(A.partymasterObj.PType=S)}),n.qZA(),n.TgZ(62,"label"),n._uU(63,"\xa0Customer"),n.qZA(),n._UZ(64,"br"),n.TgZ(65,"input",36),n.NdJ("ngModelChange",function(S){n.CHM(h);const A=n.oxw();return n.KtG(A.partymasterObj.PType=S)}),n.qZA(),n.TgZ(66,"label"),n._uU(67,"\xa0Supplier"),n.qZA()()()()(),n.TgZ(68,"div",12)(69,"div",18)(70,"label",37),n._uU(71,"PARTY CODE:"),n.qZA(),n.TgZ(72,"input",38),n.NdJ("ngModelChange",function(S){n.CHM(h);const A=n.oxw();return n.KtG(A.partymasterObj.ACCODE=S)}),n.qZA()(),n.TgZ(73,"div",18)(74,"label",39),n._uU(75,"Mobile No.:"),n.qZA(),n.TgZ(76,"input",40),n.NdJ("ngModelChange",function(S){n.CHM(h);const A=n.oxw();return n.KtG(A.partymasterObj.MOBILE=S)})("keypress",function(S){n.CHM(h);const A=n.oxw();return n.KtG(A.keyPress(S))}),n.qZA()()()()()()}if(2&x){const h=n.oxw();n.xp6(19),n.Q6J("ngModel",h.partymasterObj.ACID),n.xp6(2),n.Q6J("ngForOf",h.PartyGroupPartyMaster),n.xp6(6),n.Q6J("ngModel",h.partymasterObj.ACNAME),n.xp6(6),n.Q6J("ngModel",h.partymasterObj.ADDRESS),n.xp6(8),n.Q6J("ngModel",h.partymasterObj.VATNO),n.xp6(1),n.Q6J("ngIf","pro"==h.AppMode),n.xp6(1),n.Q6J("ngIf","pro"==h.AppMode),n.xp6(6),n.Q6J("ngModel",h.partymasterObj.CRLIMIT),n.xp6(6),n.Q6J("ngModel",h.partymasterObj.CRPERIOD),n.xp6(1),n.Q6J("ngIf",1==h.masterService.userSetting.CREATE_CPROFILE_AS_MEMBER&&1==h.masterService.isSalesPage),n.xp6(5),n.Q6J("ngModel",h.partymasterObj.PType)("disabled",0==h.masterService.isSalesPage),n.xp6(4),n.Q6J("ngModel",h.partymasterObj.PType)("disabled",1==h.masterService.isSalesPage),n.xp6(7),n.Q6J("ngModel",h.partymasterObj.ACCODE),n.xp6(4),n.Q6J("ngModel",h.partymasterObj.MOBILE)}}let y=(()=>{class x{constructor(h,N,S,A){this.masterService=h,this.alertService=N,this._trnMainService=S,this.spinnerService=A,this.PartyGroupPartyMaster=[],this.GeoList=[],this.areaList=[],this.partymasterObj={ACID:"",ACCODE:"",ACNAME:"",ADDRESS:"",VATNO:"",GEO:"",CRLIMIT:"",CRPERIOD:"",PType:"",MOBILE:""},this.newAccountDetails=[],this.onSaveParty=new n.vpe,this.partymasterObj.CRLIMIT=0,this.partymasterObj.CRPERIOD=0,"TI"==this._trnMainService.TrnMainObj.VoucherPrefix&&(this.partymasterObj.PType="C"),"PI"==this._trnMainService.TrnMainObj.VoucherPrefix&&(this.partymasterObj.PType="V"),this.masterService.getAreaDetail().subscribe(B=>{this.areaList=B.result}),this.masterService.getPartyGroupForQuickPartyMaster().subscribe(B=>{this.PartyGroupPartyMaster=B.result}),this.masterService.getGeoList().subscribe(B=>{"ok"==B.status&&(this.GeoList=B.result)}),1==this.masterService.userSetting.CREATE_CPROFILE_AS_MEMBER&&"C"==this.partymasterObj.PType&&(this.createMember=!0)}ngOnInit(){}resetPartyAccount(){this.partymasterObj.ACID="",this.partymasterObj.ACCODE="",this.partymasterObj.ACNAME="",this.partymasterObj.ADDRESS="",this.partymasterObj.VATNO="",this.partymasterObj.GEO="",this.partymasterObj.CITY="",this.partymasterObj.CRLIMIT=0,this.partymasterObj.CRPERIOD=0,this.partymasterObj.MOBILE="",this.partymasterObj.PType=1==this.masterService.isSalesPage?"C":"V"}savePartyMaster(){let h=Object.assign({},this.partymasterObj);if(h.PARENT=this.partymasterObj.ACID,h.CRLIMIT=this.partymasterObj.CRLIMIT?this.partymasterObj.CRLIMIT:0,h.CRPERIOD=this.partymasterObj.CRPERIOD?this.partymasterObj.CRPERIOD:0,h.CATEGORY=this.partymasterObj.GEO,h.ISACTIVE=1,h.PCL="pc002",null!=this.partymasterObj.CITY){let S=this.areaList.filter(A=>A.AREANAME.toUpperCase()==this.partymasterObj.CITY.toUpperCase());h.AREA_ID=S[0]?S[0].AREAID:null}""!=h.ACID?""!=h.ACNAME?""!=h.ADDRESS?("TI"==this._trnMainService.TrnMainObj.VoucherPrefix?(this.partymasterObj.PType="C",h.PType="C"):"PI"==this._trnMainService.TrnMainObj.VoucherPrefix&&(this.partymasterObj.PType="V",h.PType="V"),("V"!=h.PType||""!=h.VATNO||confirm("VAT NO. is empty!! Are you sure you want to continue ?"))&&(""==h.VATNO||9==h.VATNO.length?1!=this.masterService.userSetting.CREATE_CPROFILE_AS_MEMBER||1!=this.createMember||"C"!=h.PType||""!=h.MOBILE?""==h.MOBILE||10==h.MOBILE.length?("V"==this.partymasterObj.PType&&(this.createMember=!1),this.mode="add",this.spinnerService.show("Data is saving Please Wait.."),console.log("save party master",h),this.masterService.savePartyMaster(this.mode,h,this.createMember).subscribe(S=>{"ok"==S.status?"ProceedConfirmation"==S.result?confirm("Member is not Creadted on server.Do you want to Proced")?(this.createMember=!1,this.savePartyMaster()):this.spinnerService.hide():(this.cancelPartyPopup(),this.alertService.success("Data Saved Successfully"),this.spinnerService.hide(),setTimeout(()=>{this.alertService.hide()},500),this.onSaveParty.emit(S.result2)):(this.spinnerService.hide(),this.alertService.info("Error in Saving Data:"+S))},S=>{this.alertService.info(S.error),this.spinnerService.hide()})):alert("Mobile No. should be nine digit length!"):alert("Please Enter Mobile No. First!"):alert("VAT NO should be nine digit length!"))):alert("Please Enter Address First!"):alert("Please Enter Party Name First!"):alert("Please Select Party Group First!")}cancelPartyPopup(){this.isActive=!1,this.resetPartyAccount()}keyPress(h){const S=String.fromCharCode(h.charCode);/[0-9]/.test(S)||h.preventDefault()}onChangeArea(h){let N=h.target.value,S=[];null!=N&&(S=this.areaList.filter(A=>A.AREANAME.toUpperCase()==N.toUpperCase()),0==S.length&&confirm("Do you want to add new Area"))}show(){this.isActive=!0,setTimeout(()=>{this.partyGroup.nativeElement.focus()},10)}hide(){this.isActive=!1}}return x.\u0275fac=function(h){return new(h||x)(n.Y36(R.P),n.Y36(K.c),n.Y36(G.p),n.Y36(O.V))},x.\u0275cmp=n.Xpm({type:x,selectors:[["quick-party-master"]],viewQuery:function(h,N){if(1&h&&n.Gf(Z,5),2&h){let S;n.iGM(S=n.CRH())&&(N.partyGroup=S.first)}},outputs:{onSaveParty:"onSaveParty"},decls:1,vars:1,consts:[["class","party_container","role","document","style","max-width: 100%; max-height: 500px; overflow:hidden",4,"ngIf"],["role","document",1,"party_container",2,"max-width","100%","max-height","500px","overflow","hidden"],[1,"modal-content",2,"padding","14px 16px 10px 16px","margin","0","width","77vw","height","60vh"],[1,"modal-header","row"],[1,"col-md-7"],[1,"modal-title","pull-right"],[1,"col-md-5"],["type","button",1,"btn","btn-info","pull-right",2,"width","80px",3,"click"],["type","button","title","onSave",1,"btn","btn-info","pull-right",2,"margin-right","10px","width","80px","margin-top","15px",3,"click"],[1,"row"],[1,"col-md-8"],[1,"form-group","row",2,"margin-left","4px"],[1,"col-md-4"],[1,"pull-right","required",2,"font-weight","bold","text-align","right","margin-top","24px","width","92px"],[1,"col-md-8",2,"width","65%","margin-top","20px"],["id","partygroup",1,"form-control",2,"padding","0px 8px",3,"ngModel","ngModelChange"],["partyGroup",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","row"],[1,"pull-right","required",2,"font-weight","bold","text-align","right","margin-top","4px"],[1,"col-md-8",2,"width","65%","margin-top","4px"],["type","text",1,"form-control",2,"color","black",3,"ngModel","ngModelChange"],[1,"pull-right","required",2,"margin-top","4px","text-align","right","font-weight","bold"],["rows","2","cols","50",1,"form-control",2,"width","100%","height","40px",3,"ngModel","ngModelChange"],[1,"col-md-9",2,"padding","0px"],[1,"col-md-5",2,"padding","0px"],[1,"pull-right","required",2,"margin-top","7px","text-align","right","font-weight","bold"],[1,"col-md-7",2,"width","54%","margin-top","9px","padding-left","29px"],["type","text","placeholder","Enter 9 digit vat no.","required","","maxlength","9",1,"form-control",2,"color","black",3,"ngModel","keypress","ngModelChange"],["class","form-group row",4,"ngIf"],[1,"pull-right",2,"margin-top","4px","text-align","right","font-weight","bold"],[1,"col-md-7",2,"width","54%","margin-top","4px","padding-left","30px"],[1,"col-md-3"],[2,"width","125px","height","100px","margin-top","5px"],[2,"font-size","13px","font-weight","bold","text-align","center"],["type","radio","value","C",2,"padding-right","15px","height","13px",3,"ngModel","disabled","ngModelChange"],["type","radio","value","V",2,"padding-right","15px","height","13px",3,"ngModel","disabled","ngModelChange"],[1,"label","required",2,"margin-top","20px","font-weight","bold"],["type","text",1,"form-control",2,"color","black","width","60%","margin-top","20px",3,"ngModel","ngModelChange"],[1,"label",2,"margin-top","20px","font-weight","bold"],["type","text","maxlength","10",1,"form-control",2,"color","black","width","60%","margin-top","20px",3,"ngModel","ngModelChange","keypress"],[3,"value"],[1,"col-md-7",2,"width","54%","margin-top","5px","padding-left","29px"],[1,"form-control","form-control-sm",2,"padding","0px 8px",3,"ngModel","ngModelChange"],[1,"col-md-7",2,"width","54%","margin-top","4px","padding-left","29px"],["type","text","name","product","list","areaName",1,"form-control",3,"ngModel","change","ngModelChange"],["id","areaName"],["type","checkbox","id","createMember",1,"form-control",2,"height","59%","width","5%",3,"ngModel","disabled","ngModelChange"],[1,"form-control-label",2,"width","100%","margin-top","-12%","margin-left","7%"]],template:function(h,N){1&h&&n.YNc(0,J,77,16,"div",0),2&h&&n.Q6J("ngIf",N.isActive)},dependencies:[U.sg,U.O5,I.YN,I.Kr,I.Fj,I.Wl,I.EJ,I._,I.JJ,I.Q7,I.nD,I.On],styles:["input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{border:1px solid #cbcbcb;border-radius:3px;height:23px;color:#000}",'td[_ngcontent-%COMP%] {\n    border: 1px solid #e6e6e6;\n  }\n\n  input[_ngcontent-%COMP%] {\n    padding: 8px;\n  }\n\n  .form-group[_ngcontent-%COMP%] {\n    margin-bottom: 0rem;\n  }\n\n  .party_container[_ngcontent-%COMP%] {\n    position: fixed !important;\n    transform: translate(0px, -35px);\n    background: #ffffff;\n    z-index: 99999;\n    width: 77%;\n    top: 22.5%;\n    left: 10%;\n  }\n  .required[_ngcontent-%COMP%]:after {\n  content:" *";\n  color: red;\n}']}),x})()}}]);