"use strict";(self.webpackChunkimserp=self.webpackChunkimserp||[]).push([[3661],{93661:(ke,C,a)=>{a.r(C),a.d(C,{ManualStockEntryModule:()=>ye});var d=a(92752),O=a(53181),w=a(82738),B=a(46543),D=a(72533),P=a(12640),U=a(59629),Z=a(88465),x=a(55618),f=a(48083),u=a(28698),H=a(60716),g=a(68328),T=a(42326),y=a(40216),R=a(92340),e=a(66274),L=a(53074),c=a(7587),p=a(57453),_=a(67311),I=a(14970),V=a(87584),Q=a(94534),J=a(11192),N=a(91772),j=a(67297);const G=["genericGridview"],W=["genericGridedit"],M=function(){return{opacity:"50%"}};function F(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"input",17),e.NdJ("ngModelChange",function(i){const s=e.CHM(t).$implicit;return e.KtG(s.checked=i)}),e.qZA()(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"date"),e.qZA()()}if(2&r){const t=l.$implicit,n=e.oxw();e.xp6(2),e.Q6J("ngModel",t.checked)("ngStyle","view"==n.mode?e.DdM(7,M):null)("checked",1==t.checked),e.xp6(2),e.Oqu(t.BATCH),e.xp6(2),e.Oqu(e.lcZ(7,5,t.DATE))}}let q=(()=>{class r{constructor(t,n,i,o){this.manualStockEntryService=t,this.alertService=n,this.loadingService=i,this.datePipe=o,this.closeEvent=new e.vpe,this.batchList=[],this.mode="new",this.disableMerge=!1,this.disableDate=!1,this.gridItemviewSettings=new u.im,this.gridItemeditSettings=new u.im}ngOnInit(){}onClose(){this.closeEvent.emit()}onLoadClick(){this.countDate?this.manualStockEntryService.loadManualBatchList(this.countDate,this.division).subscribe(t=>{if(this.addIsCheckedProperty(t.result),this.disableDate=!0,this.batchList&&this.batchList.length>0){const n=t.result.filter(i=>!this.batchList.some(o=>i.BATCH==o.BATCH&&i.DATE==o.DATE));this.batchList=[...this.batchList,...n]}else this.batchList=t.result}):this.alertService.warning("Count Date is required!!")}addIsCheckedProperty(t,n=!1){t.forEach(i=>{i.checked=n})}onMergeClick(){if(!this.countDate)return void this.alertService.warning("Count Date is required!!");if(!this.mbName)return void this.alertService.warning("Merged Batch Name is required!!");let t=this.batchList.filter(i=>1==i.checked);if(t.length<2)return void this.alertService.warning("Two or more Batches must be selected!!");let n={Mode:this.mode,Data:{BATCH:this.mbName,DIVISION:this.division,Date:this.countDate,REF_BATCH:t}};this.loadingService.show("Please wait.... Saving your data."),this.manualStockEntryService.mergeBatches(n).subscribe(i=>{this.loadingService.hide(),this.closeEvent.emit(),this.alertService.info("Batches Merged Successfully.")},i=>{this.loadingService.hide()})}dblClickedit(t,n){this.disableDate=!0,this.mode="edit",t.BATCH&&this.viewMergedBatch(t.BATCH,this.division)}dblClickview(t,n){this.mode="view",t.BATCH&&this.viewMergedBatch(t.BATCH,this.division)}viewMergedBatch(t,n){this.manualStockEntryService.viewMergedBatch(t,n).subscribe(i=>{i&&i.result&&i.result.REF_BATCH&&(this.addIsCheckedProperty(i.result.REF_BATCH,!0),this.batchList=i.result.REF_BATCH,i.result.BATCH&&(this.mbName=i.result.BATCH),i.result.DATE&&(this.countDate=this.datePipe.transform(i.result.DATE,"yyyy-MM-dd"))),"Adjusted"==i.result2?(this.disableMerge=!0,this.alertService.warning("Selected batch has already been adjusted!!")):this.disableMerge=!1})}onViewClick(){this.gridItemviewSettings={title:"View merged Batches",apiEndpoints:`/getMergedBatchPagedList/${this.division}`,defaultFilterIndex:0,columns:[{key:"BATCH",title:"Batch Name",hidden:!1,noSearch:!1},{key:"DATE",title:"Date",hidden:!1,noSearch:!1}]},console.log("show",this.genericGridview),this.genericGridview.show()}onEditClick(){this.gridItemeditSettings={title:"Edit Merged Batches",apiEndpoints:`/getMergedBatchPagedList/${this.division}`,defaultFilterIndex:0,columns:[{key:"BATCH",title:"Batch Name",hidden:!1,noSearch:!1},{key:"DATE",title:"Date",hidden:!1,noSearch:!1}]},this.genericGridedit.show()}onReset(){this.batchList=[],this.mbName="",this.countDate="",this.mode="new",this.disableDate=!1}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(p.k),e.Y36(_.c),e.Y36(I.V),e.Y36(d.uU))},r.\u0275cmp=e.Xpm({type:r,selectors:[["merge-batch-popup"]],viewQuery:function(t,n){if(1&t&&(e.Gf(G,5),e.Gf(W,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.genericGridview=i.first),e.iGM(i=e.CRH())&&(n.genericGridedit=i.first)}},inputs:{division:"division",divisionName:"divisionName"},outputs:{closeEvent:"closeEvent"},features:[e._Bn([p.k,d.uU])],decls:41,vars:14,consts:[[1,"container"],[1,"top-section"],[1,"table-title"],[1,"cross-button",3,"click"],[1,"content-section"],[1,"input-section"],["type","text","name","mb_name","autocomplete","off",3,"ngModel","ngModelChange"],["type","date","name","date",3,"ngModel","disabled","ngModelChange"],["type","text","name","division",3,"ngModel","disabled","ngModelChange"],[3,"click"],[3,"disabled","ngStyle","click"],[1,"table-section"],[4,"ngFor","ngForOf"],[1,"merge-button",3,"disabled","ngStyle","click"],[3,"popupsettings","onItemDoubleClick"],["genericGridview",""],["genericGridedit",""],["type","checkbox",3,"ngModel","ngStyle","checked","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Merge Batch"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return n.onClose()}),e._uU(5,"X"),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5)(8,"div"),e._uU(9," M.B. Name: "),e.TgZ(10,"input",6),e.NdJ("ngModelChange",function(o){return n.mbName=o}),e.qZA(),e._uU(11," Date: "),e.TgZ(12,"input",7),e.NdJ("ngModelChange",function(o){return n.countDate=o}),e.qZA(),e._uU(13," Division: "),e.TgZ(14,"input",8),e.NdJ("ngModelChange",function(o){return n.divisionName=o}),e.qZA()(),e.TgZ(15,"div")(16,"button",9),e.NdJ("click",function(){return n.onReset()}),e._uU(17,"Reset"),e.qZA(),e.TgZ(18,"button",9),e.NdJ("click",function(){return n.onViewClick()}),e._uU(19,"View"),e.qZA(),e.TgZ(20,"button",9),e.NdJ("click",function(){return n.onEditClick()}),e._uU(21,"Edit"),e.qZA(),e.TgZ(22,"button",10),e.NdJ("click",function(){return n.onLoadClick()}),e._uU(23,"Load"),e.qZA()()(),e.TgZ(24,"div",11)(25,"table")(26,"thead")(27,"tr"),e._UZ(28,"th"),e.TgZ(29,"th"),e._uU(30,"Batch Name"),e.qZA(),e.TgZ(31,"th"),e._uU(32,"Counted Date"),e.qZA()()(),e.TgZ(33,"tbody"),e.YNc(34,F,8,8,"tr",12),e.qZA()()(),e.TgZ(35,"button",13),e.NdJ("click",function(){return n.onMergeClick()}),e._uU(36,"Merge"),e.qZA()()(),e.TgZ(37,"generic-popup-grid",14,15),e.NdJ("onItemDoubleClick",function(o){return n.dblClickview(o,n.mode)}),e.qZA(),e.TgZ(39,"generic-popup-grid",14,16),e.NdJ("onItemDoubleClick",function(o){return n.dblClickedit(o,n.mode)}),e.qZA()),2&t&&(e.xp6(10),e.Q6J("ngModel",n.mbName),e.xp6(2),e.Q6J("ngModel",n.countDate)("disabled",n.disableDate),e.xp6(2),e.Q6J("ngModel",n.divisionName)("disabled",!0),e.xp6(8),e.Q6J("disabled","view"==n.mode)("ngStyle","view"==n.mode?e.DdM(12,M):null),e.xp6(12),e.Q6J("ngForOf",n.batchList),e.xp6(1),e.Q6J("disabled","view"==n.mode||"edit"==n.mode&&n.disableMerge)("ngStyle","view"==n.mode||"edit"==n.mode&&n.disableMerge?e.DdM(13,M):null),e.xp6(2),e.Q6J("popupsettings",n.gridItemviewSettings),e.xp6(2),e.Q6J("popupsettings",n.gridItemeditSettings))},dependencies:[d.sg,d.PC,c.Fj,c.Wl,c.JJ,c.On,u.Zl,d.uU],styles:[".container[_ngcontent-%COMP%]{position:fixed;top:50%;right:50%;transform:translate(50%,-50%);background-color:#fff;width:70%;border:1px solid #ccc;box-shadow:0 0 10px #0000001a;z-index:9999;padding:0 0 10px}.top-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#007bff;padding:10px}.table-title[_ngcontent-%COMP%]{font-weight:700}.cross-button[_ngcontent-%COMP%]{background-color:#ede7e7;color:#0c0101;border:none;padding:5px 10px;border-radius:5px;cursor:pointer}.content-section[_ngcontent-%COMP%]{padding:10px;margin-bottom:20px}.input-section[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px;justify-content:space-between}.input-section[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .input-section[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{margin-right:10px;padding:5px}.input-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;cursor:pointer;margin-right:5px}.table-section[_ngcontent-%COMP%]{margin-bottom:20px;max-height:calc(50vh - 100px);overflow-y:scroll}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:8px;text-align:left}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{transform:scale(1.5);align-self:center}.merge-button[_ngcontent-%COMP%]{float:right;background-color:#007bff;color:#fff;border:none;cursor:pointer}"]}),r})();var Y=a(41544),K=a(54471),z=a(11309);const $=["focusWarehouse"],X=["genericGridItem"],ee=["genericGridview"],te=["genericGridbulkview"],ne=["genericGridedit"],ie=["fileUploadPopup"],oe=["ManualStockEntryExcelVisualization"];function re(r,l){if(1&r&&(e.TgZ(0,"option",14),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("ngValue",t.BATCH),e.xp6(1),e.hij(" ",t.BATCH," ")}}function ae(r,l){if(1&r&&(e.ynx(0),e.TgZ(1,"option",14),e._uU(2),e.qZA(),e.BQk()),2&r){const t=l.$implicit;e.xp6(1),e.Q6J("ngValue",t.NAME),e.xp6(1),e.Oqu(t.NAME)}}function le(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"div",42)(2,"div",43)(3,"div",44)(4,"h5",45),e._uU(5,"New Counting Batch"),e.qZA(),e.TgZ(6,"button",46),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.closeBatchModal())}),e.TgZ(7,"span",47),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",48)(10,"div",49)(11,"label",50),e._uU(12,"Division:"),e.qZA(),e.TgZ(13,"div",51)(14,"input",52),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.selectedDivisionName=i)}),e.qZA()()(),e.TgZ(15,"div",49)(16,"label",50),e._uU(17,"Batch Name:"),e.qZA(),e.TgZ(18,"div",51)(19,"input",53),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.batchUnitObj.BATCH=i)}),e.qZA()()(),e.TgZ(20,"div",10)(21,"label",50),e._uU(22,"Date:"),e.qZA(),e.TgZ(23,"div",51)(24,"input",54),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.batchUnitObj.DATE=i)}),e.qZA()()()(),e.TgZ(25,"div",55)(26,"button",56),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onBatchSubmit())}),e._uU(27,"Save"),e.qZA()()()()()}if(2&r){const t=e.oxw();e.xp6(14),e.Q6J("ngModel",t.selectedDivisionName)("disabled",!0),e.xp6(5),e.Q6J("ngModel",t.batchUnitObj.BATCH),e.xp6(5),e.Q6J("ngModel",t.batchUnitObj.DATE)}}function se(r,l){if(1&r&&(e.TgZ(0,"option",60),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t.BATCH),e.xp6(1),e.hij(" ",t.BATCH," ")}}function ce(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"div",42)(2,"div",43)(3,"div",44)(4,"h5",45),e._uU(5,"Close Counting Batch"),e.qZA(),e.TgZ(6,"button",46),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.closebatchclosemodal())}),e.TgZ(7,"span",47),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",48)(10,"div",49)(11,"label",50),e._uU(12,"Batch Name:"),e.qZA(),e.TgZ(13,"div",51)(14,"select",57),e.NdJ("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.closeBatchName=i)}),e._UZ(15,"option",58),e.YNc(16,se,2,2,"option",59),e.qZA()()()(),e.TgZ(17,"div",55)(18,"button",56),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onBatchClose())}),e._uU(19,"Close Batch"),e.qZA()()()()()}if(2&r){const t=e.oxw();e.xp6(14),e.Q6J("ngModel",t.closeBatchName),e.xp6(2),e.Q6J("ngForOf",t.allBatchList)}}function de(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"merge-batch-popup",61),e.NdJ("closeEvent",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.mergeBatch())}),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("division",t._trnMainService.TrnMainObj.DIVISION)("divisionName",t.selectedDivisionName)}}const ue=[{path:"",component:(()=>{class r{constructor(t,n,i,o,s,m,S,k,E,b,v){this.masterService=t,this.fb=n,this.manualStockService=i,this.alertService=o,this.loadingService=s,this._trnMainService=m,this.genericProductEntryService=S,this.itemKeyEventService=k,this.entryValidateService=E,this.quantityChangeEventService=b,this.authService=v,this.addNewBatch=!1,this.category=!1,this.addNewCategory=!1,this.batch=!1,this.showMergePopup=!1,this.divisionlist=[],this.batchlist=[],this.warehouseList=[],this.activerowIndex=0,this.mode="",this.count=0,this.selectedDivisionName="",this.manualStockEntry={},this.batchUnitObj={},this.gridItemPopupSettings=new u.im,this.gridItemviewSettings=new u.im,this.gridItembulkviewSettings=new u.im,this.gridItemeditSettings=new u.im,this.fileUploadPopupSettings=new y.s,this.showbatchclose=!1,this.userSetting=v.getUserProfile(),this._trnMainService.initialFormLoad(107),this._trnMainService.TrnMainObj.DIVISION=this.userSetting.userDivision,this.AppMode=R.N.appMode,this.manualStockService.getBatchNumber(this._trnMainService.TrnMainObj.DIVISION).subscribe(h=>{this.batchlist=h}),this.manualStockService.getBatchNumber(this._trnMainService.TrnMainObj.DIVISION,"close").subscribe(h=>{this.allBatchList=h}),this.masterService.getAllDivisions().subscribe(h=>{this.divisionlist=h,this.findDivisionName()}),this.manualStockService.getWarehouseByDivision(this._trnMainService.TrnMainObj.DIVISION).subscribe(h=>{this.warehouseList=h})}updown(t){"Insert"===t.code&&1==this.batch&&(this.addNewBatch=!0)}ngOnInit(){const t=new Date;this.batchUnitObj.DATE=(0,d.p6)(t,"yyyy-MM-dd","en-US");let n="Physical Stock";"lite"==this.AppMode&&(n="PhysicalStock_Lite"),this.fileUploadPopupSettings=Object.assign(new y.s,{title:"Import Physical Stock",sampleFileUrl:`/downloadSampleExcelforMasterMigration?importName=${n}`,uploadEndpoints:`/masterImport/${n}/`,allowMultiple:!1,acceptFormat:".xlsx",filename:"Import Physical Stock Sample"}),this.onReset(),this.gridItemPopupSettings=Object.assign(new u.im,{title:"ITEMS",apiEndpoints:"/getItemListExceptService",defaultFilterIndex:1,useDefinefilterValue:"",columns:[{key:"MENUCODE",title:"ITEM CODE",hidden:!1,noSearch:!1},{key:"DESCA",title:"ITEM NAME",hidden:!1,noSearch:!1},{key:"BASEUNIT",title:"UNIT",hidden:!1,noSearch:!0},{key:"costprice",title:"COST PRICE",hidden:!1,noSearch:!0,alignment:"right",pipe:!0}]}),this.setProductEntryTable(),this.getEntryNumber(),this._trnMainService.TrnMainObj.DIVISION=this.userSetting.userDivision}setProductEntryTable(){var t=this._trnMainService.TrnMainObj.ProdList;this.genericProductEntrySetting=new H.Vn(this._trnMainService),this.genericProductEntrySetting.columns=[{field:"SNO",header:"Sno",hidden:!1,isActiveColumnHeader:!1,isSno:!0,headerNgStyle:{width:"40px"}},{field:"MENUCODE",header:"Code",hidden:!1,isActiveColumnHeader:!0,headerNgStyle:{width:"80px"},disablePipe:(i,o)=>this.getColumnDisablePipe("disableAltQty",i,o)},{field:"BC",header:"Barcode",hidden:!1,isActiveColumnHeader:!0,headerNgStyle:{width:"100px"},disablePipe:(i,o)=>this.getColumnDisablePipe("disableBarcode",i,o)},{field:"ITEMDESC",header:"Particular",hidden:!1,isActiveColumnHeader:!0,inputType:"itemDesc",headerNgStyle:{width:"380px"},disablePipe:(i,o)=>this.getColumnDisablePipe("disableItemDesc",i,o),focusTo:"ALTUNIT"},{field:"UNIT",header:"UNIT",hidden:!1,isActiveColumnHeader:!0,inputType:"",headerNgStyle:{width:"80px"},disablePipe:(i,o)=>this.getColumnDisablePipe("disableAltUnit",i,o),focusTo:"ALTERNATEQUANTIY"},{field:"ALTERNATEQUANTIY",header:"Quantity",hidden:!1,isActiveColumnHeader:!0,inputType:"quantity",headerNgStyle:{width:"60px"},columnNgStyle:{width:"100%","text-align":"right"},onChange:(i,o,s)=>this.QuantityChangeEvent_default(i,o,s),onEnter:i=>this.quantityChangeEventService.AlternateQuantityEventClick(i),onKeyPress:(i,o,s,m)=>this.quantityChangeEventService.quantityKeyPress(i,o,s,m),applyTwoDigitPipe:!1,disablePipe:(i,o)=>this.getColumnDisablePipe("disableAltQty",i,o),focusTo:"SHEETNO"},{field:"WAREHOUSE",header:"Warehouse",hidden:!1,isActiveColumnHeader:!0,headerNgStyle:{width:"80px"}},{field:"SHEETNO",header:"SheetNo#",inputType:"inputText",hidden:!1,isActiveColumnHeader:!0,headerNgStyle:{width:"80px"},focusTo:"ITEMDESC",onEnter:(i,o,s,m)=>this.onEnterManualStockEntry(i,o,s)},{field:"",header:"",hidden:!1,isActiveColumnHeader:!0,removeButton:!0,headerNgStyle:{width:"30px"},columnNgStyle:{width:"100%","text-align":"right"},disablePipe:(i,o)=>this.getColumnDisablePipe("disableRowDelete",i,o)}],this.genericProductEntrySetting.height="100%",this.genericProductEntrySetting.prodlist=t,this.genericProductEntrySetting.voucherType=T.Km.ManualstockEntry,this.genericProductEntrySetting.setRowItemFromSelectedItem=i=>this.SetRowItemFromSelectedItem(i)}SetRowItemFromSelectedItem(t){let n=this._trnMainService.TrnMainObj.ProdList[this.genericProductEntryService.activerowIndex];this._trnMainService.prepareItem(n,t),this._trnMainService.assignPrateaAsRATE(n,t),n.WAREHOUSE=this._trnMainService.TrnMainObj.MWAREHOUSE}SetRowItemRate(t,n){n()}SetAllUnitsOfItem(){this._trnMainService.getAllUnitsOfItem(this.genericProductEntryService.activerowIndex)}QuantityChangeEvent_default(t,n,i){this.quantityChangeEventService.QuantityChangeEvent(i)}getColumnDisablePipe(t,n,i){return t}onEnterManualStockEntry(t,n,i){this.entryValidateService.mrpEnterEvent(t,n,i,()=>"default",()=>({useDefault:!0,preCheck:!1}),()=>!1)}dblClickPopupItem(t,n=""){console.log(t),setTimeout(()=>{this.masterService.focusAnyControl("ALTERNATEQUANTIY"+this.activerowIndex)},100)}focusAfterItemSelect(){2==this.userSetting.EnableBatch||this._trnMainService.TrnMainObj.VoucherType==T.Km.BatchAdjustment?null!=document.getElementById("BATCH"+this.genericProductEntryService.activerowIndex)&&setTimeout(()=>{document.getElementById("BATCH"+this.genericProductEntryService.activerowIndex).focus()},20):(null!=document.getElementById("ALTERNATEUNIT"+this.genericProductEntryService.activerowIndex)?(console.log("FOCUS HERE"),setTimeout(()=>{document.getElementById("ALTERNATEUNIT"+this.genericProductEntryService.activerowIndex).focus()},20)):null!=document.getElementById("ALTUNIT"+this.genericProductEntryService.activerowIndex)&&setTimeout(()=>{document.getElementById("ALTUNIT"+this.genericProductEntryService.activerowIndex).focus()},20),74===this._trnMainService.TrnMainObj.VoucherType&&null!=document.getElementById("ALTERNATEUNIT"+this.genericProductEntryService.activerowIndex)&&setTimeout(()=>{document.getElementById("ALTERNATEUNIT"+this.genericProductEntryService.activerowIndex).focus()},20),this._trnMainService.TrnMainObj.VoucherType===T.Km.RequisitionEntry&&null!=document.getElementById("ALTERNATEQUANTIY"+this.genericProductEntryService.activerowIndex)&&setTimeout(()=>{document.getElementById("ALTERNATEQUANTIY"+this.genericProductEntryService.activerowIndex).focus()},20))}rowClick(t,n){this.activerowIndex=t,this.data=n}onDelete(t){!this.checkValidation()||confirm("Are you sure you want to delete the entry?")&&this.manualStockService.deleteManualStockEntry(t,this._trnMainService.TrnMainObj.DIVISION).subscribe(n=>{console.log("Entry deleted successfully",n),this.onReset(),this.alertService.info(n.result)},n=>{console.error("Failed to delete entry",n)})}onReset(){this.manualStockEntry={},this.manualStockEntry.manualStockList=[],this.warehousename="",this.getEntryNumber(),this._trnMainService.barCodes={},this._trnMainService.barCodes.Quantity=1,this._trnMainService.initialFormLoad(this._trnMainService.TrnMainObj.VoucherType),this.mode="NEW",this.manualStockEntry.manualStockList.push({}),this.manualStockEntry.DIVISION=this.masterService.userProfile.userDivision,this.manualStockService.getBatchNumber(this._trnMainService.TrnMainObj.DIVISION).subscribe(n=>{this.batchlist=n}),setTimeout(()=>{this.masterService.focusAnyControl("itemname"+this.activerowIndex)},100)}focusToWarehouse(){setTimeout(()=>{this.masterService.focusAnyControl("whouse"+this.activerowIndex)}),this.manualStockEntry.TotalQty=this.manualStockEntry.manualStockList.map(t=>t.QTY).reduce((t,n)=>t+n,0)}focusToSheet(t,n){(""==this.manualStockEntry.manualStockList[this.activerowIndex].WAREHOUSE||null==this.manualStockEntry.manualStockList[this.activerowIndex].WAREHOUSE||null==this.manualStockEntry.manualStockList[this.activerowIndex].WAREHOUSE)&&this.alertService.warning("Warehouse cannot be empty"),setTimeout(()=>{this.masterService.focusAnyControl("sheet"+this.activerowIndex)})}checknegativevalue(){console.log("total Quan",this.manualStockEntry.TotalQty),this.manualStockEntry.TotalQty<0&&(this.alertService.warning("Quantity cannot be negative"),setTimeout(()=>{this.masterService.focusAnyControl("qty"+this.activerowIndex)},500))}focusToBarcode(){this.manualStockEntry.manualStockList.push({});var n=this.activerowIndex+1;this.mode=this.mode,console.log("MODE",this.mode),document.getElementById("sno"+this.activerowIndex).scrollIntoView(),setTimeout(()=>{this.masterService.focusAnyControl("itemname"+n),("NEW"==this.mode||"EDIT"==this.mode&&(null==this.manualStockEntry.manualStockList[n].MENUCODE||null==this.manualStockEntry.manualStockList[n].MENUCODE||""==this.manualStockEntry.manualStockList[n].MENUCODE))&&(this.manualStockEntry.manualStockList[n].WAREHOUSE=this.manualStockEntry.manualStockList[n-1].WAREHOUSE,this.manualStockEntry.manualStockList[n].SHEETNO=this.manualStockEntry.manualStockList[n-1].SHEETNO)},500)}addNextRow(t,n){this.manualStockEntry.manualStockList.push({WAREHOUSE:null}),this.mode=this.mode}showItemPopUp(t){if(this.checkValidation()){if(!this._trnMainService.TrnMainObj.MWAREHOUSE)return void this.alertService.info("Please select Warehouse first!");this.genericGridForItem.show()}}dblClickview(t,n="VIEW"){this.manualStockEntry.TNO=t.TNO,this.batchlist.push({BATCH:t.BATCH}),this.manualStockEntry.BATCH=t.BATCH,this.manualStockEntry.DIVISION=t.DIVISION,this.manualStockEntry.TRNDATE=t.TRNDATE,this.manualStockService.getManualStockListView(this.manualStockEntry.TNO,this.manualStockEntry.DIVISION).subscribe(i=>{this.manualStockEntry.manualStockList=i,this.prepareprodListForViewModeAndEditMode(i),this.manualStockEntry.TotalQty=this.manualStockEntry.manualStockList.map(o=>o.QTY).reduce((o,s)=>o+s,0),this._trnMainService.TrnMainObj.MWAREHOUSE=i[0].WAREHOUSE,this.mode="VIEW"})}dblClickblukview(t,n="VIEW"){this.manualStockEntry.TNO=t.TNO,this.batchlist.push({BATCH:t.BATCH}),this.manualStockEntry.BATCH=t.BATCH,this.manualStockEntry.DIVISION=t.DIVISION,this.manualStockEntry.TRNDATE=t.TRNDATE,this.manualStockService.getManualStockListView(this.manualStockEntry.TNO,this.manualStockEntry.DIVISION).subscribe(i=>{console.log("datasddsd",i),this.manualStockEntry.manualStockList=i,this._trnMainService.TrnMainObj.MWAREHOUSE=i[0].WAREHOUSE,this.mode="VIEW",this.ManualStockEntryExcelVisualization.show(i,null,this.mode)})}prepareprodListForViewModeAndEditMode(t){this._trnMainService.TrnMainObj.ProdList=[];for(let n of t){let i={};i.BATCH=n.BATCH,i.ITEMDESC=n.DESCA,i.DIVISION=n.DIVISION,i.MCODE=n.MCODE,i.MENUCODE=n.MENUCODE,i.ALTERNATEQUANTIY=n.QTY,i.WAREHOUSE=n.WAREHOUSE,i.UNIT=n.BASEUNIT,i.BC=n.BCODE,i.SHEETNO=n.SHEETNO,i.rowMode=this.mode,i.FulfillBatchQty=!1,this._trnMainService.TrnMainObj.ProdList.push(i)}}dblClickedit(t,n="EDIT"){1!=t.ISMERGED?1!=t.ISMERGEBATCH?(this.manualStockEntry.TNO=t.TNO,this.batchlist.push({BATCH:t.BATCH}),this.manualStockEntry.BATCH=t.BATCH,this.manualStockEntry.DIVISION=t.DIVISION,this.manualStockEntry.TRNDATE=t.TRNDATE,this.manualStockService.getManualStockListView(this.manualStockEntry.TNO,this.manualStockEntry.DIVISION).subscribe(i=>{this.manualStockEntry.manualStockList=i,this.prepareprodListForViewModeAndEditMode(i),this.manualStockEntry.TotalQty=this.manualStockEntry.manualStockList.map(o=>o.QTY).reduce((o,s)=>o+s,0),this._trnMainService.TrnMainObj.MWAREHOUSE=i[0].WAREHOUSE,this.mode="EDIT"})):this.alertService.info("This is merged batch. So, can not be edited"):this.alertService.info("This batch is already merged. So, can not be edited")}clearRow(){confirm("Are you sure you want to delete the Row? ")&&this.manualStockEntry.manualStockList.splice(this.activerowIndex,1)}findDivisionName(){this.selectedDivisionName=this.divisionlist.find(t=>t.INITIAL==this._trnMainService.TrnMainObj.DIVISION).NAME}changeDiv(){this.findDivisionName(),this.manualStockService.getWarehouseByDivision(this._trnMainService.TrnMainObj.DIVISION).subscribe(t=>{this.warehouseList=t}),this.manualStockService.getBatchNumber(this._trnMainService.TrnMainObj.DIVISION).subscribe(t=>{this.batchlist=t})}onBatchSubmit(){this.batchUnitObj.DIVISION=this._trnMainService.TrnMainObj.DIVISION,this.loadingService.show("Data is Saving ..."),this.manualStockService.postBatchUnit(this.batchUnitObj).subscribe(t=>{"ok"==t.status?(this.loadingService.hide(),this.alertService.info("Saved Successfully"),this.manualStockService.getBatchNumber(this._trnMainService.TrnMainObj.DIVISION).subscribe(n=>{this.batchlist=n}),this.closeBatchModal()):(this.loadingService.hide(),this.alertService.error(t.result))},t=>{this.loadingService.hide(),console.log(t),this.alertService.error(t.error.result)})}mapManualStockListFromProdList(){this.manualStockEntry.manualStockList=[];for(let t of this._trnMainService.TrnMainObj.ProdList){let n={};n.BATCH=t.BATCH,n.DESCA=t.ITEMDESC,n.MCODE=t.MCODE,n.MENUCODE=t.MENUCODE,n.QTY=t.ALTERNATEQUANTIY,n.WAREHOUSE=t.WAREHOUSE,n.BCODE=t.BC,n.SHEETNO=t.SHEETNO,this.manualStockEntry.manualStockList.push(n)}}onSave(){if(this._trnMainService.TrnMainObj.ProdList?.length>1&&(this._trnMainService.TrnMainObj.ProdList=this._trnMainService.TrnMainObj.ProdList.filter(t=>null!=t.MCODE&&""!=t.MCODE)),this.checkValidation()){if(this._trnMainService.TrnMainObj.ProdList.filter(t=>!t.WAREHOUSE)?.length>0)return void this.alertService.warning("Please select warehouse!");this.count=0,this.mapManualStockListFromProdList(),this.manualStockEntry.manualStockList.forEach(t=>{t.DIVISION=this._trnMainService.TrnMainObj.DIVISION,t.TNO=this.manualStockEntry.TNO,t.BATCH=this.manualStockEntry.BATCH,t.TRNDATE=this.manualStockEntry.TRNDATE,t.WAREHOUSE=this._trnMainService.TrnMainObj.MWAREHOUSE,t.QTY||(t.QTY=0)}),"VIEW"==this.mode.toUpperCase()?this.alertService.error("Cannot Save in view Mode"):(this.loadingService.show("Please wait.... Saving your data."),this.manualStockService.saveManualStock({mode:this.mode,data:this.manualStockEntry.manualStockList}).subscribe(n=>{"ok"==n.status?(this.alertService.success("Data Saved Successfully"),this.loadingService.hide(),this.onReset(),this.manualStockEntry.DIVISION=this.masterService.userProfile.userDivision,this.manualStockEntry.manualStockList=[]):(this.loadingService.hide(),this.alertService.error(n.result.error))}))}}checkValidation(){return null==this.manualStockEntry.DIVISION||""==this.manualStockEntry.DIVISION||null==this.manualStockEntry.DIVISION?(this.alertService.warning("Division cannot be empty"),!1):null==this.manualStockEntry.BATCH||""==this.manualStockEntry.BATCH||null==this.manualStockEntry.BATCH?(this.alertService.warning("Batch Number cannot be empty"),!1):!!this._trnMainService.TrnMainObj.MWAREHOUSE||(this.alertService.warning("Warehouse cannot be empty"),!1)}onWarehouseChange(){this._trnMainService.TrnMainObj.MWAREHOUSE&&this.manualStockEntry.manualStockList.forEach(t=>t.WAREHOUSE=this._trnMainService.TrnMainObj.MWAREHOUSE)}closeBatchModal(){this.addNewBatch=!1,this.batchUnitObj.BATCH=""}newUnitCreateTrigger(){this.batch=!0}TabClickUnit(){setTimeout(()=>{document.getElementById("itemname").focus()},0)}nullToZeroConverter(t){return void 0===t||null==t||null===t||""===t||"Infinity"===t||"NaN"===t||Number.isNaN(t)||isNaN(parseFloat(t))?0:parseFloat(t)}onView(t,n){console.log("Entry Number",t,n),this.gridItemviewSettings={title:"Physical Stock Entry Item",apiEndpoints:`/getPagedManualStock/${this._trnMainService.TrnMainObj.DIVISION}`,defaultFilterIndex:0,columns:[{key:"TNO",title:"Entry No",hidden:!1,noSearch:!1},{key:"BATCH",title:"Batch No",hidden:!1,noSearch:!1},{key:"DIVISION",title:"Division",hidden:!1,noSearch:!1}]},this.genericGridview.show()}onBulkView(){this.gridItembulkviewSettings={title:"Physical Stock Entry Item (Bulk View)",apiEndpoints:`/getPagedManualStock/${this._trnMainService.TrnMainObj.DIVISION}`,defaultFilterIndex:0,columns:[{key:"TNO",title:"Entry No",hidden:!1,noSearch:!1},{key:"BATCH",title:"Batch No",hidden:!1,noSearch:!1},{key:"DIVISION",title:"Division",hidden:!1,noSearch:!1}]},this.genericGridbulkview.show()}onEdit(t,n){console.log("Entry Number",t,n),this.gridItemviewSettings={title:"Physical Stock Entry Item",apiEndpoints:`/getPagedManualStock/${this._trnMainService.TrnMainObj.DIVISION}`,defaultFilterIndex:0,columns:[{key:"TNO",title:"Entry No",hidden:!1,noSearch:!1},{key:"BATCH",title:"Batch No",hidden:!1,noSearch:!1},{key:"DIVISION",title:"Division",hidden:!1,noSearch:!1}]},this.gridItemeditSettings={title:"Physical Stock Entry Item",apiEndpoints:`/getPagedManualStock/${this._trnMainService.TrnMainObj.DIVISION}`,defaultFilterIndex:0,columns:[{key:"TNO",title:"Entry No",hidden:!1,noSearch:!1},{key:"BATCH",title:"Batch No",hidden:!1,noSearch:!1},{key:"DIVISION",title:"Division",hidden:!1,noSearch:!1}]},this.genericGridedit.show()}getEntryNumber(){this.manualStockService.getEntryNumber().subscribe(t=>{this.manualStockEntry.TNO=t.result,console.log("StockID",t)})}manualStockChange(t){if("%"===t)this.manualStockEntry.BATCH="%";else{this.manualStockEntry.BATCH=t;let n=this.batchlist.find(i=>i.BATCH==t)?.DATE;this.manualStockEntry.TRNDATE=n}}createBatch(){this.addNewBatch=!0}mergeBatch(){this.showMergePopup=!this.showMergePopup}closeCountingBatch(){this.showbatchclose=!0}closebatchclosemodal(){this.showbatchclose=!1}showGenericGrid(t){this.itemKeyEventService.ItemkeyEvent(t.index,t.event,()=>g.K.done,n=>(this.setItemPopupUrl(n),g.K.default),()=>g.K.default,()=>g.K.default,()=>g.K.default)}setItemPopupUrl(t){return this.genericProductEntryService.gridPopupSettings={title:"PRODUCTS",apiEndpoints:`/getMenuitemWithStockPagedList/${t}/all/NO/${this._trnMainService.userProfile.userWarehouse}`,defaultFilterIndex:this._trnMainService.userSetting.DefaultFilterIndex?this._trnMainService.userSetting.DefaultFilterIndex:0,columns:[{key:"MENUCODE",title:"ITEM CODE",hidden:!1,noSearch:!1},{key:"DESCA",title:"DESCRIPTION",hidden:!1,noSearch:!1},{key:"GroupName",title:"GROUP NAME",hidden:!1,noSearch:!0},{key:"PSTOCK",title:"P-QTY",hidden:!0,noSearch:!0},{key:"ISSUEQTY",title:"ISSUE QTY",hidden:!0,noSearch:!0},{key:"CRATE",title:"NETRATE",hidden:!0,noSearch:!0},{key:"RATE",title:"S-RATE",hidden:!0,noSearch:!0},{key:"BASEUNIT",title:"UNIT",hidden:!0,noSearch:!0},{key:"STOCK",title:"STOCK",hidden:!1,noSearch:!0,alignment:"right"},{key:"REALQTY_IN",title:"Req.Order Qty",hidden:!0,noSearch:!0},{key:"REALQTY",title:"Sales-Qty",hidden:!0,noSearch:!0},{key:"POSTOCK",title:"PO QTY",hidden:!0,noSearch:!0,alignment:"right"},{key:"POSTOCK",title:"QT QTY",hidden:!0,noSearch:!0,alignment:"right"},{key:"OPSTOCK",title:"SO QTY",hidden:!0,noSearch:!0,alignment:"right"},{key:"RATE",title:"PORATE",hidden:!0,noSearch:!0,alignment:"right",pipe:!0},{key:"RATE",title:"SO RATE",hidden:!0,noSearch:!0,alignment:"right",pipe:!0},{key:"BARCODE",title:"BARCODE",hidden:!0,noSearch:!0},{key:"MRP",title:"MRP",hidden:!0,noSearch:!0,alignment:"right",pipe:!0}]},this.genericProductEntryService.gridPopupSettings}onBatchClose(){console.log("on batch close",this.closeBatchName),this.loadingService.show("Closing Batch..."),this.manualStockService.closeManualStockBatch(this.closeBatchName).subscribe(t=>{console.log("response",t),"ok"==t.status?(this.loadingService.hide(),this.alertService.info(t.result),this.manualStockService.getBatchNumber(this._trnMainService.TrnMainObj.DIVISION).subscribe(n=>{this.batchlist=n,console.log("BatchList",n)}),this.closebatchclosemodal()):(this.loadingService.hide(),this.alertService.error(t.result))},t=>{this.loadingService.hide()})}showFileUploadPopUp(){this.fileUploadPopup.show()}fileUploadSuccess(t){console.log("upload success",t,t.result.result,t.result),"ok"==t.status?this.alertService.success(t.result.result):this.alertService.error(t.result)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(L.P),e.Y36(c.qu),e.Y36(p.k),e.Y36(_.c),e.Y36(I.V),e.Y36(V.p),e.Y36(Q.w),e.Y36(g.X),e.Y36(J.C),e.Y36(N.s),e.Y36(j.e))},r.\u0275cmp=e.Xpm({type:r,selectors:[["manualstockentry"]],viewQuery:function(t,n){if(1&t&&(e.Gf($,5),e.Gf(X,5),e.Gf(ee,5),e.Gf(te,5),e.Gf(ne,5),e.Gf(ie,5),e.Gf(oe,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.focusWarehouse=i.first),e.iGM(i=e.CRH())&&(n.genericGridForItem=i.first),e.iGM(i=e.CRH())&&(n.genericGridview=i.first),e.iGM(i=e.CRH())&&(n.genericGridbulkview=i.first),e.iGM(i=e.CRH())&&(n.genericGridedit=i.first),e.iGM(i=e.CRH())&&(n.fileUploadPopup=i.first),e.iGM(i=e.CRH())&&(n.ManualStockEntryExcelVisualization=i.first)}},hostBindings:function(t,n){1&t&&e.NdJ("keydown",function(o){return n.updown(o)},!1,e.evT)},decls:95,vars:27,consts:[[1,"sectionWrapper"],[1,"sticky-top"],[1,"row","clearfix"],[1,"col-md-4"],[1,"col-md-8"],["routerLink","/pages/dashboard",1,"btn","btn-info","pull-right",2,"font-size","12px"],[1,"btn","btn-info","pull-right",2,"font-size","12px",3,"click"],[1,"btn","btn-info","pull-right",2,"font-size","12px",3,"disabled","click"],[1,"row","plainBackGround",2,"margin-top","0.5rem","padding-top","1rem"],[1,"col-md-3"],[1,"form-group","row"],[1,"col-md-6"],["type","number","readonly","",2,"width","14rem",3,"ngModel","disabled","ngModelChange"],["id","manualstockWH",1,"form-control",2,"width","14rem","height","25px","color","black","font-size","13px","padding","1px 12px",3,"ngModel","disabled","ngModelChange","keydown.Tab","focus"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-md-3",2,"margin-left","20px"],["id","manualStockInput",1,"form-control",2,"width","14rem","height","25px","color","black","font-size","13px","padding","1px 12px",3,"ngModel","disabled","ngModelChange"],[2,"width","auto"],[2,"font-size","13px"],[2,"width","14rem","height","25px","color","black","font-size","13px","padding","1px 12px",3,"ngModel","disabled","ngModelChange","change"],[4,"ngFor","ngForOf"],[1,"row","row-margin"],[1,"col-md-12","pd5"],[1,"midTableWrapper"],[1,"col-md-12","pd5",2,"height","61vh","overflow-x","scroll"],[3,"GenericProductEntrySetting","ShowGenericGridEvent"],[1,"sticky-bottom"],[1,"row","clearfix","footer"],[1,"col-md-12","right",2,"vertical-align","center"],[1,"row"],[1,"col-md-2",2,"margin-left","30%"],[4,"ngIf"],[3,"division","divisionName","closeEvent",4,"ngIf"],[3,"popupsettings","onItemDoubleClick"],["genericGridItem",""],["genericGridview",""],["genericGridbulkview",""],["genericGridedit",""],[3,"popupsettings","onUploaded"],["fileUploadPopup",""],["ManualStockEntryExcelVisualization",""],[1,"modal-sticky",2,"display","block","padding","0px","margin-bottom","20px","margin-right","8rem"],[1,"modal-content","modal-content-main-area",2,"width","70%"],[1,"modal-header",2,"padding","0px","background","#c0c0c0"],[1,"modal-title",2,"padding-left","5px"],["aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row",2,"margin-top","1rem"],[1,"col-sm-3","form-control-label",2,"margin-left","-12px"],[1,"col-sm-8"],["type","text","autocomplete","off",1,"form-control",2,"height","4vh","font-size","13px",3,"ngModel","disabled","ngModelChange"],["type","text","autocomplete","off",1,"form-control",2,"height","4vh","font-size","13px",3,"ngModel","ngModelChange"],["type","date",1,"date-input","form-control",2,"height","3vh",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-sm","btn-info",2,"font-size","12px",3,"click"],[1,"form-control",2,"width","14rem","height","25px","color","black","font-size","13px","padding","1px 12px",3,"ngModel","ngModelChange"],["value","%","selected",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"division","divisionName","closeEvent"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5"),e._uU(5),e.qZA()(),e.TgZ(6,"div",4)(7,"button",5),e._uU(8,"Back"),e.qZA(),e.TgZ(9,"button",6),e.NdJ("click",function(){return n.showFileUploadPopUp()}),e._uU(10,"Excel Upload"),e.qZA(),e.TgZ(11,"button",6),e.NdJ("click",function(){return n.mergeBatch()}),e._uU(12,"Merge Batch"),e.qZA(),e.TgZ(13,"button",6),e.NdJ("click",function(){return n.closeCountingBatch()}),e._uU(14,"Close Batch"),e.qZA(),e.TgZ(15,"button",6),e.NdJ("click",function(){return n.createBatch()}),e._uU(16,"Create Batch"),e.qZA(),e.TgZ(17,"button",6),e.NdJ("click",function(){return n.onReset()}),e._uU(18,"Reset"),e.qZA(),e.TgZ(19,"button",7),e.NdJ("click",function(){return n.onSave()}),e._uU(20,"Save"),e.qZA(),e.TgZ(21,"button",6),e.NdJ("click",function(){return n.onDelete(n.manualStockEntry.TNO)}),e._uU(22,"Delete"),e.qZA(),e.TgZ(23,"button",6),e.NdJ("click",function(){return n.onBulkView()}),e._uU(24,"Bulk View"),e.qZA(),e.TgZ(25,"button",6),e.NdJ("click",function(){return n.onView(n.manualStockEntry.TNO,n.manualStockEntry.DIVISION)}),e._uU(26,"View"),e.qZA(),e.TgZ(27,"button",6),e.NdJ("click",function(){return n.onEdit(n.manualStockEntry.TNO,n.manualStockEntry.DIVISION)}),e._uU(28,"Edit"),e.qZA()()()(),e.TgZ(29,"div",8)(30,"div",9)(31,"div",10)(32,"label"),e._uU(33,"Entry No :"),e.qZA(),e.TgZ(34,"div",11)(35,"input",12),e.NdJ("ngModelChange",function(o){return n.manualStockEntry.TNO=o}),e.qZA()()(),e.TgZ(36,"div",10)(37,"label"),e._uU(38,"Counting Batch No :"),e.qZA(),e.TgZ(39,"div",11)(40,"select",13),e.NdJ("ngModelChange",function(o){return n.manualStockChange(o)})("keydown.Tab",function(){return n.TabClickUnit()})("focus",function(){return n.newUnitCreateTrigger()}),e._UZ(41,"option",14),e.YNc(42,re,2,2,"option",15),e.qZA()()()(),e.TgZ(43,"div",16)(44,"div",10)(45,"label"),e._uU(46,"Division :"),e.qZA(),e.TgZ(47,"div",11)(48,"div",11)(49,"input",17),e.NdJ("ngModelChange",function(o){return n.selectedDivisionName=o}),e.qZA()()()(),e.TgZ(50,"div",10)(51,"label",18),e._uU(52,"Counting Batch Date :"),e.qZA(),e.TgZ(53,"div",11)(54,"label",19),e._uU(55),e.ALo(56,"date"),e.qZA()()()(),e.TgZ(57,"div",16)(58,"div",10)(59,"label"),e._uU(60,"Warehouse :"),e.qZA(),e.TgZ(61,"div",11)(62,"div",11)(63,"select",20),e.NdJ("ngModelChange",function(o){return n._trnMainService.TrnMainObj.MWAREHOUSE=o})("change",function(){return n.onWarehouseChange()}),e._UZ(64,"option"),e.YNc(65,ae,3,2,"ng-container",21),e.qZA()()()()()(),e.TgZ(66,"div",22)(67,"div",23),e._UZ(68,"discounts-insert"),e.qZA()(),e.TgZ(69,"div",24)(70,"div",22)(71,"div",25)(72,"generic-product-entry",26),e.NdJ("ShowGenericGridEvent",function(o){return n.showGenericGrid(o)}),e.qZA()()()(),e.TgZ(73,"div",27)(74,"div",28)(75,"div",29)(76,"div",30)(77,"div",31)(78,"h6"),e._uU(79),e.qZA()()()()()(),e.YNc(80,le,28,4,"div",32),e.qZA(),e.YNc(81,ce,20,2,"div",32),e.YNc(82,de,1,2,"merge-batch-popup",33),e.TgZ(83,"generic-popup-grid",34,35),e.NdJ("onItemDoubleClick",function(o){return n.dblClickPopupItem(o)}),e.qZA(),e.TgZ(85,"generic-popup-grid",34,36),e.NdJ("onItemDoubleClick",function(o){return n.dblClickview(o,n.mode)}),e.qZA(),e.TgZ(87,"generic-popup-grid",34,37),e.NdJ("onItemDoubleClick",function(o){return n.dblClickblukview(o,n.mode)}),e.qZA(),e.TgZ(89,"generic-popup-grid",34,38),e.NdJ("onItemDoubleClick",function(o){return n.dblClickedit(o,n.mode)}),e.qZA(),e.TgZ(91,"file-uploader-popup",39,40),e.NdJ("onUploaded",function(o){return n.fileUploadSuccess(o)}),e.qZA(),e._UZ(93,"app-manual-stock-entry-excel-visualization",null,41)),2&t&&(e.xp6(5),e.hij("Physical Stock Entry [",n.mode,"]"),e.xp6(14),e.Q6J("disabled","VIEW"==n.mode),e.xp6(16),e.Q6J("ngModel",n.manualStockEntry.TNO)("disabled","VIEW"==n.mode),e.xp6(5),e.Q6J("ngModel",n.manualStockEntry.BATCH)("disabled","VIEW"==n.mode),e.xp6(1),e.Q6J("ngValue","%"),e.xp6(1),e.Q6J("ngForOf",n.batchlist),e.xp6(7),e.Q6J("ngModel",n.selectedDivisionName)("disabled",!0),e.xp6(6),e.Oqu(e.xi3(56,24,n.manualStockEntry.TRNDATE,"MM-dd-yyyy")),e.xp6(8),e.Q6J("ngModel",n._trnMainService.TrnMainObj.MWAREHOUSE)("disabled","VIEW"==n.mode),e.xp6(2),e.Q6J("ngForOf",n.warehouseList),e.xp6(7),e.Q6J("GenericProductEntrySetting",n.genericProductEntrySetting),e.xp6(7),e.hij("TOTAL QTY: ",n.manualStockEntry.TotalQty," "),e.xp6(1),e.Q6J("ngIf",n.addNewBatch),e.xp6(1),e.Q6J("ngIf",n.showbatchclose),e.xp6(1),e.Q6J("ngIf",n.showMergePopup),e.xp6(1),e.Q6J("popupsettings",n.gridItemPopupSettings),e.xp6(2),e.Q6J("popupsettings",n.gridItemviewSettings),e.xp6(2),e.Q6J("popupsettings",n.gridItembulkviewSettings),e.xp6(2),e.Q6J("popupsettings",n.gridItemeditSettings),e.xp6(2),e.Q6J("popupsettings",n.fileUploadPopupSettings))},dependencies:[d.sg,d.O5,c.YN,c.Kr,c.Fj,c.wV,c.EJ,c.JJ,c.On,u.Zl,y.U,q,f.rH,Y.Z,K.o,z.L,d.uU],styles:['td[_ngcontent-%COMP%] {\n     border: 1px solid #e6e6e6;\n}\n .footer[_ngcontent-%COMP%] {\n \n \n margin-right: 1px;\n height: 70px;\n clear: both;\n padding-top: 20px;\n border: 1px solid #eaeaea;\n background-color: #d1d6d8;\n}\n .card-body[_ngcontent-%COMP%] {\n     padding: 0 !important;\n }\n\n .form-group.row[_ngcontent-%COMP%] {\n     margin-bottom: 5px;\n }\n\n input[_ngcontent-%COMP%], select[_ngcontent-%COMP%] {\n     height: 26px;\n     font-size: 14px;\n     padding-top: 0;\n     padding-bottom: 0px;\n }\n\n th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{\n     padding: .2rem;\n     vertical-align: top;\n     border-top: 1px solid #dee2e6;\n     font-size: 14px;\n }\n th[_ngcontent-%COMP%]{\n     position: sticky; top: -1px; z-index: 1;\n     background-color: #7ed0ff;\n }\n\n th[_ngcontent-%COMP%]:first-child {\n     border-bottom: 1px solid #dee2e6;\n }\n .highlighted[_ngcontent-%COMP%]{\n     background-color: #ced6d3;\n }\n .row[_ngcontent-%COMP%]:after {\ncontent: "";\ndisplay: table;\nclear: both;\n}\n.column[_ngcontent-%COMP%] {\nfloat: left;\nwidth: 25%;\npadding: 10px;\n\n}']}),r})()}];let he=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[f.Bz.forChild(ue),f.Bz]}),r})();var ge=a(63321);let me=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[p.k],imports:[d.ez,c.u5,c.UX,ge._]}),r})();var pe=a(34579),Se=a(56209),Ee=a(60694),ve=a(7782),fe=a(74263),Te=a(48496);let ye=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[p.k,Ee.T,N.s,ve.y,fe.R],imports:[d.ez,B.m,D.JX,P.Xd,O.Is,w.b.forRoot(),Z.x.forRoot(),x.c.forRoot(),U.Z,me,he,Se.u,pe.h,Te.z.forRoot()]}),r})()}}]);