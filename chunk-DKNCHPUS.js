import{a as H}from"./chunk-33QFFTOG.js";import{c as he}from"./chunk-E5XJPHAI.js";import{a as X,b as Y,c as Z}from"./chunk-JXVKPTSL.js";import{a as Ce}from"./chunk-P4TCX2ZY.js";import{$ as ae,H as ee,Y as te,Z as ie,_ as C,aa as oe,da as ne,ea as re,ga as le,ha as ce,ja as se,ka as ue,la as me,ma as pe,pa as de,qa as fe,ra as ge,sa as be,ta as P,ua as E,za as V}from"./chunk-YAXADU3R.js";import{j as $,l as J}from"./chunk-7NLJT2D3.js";import"./chunk-XAZLOLJU.js";import{$a as p,$b as K,Ab as _,Bb as y,Cb as o,Db as n,Eb as u,F as G,Ib as x,Jc as z,Lb as b,Mc as W,Nb as d,Pc as U,Rb as M,Sb as D,Tb as T,Vb as c,Wb as v,Xb as A,Zb as L,_a as l,_b as Q,aa as q,bc as I,hc as F,ka as k,pb as B,ta as f,tb as s,ua as g,xc as h,yb as S,z as j}from"./chunk-ZOAWYHVV.js";var O=class i{constructor(t){this.tableFetchService=t}featureTableColumns=h(()=>[...this.tableFetchService.tableColumns(),{header:"ACTION",def:"ACTION"}]);featureTableData=h(()=>[...this.tableFetchService.tableData()]);ngOnInit(){this.tableFetchService.getTableData("getAllFeatureConFiguration"),this.tableFetchService.selectedTab.set("feature-form")}static \u0275fac=function(e){return new(e||i)(p(P))};static \u0275cmp=k({type:i,selectors:[["app-feature-config"]],standalone:!0,features:[I],decls:9,vars:4,consts:[[1,"container","mt-3"],[1,"heading","fw-bold","fs-5"],[1,"border-bottom","border-secondary"],[1,"container","d-flex","flex-column","flex-grow-1"],[1,"row"],[1,"col-md-6","mt-2","ms-auto"],[3,"columns","dataSource"]],template:function(e,a){e&1&&(o(0,"div",0)(1,"h5",1),c(2,"Feature Configuration"),n()(),u(3,"div",2),o(4,"div",3)(5,"div",4)(6,"div",5),u(7,"app-generic-filter",6),n()(),u(8,"app-generic-table",6),n()),e&2&&(l(7),s("columns",a.featureTableColumns())("dataSource",a.featureTableData()),l(),s("columns",a.featureTableColumns())("dataSource",a.featureTableData()))},dependencies:[E,V]})};var N=class i{constructor(){}extractKeys(t,e){return t.map(a=>{let r={};return Object.keys(e).forEach(m=>{let w=e[m];m in a&&(r[w]=a[m])}),r})}static \u0275fac=function(e){return new(e||i)};static \u0275prov=q({token:i,factory:i.\u0275fac,providedIn:"root"})};var ye=["dialogHeader"],xe=["subCatdialogContent"],Me=["featureTablePopupContent"],De=["dialogFooter"];function Te(i,t){if(i&1&&(o(0,"option",25),c(1),n()),i&2){let e=t.$implicit;s("value",e.ID),l(),v(e.Category)}}function we(i,t){if(i&1&&(o(0,"option",25),c(1),n()),i&2){let e=t.$implicit;s("value",e.ID),l(),v(e.SubCategory)}}function ke(i,t){if(i&1&&(o(0,"option",25),c(1),n()),i&2){let e=t.$implicit;s("value",e.ID),l(),v(e.Module)}}function Ie(i,t){if(i&1&&(o(0,"option",25),c(1),n()),i&2){let e=t.$implicit;s("value",e.FeaturesID),l(),v(e.FeaturesName)}}function Pe(i,t){if(i&1&&(o(0,"div"),u(1,"app-generic-table",48),n()),i&2){let e=d();l(),s("columns",e.appMenuColumns)("dataSource",e.appMenuData())}}function Ee(i,t){if(i&1&&(o(0,"div"),u(1,"app-generic-table",48),n()),i&2){let e=d();l(),s("columns",e.appSettingColumns)("dataSource",e.appSettingData())}}function Ve(i,t){if(i&1&&(o(0,"h4",49),c(1),n()),i&2){let e=d();l(),v(e.contentHeader)}}function Oe(i,t){if(i&1&&(o(0,"h4",49),c(1),n()),i&2){let e=d();l(),v(e.contentHeader)}}function Ne(i,t){if(i&1){let e=x();o(0,"div",11)(1,"div",50)(2,"div",51)(3,"label",52),c(4),n()(),o(5,"div",53)(6,"input",54),K("ngModelChange",function(r){f(e);let m=d();return Q(m.inputValue,r)||(m.inputValue=r),g(r)}),n()()()()}if(i&2){let e=d();l(4),A("",e.contentHeader," Name:"),l(2),L("ngModel",e.inputValue)}}function Re(i,t){if(i&1){let e=x();o(0,"div",11)(1,"div",55),u(2,"app-generic-filter",48),o(3,"button",56),b("click",function(){f(e);let r=d();return g(r.onOkClick())}),c(4,"OK"),n()(),u(5,"app-generic-table",48),n()}if(i&2){let e=d();l(2),s("columns",e.featurePopupColumns())("dataSource",e.featurePopupData()),l(3),s("columns",e.featurePopupColumns())("dataSource",e.featurePopupData())}}function Be(i,t){if(i&1){let e=x();o(0,"button",57),b("click",function(){f(e);let r=d();return g(r.saveSubCat())}),c(1,"Save"),n(),o(2,"button",58),c(3,"Cancel"),n()}}var R=class i{constructor(t,e,a,r,m,w,Ae,He,je){this.fb=t;this.apiService=e;this.route=a;this.router=r;this.tableFetchService=m;this.utilsService=w;this.location=Ae;this.dialog=He;this.snackBarService=je}dialogRef;featureForm;activePath;contentHeader;selectButtonLabel="Select Application Menu";selectedTabIndex=0;category=[];subCategory=[];module=[];mainFeatures=[];mode="add";inputValue;dialogHeader;subCatdialogContent;featureTablePopupContent;dialogFooter;featurePopupColumns=h(()=>[{header:"",def:"CHECKBOX"},...this.tableFetchService.featurePopupColumns()]);featurePopupData=h(()=>[...this.tableFetchService.featurePopupData()]);appMenuColumns;appSettingColumns;appMenuData=h(()=>[...this.tableFetchService.appMenuData()]);appSettingData=h(()=>[...this.tableFetchService.appSettingData()]);featureConfigData;ngOnInit(){this.route.queryParams.subscribe(t=>{let e=t.mode,a=t.id;e&&a&&(e==="view"&&(this.mode="view"),e==="edit"&&(this.mode="edit"),this.getViewApi("getFeatureByFeatureID",{featureID:a}))}),this.getData(),this.appMenuColumns=this.tableFetchService.appMenuColumns,this.appSettingColumns=this.tableFetchService.appSettingColumns,this.featureFormInit()}getData(){j({category:this.apiService.get("getCategory"),subCategory:this.apiService.get("getSubCategory"),module:this.apiService.get("getModule")}).subscribe(t=>{console.log(t),t.category?.result?.length>0&&(this.category=t.category.result),t.subCategory?.result?.length>0&&(this.subCategory=t.subCategory.result),t.module?.result?.length>0&&(this.module=t.module.result)})}getViewApi(t,e){this.apiService.get(t,e).subscribe(a=>{a?.result&&(this.featureConfigData=a.result,this.featureFormInit())})}featureFormInit(){this.featureForm=this.fb.group({mode:[this.mode||"",C.required],data:this.fb.group({description:[this.featureConfigData?.description||""],featuresID:[this.featureConfigData?.featuresID||""],featuresName:[this.featureConfigData?.featuresName||""],category:[this.featureConfigData?.category||"",C.required],subCategory:[this.featureConfigData?.subCategory||"",C.required],module:[this.featureConfigData?.module||"",C.required],isBasic:[this.featureConfigData?.isBasic||0],hasMainFeatures:[this.featureConfigData?.hasMainFeatures||0],mainFeatures:[this.featureConfigData?.mainFeatures||""],applicationMenu:[this.featureConfigData?.applicationMenu||[],C.required],applicationSetting:[this.featureConfigData?.applicationSetting||[],C.required]})}),this.featureConfigData?.applicationMenu?.length>0&&this.tableFetchService.appMenuData.set([...this.featureConfigData?.applicationMenu]),this.featureConfigData?.applicationSetting?.length>0&&this.tableFetchService.appSettingData.set([...this.featureConfigData?.applicationSetting]),this.toggleMainFeature(0),this.featureForm.get("data.hasMainFeatures")?.valueChanges.subscribe(t=>{this.toggleMainFeature(t)}),this.mode=="view"&&this.featureForm.disable()}toggleMainFeature(t){t==1?(this.featureForm.get("data.mainFeatures")?.enable(),this.featureForm.get("data.mainFeatures")?.setValidators([C.required]),this.mainFeatures?.length==0&&this.apiService.get("getMainFeatures").subscribe(e=>{e?.result?.length>0&&(this.mainFeatures=e.result)})):(this.featureForm.get("data.mainFeatures")?.disable(),this.featureForm.get("data.mainFeatures")?.clearValidators()),this.featureForm.get("data.mainFeatures")?.updateValueAndValidity()}openDialog(t){this.contentHeader=t,this.dialog.open(H,{disableClose:!0,panelClass:"custom-dialog",data:{contentHeader:this.dialogHeader,contentTemplate:this.subCatdialogContent,contentFooter:this.dialogFooter},width:"35vw",height:"auto"})}onTabClick(t){switch(this.selectedTabIndex=t?.index,t?.index){case 0:this.selectButtonLabel="Select Application Menu";break;case 1:this.selectButtonLabel="Select application setting";break}}popupButtonClick(){this.selectedTabIndex==0?(this.contentHeader="Application Menu List",this.tableFetchService.getFeaturePopupData("getApplicationMenu")):(this.contentHeader="Application Setting List",this.tableFetchService.getFeaturePopupData("getApplicationSetting")),this.dialogRef=this.dialog.open(H,{disableClose:!0,data:{contentHeader:this.dialogHeader,contentTemplate:this.featureTablePopupContent},maxWidth:"80vw",height:"70vh"})}onOkClick(){this.selectedTabIndex==0?(this.tableFetchService.appMenuData.set(this.tableFetchService.selectedPopupRows),this.tableFetchService.selectedPopupRows=[]):(this.tableFetchService.appSettingData.set(this.tableFetchService.selectedPopupRows),this.tableFetchService.selectedPopupRows=[]),this.dialogRef.close()}saveSubCat(){let t;t={mode:this.mode,data:{subcategoryName:this.inputValue}},this.apiService.post("saveSubCategory",t).subscribe(e=>{this.dialog.closeAll(),this.getData()})}onFeatureSave(){let t=this.utilsService.extractKeys([...this.appMenuData()],{MenuID:"menuID"}),e=this.utilsService.extractKeys([...this.appSettingData()],{Setting_Name:"settingName"});this.featureForm.get("data.applicationMenu")?.setValue(t),this.featureForm.get("data.applicationSetting")?.setValue(e),this.featureForm.get("data.isBasic")?.setValue(this.featureForm.get("data.isBasic")?.value?1:0),this.featureForm.get("data.hasMainFeatures")?.setValue(this.featureForm.get("data.hasMainFeatures")?.value?1:0);let a=this.featureForm.getRawValue();this.featureForm.invalid||this.apiService.post("saveFeatureConfiguration",a).pipe(G(r=>(this.snackBarService.showError("Error while saving Feature Configuration!!"),r))).subscribe(r=>{this.resetFeatureForm(),this.snackBarService.showSuccess("Feature configuration saved Sucessfully"),this.router.navigate(["/feature-config"])})}resetFeatureForm(){this.featureForm.reset(),this.category=[],this.subCategory=[],this.module=[],this.mainFeatures=[],this.tableFetchService.appMenuData.set([]),this.tableFetchService.appSettingData.set([])}ngOnDestroy(){this.resetFeatureForm()}back(){this.location.back()}static \u0275fac=function(e){return new(e||i)(p(de),p(be),p($),p(J),p(P),p(N),p(z),p(he),p(Ce))};static \u0275cmp=k({type:i,selectors:[["app-feature-form"]],viewQuery:function(e,a){if(e&1&&(M(ye,7),M(xe,7),M(Me,7),M(De,7)),e&2){let r;D(r=T())&&(a.dialogHeader=r.first),D(r=T())&&(a.subCatdialogContent=r.first),D(r=T())&&(a.featureTablePopupContent=r.first),D(r=T())&&(a.dialogFooter=r.first)}},standalone:!0,features:[I],decls:86,vars:8,consts:[["subCatdialogHeader",""],["dialogHeader",""],["subCatdialogContent",""],["featureTablePopupContent",""],["dialogFooter",""],[1,"my-3","d-flex","justify-content-between","align-items-center"],[1,"heading","mb-0"],[1,"pe-5"],["id","save",1,"btn","btn-primary","me-2","px-4",3,"click","disabled"],["id","back",1,"btn","px-4",3,"click"],[1,"border-bottom","mb-3"],[1,"container"],[3,"formGroup"],[1,"container",3,"formGroupName"],[1,"row","g-3"],[1,"col-md-6"],[1,"mb-3"],["for","featureName",1,"form-label"],[1,"star"],["type","text","id","featureName","formControlName","featuresName",1,"form-control","px-2","py-1"],["for","description",1,"form-label"],["id","description","formControlName","description",1,"form-control","px-1","py-1"],[1,"row","mb-3"],["for","category",1,"form-label"],["id","category","formControlName","category",1,"form-select","px-2","py-1"],[3,"value"],["for","subCategory",1,"form-label"],[1,"input-group"],["id","subCategory","formControlName","subCategory",1,"form-select","px-2","py-1"],["type","button",1,"dialog-button",3,"click","disabled"],["src","assets/images/addButton.png","alt","addicon"],["for","modules",1,"form-label"],["id","modules","formControlName","module",1,"form-select","px-2","py-1"],[1,"row","align-items-center"],[1,"col-md-4"],["type","checkbox","id","isBasicFeature","formControlName","isBasic",1,"form-check-input","me-2"],["for","isBasicFeature",1,"form-check-label"],["type","checkbox","id","hasMainFeatures","formControlName","hasMainFeatures",1,"form-check-input","me-2"],["for","hasMainFeatures",1,"form-check-label"],["for","mainFeature",1,"form-label"],["id","mainFeature","formControlName","mainFeatures",1,"form-select","px-2","py-1"],[1,"row","align-items-center","my-2"],["animationDuration","0ms",1,"mt-2",3,"selectedTabChange"],["value","0","label","Application Menu"],["value","1","label","Application Setting Configuration"],[1,"col-md-6","d-flex","justify-content-end"],[1,"btn","ok-btn","px-5","ms-3",3,"click","disabled"],[4,"ngIf"],[3,"columns","dataSource"],["mat-dialog-title","",1,"text-white","mb-0","mx-3"],[1,"row"],[1,"col-lg-4","col-md-5","col-11","px-0"],["for","sub-category",1,"form-label","text-body","mt-1"],[1,"col-lg-7","col-md-6","col-11","px-0"],["type","text",1,"form-control","px-2","py-1",3,"ngModelChange","ngModel"],[1,"d-flex","align-items-center","justify-content-between","mb-2"],[1,"btn","ok-btn","px-5","ms-3",3,"click"],["type","button","id","save",1,"btn","px-4","m-2",3,"click"],["mat-dialog-close","","type","button","id","close",1,"btn","px-4"]],template:function(e,a){if(e&1){let r=x();o(0,"div",5)(1,"h4",6),c(2,"Feature Registration"),n(),o(3,"div",7)(4,"button",8),b("click",function(){return f(r),g(a.onFeatureSave())}),c(5,"SAVE"),n(),o(6,"button",9),b("click",function(){return f(r),g(a.back())}),c(7,"BACK"),n()()(),u(8,"div",10),o(9,"div",11)(10,"form",12)(11,"div",13)(12,"div",14)(13,"div",15)(14,"div",16)(15,"label",17),c(16,"Feature Name: "),o(17,"span",18),c(18,"*"),n()(),u(19,"input",19),n(),o(20,"div",16)(21,"label",20),c(22,"Description: "),o(23,"span",18),c(24,"*"),n()(),u(25,"textarea",21),n()(),o(26,"div",15)(27,"div",22)(28,"div",15)(29,"label",23),c(30,"Category:"),n(),o(31,"select",24),_(32,Te,2,2,"option",25,S),n()(),o(34,"div",15)(35,"label",26),c(36,"Sub Category:"),n(),o(37,"div",27)(38,"select",28),_(39,we,2,2,"option",25,S),n(),o(41,"button",29),b("click",function(){return f(r),g(a.openDialog("Sub Category"))}),u(42,"img",30),n()()()(),o(43,"div",16)(44,"label",31),c(45,"Modules: "),o(46,"span",18),c(47,"*"),n()(),o(48,"select",32),_(49,ke,2,2,"option",25,S),n()(),o(51,"div",33)(52,"div",34),u(53,"input",35),o(54,"label",36),c(55,"Is Basic Feature"),n()(),o(56,"div",34),u(57,"input",37),o(58,"label",38),c(59,"Has Main Feature"),n()(),o(60,"div",34)(61,"label",39),c(62,"Main Feature"),n(),o(63,"select",40),_(64,Ie,2,2,"option",25,S),n()()()()()()(),o(66,"div",41)(67,"div",15)(68,"mat-tab-group",42),b("selectedTabChange",function(w){return f(r),g(a.onTabClick(w))}),u(69,"mat-tab",43)(70,"mat-tab",44),n()(),o(71,"div",45)(72,"button",46),b("click",function(){return f(r),g(a.popupButtonClick())}),c(73),n()()(),B(74,Pe,2,2,"div",47)(75,Ee,2,2,"div",47),n(),B(76,Ve,2,1,"ng-template",null,0,F)(78,Oe,2,1,"ng-template",null,1,F)(80,Ne,7,2,"ng-template",null,2,F)(82,Re,6,4,"ng-template",null,3,F)(84,Be,4,0,"ng-template",null,4,F)}e&2&&(l(4),s("disabled",a.mode=="view"),l(6),s("formGroup",a.featureForm),l(),s("formGroupName","data"),l(21),y(a.category),l(7),y(a.subCategory),l(2),s("disabled",a.mode=="view"),l(8),y(a.module),l(15),y(a.mainFeatures),l(8),s("disabled",a.mode=="view"),l(),A("",a.selectButtonLabel,">"),l(),s("ngIf",a.selectedTabIndex==0),l(),s("ngIf",a.selectedTabIndex==1))},dependencies:[U,W,ge,re,me,pe,ie,te,ue,ae,oe,le,se,ce,fe,ne,Z,X,Y,ee,V,E],styles:["h4[_ngcontent-%COMP%]{font-size:20px;font-weight:500}label[_ngcontent-%COMP%], input[type=select][_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-weight:500}.heading[_ngcontent-%COMP%]{margin-left:7rem}.star[_ngcontent-%COMP%]{color:red}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{font-size:14px}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#007bff40;box-shadow:0 0 0 .1rem #007bff40}.input-group[_ngcontent-%COMP%]{display:flex;align-items:center}.dialog-button[_ngcontent-%COMP%]{padding:0;background-color:transparent;border:none;margin-left:5px;cursor:pointer}.footer[_ngcontent-%COMP%]{width:100vw;position:fixed;bottom:5px;padding:1rem;background-color:#ffffff26;box-shadow:0 0 0 .2rem #7e7e7e22;border-top:1px solid #dee2e6}#save[_ngcontent-%COMP%]{background-color:#336799;color:#fff;font-size:14px;border:none}#back[_ngcontent-%COMP%]{color:#336799;border:1px solid rgba(51,103,153,1);font-size:14px}#save[_ngcontent-%COMP%]:hover, #back[_ngcontent-%COMP%]:hover{background-color:#336799cc;color:#fff}.form-check-input[_ngcontent-%COMP%]{height:1.1rem;width:1.1rem;margin-right:.5rem}.form-check-label[_ngcontent-%COMP%]{margin-left:.5rem}@media (min-width: 768px){.row.g-3[_ngcontent-%COMP%] > .col-md-4[_ngcontent-%COMP%], .row.g-3[_ngcontent-%COMP%] > .col-md-2[_ngcontent-%COMP%]{padding-right:15px;padding-left:15px}}.dialog-button[_ngcontent-%COMP%]{padding:0;background-color:transparent;border:none}.ok-btn[_ngcontent-%COMP%]{background-color:#4081bf;color:#fff;font-size:15px;font-weight:500}.search-button[_ngcontent-%COMP%]{background-color:#007bff;border:none;border-radius:4px;padding:3px 12px;cursor:pointer}.check-box[_ngcontent-%COMP%]{height:1.1rem;width:1.1rem}"]})};var vt=[{path:"",component:O},{path:"feature-form",component:R}];export{vt as Feature_routes};
