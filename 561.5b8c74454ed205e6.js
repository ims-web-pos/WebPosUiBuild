"use strict";(self.webpackChunkimserp=self.webpackChunkimserp||[]).push([[561],{80561:(V,h,r)=>{r.r(h),r.d(h,{CompanyMasterModule:()=>D});var c=r(88692),l=r(7976),s=r(20092),t=r(64537),g=r(14970),f=r(35732),C=r(67297),A=r(71180);let d=(()=>{class e{constructor(o,n,i){this.http=o,this.authService=n,this.state=i;const m=this.state.getGlobalSetting("apiUrl");m&&m.length>0&&(this.apiUrl=m)}saveCompanyMaster(o,n){return this.http.post(this.apiUrl+"/saveCompanyMaster",{mode:n,data:o})}getCompanyMasterList(){return this.http.get(this.apiUrl+"/getCompanyMasterList")}getCompanyDetailsByInitial(o){return this.http.get(this.apiUrl+`/getCompanyDetails?initial=${o}`)}deleteCompanyMaster(o){return this.http.post(this.apiUrl+"/deleteCompanyMaster",{INITIAL:o})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(f.eN),t.LFG(C.e),t.LFG(A.q))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var y=r(67311),v=r(73965);const _=["OtpPopup"];function Z(e,a){1&e&&(t.TgZ(0,"h5",23),t._uU(1,"New Company"),t.qZA())}function T(e,a){1&e&&(t.TgZ(0,"h5",23),t._uU(1,"Edit Company"),t.qZA())}function M(e,a){1&e&&(t.TgZ(0,"h5",23),t._uU(1,"View Company"),t.qZA())}function b(e,a){1&e&&(t.TgZ(0,"span"),t._uU(1,"Initial must be of 3 characters."),t.qZA())}function O(e,a){if(1&e&&(t.TgZ(0,"div",24),t.YNc(1,b,2,0,"span",25),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==o.companyForm?null:o.companyForm.controls.INITIAL.errors.minlength)||(null==o.companyForm?null:o.companyForm.controls.INITIAL.errors.maxlength))}}function I(e,a){1&e&&(t.TgZ(0,"span"),t._uU(1,"Name is required."),t.qZA())}function x(e,a){if(1&e&&(t.TgZ(0,"div",24),t.YNc(1,I,2,0,"span",25),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.companyForm.controls.NAME.errors.required)}}function S(e,a){1&e&&(t.TgZ(0,"span"),t._uU(1,"Address is required."),t.qZA())}function F(e,a){if(1&e&&(t.TgZ(0,"div",24),t.YNc(1,S,2,0,"span",25),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.companyForm.controls.ADDRESS.errors.required)}}function N(e,a){1&e&&(t.TgZ(0,"span"),t._uU(1,"VAT No is required."),t.qZA())}function q(e,a){if(1&e&&(t.TgZ(0,"div",24),t.YNc(1,N,2,0,"span",25),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.companyForm.controls.VAT.errors.required)}}function P(e,a){1&e&&(t.TgZ(0,"span"),t._uU(1,"Company ID is required."),t.qZA())}function w(e,a){if(1&e&&(t.TgZ(0,"div",24),t.YNc(1,P,2,0,"span",25),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.companyForm.controls.CompanyId.errors.required)}}let U=(()=>{class e{constructor(o,n,i,m,p,Q){this.formBuilder=o,this._activatedRoute=n,this.spinnerService=i,this.router=m,this.companyService=p,this.alertService=Q,this.mode="add",this.viewMode=!1}ngOnInit(){this.companyForm=this.formBuilder.group({INITIAL:["",[s.kI.minLength(3),s.kI.maxLength(3)]],NAME:["",[s.kI.required]],ADDRESS:["",[s.kI.required]],VAT:["",[s.kI.required]],CompanyId:["",[s.kI.required]]}),this._activatedRoute.snapshot.params.mode&&"view"===this._activatedRoute.snapshot.params.mode&&(this.mode="view",this.viewMode=!0,this.companyForm.get("INITIAL").disable(),this.companyForm.get("NAME").disable(),this.companyForm.get("ADDRESS").disable(),this.companyForm.get("VAT").disable(),this.companyForm.get("CompanyId").disable()),this._activatedRoute.snapshot.params.name?(this.initial=this._activatedRoute.snapshot.params.name,this.spinnerService.show("Getting data, Please wait..."),this.companyService.getCompanyDetailsByInitial(this.initial).subscribe(o=>{console.log("res by initial",o),"ok"===o.status?(this.spinnerService.hide(),this.companyForm.patchValue({INITIAL:o.result.INITIAL,NAME:o.result.NAME,ADDRESS:o.result.ADDRESS,VAT:o.result.VAT,CompanyId:o.result.CompanyId}),"edit"===this._activatedRoute.snapshot.params.mode&&(this.mode="edit")):this.alertService.info(o.result)},o=>{this.spinnerService.hide(),this.alertService.info(o._body)})):this.mode="add"}onSubmit(){"edit"==this.mode&&(this.companyForm.value.initial=this.initial),console.log("onSubmit Clicked",this.companyForm.value),1==confirm("Save company?")&&this.OtpPopup.show()}confirmationOkClicked(o){1==o?(this.spinnerService.show("Data is Saving ..."),this.companyService.saveCompanyMaster(this.companyForm.value,this.mode).subscribe(n=>{console.log("save garda",n),"ok"==n.status?(this.spinnerService.hide(),this.companyForm.reset(),this.router.navigate(["./pages/masters/companymaster"])):(this.alertService.info(n.result),this.spinnerService.hide())},n=>{this.spinnerService.hide()})):this.alertService.info("OTP Invalid")}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(s.qu),t.Y36(l.gz),t.Y36(g.V),t.Y36(l.F0),t.Y36(d),t.Y36(y.c))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-company-form"]],viewQuery:function(o,n){if(1&o&&t.Gf(_,5),2&o){let i;t.iGM(i=t.CRH())&&(n.OtpPopup=i.first)}},decls:50,vars:18,consts:[[1,"sticky-top","row"],[1,"col-md-4"],[1,"col-md-8"],[1,"row","pull-right","mx-2"],[3,"formGroup","ngSubmit"],["type","submit",1,"btn","btn-info",2,"font-size","12px",3,"disabled"],["type","button","routerLink","/pages/masters/companymaster",1,"btn","btn-info",2,"font-size","12px"],[1,"card"],[1,"card-header"],["class","page-title",4,"ngIf"],[1,"card-body"],[1,"form-horizontal",2,"margin-top","15px",3,"formGroup","ngSubmit"],[1,"form-group","row"],[1,"col-sm-3","form-control-label",2,"margin-left","-12px"],[1,"col-sm-7"],["type","text","autocomplete","off","formControlName","INITIAL",1,"form-control",2,"height","4vh",3,"readOnly"],["class","invalid-feedback d-block",4,"ngIf"],["type","text","autocomplete","off","formControlName","NAME",1,"form-control",2,"height","4vh",3,"readOnly"],["type","text","formControlName","ADDRESS",1,"form-control",2,"height","4vh",3,"readOnly"],["type","text","id","Parent","autocomplete","off","formControlName","VAT",1,"form-control",2,"height","4vh",3,"readOnly"],["type","text","id","Parent","autocomplete","off","formControlName","CompanyId",1,"form-control",2,"height","4vh",3,"readOnly"],[3,"okClicked"],["OtpPopup",""],[1,"page-title"],[1,"invalid-feedback","d-block"],[4,"ngIf"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5"),t._uU(3,"Company Master"),t.qZA()(),t.TgZ(4,"div",2)(5,"div",3)(6,"form",4),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(7,"button",5),t._uU(8," Save "),t.qZA(),t.TgZ(9,"button",6),t._uU(10," Back "),t.qZA()()()()(),t.TgZ(11,"div",7)(12,"div",8),t.YNc(13,Z,2,0,"h5",9),t.YNc(14,T,2,0,"h5",9),t.YNc(15,M,2,0,"h5",9),t.qZA(),t.TgZ(16,"div",10)(17,"form",11),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(18,"div",12)(19,"label",13),t._uU(20,"Initial:"),t.qZA(),t.TgZ(21,"div",14),t._UZ(22,"input",15),t.YNc(23,O,2,1,"div",16),t.qZA()(),t.TgZ(24,"div",12)(25,"label",13),t._uU(26,"Name:"),t.qZA(),t.TgZ(27,"div",14),t._UZ(28,"input",17),t.YNc(29,x,2,1,"div",16),t.qZA()(),t.TgZ(30,"div",12)(31,"label",13),t._uU(32,"Address:"),t.qZA(),t.TgZ(33,"div",14),t._UZ(34,"input",18),t.YNc(35,F,2,1,"div",16),t.qZA()(),t.TgZ(36,"div",12)(37,"label",13),t._uU(38,"VAT No:"),t.qZA(),t.TgZ(39,"div",14),t._UZ(40,"input",19),t.YNc(41,q,2,1,"div",16),t.qZA()(),t.TgZ(42,"div",12)(43,"label",13),t._uU(44,"Company ID: "),t.qZA(),t.TgZ(45,"div",14),t._UZ(46,"input",20),t.YNc(47,w,2,1,"div",16),t.qZA()()()()(),t.TgZ(48,"app-otp",21,22),t.NdJ("okClicked",function(m){return n.confirmationOkClicked(m)}),t.qZA()),2&o&&(t.xp6(6),t.Q6J("formGroup",n.companyForm),t.xp6(1),t.Q6J("disabled",!n.companyForm.valid),t.xp6(6),t.Q6J("ngIf","add"==n.mode),t.xp6(1),t.Q6J("ngIf","edit"==n.mode),t.xp6(1),t.Q6J("ngIf","view"==n.mode),t.xp6(2),t.Q6J("formGroup",n.companyForm),t.xp6(5),t.Q6J("readOnly","view"==n.mode)("readOnly","edit"==n.mode),t.xp6(1),t.Q6J("ngIf",(null==n.companyForm?null:n.companyForm.controls.INITIAL.invalid)&&((null==n.companyForm?null:n.companyForm.controls.INITIAL.dirty)||(null==n.companyForm?null:n.companyForm.controls.INITIAL.touched))),t.xp6(5),t.Q6J("readOnly","view"==n.mode),t.xp6(1),t.Q6J("ngIf",n.companyForm.controls.NAME.invalid&&(n.companyForm.controls.NAME.dirty||n.companyForm.controls.NAME.touched)),t.xp6(5),t.Q6J("readOnly","view"==n.mode),t.xp6(1),t.Q6J("ngIf",n.companyForm.controls.ADDRESS.invalid&&(n.companyForm.controls.ADDRESS.dirty||n.companyForm.controls.ADDRESS.touched)),t.xp6(5),t.Q6J("readOnly","view"==n.mode),t.xp6(1),t.Q6J("ngIf",n.companyForm.controls.VAT.invalid&&(n.companyForm.controls.VAT.dirty||n.companyForm.controls.VAT.touched)),t.xp6(5),t.Q6J("readOnly","view"==n.mode)("readOnly","edit"==n.mode),t.xp6(1),t.Q6J("ngIf",n.companyForm.controls.CompanyId.invalid&&(n.companyForm.controls.CompanyId.dirty||n.companyForm.controls.CompanyId.touched)))},dependencies:[c.O5,l.rH,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,v._],styles:[".card[_ngcontent-%COMP%]{margin:10px 30px 0 300px!important;width:60%}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{border:1px solid #cbcbcb;border-radius:3px;height:4vh;color:#000}label[_ngcontent-%COMP%]{height:25px;font-size:14px}.col-sm-7[_ngcontent-%COMP%]{padding-left:1px}.form-control[_ngcontent-%COMP%]{font-size:14px}"]}),e})();var u=r(56707);function L(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"tr")(1,"td",19),t._uU(2),t.qZA(),t.TgZ(3,"td",20),t._uU(4),t.qZA(),t.TgZ(5,"td",21),t._uU(6),t.qZA(),t.TgZ(7,"td",22),t._uU(8),t.qZA(),t.TgZ(9,"td",22),t._uU(10),t.qZA(),t.TgZ(11,"td",22),t._uU(12),t.qZA(),t.TgZ(13,"td",23)(14,"button",24),t.NdJ("click",function(){const m=t.CHM(o).$implicit,p=t.oxw();return t.KtG(p.onView(m))}),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"a",25),t.NdJ("click",function(){const m=t.CHM(o).$implicit,p=t.oxw();return t.KtG(p.onEdit(m))}),t._uU(18),t.ALo(19,"translate"),t.qZA()()()}if(2&e){const o=a.$implicit,n=a.index;t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(o.INITIAL),t.xp6(2),t.Oqu(o.NAME),t.xp6(2),t.Oqu(o.ADDRESS),t.xp6(2),t.Oqu(o.VAT),t.xp6(2),t.Oqu(o.COMPANYID),t.xp6(3),t.Oqu(t.lcZ(16,8,"COMPANY_MASTER.table_data.view")),t.xp6(3),t.Oqu(t.lcZ(19,10,"COMPANY_MASTER.table_data.edit"))}}const Y=[{path:"",component:(()=>{class e{constructor(o,n,i,m){this.router=o,this.alertService=n,this.companyService=i,this.spinnerService=m,this.companyService.getCompanyMasterList().subscribe(p=>{p&&(console.log("company list aayo",p),this.compData=p.result)})}ngOnInit(){}addCompany(){if(0==this.compData.length)try{this.router.navigate(["./pages/masters/companymaster/add-company",{mode:"add",returnUrl:this.router.url}])}catch(o){this.alertService.info(o)}else alert("More than 1 company cannot be added.")}onView(o){try{this.router.navigate(["./pages/masters/companymaster/add-company",{name:o.INITIAL,mode:"view",returnUrl:this.router.url}])}catch(n){this.alertService.info(n)}}onEdit(o){this.router.navigate(["./pages/masters/companymaster/add-company",{name:o.INITIAL,mode:"edit",returnUrl:this.router.url}])}onDelete(o){confirm("Are you sure you want to delete "+o.NAME+" ?")&&this.companyService.deleteCompanyMaster(o.INITIAL).subscribe(n=>{"ok"==n.status&&this.companyService.getCompanyMasterList().subscribe(i=>{i&&(this.compData=i.result?i.result:[])})})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(l.F0),t.Y36(y.c),t.Y36(d),t.Y36(g.V))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-company-list"]],decls:48,vars:34,consts:[[1,"row","col-md-12"],[1,"col-md-4"],[1,"col-md-8"],["routerLink","/pages/dashboard",1,"btn","btn-info","pull-right",2,"font-size","12px"],["disabled","",1,"btn","btn-info","pull-right",2,"font-size","12px",3,"click"],[1,"row",2,"align-items","center"],[1,"col-md-12","col-sm-8",2,"margin-top","0.5rem"],[1,"card",2,"margin","auto","width","63rem"],[1,"card-header"],[2,"width","25%"],[1,"card-body"],[1,"table","table-striped"],[2,"position","sticky","top","0","line-height","1.5rem"],["scope","col",2,"width","3%"],["scope","col",2,"width","6%"],["scope","col",2,"width","18%"],["scope","col",2,"width","13%"],["scope","col",2,"text-align","center","width","19%"],[4,"ngFor","ngForOf"],[2,"width","3%"],[2,"width","6%"],[2,"width","18%"],[2,"width","13%"],[2,"width","19%","text-align","center"],["type","button","data-toggle","modal",1,"btn","btn-sm","btn-info","mr-1","btn-sm",2,"width","60px",3,"click"],[1,"btn","btn-sm","btn-info","mr-1","btn-sm",2,"width","60px","color","white",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"div",2)(6,"button",3),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"button",4),t.NdJ("click",function(){return n.addCompany()}),t._uU(10),t.ALo(11,"translate"),t.qZA()()(),t.TgZ(12,"div",5)(13,"div",6)(14,"div",7)(15,"div",8)(16,"span"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._UZ(19,"div",9),t.qZA(),t.TgZ(20,"div",10)(21,"table",11)(22,"thead")(23,"tr",12)(24,"th",13),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"th",14),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"th",15),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"th",16),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"th",16),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"th",16),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"th",17),t._uU(43),t.ALo(44,"translate"),t.qZA()()(),t.TgZ(45,"tbody"),t.ynx(46),t.YNc(47,L,20,12,"tr",18),t.BQk(),t.qZA()()()()()()),2&o&&(t.xp6(3),t.Oqu(t.lcZ(4,12,"COMPANY_MASTER.title")),t.xp6(4),t.Oqu(t.lcZ(8,14,"COMPANY_MASTER.button.back")),t.xp6(3),t.Oqu(t.lcZ(11,16,"COMPANY_MASTER.button.add")),t.xp6(7),t.Oqu(t.lcZ(18,18,"COMPANY_MASTER.table_heading")),t.xp6(8),t.Oqu(t.lcZ(26,20,"COMPANY_MASTER.table_data.sn")),t.xp6(3),t.Oqu(t.lcZ(29,22,"COMPANY_MASTER.table_data.initial")),t.xp6(3),t.Oqu(t.lcZ(32,24,"COMPANY_MASTER.table_data.name")),t.xp6(3),t.Oqu(t.lcZ(35,26,"COMPANY_MASTER.table_data.address")),t.xp6(3),t.Oqu(t.lcZ(38,28,"COMPANY_MASTER.table_data.vat")),t.xp6(3),t.Oqu(t.lcZ(41,30,"COMPANY_MASTER.table_data.company_id")),t.xp6(3),t.Oqu(t.lcZ(44,32,"COMPANY_MASTER.table_data.action")),t.xp6(4),t.Q6J("ngForOf",n.compData))},dependencies:[c.sg,l.rH,u.X$],styles:[".card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.card-header[_ngcontent-%COMP%]:after{display:none}.card-body[_ngcontent-%COMP%]{padding:5px!important;max-height:675px!important}.card-footer[_ngcontent-%COMP%]{height:6vh}.main-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:60px 0}.scroll-touch[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch!important}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.1rem!important}.sticky-top[_ngcontent-%COMP%]{margin-top:60px;height:100vh}tbody[_ngcontent-%COMP%]{display:block;height:59vh;overflow:auto}thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}th[_ngcontent-%COMP%]{font-size:15px}td[_ngcontent-%COMP%]{font-size:13px}.btn-sm[_ngcontent-%COMP%]{line-height:3px}.card-header[_ngcontent-%COMP%]{padding:10px 20px}.searchBy[_ngcontent-%COMP%]{font-size:13px;margin-left:18rem}.language[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;width:43%}.language[_ngcontent-%COMP%]{width:30%}.language[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:40%;font-size:12px}"]}),e})()},{path:"add-company",component:U}];let E=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.Bz.forChild(Y),l.Bz]}),e})();var k=r(69401),J=r(54536),R=r(29977);let D=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[d,R.w,u.sK],imports:[c.ez,E,k.m,J.Is,u.aw]}),e})()}}]);